(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44065,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(3116),l=e.i(15788),r=e.i(88844),i=e.i(12426),n=e.i(7233),d=e.i(78583),c=e.i(43531),o=e.i(86536),x=e.i(78894),m=e.i(14764),u=e.i(88511),p=e.i(40160),h=e.i(73146),b=e.i(80809),j=e.i(29618);e.i(59802);var v=e.i(54006),N=e.i(69777);e.i(18566);let f={sm:"w-[360px]",md:"w-[480px]",lg:"w-[600px]",xl:"w-[800px]"};function g({open:e,onClose:a,title:l,subtitle:r,children:i,footer:n,width:d="md",className:c=""}){return((0,s.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&a()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,a]),(0,s.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),e)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:a}),(0,t.jsxs)("div",{className:`fixed inset-y-0 right-0 ${f[d]} bg-slate-900 border-l border-slate-700 shadow-2xl z-50 flex flex-col ${c}`,children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-slate-900 border-b border-slate-700 px-6 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:l}),r&&(0,t.jsx)("p",{className:"text-sm text-slate-400",children:r})]}),(0,t.jsx)("button",{onClick:a,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:(0,t.jsx)("i",{className:"fas fa-times"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:i}),n&&(0,t.jsx)("div",{className:"sticky bottom-0 bg-slate-900 border-t border-slate-700 px-6 py-4 flex items-center justify-end gap-3",children:n})]})]}):null}var y=e.i(76525),w=e.i(63207),C=e.i(37727),P=e.i(3281);function O({isOpen:e,onClose:n,po:o,onEdit:x,onReceive:p}){let{dispatch:v}=(0,h.useApp)(),{success:N,error:f}=(0,b.useToast)(),O=(0,j.useConfirm)(),S=(0,s.useMemo)(()=>{if(!o)return{totalOrdered:0,totalReceived:0,percent:0};let e=o.items.reduce((e,t)=>e+t.quantity,0),t=o.items.reduce((e,t)=>e+t.receivedQty,0);return{totalOrdered:e,totalReceived:t,percent:e>0?t/e*100:0}},[o]),k=async()=>{!o||await O({title:"Send Purchase Order",message:`Send PO ${o.poNumber} to ${o.supplier}? This will mark it as sent.`,confirmText:"Send PO"})&&(v({type:"UPDATE_PURCHASE_ORDER",payload:{...o,status:"sent",updatedAt:new Date}}),N(`PO ${o.poNumber} marked as sent`))},D=async()=>{!o||("received"===o.status?f("Cannot cancel a received PO"):await O({title:"Cancel Purchase Order",message:`Cancel PO ${o.poNumber}? This cannot be undone.`,confirmText:"Cancel PO",destructive:!0})&&(v({type:"UPDATE_PURCHASE_ORDER",payload:{...o,status:"cancelled",updatedAt:new Date}}),N(`PO ${o.poNumber} cancelled`),n()))},$=async()=>{!o||("draft"!==o.status?f("Only draft POs can be deleted"):await O({title:"Delete Purchase Order",message:`Delete PO ${o.poNumber}? This cannot be undone.`,confirmText:"Delete",destructive:!0})&&(v({type:"DELETE_PURCHASE_ORDER",payload:o.id}),N(`PO ${o.poNumber} deleted`),n()))},T=()=>{if(!o)return;let e=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>PO ${o.poNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
          h1 { margin-bottom: 5px; }
          .subtitle { color: #666; margin-bottom: 20px; }
          .header { display: flex; justify-content: space-between; margin-bottom: 30px; }
          .info { margin-bottom: 20px; }
          .info-row { display: flex; margin-bottom: 5px; }
          .info-label { width: 120px; color: #666; }
          table { width: 100%; border-collapse: collapse; margin: 20px 0; }
          th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
          th { background: #f5f5f5; font-weight: 600; }
          .text-right { text-align: right; }
          .totals { margin-top: 20px; text-align: right; }
          .total-row { display: flex; justify-content: flex-end; gap: 40px; margin-bottom: 5px; }
          .total-final { font-weight: bold; font-size: 18px; border-top: 2px solid #333; padding-top: 10px; }
          .notes { margin-top: 30px; padding: 15px; background: #f9f9f9; border-radius: 5px; }
        </style>
      </head>
      <body>
        <div class="header">
          <div>
            <h1>Purchase Order</h1>
            <div class="subtitle">${o.poNumber}</div>
          </div>
          <div class="text-right">
            <div><strong>Cronk Nutrients</strong></div>
            <div>Date: ${(0,w.formatDate)(o.createdAt)}</div>
          </div>
        </div>

        <div class="info">
          <div class="info-row"><span class="info-label">Supplier:</span> ${o.supplier}</div>
          <div class="info-row"><span class="info-label">Currency:</span> ${o.currency}</div>
          <div class="info-row"><span class="info-label">Expected Date:</span> ${o.expectedDate?(0,w.formatDate)(o.expectedDate):"Not specified"}</div>
          <div class="info-row"><span class="info-label">Status:</span> ${o.status.charAt(0).toUpperCase()+o.status.slice(1)}</div>
        </div>

        <table>
          <thead>
            <tr>
              <th>Product</th>
              <th>SKU</th>
              <th class="text-right">Qty</th>
              <th class="text-right">Unit Cost</th>
              <th class="text-right">Total</th>
            </tr>
          </thead>
          <tbody>
            ${o.items.map(e=>`
              <tr>
                <td>${e.productName}</td>
                <td>${e.sku}</td>
                <td class="text-right">${e.quantity}</td>
                <td class="text-right">$${e.unitCost.toFixed(2)}</td>
                <td class="text-right">$${(e.quantity*e.unitCost).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>$${o.subtotal.toFixed(2)}</span>
          </div>
          <div class="total-row">
            <span>Shipping:</span>
            <span>$${o.shipping.toFixed(2)}</span>
          </div>
          <div class="total-row total-final">
            <span>Total:</span>
            <span>$${o.total.toFixed(2)}</span>
          </div>
        </div>

        ${o.notes?`<div class="notes"><strong>Notes:</strong><br/>${o.notes}</div>`:""}
      </body>
      </html>
    `,t=window.open("","_blank");t&&(t.document.write(e),t.document.close(),t.print())};return o?(0,t.jsx)(g,{open:e,onClose:n,title:o.poNumber,subtitle:o.supplier,width:"lg",footer:(0,t.jsxs)(t.Fragment,{children:["draft"===o.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(y.Button,{variant:"danger",onClick:$,children:[(0,t.jsx)(C.X,{className:"w-4 h-4"}),"Delete"]}),(0,t.jsxs)(y.Button,{variant:"secondary",onClick:()=>x?.(o),children:[(0,t.jsx)(u.Edit,{className:"w-4 h-4"}),"Edit"]}),(0,t.jsxs)(y.Button,{onClick:k,children:[(0,t.jsx)(m.Send,{className:"w-4 h-4"}),"Send PO"]})]}),"sent"===o.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Button,{variant:"secondary",onClick:D,children:"Cancel PO"}),(0,t.jsxs)(y.Button,{onClick:()=>p?.(o),children:[(0,t.jsx)(r.Package,{className:"w-4 h-4"}),"Receive Items"]})]}),"partial"===o.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Button,{variant:"secondary",onClick:D,children:"Cancel PO"}),(0,t.jsxs)(y.Button,{onClick:()=>p?.(o),children:[(0,t.jsx)(r.Package,{className:"w-4 h-4"}),"Receive More"]})]}),"received"===o.status&&(0,t.jsxs)(y.Button,{variant:"secondary",onClick:T,children:[(0,t.jsx)(P.Printer,{className:"w-4 h-4"}),"Print PO"]}),"cancelled"===o.status&&(0,t.jsx)(y.Button,{variant:"secondary",onClick:n,children:"Close"})]}),children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(e=>{switch(e){case"draft":return(0,t.jsx)("span",{className:"px-3 py-1 bg-slate-500/20 text-slate-300 text-sm rounded-full",children:"Draft"});case"sent":return(0,t.jsx)("span",{className:"px-3 py-1 bg-amber-500/20 text-amber-400 text-sm rounded-full",children:"Sent / Pending"});case"partial":return(0,t.jsx)("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 text-sm rounded-full",children:"Partially Received"});case"received":return(0,t.jsx)("span",{className:"px-3 py-1 bg-emerald-500/20 text-emerald-400 text-sm rounded-full",children:"Received"});case"cancelled":return(0,t.jsx)("span",{className:"px-3 py-1 bg-red-500/20 text-red-400 text-sm rounded-full",children:"Cancelled"});default:return null}})(o.status),(0,t.jsx)("button",{onClick:T,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg",title:"Print PO",children:(0,t.jsx)(P.Printer,{className:"w-5 h-5"})})]}),("sent"===o.status||"partial"===o.status||"received"===o.status)&&(0,t.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"Receiving Progress"}),(0,t.jsxs)("span",{className:"text-sm text-white",children:[(0,w.formatNumber)(S.totalReceived)," / ",(0,w.formatNumber)(S.totalOrdered)," received"]})]}),(0,t.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,t.jsx)("div",{className:`h-2 rounded-full transition-all ${S.percent>=100?"bg-emerald-500":"bg-blue-500"}`,style:{width:`${Math.min(S.percent,100)}%`}})}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[S.percent.toFixed(0),"% complete"]})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"PO Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.FileText,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{className:"text-slate-400",children:"PO Number:"}),(0,t.jsx)("span",{className:"text-white font-mono",children:o.poNumber})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Truck,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{className:"text-slate-400",children:"Supplier:"}),(0,t.jsx)("span",{className:"text-white",children:o.supplier})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.DollarSign,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{className:"text-slate-400",children:"Currency:"}),(0,t.jsx)("span",{className:"text-white",children:o.currency})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Clock,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{className:"text-slate-400",children:"Expected:"}),(0,t.jsx)("span",{className:"text-white",children:o.expectedDate?(0,w.formatDate)(o.expectedDate):"Not set"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Line Items"}),(0,t.jsx)("div",{className:"border border-slate-700 rounded-lg overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-slate-800/50",children:(0,t.jsxs)("tr",{className:"text-xs text-slate-400 uppercase tracking-wider",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left",children:"Product"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center",children:"Ordered"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center",children:"Received"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right",children:"Unit Cost"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right",children:"Total"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:o.items.map(e=>{let s=e.receivedQty>=e.quantity,a=e.receivedQty>0&&e.receivedQty<e.quantity;return(0,t.jsxs)("tr",{className:s?"bg-emerald-500/5":"",children:[(0,t.jsxs)("td",{className:"px-4 py-3",children:[(0,t.jsx)("div",{className:"text-sm text-white",children:e.productName}),(0,t.jsx)("div",{className:"text-xs text-slate-400 font-mono",children:e.sku})]}),(0,t.jsx)("td",{className:"px-4 py-3 text-center text-sm text-white",children:(0,w.formatNumber)(e.quantity)}),(0,t.jsx)("td",{className:"px-4 py-3 text-center text-sm",children:(0,t.jsxs)("span",{className:s?"text-emerald-400":a?"text-blue-400":"text-slate-400",children:[(0,w.formatNumber)(e.receivedQty),s&&(0,t.jsx)(c.Check,{className:"w-3 h-3 inline ml-1"})]})}),(0,t.jsx)("td",{className:"px-4 py-3 text-right text-sm text-slate-300",children:(0,w.formatCurrencyPrecise)(e.unitCost)}),(0,t.jsx)("td",{className:"px-4 py-3 text-right text-sm text-white font-medium",children:(0,w.formatCurrencyPrecise)(e.quantity*e.unitCost)})]},e.productId)})})]})})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)("div",{className:"w-64 bg-slate-800/50 border border-slate-700/50 rounded-lg p-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"Subtotal:"}),(0,t.jsx)("span",{className:"text-white",children:(0,w.formatCurrencyPrecise)(o.subtotal)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"Shipping:"}),(0,t.jsx)("span",{className:"text-white",children:(0,w.formatCurrencyPrecise)(o.shipping)})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-2 border-t border-slate-700",children:[(0,t.jsx)("span",{className:"text-white font-medium",children:"Total:"}),(0,t.jsx)("span",{className:"text-white font-bold",children:(0,w.formatCurrencyPrecise)(o.total)})]})]})}),o.notes&&(0,t.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-2",children:"Notes"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:o.notes})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Timeline"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-white",children:"Created"}),(0,t.jsx)("span",{className:"text-slate-400 ml-2",children:(0,w.formatDateTime)(o.createdAt)})]})]}),"draft"!==o.status&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-white",children:"Sent to Supplier"}),(0,t.jsx)("span",{className:"text-slate-400 ml-2",children:(0,w.formatDateTime)(o.updatedAt)})]})]}),("partial"===o.status||"received"===o.status)&&S.totalReceived>0&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${"received"===o.status?"bg-emerald-500":"bg-amber-500"}`}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-white",children:"received"===o.status?"Fully Received":"Partially Received"}),(0,t.jsx)("span",{className:"text-slate-400 ml-2",children:(0,w.formatDateTime)(o.updatedAt)})]})]}),"cancelled"===o.status&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-white",children:"Cancelled"}),(0,t.jsx)("span",{className:"text-slate-400 ml-2",children:(0,w.formatDateTime)(o.updatedAt)})]})]})]})]})]})}):null}var S=e.i(75148);e.i(80050);var k=e.i(42787),D=e.i(8823),$=e.i(65850),T=e.i(36079);function A(){let{state:e,dispatch:f}=(0,h.useApp)(),{success:g,error:y}=(0,b.useToast)(),C=(0,j.useConfirm)(),[P,A]=(0,s.useState)(""),[E,R]=(0,s.useState)(""),[F,U]=(0,s.useState)(""),[B,M]=(0,s.useState)(""),[L,I]=(0,s.useState)(!1),[q,Q]=(0,s.useState)(!1),[_,V]=(0,s.useState)(!1),[H,K]=(0,s.useState)(null),[z,Y]=(0,s.useState)(null),[G,X]=(0,s.useState)([]),J=(0,s.useMemo)(()=>{let t=new Set;return e.purchaseOrders.forEach(e=>{e.supplier&&t.add(e.supplier)}),Array.from(t).sort()},[e.purchaseOrders]),W=(0,s.useMemo)(()=>e.purchaseOrders.filter(e=>{if(P&&e.status!==P||E&&e.supplier!==E||F&&e.currency!==F)return!1;if(B){let t=B.toLowerCase();return e.poNumber.toLowerCase().includes(t)||e.supplier.toLowerCase().includes(t)}return!0}),[e.purchaseOrders,P,E,F,B]),Z=(0,s.useMemo)(()=>{let t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1);return{totalPOs:e.purchaseOrders.length,draftCount:e.purchaseOrders.filter(e=>"draft"===e.status).length,sentCount:e.purchaseOrders.filter(e=>"sent"===e.status).length,partialCount:e.purchaseOrders.filter(e=>"partial"===e.status).length,pendingValue:e.purchaseOrders.filter(e=>["sent","partial"].includes(e.status)).reduce((e,t)=>e+t.total,0),receivedThisMonth:e.purchaseOrders.filter(e=>"received"===e.status&&new Date(e.updatedAt)>=s).length}},[e.purchaseOrders]),ee=t=>e.inventory.filter(e=>e.productId===t).reduce((e,t)=>e+t.quantity,0),et=(0,s.useMemo)(()=>e.products.filter(e=>ee(e.id)<=e.reorderPoint).map(e=>{let t=ee(e.id),s=Math.max(2*e.reorderPoint-t,1);return{...e,currentStock:t,suggestedQty:s}}).slice(0,8),[e.products,e.inventory]),es=e=>{K(e),V(!0)},ea=e=>{"draft"!==e.status?y("Only draft POs can be edited"):(Y(e),X([]),V(!1),I(!0))},el=e=>{K(e),V(!1),Q(!0)},er=async e=>{await C({title:"Send Purchase Order",message:`Send PO ${e.poNumber} to ${e.supplier}? This will mark it as sent.`,confirmText:"Send PO"})&&(f({type:"UPDATE_PURCHASE_ORDER",payload:{...e,status:"sent",updatedAt:new Date}}),g(`PO ${e.poNumber} marked as sent`))},ei=!!(P||E||F||B);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(S.Breadcrumb,{items:[{label:"Operations"},{label:"Purchase Orders"}]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Purchase Orders"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Manage supplier orders and inventory replenishment"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([["PO Number,Supplier,Status,Currency,Items,Subtotal,Shipping,Total,Expected Date,Created",...W.map(e=>[e.poNumber,e.supplier,e.status,e.currency,e.items.length.toString(),e.subtotal.toFixed(2),e.shipping.toFixed(2),e.total.toFixed(2),e.expectedDate?(0,w.formatDate)(e.expectedDate):"",(0,w.formatDate)(e.createdAt)]).map(e=>e.join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`purchase-orders-${new Date().toISOString().split("T")[0]}.csv`,s.click(),URL.revokeObjectURL(t),g("Exported purchase orders to CSV")},className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)(p.Download,{className:"w-4 h-4"}),"Export"]}),(0,t.jsxs)("button",{onClick:()=>{Y(null),X([]),I(!0)},className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)(n.Plus,{className:"w-4 h-4"}),"New PO"]})]})]}),(0,t.jsxs)(D.OperationsStatsGrid,{children:[(0,t.jsx)(D.OperationsStatCard,{icon:d.FileText,iconColor:"slate",value:Z.totalPOs,label:"Total POs",onClick:()=>A(""),isActive:!P}),(0,t.jsx)(D.OperationsStatCard,{icon:u.Edit,iconColor:"slate",value:Z.draftCount,label:"Drafts",onClick:()=>A("draft"),isActive:"draft"===P}),(0,t.jsx)(D.OperationsStatCard,{icon:a.Clock,iconColor:"amber",value:Z.sentCount,label:"Pending",onClick:()=>A("sent"),isActive:"sent"===P,accentBorder:!0}),(0,t.jsx)(D.OperationsStatCard,{icon:l.Truck,iconColor:"blue",value:Z.partialCount,label:"Partial",onClick:()=>A("partial"),isActive:"partial"===P,accentBorder:!0}),(0,t.jsx)(D.OperationsStatCard,{icon:i.DollarSign,iconColor:"slate",value:(0,w.formatCurrencyPrecise)(Z.pendingValue),label:"Pending Value"}),(0,t.jsx)(D.OperationsStatCard,{icon:c.Check,iconColor:"emerald",value:Z.receivedThisMonth,label:"Received MTD",onClick:()=>A("received"),isActive:"received"===P,accentBorder:!0})]}),(0,t.jsxs)($.FilterBar,{onClear:()=>{A(""),R(""),U(""),M("")},showClear:ei,children:[(0,t.jsx)($.SearchInput,{value:B,onChange:M,placeholder:"Search POs by number or supplier..."}),(0,t.jsx)($.FilterSelect,{value:P,onChange:A,placeholder:"All Statuses",options:[{value:"draft",label:"Draft"},{value:"sent",label:"Pending"},{value:"partial",label:"Partial"},{value:"received",label:"Received"},{value:"cancelled",label:"Cancelled"}]}),(0,t.jsx)($.FilterSelect,{value:E,onChange:R,placeholder:"All Suppliers",options:J.map(e=>({value:e,label:e}))}),(0,t.jsx)($.FilterSelect,{value:F,onChange:U,placeholder:"All Currencies",options:[{value:"USD",label:"USD"},{value:"CAD",label:"CAD"}]})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-slate-800/50 border-b border-slate-700/50",children:(0,t.jsxs)("tr",{className:"text-left text-xs text-slate-400 uppercase tracking-wider",children:[(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"PO Number"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"Supplier"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"Items"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-right",children:"Total"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium",children:"Expected"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:0===W.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-400",children:0===e.purchaseOrders.length?"No purchase orders yet. Create your first PO!":"No purchase orders match your filters."})}):W.map(e=>{let s=e.items.reduce((e,t)=>e+t.quantity,0),a=e.items.reduce((e,t)=>e+t.receivedQty,0);return(0,t.jsxs)("tr",{className:"hover:bg-slate-700/30 transition-colors cursor-pointer",onClick:()=>es(e),children:[(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsx)("div",{className:"font-mono text-sm font-medium text-white",children:e.poNumber}),(0,t.jsx)("div",{className:"text-xs text-slate-500",children:(0,w.formatDate)(e.createdAt)})]}),(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsx)("div",{className:"text-sm text-white",children:e.supplier}),(0,t.jsx)("div",{className:"text-xs text-slate-500",children:e.currency})]}),(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsxs)("div",{className:"text-sm text-white",children:[e.items.length," items"]}),(0,t.jsx)("div",{className:"text-xs text-slate-500",children:a>0?`${(0,w.formatNumber)(a)}/${(0,w.formatNumber)(s)} received`:`${(0,w.formatNumber)(s)} units`})]}),(0,t.jsx)("td",{className:"px-4 py-4 text-right",children:(0,t.jsx)("div",{className:"text-sm font-medium text-white",children:(0,w.formatCurrencyPrecise)(e.total)})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("div",{className:"text-sm text-white",children:e.expectedDate?(0,w.formatDate)(e.expectedDate):"-"})}),(0,t.jsx)("td",{className:"px-4 py-4 text-center",children:(0,t.jsx)(k.POStatusBadge,{status:e.status})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>es(e),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"View",children:(0,t.jsx)(o.Eye,{className:"w-4 h-4"})}),"draft"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>ea(e),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:(0,t.jsx)(u.Edit,{className:"w-4 h-4"})}),(0,t.jsxs)("button",{onClick:()=>er(e),className:"px-3 py-1.5 bg-amber-600 hover:bg-amber-500 text-white text-xs rounded-lg",children:[(0,t.jsx)(m.Send,{className:"w-3 h-3 inline mr-1"}),"Send"]})]}),("sent"===e.status||"partial"===e.status)&&(0,t.jsx)("button",{onClick:()=>el(e),className:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-500 text-white text-xs rounded-lg",children:"Receive"})]})})]},e.id)})})]})}),(0,t.jsx)(T.PaginationFooter,{showing:W.length,total:e.purchaseOrders.length,label:"purchase orders"})]}),et.length>0&&(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-amber-500/30 rounded-xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-5 py-4 border-b border-slate-700/50 flex items-center gap-3",children:[(0,t.jsx)(x.AlertTriangle,{className:"w-5 h-5 text-amber-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-semibold text-white",children:"Low Stock Suggestions"}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Products below reorder point - consider adding to next PO"})]})]}),(0,t.jsx)("div",{className:"p-4 grid grid-cols-4 gap-3",children:et.map(e=>(0,t.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(r.Package,{className:"w-4 h-4 text-amber-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-white truncate",children:e.name})]}),(0,t.jsxs)("div",{className:"text-xs text-slate-400 mb-1",children:["SKU: ",e.sku]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"Stock:"}),(0,t.jsxs)("span",{className:"text-amber-400 font-medium",children:[(0,w.formatNumber)(e.currentStock)," / ",(0,w.formatNumber)(e.reorderPoint)]})]}),(0,t.jsxs)("button",{onClick:()=>{let t;return t={productId:e.id,productName:e.name,sku:e.sku,quantity:e.suggestedQty,receivedQty:0,unitCost:e.cost.rolling},void(X(s=>s.some(t=>t.productId===e.id)?s:[...s,t]),!L&&(Y(null),I(!0)),g(`Added ${e.name} to PO`))},className:"mt-2 w-full px-2 py-1.5 bg-amber-500/20 text-amber-400 text-xs rounded hover:bg-amber-500/30 transition-colors",children:["+ Add to PO (",(0,w.formatNumber)(e.suggestedQty)," units)"]})]},e.id))})]}),(0,t.jsx)(v.CreatePOModal,{isOpen:L,onClose:()=>{I(!1),Y(null),X([])},editPO:z,initialItems:G}),(0,t.jsx)(N.ReceivePOModal,{isOpen:q,onClose:()=>{Q(!1),K(null)},po:H}),(0,t.jsx)(O,{isOpen:_,onClose:()=>{V(!1),K(null)},po:H,onEdit:ea,onReceive:el})]})}e.s(["default",()=>A],44065)}]);