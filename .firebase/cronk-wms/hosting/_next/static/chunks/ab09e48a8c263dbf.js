(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},71898,e=>{"use strict";e.i(36180);var t=e.i(98925),s=e.i(76009);function a(e){if(!e)return e;let s={...e};for(let e in s)s[e]instanceof t.Timestamp?s[e]=s[e].toDate():s[e]&&"object"==typeof s[e]&&!Array.isArray(s[e])&&(s[e]=a(s[e]));return s}class r{orgId;collectionName;constructor(e,t){this.orgId=e,this.collectionName=t}getCollectionRef(){return(0,t.collection)(s.db,"organizations",this.orgId,this.collectionName)}getDocRef(e){return(0,t.doc)(s.db,"organizations",this.orgId,this.collectionName,e)}async getAll(...e){let s=this.getCollectionRef(),r=e.length>0?(0,t.query)(s,...e):(0,t.query)(s);return(await (0,t.getDocs)(r)).docs.map(e=>a({id:e.id,...e.data()}))}async get(e){let s=this.getDocRef(e),r=await (0,t.getDoc)(s);return r.exists()?a({id:r.id,...r.data()}):null}async create(e,s){let a=this.getCollectionRef(),r=s?(0,t.doc)(a,s):(0,t.doc)(a);return await (0,t.setDoc)(r,{...e,createdAt:(0,t.serverTimestamp)(),updatedAt:(0,t.serverTimestamp)()}),r.id}async update(e,s){let a=this.getDocRef(e);await (0,t.updateDoc)(a,{...s,updatedAt:(0,t.serverTimestamp)()})}async delete(e){let s=this.getDocRef(e);await (0,t.deleteDoc)(s)}subscribe(e,s,...r){let i=this.getCollectionRef(),l=r.length>0?(0,t.query)(i,...r):(0,t.query)(i);return(0,t.onSnapshot)(l,t=>{e(t.docs.map(e=>a({id:e.id,...e.data()})))},s)}subscribeToDoc(e,s,r){let i=this.getDocRef(e);return(0,t.onSnapshot)(i,e=>{e.exists()?s(a({id:e.id,...e.data()})):s(null)},r)}async batchCreate(e){let a=(0,t.writeBatch)(s.db),r=[];for(let s of e){let e=(0,t.doc)(this.getCollectionRef());r.push(e.id),a.set(e,{...s,createdAt:(0,t.serverTimestamp)(),updatedAt:(0,t.serverTimestamp)()})}return await a.commit(),r}async batchUpdate(e){let a=(0,t.writeBatch)(s.db);for(let{id:s,data:r}of e){let e=this.getDocRef(s);a.update(e,{...r,updatedAt:(0,t.serverTimestamp)()})}await a.commit()}async batchDelete(e){let a=(0,t.writeBatch)(s.db);for(let t of e)a.delete(this.getDocRef(t));await a.commit()}async getPaginated(e,s,...r){let i=this.getCollectionRef(),l=(0,t.query)(i,...r,(0,t.limit)(e+1));s&&(l=(0,t.query)(i,...r,(0,t.startAfter)(s),(0,t.limit)(e+1)));let o=await (0,t.getDocs)(l),n=o.docs.length>e,c=n?o.docs.slice(0,-1):o.docs;return{data:c.map(e=>a({id:e.id,...e.data()})),lastDoc:c.length>0?c[c.length-1]:null,hasMore:n}}}function i(e){return"demo-org-id"===e}e.s(["FirestoreService",()=>r,"isDemoOrganization",()=>i])},81950,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(97815),i=e.i(77524),l=e.i(31129),o=e.i(71898);let n=[{name:"Main Warehouse",type:"warehouse",address:"2115 Avenue I, Rosenberg, TX 77471",isActive:!0},{name:"Amazon FBA",type:"fba",isActive:!0}];async function c(e){let t=new o.FirestoreService(e,"locations"),s=await t.getAll();if(s.length>0)return console.log("Locations already exist, skipping seed"),s;let a=[];for(let e of n){let s=await t.create(e);a.push(s)}return console.log("Seeded default locations"),t.getAll()}async function d(e,t){let s=new o.FirestoreService(e,"products");if((await s.getAll()).length>0)return void console.log("Products already exist, skipping seed");let a=new Date().toISOString();for(let e of[{sku:"CRONK-GROW-32",name:"Cronk Grow 32oz",category:"nutrient",size:"1L",weight:32,prices:{msrp:29.99,shopify:29.99,amazon:34.99,wholesale:19.99,distributor:14.99},costs:{base:8.5,amazonPrep:2,shopify:1},reorderPoint:25,casePackQty:12,isActive:!0,createdAt:a,updatedAt:a},{sku:"CRONK-BLOOM-32",name:"Cronk Bloom 32oz",category:"nutrient",size:"1L",weight:32,prices:{msrp:29.99,shopify:29.99,amazon:34.99,wholesale:19.99,distributor:14.99},costs:{base:8.5,amazonPrep:2,shopify:1},reorderPoint:25,casePackQty:12,isActive:!0,createdAt:a,updatedAt:a},{sku:"CRONK-MICRO-32",name:"Cronk Micro 32oz",category:"nutrient",size:"1L",weight:32,prices:{msrp:24.99,shopify:24.99,amazon:29.99,wholesale:16.99,distributor:12.99},costs:{base:7.25,amazonPrep:2,shopify:1},reorderPoint:30,casePackQty:12,isActive:!0,createdAt:a,updatedAt:a},{sku:"CRONK-GROW-128",name:"Cronk Grow Gallon",category:"nutrient",size:"4L",weight:128,prices:{msrp:79.99,shopify:79.99,amazon:89.99,wholesale:54.99,distributor:44.99},costs:{base:22,amazonPrep:3,shopify:2},reorderPoint:15,casePackQty:4,isActive:!0,createdAt:a,updatedAt:a},{sku:"CRONK-BLOOM-128",name:"Cronk Bloom Gallon",category:"nutrient",size:"4L",weight:128,prices:{msrp:79.99,shopify:79.99,amazon:89.99,wholesale:54.99,distributor:44.99},costs:{base:22,amazonPrep:3,shopify:2},reorderPoint:15,casePackQty:4,isActive:!0,createdAt:a,updatedAt:a}])await s.create(e);console.log("Seeded demo products")}async function m(e){let t=new o.FirestoreService(e,"suppliers");(await t.getAll()).length>0?console.log("Suppliers already exist, skipping seed"):(await t.create({name:"HIGROCORP INC.",contactName:"Supplier Contact",email:"orders@higrocorp.com",address:{line1:"123 Manufacturing Way",city:"Toronto",state:"ON",postalCode:"M5V 1A1",country:"CA"},currency:"CAD"}),console.log("Seeded default supplier"))}async function u(e,t=!1){try{let s=await c(e);if(await m(e),t&&s.length>0){let t=s.find(e=>"warehouse"===e.type)||s[0];await d(e,t.id)}console.log("Organization data seeded successfully")}catch(e){throw console.error("Error seeding organization data:",e),e}}function x(){let e=(0,a.useRouter)(),{user:o,userProfile:n,isDemo:c,loading:d,logout:m}=(0,r.useAuth)(),{organization:x,loading:h,createOrganization:p,checkPendingInvites:g,acceptInvite:f,declineInvite:b,error:v,clearError:y}=(0,i.useOrganization)(),[N,j]=(0,s.useState)("choice"),[w,A]=(0,s.useState)(""),[C,z]=(0,s.useState)("free"),[k,S]=(0,s.useState)(!1),[R,P]=(0,s.useState)([]),[D,O]=(0,s.useState)(!1),[T,I]=(0,s.useState)(null);(0,s.useEffect)(()=>{(c||x)&&e.push("/")},[c,x,e]),(0,s.useEffect)(()=>{d||o||e.push("/login")},[o,d,e]),(0,s.useEffect)(()=>{(async()=>{if(o?.email){O(!0);try{let e=await g(o.email);P(e)}catch(e){console.error("Error checking invites:",e)}finally{O(!1)}}})()},[o?.email,g]);let L=async t=>{if(t.preventDefault(),!w.trim())return void I("Please enter an organization name");S(!0),I(null),y();try{let t=await p(w.trim(),C);try{await u(t.id,!1)}catch(e){console.error("Error seeding organization data:",e)}e.push("/")}catch(e){I(e instanceof Error?e.message:"Failed to create organization")}finally{S(!1)}},E=async t=>{I(null),y();try{await f(t),e.push("/")}catch(e){I(e instanceof Error?e.message:"Failed to accept invitation")}},F=async e=>{try{await b(e),P(t=>t.filter(t=>t.id!==e))}catch(e){I(e instanceof Error?e.message:"Failed to decline invitation")}};return d||h?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):o?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-xl",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-emerald-500/20",children:(0,t.jsx)("i",{className:"fas fa-leaf text-white text-2xl"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Welcome to Cronk HQ"}),(0,t.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:"Set up your organization to get started"})]}),(T||v)&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-3",children:[(0,t.jsx)("i",{className:"fas fa-exclamation-circle text-red-400"}),(0,t.jsx)("span",{className:"text-red-400 text-sm",children:T||v})]}),(0,t.jsxs)("div",{className:"bg-slate-900/50 backdrop-blur border border-slate-800 rounded-2xl p-8",children:["choice"===N&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white text-center mb-6",children:"How would you like to get started?"}),R.length>0&&(0,t.jsx)("button",{onClick:()=>j("invites"),className:"w-full p-4 bg-emerald-500/10 border-2 border-emerald-500/30 rounded-xl text-left hover:bg-emerald-500/20 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)("i",{className:"fas fa-envelope-open text-emerald-400 text-xl"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"You have pending invitations"}),(0,t.jsxs)("div",{className:"text-sm text-slate-400",children:[R.length," organization",1!==R.length?"s":""," invited you to join"]})]}),(0,t.jsx)("span",{className:"bg-emerald-500 text-white text-xs font-medium px-2.5 py-1 rounded-full",children:R.length})]})}),(0,t.jsx)("button",{onClick:()=>j("create"),className:"w-full p-4 bg-slate-800/50 border-2 border-slate-700 rounded-xl text-left hover:border-emerald-500/50 hover:bg-slate-800 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)("i",{className:"fas fa-building text-blue-400 text-xl"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"Create a new organization"}),(0,t.jsx)("div",{className:"text-sm text-slate-400",children:"Start fresh with your own workspace"})]})]})}),0===R.length&&(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsxs)("p",{className:"text-slate-500 text-sm",children:["Have an invite code?"," ",(0,t.jsx)("button",{onClick:()=>j("invites"),className:"text-emerald-400 hover:text-emerald-300",children:"Enter it here"})]})}),(0,t.jsx)("div",{className:"mt-8 pt-6 border-t border-slate-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"text-slate-400",children:["Signed in as ",(0,t.jsx)("span",{className:"text-white",children:o.email})]}),(0,t.jsx)("button",{onClick:()=>m(),className:"text-slate-400 hover:text-white transition-colors",children:"Sign out"})]})})]}),"create"===N&&(0,t.jsxs)("form",{onSubmit:L,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>j("choice"),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:(0,t.jsx)("i",{className:"fas fa-arrow-left"})}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Create your organization"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"orgName",className:"block text-sm font-medium text-slate-300 mb-2",children:"Organization Name"}),(0,t.jsx)("input",{id:"orgName",type:"text",value:w,onChange:e=>A(e.target.value),className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 transition-colors",placeholder:"Acme Inc.",required:!0,autoFocus:!0}),(0,t.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"This will be your workspace name visible to all team members"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Select a Plan"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:["free","starter","professional","enterprise"].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>z(e),className:`p-4 rounded-lg border-2 text-left transition-colors ${C===e?"border-emerald-500 bg-emerald-500/10":"border-slate-700 bg-slate-800/30 hover:border-slate-600"}`,children:[(0,t.jsx)("div",{className:"font-medium text-white capitalize",children:e}),(0,t.jsxs)("div",{className:"text-xs text-slate-400 mt-1",children:[-1===l.PLAN_LIMITS[e].users?"Unlimited":l.PLAN_LIMITS[e].users," users"]})]},e))})]}),(0,t.jsx)("button",{type:"submit",disabled:k||!w.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-500 disabled:bg-emerald-800 disabled:cursor-not-allowed text-white font-medium py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-plus"}),"Create Organization"]})})]}),"invites"===N&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>j("choice"),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:(0,t.jsx)("i",{className:"fas fa-arrow-left"})}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Pending Invitations"})]}),D?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):R.length>0?(0,t.jsx)("div",{className:"space-y-3",children:R.map(e=>(0,t.jsx)("div",{className:"p-4 bg-slate-800/50 border border-slate-700 rounded-xl",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-white",children:e.organizationName}),(0,t.jsxs)("div",{className:"text-sm text-slate-400 mt-1",children:["Invited by ",e.invitedByName||"Team admin"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)("span",{className:"text-xs bg-slate-700 text-slate-300 px-2 py-0.5 rounded capitalize",children:e.role}),(0,t.jsxs)("span",{className:"text-xs text-slate-500",children:["Expires ",new Date(e.expiresAt).toLocaleDateString()]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>F(e.id),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Decline",children:(0,t.jsx)("i",{className:"fas fa-times"})}),(0,t.jsx)("button",{onClick:()=>E(e.id),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium rounded-lg transition-colors",children:"Accept"})]})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("i",{className:"fas fa-envelope text-slate-600 text-2xl"})}),(0,t.jsx)("p",{className:"text-slate-400",children:"No pending invitations"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Ask your team admin to send you an invite"})]})]})]})]})}):null}e.s(["default",()=>x],81950)}]);