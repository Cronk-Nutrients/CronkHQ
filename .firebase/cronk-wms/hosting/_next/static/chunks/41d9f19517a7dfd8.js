(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56156,e=>{"use strict";var t=e.i(43476);let s=(0,e.i(71645).forwardRef)(({checked:e,onChange:s,disabled:a=!1,size:l="md",label:r,description:i},n)=>{let d={sm:{track:"w-9 h-5",thumb:"w-4 h-4",translate:"translate-x-4"},md:{track:"w-11 h-6",thumb:"w-5 h-5",translate:"translate-x-5"}}[l],o=()=>{a||s(!e)},c=(0,t.jsx)("button",{ref:n,type:"button",role:"switch","aria-checked":e,disabled:a,onClick:o,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o())},className:`
          relative inline-flex flex-shrink-0 cursor-pointer rounded-full
          transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2
          focus:ring-emerald-500 focus:ring-offset-2 focus:ring-offset-slate-900
          ${d.track}
          ${e?"bg-emerald-500":"bg-slate-600"}
          ${a?"opacity-50 cursor-not-allowed":""}
        `,children:(0,t.jsx)("span",{"aria-hidden":"true",className:`
            pointer-events-none inline-block rounded-full bg-white shadow-lg
            ring-0 transition duration-200 ease-in-out
            ${d.thumb}
            ${e?d.translate:"translate-x-0.5"}
            mt-0.5
          `})});return r||i?(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[r&&(0,t.jsx)("div",{className:`text-white ${"sm"===l?"text-sm":"text-base"}`,children:r}),i&&(0,t.jsx)("div",{className:"text-sm text-slate-400 mt-0.5",children:i})]}),c]}):c});s.displayName="Toggle",e.s(["Toggle",0,s])},88081,e=>{"use strict";let t=(0,e.i(75254).default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);e.s(["Hash",()=>t],88081)},44927,90300,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(46040),l=e.i(76525),r=e.i(73146),i=e.i(80809),n=e.i(63207),d=e.i(37727),o=e.i(88844),c=e.i(55436),u=e.i(88081),m=e.i(87316),x=e.i(52008),p=e.i(56156);let h=[{value:"classic_line",label:"Classic Line"},{value:"additives",label:"Additives"},{value:"autoflower_line",label:"Autoflower Line"},{value:"puur_organics",label:"PuurOrganics"},{value:"shipping_supplies",label:"Shipping Supplies"},{value:"merch",label:"Merch"},{value:"labels",label:"Labels"}],b={name:"",sku:"",barcode:"",category:"classic_line",description:"",cost:"",priceMSRP:"",priceShopify:"",priceAmazon:"",priceWholesale:"",weight:"",length:"",width:"",height:"",reorderPoint:"50",supplier:""};function g({isOpen:e,onClose:g,editProduct:f}){let{state:j,dispatch:v}=(0,r.useApp)(),{success:N,error:y}=(0,i.useToast)(),[w,k]=(0,s.useState)(b),[S,C]=(0,s.useState)({}),[P,I]=(0,s.useState)(!1),[A,M]=(0,s.useState)([]),[T,$]=(0,s.useState)(""),[F,R]=(0,s.useState)(!1),[L,O]=(0,s.useState)(!1),[D,q]=(0,s.useState)(""),[E,U]=(0,s.useState)(1001),[z,_]=(0,s.useState)(""),[B,W]=(0,s.useState)(!1),[K,G]=(0,s.useState)(!1),[H,V]=(0,s.useState)(30),[Q,J]=(0,s.useState)(""),[X,Y]=(0,s.useState)(1),Z=!!f,ee=(0,s.useMemo)(()=>{if(!T.trim())return[];let e=T.toLowerCase();return j.products.filter(t=>(t.name.toLowerCase().includes(e)||t.sku.toLowerCase().includes(e))&&t.id!==f?.id&&!A.some(e=>e.productId===t.id)).slice(0,6)},[T,j.products,A,f?.id]),et=e=>j.inventory.filter(t=>t.productId===e).reduce((e,t)=>e+t.quantity,0);(0,s.useEffect)(()=>{e&&(f?(k({name:f.name,sku:f.sku,barcode:f.barcode||"",category:f.category,description:f.description||"",cost:f.cost.rolling.toString(),priceMSRP:f.prices.msrp.toString(),priceShopify:f.prices.shopify?.toString()||"",priceAmazon:f.prices.amazon?.toString()||"",priceWholesale:f.prices.wholesale?.toString()||"",weight:f.weight.value.toString(),length:f.dimensions?.length?.toString()||"",width:f.dimensions?.width?.toString()||"",height:f.dimensions?.height?.toString()||"",reorderPoint:f.reorderPoint.toString(),supplier:f.supplier||""}),M(f.components||[]),O(f.trackSerials||!1),q(f.serialPrefix||""),U(f.serialNextNumber||1001),_(f.serialSuffix||""),W(f.trackLots||!1),G(f.expirationTracking||!1),V(f.expirationWarningDays||30),J(f.lotPrefix||""),Y(f.lotNextNumber||1)):(k(b),M([]),O(!1),q(""),U(1001),_(""),W(!1),G(!1),V(30),J(""),Y(1)),C({}),$(""),R(!1))},[e,f]);let es=(e,t)=>{k(s=>({...s,[e]:t})),S[e]&&C(t=>({...t,[e]:void 0}))},ea=async()=>{let e,t,s,a;if(e={},w.name.trim()||(e.name="Product name is required"),w.sku.trim()?(!Z||w.sku!==f?.sku)&&j.products.find(e=>e.sku.toLowerCase()===w.sku.toLowerCase()&&e.id!==f?.id)&&(e.sku="SKU already exists"):e.sku="SKU is required",w.category||(e.category="Category is required"),(isNaN(t=parseFloat(w.cost))||t<0)&&(e.cost="Valid cost is required"),(isNaN(s=parseFloat(w.priceMSRP))||s<0)&&(e.priceMSRP="Valid MSRP is required"),(isNaN(a=parseFloat(w.weight))||a<0)&&(e.weight="Valid weight is required"),C(e),0===Object.keys(e).length){I(!0);try{let e={id:f?.id||crypto.randomUUID(),name:w.name.trim(),sku:w.sku.trim(),barcode:w.barcode.trim()||void 0,category:w.category,description:w.description.trim()||void 0,cost:{rolling:parseFloat(w.cost),fixed:parseFloat(w.cost)},prices:{msrp:parseFloat(w.priceMSRP),shopify:w.priceShopify?parseFloat(w.priceShopify):parseFloat(w.priceMSRP),amazon:w.priceAmazon?parseFloat(w.priceAmazon):parseFloat(w.priceMSRP),wholesale:w.priceWholesale?parseFloat(w.priceWholesale):.6*parseFloat(w.priceMSRP)},weight:{value:parseFloat(w.weight),unit:"lbs"},dimensions:{length:parseFloat(w.length)||0,width:parseFloat(w.width)||0,height:parseFloat(w.height)||0},reorderPoint:parseInt(w.reorderPoint)||50,supplier:w.supplier.trim()||void 0,skus:f?.skus,components:A.length>0?A:void 0,trackSerials:L,serialPrefix:L?D:void 0,serialNextNumber:L?E:void 0,serialSuffix:L?z:void 0,trackLots:B,expirationTracking:B?K:void 0,expirationWarningDays:B&&K?H:void 0,lotPrefix:B?Q:void 0,lotNextNumber:B?X:void 0,createdAt:f?.createdAt||new Date,updatedAt:new Date};Z?(v({type:"UPDATE_PRODUCT",payload:e}),N("Product updated successfully!")):(v({type:"ADD_PRODUCT",payload:e}),j.locations.forEach(t=>{j.inventory.find(s=>s.productId===e.id&&s.locationId===t.id)||v({type:"UPDATE_INVENTORY",payload:{productId:e.id,locationId:t.id,quantity:0,updatedAt:new Date}})}),N("Product created successfully!")),g()}catch(e){y("Failed to save product. Please try again.")}finally{I(!1)}}};return(0,t.jsx)(a.Modal,{open:e,onClose:g,title:Z?"Edit Product":"Add Product",subtitle:Z?`Editing ${f?.name}`:"Create a new product in your inventory",size:"lg",footer:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Button,{variant:"secondary",onClick:g,children:"Cancel"}),(0,t.jsx)(l.Button,{onClick:ea,disabled:P,children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):Z?"Save Changes":"Create Product"})]}),children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["Product Name ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:w.name,onChange:e=>es("name",e.target.value),className:`w-full bg-slate-800 border ${S.name?"border-red-500":"border-slate-700"} rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"e.g., 1L Micro Classic"}),S.name&&(0,t.jsx)("p",{className:"text-red-400 text-xs mt-1",children:S.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["SKU ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:w.sku,onChange:e=>es("sku",e.target.value.toUpperCase()),className:`flex-1 bg-slate-800 border ${S.sku?"border-red-500":"border-slate-700"} rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"e.g., CLM1L"}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e=w.category.substring(0,3).toUpperCase(),t=Math.floor(900*Math.random())+100;es("sku",`CN${e}${t}`)},className:"px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg transition-colors text-sm",title:"Auto-generate SKU",children:(0,t.jsx)("i",{className:"fas fa-magic"})})]}),S.sku&&(0,t.jsx)("p",{className:"text-red-400 text-xs mt-1",children:S.sku})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Barcode"}),(0,t.jsx)("input",{type:"text",value:w.barcode,onChange:e=>es("barcode",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"UPC or EAN"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["Category ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)("select",{value:w.category,onChange:e=>es("category",e.target.value),className:`w-full bg-slate-800 border ${S.category?"border-red-500":"border-slate-700"} rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50`,children:h.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),S.category&&(0,t.jsx)("p",{className:"text-red-400 text-xs mt-1",children:S.category})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Supplier"}),(0,t.jsx)("input",{type:"text",value:w.supplier,onChange:e=>es("supplier",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"e.g., HIGROCORP"})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Description"}),(0,t.jsx)("textarea",{value:w.description,onChange:e=>es("description",e.target.value),rows:2,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none",placeholder:"Product description..."})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Pricing"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["Cost (COGS) ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",value:w.cost,onChange:e=>es("cost",e.target.value),className:`w-full bg-slate-800 border ${S.cost?"border-red-500":"border-slate-700"} rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"0.00"})]}),S.cost&&(0,t.jsx)("p",{className:"text-red-400 text-xs mt-1",children:S.cost})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["MSRP ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",value:w.priceMSRP,onChange:e=>es("priceMSRP",e.target.value),className:`w-full bg-slate-800 border ${S.priceMSRP?"border-red-500":"border-slate-700"} rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"0.00"})]}),S.priceMSRP&&(0,t.jsx)("p",{className:"text-red-400 text-xs mt-1",children:S.priceMSRP})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Shopify Price"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",value:w.priceShopify,onChange:e=>es("priceShopify",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"Same as MSRP"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Amazon Price"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",value:w.priceAmazon,onChange:e=>es("priceAmazon",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"Same as MSRP"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Wholesale Price"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",value:w.priceWholesale,onChange:e=>es("priceWholesale",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"60% of MSRP"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Reorder Point"}),(0,t.jsx)("input",{type:"number",min:"0",value:w.reorderPoint,onChange:e=>es("reorderPoint",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"50"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Physical Attributes"}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["Weight (lbs) ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",value:w.weight,onChange:e=>es("weight",e.target.value),className:`w-full bg-slate-800 border ${S.weight?"border-red-500":"border-slate-700"} rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"0.00"}),S.weight&&(0,t.jsx)("p",{className:"text-red-400 text-xs mt-1",children:S.weight})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Length (in)"}),(0,t.jsx)("input",{type:"number",step:"0.1",min:"0",value:w.length,onChange:e=>es("length",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Width (in)"}),(0,t.jsx)("input",{type:"number",step:"0.1",min:"0",value:w.width,onChange:e=>es("width",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Height (in)"}),(0,t.jsx)("input",{type:"number",step:"0.1",min:"0",value:w.height,onChange:e=>es("height",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"0"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Manufacturing Components (Bill of Materials)"}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mb-3",children:"Add components required to manufacture this product (e.g., front label, back label, bottle)"}),(0,t.jsx)("div",{className:"relative mb-3",children:(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(c.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,t.jsx)("input",{type:"text",value:T,onChange:e=>{$(e.target.value),R(!0)},onFocus:()=>R(!0),placeholder:"Search products to add as components...",className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"}),F&&ee.length>0&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-48 overflow-auto",children:ee.map(e=>{let s=et(e.id);return(0,t.jsxs)("button",{type:"button",onClick:()=>{var t;let s;return t=e.id,void((s=j.products.find(e=>e.id===t))&&(M(e=>[...e,{productId:s.id,productName:s.name,quantity:1}]),$(""),R(!1)))},className:"w-full px-4 py-2.5 flex items-center justify-between hover:bg-slate-700/50 text-left",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-white",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-slate-400",children:e.sku})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:`text-xs ${s>0?"text-emerald-400":"text-slate-500"}`,children:[(0,n.formatNumber)(s)," in stock"]})})]},e.id)})})]})})}),A.length>0?(0,t.jsx)("div",{className:"space-y-2",children:A.map(e=>{let s=j.products.find(t=>t.id===e.productId),a=et(e.productId);return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 border border-slate-700/50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(o.Package,{className:"w-4 h-4 text-emerald-400"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm text-white truncate",children:e.productName}),(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:[s?.sku," - ",(0,n.formatNumber)(a)," available"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-slate-400",children:"Qty:"}),(0,t.jsx)("input",{type:"number",min:"1",value:e.quantity,onChange:t=>{var s,a;return s=e.productId,void(!((a=parseInt(t.target.value)||1)<1)&&M(e=>e.map(e=>e.productId===s?{...e,quantity:a}:e)))},className:"w-16 bg-slate-700 border border-slate-600 rounded-lg px-2 py-1.5 text-white text-center text-sm focus:outline-none focus:border-emerald-500/50"}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.productId,void M(e=>e.filter(e=>e.productId!==t))},className:"p-1.5 text-slate-400 hover:text-red-400 hover:bg-slate-700 rounded-lg transition-colors",children:(0,t.jsx)(d.X,{className:"w-4 h-4"})})]})]},e.productId)})}):(0,t.jsxs)("div",{className:"p-4 border-2 border-dashed border-slate-700 rounded-lg text-center",children:[(0,t.jsx)(o.Package,{className:"w-8 h-8 text-slate-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"No components added"}),(0,t.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:"Search and add components to track BOM for manufacturing"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Serial Number Tracking"}),(0,t.jsxs)("div",{className:"p-4 bg-slate-800/50 border border-slate-700/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"Enable Serial Number Tracking"}),(0,t.jsx)("div",{className:"text-sm text-slate-400 mt-0.5",children:"Track individual units with unique serial numbers"})]}),(0,t.jsx)(p.Toggle,{checked:L,onChange:O})]}),L&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700/50 space-y-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[(0,t.jsx)(u.Hash,{className:"w-4 h-4 text-emerald-400"}),"Auto-Generate Serial Format"]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Prefix"}),(0,t.jsx)("input",{type:"text",value:D,onChange:e=>q(e.target.value),placeholder:"e.g., SN-",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Next Number"}),(0,t.jsx)("input",{type:"number",value:E,onChange:e=>U(parseInt(e.target.value)||1),placeholder:"1001",min:1,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Suffix"}),(0,t.jsx)("input",{type:"text",value:z,onChange:e=>_(e.target.value),placeholder:"e.g., -2024",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono"})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-slate-700/30 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"Preview: "}),(0,t.jsxs)("span",{className:"font-mono text-emerald-400",children:[D,String(E).padStart(4,"0"),z]})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Lot/Batch Tracking"}),(0,t.jsxs)("div",{className:"p-4 bg-slate-800/50 border border-slate-700/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"Enable Lot/Batch Tracking"}),(0,t.jsx)("div",{className:"text-sm text-slate-400 mt-0.5",children:"Track inventory by lot numbers for FIFO/FEFO picking"})]}),(0,t.jsx)(p.Toggle,{checked:B,onChange:W})]}),B&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700/50 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(m.Calendar,{className:"w-5 h-5 text-amber-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"Track Expiration Dates"}),(0,t.jsx)("div",{className:"text-sm text-slate-400",children:"Enable FEFO (First Expired, First Out) picking"})]})]}),(0,t.jsx)(p.Toggle,{checked:K,onChange:G})]}),K&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Warning Days Before Expiration"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"number",value:H,onChange:e=>V(parseInt(e.target.value)||30),min:1,className:"w-24 bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"}),(0,t.jsx)("span",{className:"text-slate-400",children:"days"})]})]}),(0,t.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[(0,t.jsx)(x.Layers,{className:"w-4 h-4 text-purple-400"}),"Auto-Generate Lot Number Format"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Lot Prefix"}),(0,t.jsx)("input",{type:"text",value:Q,onChange:e=>J(e.target.value),placeholder:"e.g., LOT-",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Next Lot Number"}),(0,t.jsx)("input",{type:"number",value:X,onChange:e=>Y(parseInt(e.target.value)||1),placeholder:"1",min:1,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-slate-700/30 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"Preview: "}),(0,t.jsxs)("span",{className:"font-mono text-purple-400",children:[Q||"LOT-",new Date().toISOString().slice(0,10).replace(/-/g,""),"-",String(X).padStart(3,"0")]})]})]})]})]})]})})}e.s(["AddProductModal",()=>g],44927);let f=[{value:"received",label:"Received (PO)"},{value:"sold",label:"Sold"},{value:"damaged",label:"Damaged"},{value:"count_adjustment",label:"Count Adjustment"},{value:"transfer_in",label:"Transfer In"},{value:"transfer_out",label:"Transfer Out"},{value:"returned",label:"Customer Return"},{value:"other",label:"Other"}];function j({isOpen:e,onClose:d,product:o}){let{state:c,dispatch:u}=(0,r.useApp)(),{success:m,warning:x}=(0,i.useToast)(),[p,h]=(0,s.useState)(""),[b,g]=(0,s.useState)("add"),[j,v]=(0,s.useState)(""),[N,y]=(0,s.useState)("count_adjustment"),[w,k]=(0,s.useState)(""),[S,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{e&&o&&(h(c.locations[0]?.id||""),g("add"),v(""),y("count_adjustment"),k(""))},[e,o,c.locations]);let P=(0,s.useMemo)(()=>{if(!o||!p)return 0;let e=c.inventory.find(e=>e.productId===o.id&&e.locationId===p);return e?.quantity||0},[o,p,c.inventory]),I=(0,s.useMemo)(()=>o?c.locations.map(e=>{let t=c.inventory.find(t=>t.productId===o.id&&t.locationId===e.id);return{locationId:e.id,locationName:e.name,quantity:t?.quantity||0}}):[],[o,c.locations,c.inventory]),A=(0,s.useMemo)(()=>{let e=parseInt(j)||0;return"add"===b?P+e:"remove"===b?P-e:"set"===b?e:P},[P,b,j]),M="remove"===b&&A<0;return o?(0,t.jsx)(a.Modal,{open:e,onClose:d,title:"Adjust Stock",subtitle:o.name,size:"md",footer:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Button,{variant:"secondary",onClick:d,children:"Cancel"}),(0,t.jsx)(l.Button,{onClick:()=>{if(!o||!p)return;let e=parseInt(j)||0;if(0!==e){C(!0);try{let t=0;"add"===b&&(t=e),"remove"===b&&(t=-e),"set"===b&&(t=e-P),u({type:"ADJUST_STOCK",payload:{productId:o.id,locationId:p,adjustment:t}});let s=c.locations.find(e=>e.id===p)?.name||"Unknown";M?x(`Stock adjusted: ${o.name} now has ${A} units at ${s} (negative stock)`):m(`Stock adjusted: ${o.name} now has ${(0,n.formatNumber)(A)} units at ${s}`),d()}finally{C(!1)}}},disabled:S||!j||0===parseInt(j),children:S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):"Apply Adjustment"})]}),children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fas fa-flask text-emerald-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-white",children:o.name}),(0,t.jsxs)("div",{className:"text-sm text-slate-400",children:["SKU: ",o.sku]})]})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Current Stock by Location"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2",children:I.map(e=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg border ${p===e.locationId?"bg-emerald-500/10 border-emerald-500/30":"bg-slate-800/50 border-slate-700/50"}`,children:[(0,t.jsx)("span",{className:"text-slate-300",children:e.locationName}),(0,t.jsxs)("span",{className:`font-medium ${e.quantity>0?"text-white":"text-slate-500"}`,children:[(0,n.formatNumber)(e.quantity)," units"]})]},e.locationId))})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Location"}),(0,t.jsx)("select",{value:p,onChange:e=>h(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50",children:c.locations.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Adjustment Type"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"add",label:"Add",icon:"fa-plus"},{value:"remove",label:"Remove",icon:"fa-minus"},{value:"set",label:"Set To",icon:"fa-equals"}].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>g(e.value),className:`p-3 rounded-lg border transition-colors ${b===e.value?"bg-emerald-500/20 border-emerald-500/30 text-emerald-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:[(0,t.jsx)("i",{className:`fas ${e.icon} mr-2`}),e.label]},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Quantity"}),(0,t.jsx)("input",{type:"number",min:"0",value:j,onChange:e=>v(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"Enter quantity"})]}),j&&parseInt(j)>0&&(0,t.jsxs)("div",{className:`p-4 rounded-lg border ${M?"bg-red-500/10 border-red-500/30":"bg-blue-500/10 border-blue-500/30"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-slate-300",children:"Stock Change Preview"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-slate-400",children:(0,n.formatNumber)(P)}),(0,t.jsx)("i",{className:"fas fa-arrow-right text-slate-500"}),(0,t.jsx)("span",{className:`font-medium ${M?"text-red-400":"text-emerald-400"}`,children:(0,n.formatNumber)(A)})]})]}),M&&(0,t.jsxs)("p",{className:"text-red-400 text-sm mt-2",children:[(0,t.jsx)("i",{className:"fas fa-exclamation-triangle mr-1"}),"This will result in negative stock. Proceed with caution."]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Reason"}),(0,t.jsx)("select",{value:N,onChange:e=>y(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50",children:f.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Notes (Optional)"}),(0,t.jsx)("textarea",{value:w,onChange:e=>k(e.target.value),rows:2,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none",placeholder:"Additional notes about this adjustment..."})]})]})]})}):null}e.s(["AdjustStockModal",()=>j],90300)}]);