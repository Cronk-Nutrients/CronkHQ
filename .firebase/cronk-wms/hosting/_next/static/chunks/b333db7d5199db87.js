(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76525,e=>{"use strict";var a=e.i(43476),t=e.i(22016);let l={primary:"bg-emerald-600 hover:bg-emerald-500 text-white border-transparent",secondary:"bg-slate-800 hover:bg-slate-700 text-slate-300 border-slate-700",ghost:"bg-transparent hover:bg-slate-800 text-slate-400 hover:text-white border-transparent",danger:"bg-red-600 hover:bg-red-500 text-white border-transparent"},s={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"};function r({variant:e="primary",size:r="md",icon:n,iconPosition:i="left",children:o,className:c="",disabled:d,href:m,...u}){let f=`inline-flex items-center justify-center gap-2 font-medium rounded-lg border transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${l[e]} ${s[r]} ${c}`,x=(0,a.jsxs)(a.Fragment,{children:[n&&"left"===i&&(0,a.jsx)("i",{className:n}),o,n&&"right"===i&&(0,a.jsx)("i",{className:n})]});return m?(0,a.jsx)(t.default,{href:m,className:f,children:x}):(0,a.jsx)("button",{className:f,disabled:d,...u,children:x})}e.s(["Button",()=>r])},55806,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(76009);e.i(36180);var s=e.i(98925),r=e.i(77524),n=e.i(80809),i=e.i(76525),o=e.i(22016);let c=[{value:"ecommerce",label:"E-Commerce",icon:"fa-shopping-cart"},{value:"marketplace",label:"Marketplace",icon:"fa-store"},{value:"wholesale",label:"Wholesale",icon:"fa-building"},{value:"retail",label:"Retail",icon:"fa-cash-register"},{value:"manual",label:"Manual",icon:"fa-edit"}],d=[{name:"Slate",value:"#64748b"},{name:"Red",value:"#ef4444"},{name:"Orange",value:"#f97316"},{name:"Amber",value:"#f59e0b"},{name:"Yellow",value:"#eab308"},{name:"Lime",value:"#84cc16"},{name:"Green",value:"#22c55e"},{name:"Emerald",value:"#10b981"},{name:"Teal",value:"#14b8a6"},{name:"Cyan",value:"#06b6d4"},{name:"Blue",value:"#3b82f6"},{name:"Indigo",value:"#6366f1"},{name:"Violet",value:"#8b5cf6"},{name:"Purple",value:"#a855f7"},{name:"Pink",value:"#ec4899"},{name:"Shopify",value:"#96bf48"},{name:"Amazon",value:"#ff9900"}],m=["fab fa-shopify","fab fa-amazon","fab fa-ebay","fab fa-etsy","fas fa-store","fas fa-building","fas fa-shopping-cart","fas fa-cash-register","fas fa-phone","fas fa-envelope","fas fa-globe","fas fa-truck","fas fa-edit","fas fa-warehouse"],u=[{name:"Shopify",code:"shopify",type:"ecommerce",color:"#96bf48",icon:"fab fa-shopify",integration:{platform:"shopify",isConnected:!1,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:1,autoProcess:!0,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:1},{name:"Amazon FBA",code:"amazon_fba",type:"marketplace",color:"#ff9900",icon:"fab fa-amazon",integration:{platform:"amazon",isConnected:!1,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:2,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:2},{name:"Amazon FBM",code:"amazon_fbm",type:"marketplace",color:"#ff9900",icon:"fab fa-amazon",integration:{platform:"amazon",isConnected:!1,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:3,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:3},{name:"Wholesale",code:"wholesale",type:"wholesale",color:"#6366f1",icon:"fas fa-building",integration:{platform:"manual",isConnected:!0,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:4,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!0},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:4},{name:"Phone Order",code:"phone",type:"manual",color:"#8b5cf6",icon:"fas fa-phone",integration:{platform:"manual",isConnected:!0,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:5,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:5},{name:"Manual",code:"manual",type:"manual",color:"#64748b",icon:"fas fa-edit",integration:{platform:"manual",isConnected:!0,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:10,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!0,sortOrder:99}];function f(){let{organization:e}=(0,r.useOrganization)(),{success:f,error:x}=(0,n.useToast)(),[p,h]=(0,t.useState)([]),[b,g]=(0,t.useState)(!0),[v,j]=(0,t.useState)(!1),[y,N]=(0,t.useState)(null),[w,C]=(0,t.useState)(!1),[A,O]=(0,t.useState)({name:"",code:"",type:"ecommerce",color:"#64748b",icon:"fas fa-shopping-cart",isActive:!0,priority:5,autoProcess:!1});(0,t.useEffect)(()=>{if(!e?.id)return;let a=(0,s.collection)(l.db,"organizations",e.id,"salesChannels"),t=(0,s.query)(a,(0,s.orderBy)("sortOrder","asc")),r=(0,s.onSnapshot)(t,e=>{h(e.docs.map(e=>({id:e.id,...e.data()}))),g(!1)});return()=>r()},[e?.id]),(0,t.useEffect)(()=>{!e?.id||b||p.length>0||(async()=>{let a=(0,s.writeBatch)(l.db),t=(0,s.collection)(l.db,"organizations",e.id,"salesChannels");u.forEach(e=>{let l=(0,s.doc)(t);a.set(l,{...e,createdAt:(0,s.serverTimestamp)(),updatedAt:(0,s.serverTimestamp)()})}),await a.commit()})()},[e?.id,b,p.length]);let k=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,""),S=()=>{N(null),O({name:"",code:"",type:"ecommerce",color:"#64748b",icon:"fas fa-shopping-cart",isActive:!0,priority:5,autoProcess:!1}),j(!0)},P=async()=>{if(e?.id){if(!A.name.trim())return void x("Please enter a channel name");C(!0);try{let a=(0,s.collection)(l.db,"organizations",e.id,"salesChannels"),t=A.code||k(A.name),r={name:A.name.trim(),code:t,type:A.type,color:A.color,icon:A.icon,integration:{platform:"manual"===A.type?"manual":null,isConnected:"manual"===A.type,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:A.priority,autoProcess:A.autoProcess,packingSlipTemplate:null,requiresApproval:"wholesale"===A.type},isActive:A.isActive,updatedAt:(0,s.serverTimestamp)()};y?(await (0,s.updateDoc)((0,s.doc)(a,y.id),r),f("Channel updated")):(await (0,s.addDoc)(a,{...r,stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isDefault:!1,sortOrder:p.length+1,createdAt:(0,s.serverTimestamp)()}),f("Channel created")),j(!1)}catch(e){console.error("Error saving channel:",e),x("Failed to save channel")}finally{C(!1)}}},D=async a=>{if(e?.id){if(a.isDefault)return void x("Cannot delete the default channel");if(a.stats?.totalOrders>0)return void x("Cannot delete channel with existing orders");if(confirm(`Delete "${a.name}" channel?`))try{await (0,s.deleteDoc)((0,s.doc)(l.db,"organizations",e.id,"salesChannels",a.id)),f("Channel deleted")}catch(e){console.error("Error deleting channel:",e),x("Failed to delete channel")}}},z=async a=>{if(e?.id&&!a.isDefault)try{let t=(0,s.writeBatch)(l.db),r=(0,s.collection)(l.db,"organizations",e.id,"salesChannels"),n=p.find(e=>e.isDefault);n&&t.update((0,s.doc)(r,n.id),{isDefault:!1}),t.update((0,s.doc)(r,a.id),{isDefault:!0}),await t.commit(),f(`${a.name} is now the default channel`)}catch(e){console.error("Error setting default:",e),x("Failed to set default channel")}};return b?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):(0,a.jsxs)("div",{className:"p-6 max-w-5xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-400 mb-6",children:[(0,a.jsx)(o.default,{href:"/settings",className:"hover:text-white transition-colors",children:"Settings"}),(0,a.jsx)("i",{className:"fas fa-chevron-right text-xs"}),(0,a.jsx)("span",{className:"text-white",children:"Sales Channels"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Sales Channels"}),(0,a.jsx)("p",{className:"text-slate-400 mt-1",children:"Manage where your orders come from"})]}),(0,a.jsxs)(i.Button,{onClick:S,children:[(0,a.jsx)("i",{className:"fas fa-plus mr-2"}),"Add Channel"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(e=>(0,a.jsxs)("div",{className:`bg-slate-800/50 border rounded-xl p-5 transition-all ${e.isActive?"border-slate-700":"border-slate-800 opacity-60"}`,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${e.color}20`},children:(0,a.jsx)("i",{className:`${e.icon} text-xl`,style:{color:e.color}})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:e.name}),e.isDefault&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-emerald-500/20 text-emerald-400 text-xs rounded-full",children:"Default"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:e.code}),(0,a.jsx)("span",{className:"text-slate-600",children:"â€¢"}),(0,a.jsx)("span",{className:"text-xs text-slate-400 capitalize",children:e.type})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>{N(e),O({name:e.name,code:e.code,type:e.type,color:e.color,icon:e.icon,isActive:e.isActive,priority:e.fulfillment?.priority||5,autoProcess:e.fulfillment?.autoProcess||!1}),j(!0)},className:"p-2 text-slate-400 hover:text-white rounded-lg hover:bg-slate-700/50",children:(0,a.jsx)("i",{className:"fas fa-pencil"})}),(0,a.jsx)("button",{onClick:()=>D(e),className:`p-2 rounded-lg hover:bg-slate-700/50 ${e.isDefault||e.stats?.totalOrders>0?"text-slate-600 cursor-not-allowed":"text-slate-400 hover:text-red-400"}`,disabled:e.isDefault||e.stats?.totalOrders>0,children:(0,a.jsx)("i",{className:"fas fa-trash"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3 text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:e.stats?.totalOrders||0}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"Total Orders"})]}),(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3 text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-amber-400",children:e.stats?.pendingOrders||0}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"Pending"})]}),(0,a.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3 text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-emerald-400",children:["$",((e.stats?.totalRevenue||0)/1e3).toFixed(1),"k"]}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"Revenue"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-slate-700",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.integration?.isConnected?(0,a.jsxs)("span",{className:"flex items-center gap-1.5 text-sm text-emerald-400",children:[(0,a.jsx)("i",{className:"fas fa-check-circle"}),"Connected"]}):(0,a.jsxs)("span",{className:"flex items-center gap-1.5 text-sm text-slate-500",children:[(0,a.jsx)("i",{className:"fas fa-unlink"}),"Not Connected"]})}),!e.isDefault&&(0,a.jsx)("button",{onClick:()=>z(e),className:"text-sm text-slate-400 hover:text-emerald-400",children:"Set as Default"})]})]},e.id))}),0===p.length&&(0,a.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-12 text-center",children:[(0,a.jsx)("i",{className:"fas fa-store text-4xl text-slate-600 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Sales Channels"}),(0,a.jsx)("p",{className:"text-slate-400 mb-4",children:"Add channels to organize your orders by source"}),(0,a.jsxs)(i.Button,{onClick:S,children:[(0,a.jsx)("i",{className:"fas fa-plus mr-2"}),"Add First Channel"]})]}),v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-slate-900 border border-slate-700 rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-700 sticky top-0 bg-slate-900",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:y?"Edit Channel":"Add Sales Channel"}),(0,a.jsx)("button",{onClick:()=>j(!1),className:"text-slate-400 hover:text-white",children:(0,a.jsx)("i",{className:"fas fa-times"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Channel Name *"}),(0,a.jsx)("input",{type:"text",value:A.name,onChange:e=>{O({...A,name:e.target.value,code:y?A.code:k(e.target.value)})},placeholder:"e.g., Amazon FBA, Wholesale",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Channel Code"}),(0,a.jsx)("input",{type:"text",value:A.code,onChange:e=>O({...A,code:k(e.target.value)}),placeholder:"auto-generated",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-3 text-white font-mono focus:outline-none focus:border-emerald-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Channel Type"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:c.map(e=>(0,a.jsxs)("button",{onClick:()=>O({...A,type:e.value}),className:`p-3 rounded-lg border text-center transition-all ${A.type===e.value?"border-emerald-500 bg-emerald-500/10":"border-slate-700 hover:border-slate-600"}`,children:[(0,a.jsx)("i",{className:`fas ${e.icon} text-lg mb-1 ${A.type===e.value?"text-emerald-400":"text-slate-400"}`}),(0,a.jsx)("div",{className:"text-xs text-slate-300",children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Color"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map(e=>(0,a.jsx)("button",{onClick:()=>O({...A,color:e.value}),className:`w-8 h-8 rounded-lg transition-all ${A.color===e.value?"ring-2 ring-white ring-offset-2 ring-offset-slate-900":""}`,style:{backgroundColor:e.value},title:e.name},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Icon"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(e=>(0,a.jsx)("button",{onClick:()=>O({...A,icon:e}),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${A.icon===e?"bg-emerald-500/20 text-emerald-400":"bg-slate-800 text-slate-400 hover:text-white"}`,children:(0,a.jsx)("i",{className:e})},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Fulfillment Priority (1 = highest)"}),(0,a.jsx)("input",{type:"number",min:1,max:99,value:A.priority,onChange:e=>O({...A,priority:parseInt(e.target.value)||5}),className:"w-24 bg-slate-800 border border-slate-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white font-medium",children:"Auto-Process Orders"}),(0,a.jsx)("div",{className:"text-sm text-slate-400",children:"Automatically start fulfillment"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:A.autoProcess,onChange:e=>O({...A,autoProcess:e.target.checked}),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-slate-700 peer-checked:bg-emerald-500 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-700 sticky bottom-0 bg-slate-900",children:[(0,a.jsx)(i.Button,{variant:"secondary",onClick:()=>j(!1),children:"Cancel"}),(0,a.jsx)(i.Button,{onClick:P,disabled:w,children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fas fa-save mr-2"}),y?"Update":"Create"," Channel"]})})]})]})})]})}e.s(["default",()=>f])}]);