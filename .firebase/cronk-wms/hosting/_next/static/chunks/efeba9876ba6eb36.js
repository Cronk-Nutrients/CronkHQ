(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75148,e=>{"use strict";var s=e.i(43476),t=e.i(22016);function l({items:e}){return(0,s.jsx)("nav",{className:"flex items-center gap-2 text-sm text-slate-400 mb-4",children:e.map((e,l)=>(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[l>0&&(0,s.jsx)("i",{className:"fas fa-chevron-right text-xs text-slate-600"}),e.href?(0,s.jsx)(t.default,{href:e.href,className:"hover:text-white transition-colors",children:e.label}):(0,s.jsx)("span",{className:"text-white",children:e.label})]},l))})}e.s(["Breadcrumb",()=>l])},99493,e=>{"use strict";var s=e.i(43476),t=e.i(71645),l=e.i(18566),a=e.i(73146),r=e.i(80809),d=e.i(29618);e.i(59802);var i=e.i(19016),n=e.i(92470),c=e.i(63207);function x({bundle:e,onClick:l,onEdit:r,onDelete:d}){let{state:i}=(0,a.useApp)(),n=e=>i.inventory.filter(s=>s.productId===e).reduce((e,s)=>e+s.quantity,0),x=(0,t.useMemo)(()=>{let s=e.components.reduce((e,s)=>{let t=i.products.find(e=>e.id===s.productId);return e+(t?.cost.rolling||0)*s.quantity},0),t=e.prices.msrp>0?(e.prices.msrp-s)/e.prices.msrp*100:0,l=e.components.length>0?Math.min(...e.components.map(e=>Math.floor(n(e.productId)/e.quantity))):0,a="";if(e.components.length>0){let s=1/0;e.components.forEach(e=>{let t=Math.floor(n(e.productId)/e.quantity);t<s&&(s=t,a=e.productName)})}return{cost:s,margin:t,availableQty:l,limitingComponent:a}},[e,i.products,i.inventory]),o=0===x.availableQty?{text:"Out of Stock",color:"red"}:x.availableQty<=10?{text:"Limited",color:"amber"}:{text:"In Stock",color:"emerald"};return(0,s.jsxs)("div",{onClick:l,className:`bg-slate-800/50 backdrop-blur border rounded-xl overflow-hidden cursor-pointer transition-all hover:border-slate-600 group ${"emerald"===o.color?"border-emerald-500/30":"amber"===o.color?"border-amber-500/30":"border-red-500/30"} ${"red"===o.color?"opacity-80":""}`,children:[(0,s.jsx)("div",{className:`px-5 py-4 border-b border-slate-700/50 ${"emerald"===o.color?"bg-emerald-500/5":"amber"===o.color?"bg-amber-500/5":"bg-red-500/5"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-amber-500/20 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fas fa-layer-group text-amber-400 text-xl"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-slate-400",children:["SKU: ",e.sku]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(()=>{switch(e.type){case"virtual":return(0,s.jsxs)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full border border-blue-500/20",children:[(0,s.jsx)("i",{className:"fas fa-cloud mr-1"}),"Virtual"]});case"physical":return(0,s.jsxs)("span",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-400 text-xs rounded-full border border-emerald-500/20",children:[(0,s.jsx)("i",{className:"fas fa-box mr-1"}),"Physical"]});case"fba_kit":return(0,s.jsxs)("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded-full border border-orange-500/20",children:[(0,s.jsx)("i",{className:"fab fa-amazon mr-1"}),"FBA Kit"]})}})(),(0,s.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${"emerald"===o.color?"bg-emerald-500/10 text-emerald-400":"amber"===o.color?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"}`,children:o.text})]})]})}),(0,s.jsxs)("div",{className:"p-5 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-slate-400",children:[(0,s.jsx)("i",{className:"fas fa-cubes mr-2"}),e.components.length," component",1!==e.components.length?"s":""]}),(0,s.jsxs)("span",{className:`font-medium ${x.availableQty>10?"text-emerald-400":x.availableQty>0?"text-amber-400":"text-red-400"}`,children:["Can build: ",(0,c.formatNumber)(x.availableQty)]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[e.components.slice(0,2).map((e,t)=>{let l=n(e.productId)>=e.quantity;return(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,s.jsx)("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${l?"bg-emerald-400":"bg-red-400"}`}),(0,s.jsx)("span",{className:"text-slate-300 truncate",children:e.productName})]}),(0,s.jsxs)("span",{className:"text-slate-400 flex-shrink-0 ml-2",children:["x",e.quantity]})]},t)}),e.components.length>2&&(0,s.jsxs)("div",{className:"text-xs text-slate-500",children:["+",e.components.length-2," more"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-slate-700/50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Price"}),(0,s.jsx)("div",{className:"text-lg font-bold text-white",children:(0,c.formatCurrency)(e.prices.msrp)})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Margin"}),(0,s.jsxs)("div",{className:`text-lg font-bold ${x.margin>=50?"text-emerald-400":x.margin>=30?"text-amber-400":"text-red-400"}`,children:[x.margin.toFixed(1),"%"]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsxs)("button",{onClick:r,className:"flex-1 px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm transition-colors",children:[(0,s.jsx)("i",{className:"fas fa-edit mr-1"}),"Edit"]}),(0,s.jsx)("button",{onClick:d,className:"px-3 py-2 bg-slate-700 hover:bg-red-500/20 text-slate-300 hover:text-red-400 rounded-lg text-sm transition-colors",children:(0,s.jsx)("i",{className:"fas fa-trash"})})]})]})]})}var o=e.i(75148);function m(){let e=(0,l.useRouter)(),{state:m,dispatch:u}=(0,a.useApp)(),{success:h}=(0,r.useToast)(),b=(0,d.useConfirm)(),[p,j]=(0,t.useState)(!1),[f,N]=(0,t.useState)(!1),[v,g]=(0,t.useState)(null),[y,w]=(0,t.useState)(null),[k,C]=(0,t.useState)(""),[S,B]=(0,t.useState)(""),I=e=>m.inventory.filter(s=>s.productId===e).reduce((e,s)=>e+s.quantity,0),A=e=>{if(!e.components||0===e.components.length)return{available:0,limitingItem:""};let s=1/0,t="";return e.components.forEach(e=>{let l=Math.floor(I(e.productId)/e.quantity);l<s&&(s=l,t=e.productName)}),{available:s===1/0?0:s,limitingItem:t}},q=(0,t.useMemo)(()=>m.bundles.filter(e=>{let s=e.name.toLowerCase().includes(k.toLowerCase())||e.sku.toLowerCase().includes(k.toLowerCase()),t=!S||e.type===S;return s&&t}),[m.bundles,k,S]),M=(0,t.useMemo)(()=>{let e=m.bundles.length,s=m.bundles.filter(e=>A(e).available>10).length,t=m.bundles.filter(e=>{let s=A(e);return s.available>0&&s.available<=10}).length;return{totalBundles:e,fullyAvailable:s,limitedStock:t,outOfStock:m.bundles.filter(e=>0===A(e).available).length,potentialValue:m.bundles.reduce((e,s)=>e+A(s).available*s.prices.msrp,0)}},[m.bundles,m.inventory]),P=(0,t.useMemo)(()=>{let e={};return m.bundles.forEach(s=>{(s.components||[]).forEach(t=>{if(!e[t.productId]){let s=m.products.find(e=>e.id===t.productId);e[t.productId]={productId:t.productId,productName:t.productName,sku:s?.sku||"Unknown",bundles:[],totalQty:0,availableStock:I(t.productId)}}e[t.productId].bundles.push({name:s.name,qty:t.quantity}),e[t.productId].totalQty+=t.quantity})}),Object.values(e)},[m.bundles,m.products,m.inventory]),T=async(e,s)=>{s&&s.stopPropagation(),await b({title:"Delete Bundle",message:`Are you sure you want to delete "${e.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",destructive:!0})&&(u({type:"DELETE_BUNDLE",payload:e.id}),h(`Bundle "${e.name}" deleted`))},$=(e,s)=>{s&&s.stopPropagation(),g(e),j(!0),N(!1)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(o.Breadcrumb,{items:[{label:"Inventory",href:"/inventory"},{label:"Bundles"}]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Bundles"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Product bundles and kits with component tracking"})]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-plus text-sm"}),"Create Bundle"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,s.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-amber-500/30 rounded-xl p-4",style:{boxShadow:"0 0 20px rgba(251, 191, 36, 0.15)"},children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fas fa-layer-group text-amber-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:M.totalBundles}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Total Bundles"})]})]})}),(0,s.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-emerald-500/30 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fas fa-check-circle text-emerald-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-emerald-400",children:M.fullyAvailable}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Fully Available"})]})]})}),(0,s.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-amber-500/30 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fas fa-exclamation-triangle text-amber-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:M.limitedStock}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Limited Stock"})]})]})}),(0,s.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-red-500/30 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fas fa-times-circle text-red-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-400",children:M.outOfStock}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Out of Stock"})]})]})}),(0,s.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-700/50 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fas fa-dollar-sign text-slate-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-white",children:(0,c.formatCurrency)(M.potentialValue)}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Potential Value"})]})]})})]}),(0,s.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fas fa-cloud text-blue-400 text-sm"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-white",children:"Virtual Bundle"}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Pick components separately, assemble at pack"})]})]}),(0,s.jsx)("div",{className:"h-8 w-px bg-slate-700"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fas fa-box text-emerald-400 text-sm"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-white",children:"Physical Bundle"}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Pre-assembled, has own SKU and inventory"})]})]}),(0,s.jsx)("div",{className:"h-8 w-px bg-slate-700"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fab fa-amazon text-orange-400 text-sm"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-white",children:"FBA Kit"}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Pre-kitted and shipped to Amazon FBA"})]})]})]})}),(0,s.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search bundles by name or SKU...",value:k,onChange:e=>C(e.target.value),className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-400 focus:outline-none focus:border-emerald-500/50"})]}),(0,s.jsxs)("select",{value:S,onChange:e=>B(e.target.value),className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:[(0,s.jsx)("option",{value:"",children:"All Types"}),(0,s.jsx)("option",{value:"virtual",children:"Virtual"}),(0,s.jsx)("option",{value:"physical",children:"Physical"}),(0,s.jsx)("option",{value:"fba_kit",children:"FBA Kit"})]})]})}),q.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(e=>(0,s.jsx)(x,{bundle:e,onClick:()=>{w(e),N(!0)},onEdit:s=>$(e,s),onDelete:s=>T(e,s)},e.id))}):(0,s.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-12 text-center",children:[(0,s.jsx)("i",{className:"fas fa-layer-group text-4xl text-slate-600 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No bundles found"}),(0,s.jsx)("p",{className:"text-slate-400 mb-4",children:k||S?"Try adjusting your search or filters":"Create your first bundle to get started"}),!k&&!S&&(0,s.jsxs)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg transition-colors",children:[(0,s.jsx)("i",{className:"fas fa-plus mr-2"}),"Create Bundle"]})]}),P.length>0&&(0,s.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,s.jsx)("div",{className:"px-5 py-4 border-b border-slate-700/50 flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-semibold text-white",children:"Component Usage Across Bundles"}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Which products are used in which bundles"})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-slate-800/50 border-b border-slate-700/50",children:(0,s.jsxs)("tr",{className:"text-left text-xs text-slate-400 uppercase tracking-wider",children:[(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Component"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Used In"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Total Needed"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium text-right",children:"Available Stock"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium text-right",children:"Can Build"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:P.slice(0,10).map(t=>{let l=Math.min(...t.bundles.map(e=>Math.floor(t.availableStock/e.qty)));return(0,s.jsxs)("tr",{className:"hover:bg-slate-700/30 transition-colors cursor-pointer",onClick:()=>e.push(`/inventory/${t.productId}`),children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-emerald-500/20 rounded flex items-center justify-center",children:(0,s.jsx)("i",{className:"fas fa-flask text-emerald-400 text-xs"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-white",children:t.productName}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:t.sku})]})]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[t.bundles.slice(0,3).map((e,t)=>(0,s.jsxs)("span",{className:"px-2 py-0.5 bg-slate-700/50 text-slate-300 text-xs rounded",children:[e.name," (x",e.qty,")"]},t)),t.bundles.length>3&&(0,s.jsxs)("span",{className:"px-2 py-0.5 text-slate-500 text-xs",children:["+",t.bundles.length-3," more"]})]})}),(0,s.jsxs)("td",{className:"px-4 py-3 text-center text-sm text-slate-400",children:[t.totalQty," per set"]}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(0,s.jsx)("span",{className:`text-sm ${t.availableStock>0?"text-white":"text-red-400"}`,children:(0,c.formatNumber)(t.availableStock)})}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(0,s.jsx)("span",{className:`text-sm font-medium ${l>10?"text-emerald-400":l>0?"text-amber-400":"text-red-400"}`,children:(0,c.formatNumber)(l)})})]},t.productId)})})]})}),P.length>10&&(0,s.jsx)("div",{className:"px-4 py-3 border-t border-slate-700/50 text-center",children:(0,s.jsxs)("span",{className:"text-sm text-slate-400",children:["Showing 10 of ",P.length," components"]})})]}),(0,s.jsx)(i.BundleModal,{isOpen:p,onClose:()=>{j(!1),g(null)},editBundle:v}),(0,s.jsx)(n.BundleDetailModal,{isOpen:f,onClose:()=>{N(!1),w(null)},bundle:y,onEdit:()=>{y&&$(y)}})]})}e.s(["default",()=>m],99493)}]);