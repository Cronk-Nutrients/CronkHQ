(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19608,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(22016),r=e.i(73146),i=e.i(80809),n=e.i(29618),o=e.i(46040),c=e.i(6465),d=e.i(44927),x=e.i(90300),m=e.i(92693),u=e.i(76525),h=e.i(49318);let p={name:"name","item name":"name","product name":"name",barcode:"barcode",upc:"barcode",sku:"sku","item #":"sku","item number":"sku",category:"category",type:"category",description:"description","sale price":"salePrice","selling price":"salePrice",price:"salePrice","purchase cost":"cost",cost:"cost","unit cost":"cost",cogs:"cost","quantity on hand":"quantity","qty on hand":"quantity",quantity:"quantity",qty:"quantity",stock:"quantity",available:"quantity",location:"location",warehouse:"location",bin:"binLocation","bin location":"binLocation","reorder point":"reorderPoint","reorder level":"reorderPoint","minimum stock":"reorderPoint",vendor:"vendor","vendor name":"vendor",supplier:"vendor","supplier name":"vendor","default vendor":"vendor","vendor sku":"vendorSku","supplier sku":"vendorSku","vendor part #":"vendorSku",manufacturer:"manufacturer","manufacturer sku":"manufacturerSku",weight:"weight","weight (lbs)":"weight","weight (oz)":"weight","item weight":"weight",notes:"notes"};function b({isOpen:e,onClose:a}){let l,r,n,c,d,{locations:x}=(0,h.useLocations)(),{suppliers:m,service:b,isDemo:g}=(0,h.useSuppliers)(),{products:j,service:f}=(0,h.useProducts)(),{service:N}=(0,h.useInventory)(),{success:v,error:y,warning:w}=(0,i.useToast)(),k=(0,s.useRef)(null),[C,S]=(0,s.useState)("upload"),[P,L]=(0,s.useState)(""),[I,A]=(0,s.useState)([]),[$,F]=(0,s.useState)(""),[_,M]=(0,s.useState)(!0),[T,D]=(0,s.useState)(!0),[z,R]=(0,s.useState)(!1),[q,O]=(0,s.useState)(0),E=x.find(e=>"warehouse"===e.type)||x[0];!$&&E&&F(E.id);let U=()=>{S("upload"),L(""),A([]);let e=x.find(e=>"warehouse"===e.type)||x[0];F(e?.id||""),M(!0),D(!0),O(0),k.current&&(k.current.value="")},V=e=>{if(!e.name.endsWith(".csv"))return void y("Please select a CSV file");L(e.name);let t=new FileReader;t.onload=e=>{let t=(e=>{let t=e.split(/\r?\n/).filter(e=>e.trim());if(0===t.length)return[];let s=t[0].split(",").map(e=>e.trim().replace(/^"|"$/g,"").toLowerCase()),a=[];for(let e=1;e<t.length;e++){let l=[],r="",i=!1;for(let s of t[e])'"'===s?i=!i:","!==s||i?r+=s:(l.push(r.trim().replace(/^"|"$/g,"")),r="");l.push(r.trim().replace(/^"|"$/g,""));let n={};s.forEach((e,t)=>{n[e]=l[t]||""}),a.push(n)}return a})(e.target?.result);if(0===t.length)return void y("Could not parse CSV file or file is empty");let s=t.map(e=>{let t,s,a;return s=(t=t=>{for(let[s,a]of Object.entries(p))if(a===t&&e[s])return e[s];return""})("name"),((a=t("sku"))||!s||(a=t("barcode")||s.substring(0,20).replace(/\s+/g,"-").toUpperCase()),s)?{name:s,sku:a,barcode:t("barcode")||void 0,category:t("category")||"supply",description:t("description")||void 0,salePrice:parseFloat(t("salePrice"))||void 0,cost:parseFloat(t("cost"))||void 0,quantity:parseInt(t("quantity"))||0,location:t("location")||void 0,binLocation:t("binLocation")||void 0,reorderPoint:parseInt(t("reorderPoint"))||void 0,vendor:t("vendor")||void 0,vendorSku:t("vendorSku")||void 0,weight:parseFloat(t("weight"))||void 0,notes:t("notes")||void 0}:null}).filter(e=>null!==e);0===s.length?y("No valid products found. Make sure your CSV has Name and SKU columns."):(A(s),S("preview"))},t.readAsText(e)},B=(0,s.useCallback)(e=>{e.preventDefault(),R(!1);let t=e.dataTransfer.files[0];t&&V(t)},[]),K=(0,s.useCallback)(e=>{e.preventDefault(),R(!0)},[]),H=(0,s.useCallback)(()=>{R(!1)},[]),W=async()=>{if(f){if(g)return void y("Import is not available in demo mode");S("importing"),O(0);try{let e=new Set(j.map(e=>e.sku.toLowerCase())),t=new Map(m.map(e=>[e.name.toLowerCase(),e])),s=new Map,l=0,r=0,i=0,n=0,o=[],c=[],d=[],x=I.length;for(let a=0;a<I.length;a++){let m=I[a];if(O(Math.round((a+1)/x*50)),e.has(m.sku.toLowerCase())){r++;continue}let u=(m.category||"supply").toLowerCase(),h="supply";u.includes("nutrient")||u.includes("supplement")?h="nutrient":u.includes("packaging")||u.includes("box")||u.includes("bottle")?h="packaging":u.includes("label")&&(h="label");let p=m.salePrice||0,g={name:m.name,sku:m.sku.toUpperCase(),barcode:m.barcode,category:h,weight:m.weight,prices:{msrp:p,shopify:p,amazon:p,wholesale:.6*p,distributor:.45*p},costs:{base:m.cost||0,amazonPrep:0,shopify:0},reorderPoint:m.reorderPoint||50,isActive:!0};o.push(g),e.add(m.sku.toLowerCase()),l++,_&&$&&void 0!==m.quantity&&(d.push({productIndex:o.length-1,quantity:m.quantity,binLocation:m.binLocation}),i++),T&&m.vendor&&b&&!t.get(m.vendor.toLowerCase())&&!s.has(m.vendor.toLowerCase())&&(c.push({name:m.vendor,currency:"USD"}),s.set(m.vendor.toLowerCase(),`pending-${c.length-1}`),n++)}O(60),c.length>0&&b&&await b.batchCreate(c),O(70);let u=await f.batchCreate(o);if(O(85),d.length>0&&N){let e=[];for(let t of d){let s=u[t.productIndex];e.push({productId:s,locationId:$,quantity:t.quantity,binLocation:t.binLocation||""})}await N.batchCreate(e)}O(100);let h=[];l>0&&h.push(`${l} products`),i>0&&h.push(`${i} inventory records`),n>0&&h.push(`${n} new vendors`),h.length>0&&v(`Successfully imported ${h.join(", ")}`),r>0&&w(`Skipped ${r} products (duplicate SKUs)`),U(),a()}catch(e){console.error("Import error:",e),y("Failed to import products"),S("preview")}}},Q=()=>{U(),a()},X=I.filter(e=>!j.some(t=>t.sku.toLowerCase()===e.sku.toLowerCase())).length;return(0,t.jsxs)(o.Modal,{open:e,onClose:"importing"===C?()=>{}:Q,title:"Import from inFlow",subtitle:"Import products, inventory, and vendors from inFlow Inventory",size:"lg",footer:"preview"===C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.Button,{variant:"secondary",onClick:()=>S("upload"),children:[(0,t.jsx)("i",{className:"fas fa-arrow-left mr-2"}),"Back"]}),(0,t.jsxs)(u.Button,{onClick:W,disabled:g||0===X,children:[(0,t.jsx)("i",{className:"fas fa-file-import mr-2"}),"Import ",X," Products"]})]}):"upload"===C?(0,t.jsx)(u.Button,{variant:"secondary",onClick:Q,children:"Cancel"}):void 0,children:["upload"===C&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30 rounded-xl p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)("i",{className:"fas fa-exchange-alt text-blue-400 text-xl"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-white font-semibold",children:"inFlow Import Tool"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Directly import product data exported from inFlow Inventory"})]})]})}),(0,t.jsxs)("div",{onDrop:B,onDragOver:K,onDragLeave:H,onClick:()=>k.current?.click(),className:`border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors ${z?"border-blue-500 bg-blue-500/10":"border-slate-700 hover:border-slate-600"}`,children:[(0,t.jsx)("input",{ref:k,type:"file",accept:".csv",onChange:e=>{let t=e.target.files?.[0];t&&V(t)},className:"hidden"}),(0,t.jsx)("i",{className:"fas fa-file-csv text-4xl text-slate-500 mb-4"}),(0,t.jsx)("p",{className:"text-white font-medium mb-1",children:"Drop your inFlow CSV export here"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"or click to browse"})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:"How to Export from inFlow"}),(0,t.jsxs)("ol",{className:"text-sm text-slate-400 space-y-1 list-decimal list-inside",children:[(0,t.jsxs)("li",{children:["In inFlow, go to ",(0,t.jsx)("span",{className:"text-slate-300",children:"Main Menu → Products"})]}),(0,t.jsxs)("li",{children:["Click ",(0,t.jsx)("span",{className:"text-slate-300",children:"Export"})," button"]}),(0,t.jsxs)("li",{children:["Choose ",(0,t.jsx)("span",{className:"text-slate-300",children:"CSV format"})]}),(0,t.jsx)("li",{children:"Include: Name, Barcode, Category, Price, Cost, Quantity, Vendor"})]})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:"Supported inFlow Columns"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:["Name","Barcode","Category","Sale Price","Purchase Cost","Quantity on Hand","Location","Vendor","Vendor SKU","Reorder Point"].map(e=>(0,t.jsx)("span",{className:"px-2 py-0.5 bg-slate-700 text-slate-300 text-xs rounded",children:e},e))})]}),g&&(0,t.jsx)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-amber-400 text-sm",children:[(0,t.jsx)("i",{className:"fas fa-info-circle"}),(0,t.jsx)("span",{children:"Import is disabled in demo mode. Sign in to import products."})]})})]}),"preview"===C&&(l=new Set(j.map(e=>e.sku.toLowerCase())),r=I.filter(e=>l.has(e.sku.toLowerCase())),n=I.filter(e=>!l.has(e.sku.toLowerCase())),c=I.filter(e=>e.quantity&&e.quantity>0),d=I.filter(e=>e.vendor),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,t.jsxs)("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-3 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-emerald-400",children:n.length}),(0,t.jsx)("div",{className:"text-xs text-slate-400",children:"New Products"})]}),(0,t.jsxs)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:r.length}),(0,t.jsx)("div",{className:"text-xs text-slate-400",children:"Duplicates"})]}),(0,t.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:c.length}),(0,t.jsx)("div",{className:"text-xs text-slate-400",children:"With Stock"})]}),(0,t.jsxs)("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:d.length}),(0,t.jsx)("div",{className:"text-xs text-slate-400",children:"With Vendors"})]})]}),(0,t.jsxs)("div",{className:"border border-slate-700 rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"max-h-48 overflow-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-slate-800 sticky top-0",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 py-2 text-left text-slate-400 font-medium",children:"SKU"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-slate-400 font-medium",children:"Name"}),(0,t.jsx)("th",{className:"px-3 py-2 text-right text-slate-400 font-medium",children:"Qty"}),(0,t.jsx)("th",{className:"px-3 py-2 text-right text-slate-400 font-medium",children:"Cost"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-slate-400 font-medium",children:"Vendor"}),(0,t.jsx)("th",{className:"px-3 py-2 text-center text-slate-400 font-medium",children:"Status"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:I.slice(0,50).map((e,s)=>{let a=l.has(e.sku.toLowerCase());return(0,t.jsxs)("tr",{className:`${a?"bg-amber-500/5":"bg-slate-800/30"}`,children:[(0,t.jsx)("td",{className:"px-3 py-2 text-white font-mono text-xs",children:e.sku}),(0,t.jsx)("td",{className:"px-3 py-2 text-white truncate max-w-[200px]",children:e.name}),(0,t.jsx)("td",{className:"px-3 py-2 text-right text-slate-300",children:e.quantity||"-"}),(0,t.jsx)("td",{className:"px-3 py-2 text-right text-slate-300",children:e.cost?`$${e.cost.toFixed(2)}`:"-"}),(0,t.jsx)("td",{className:"px-3 py-2 text-slate-300 truncate max-w-[120px]",children:e.vendor||"-"}),(0,t.jsx)("td",{className:"px-3 py-2 text-center",children:a?(0,t.jsx)("span",{className:"px-2 py-0.5 bg-amber-500/20 text-amber-400 text-xs rounded",children:"Skip"}):(0,t.jsx)("span",{className:"px-2 py-0.5 bg-emerald-500/20 text-emerald-400 text-xs rounded",children:"Import"})})]},s)})})]})}),I.length>50&&(0,t.jsxs)("div",{className:"px-3 py-2 bg-slate-800/50 text-center text-sm text-slate-400",children:["... and ",I.length-50," more products"]})]}),(0,t.jsxs)("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-white mb-3",children:"Import Settings"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-slate-400 mb-1",children:"Import Inventory To"}),(0,t.jsxs)("select",{value:$,onChange:e=>F(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-white text-sm",children:[(0,t.jsx)("option",{value:"",children:"-- Don't import inventory --"}),x.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.type,")"]},e.id))]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:_,onChange:e=>M(e.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-emerald-500"}),(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Create inventory records"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:T,onChange:e=>D(e.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-emerald-500"}),(0,t.jsx)("span",{className:"text-sm text-slate-300",children:"Auto-create vendors"})]})]})]})]})]})),"importing"===C&&(0,t.jsxs)("div",{className:"py-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-500/20 flex items-center justify-center",children:(0,t.jsx)("i",{className:"fas fa-spinner fa-spin text-emerald-400 text-2xl"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Importing Products..."}),(0,t.jsx)("p",{className:"text-slate-400 mb-4",children:"Please wait while we import your data"}),(0,t.jsx)("div",{className:"w-full bg-slate-800 rounded-full h-3 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-blue-500 transition-all duration-300",style:{width:`${q}%`}})}),(0,t.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:[q,"% complete"]})]})]})}var g=e.i(5050),j=e.i(63207),f=e.i(55436),N=e.i(88081),v=e.i(88844),y=e.i(46897),w=e.i(87316),k=e.i(1928),C=e.i(78583),S=e.i(37727),P=e.i(72520),L=e.i(69638),I=e.i(3116),A=e.i(78894);let $=(0,e.i(75254).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function F({onClose:e,embedded:a=!1}){let{state:i}=(0,r.useApp)(),[n,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(null),[x,m]=(0,s.useState)(!1),h=()=>{if(!n.trim())return;let e=n.trim().toLowerCase(),t=i.serialNumbers.find(t=>t.serial.toLowerCase()===e||t.serial.toLowerCase().includes(e));t?(d(t),m(!1)):(d(null),m(!0))},p=e=>{let s={in_stock:{bg:"bg-emerald-500/20",text:"text-emerald-400",icon:L.CheckCircle,label:"In Stock"},reserved:{bg:"bg-amber-500/20",text:"text-amber-400",icon:I.Clock,label:"Reserved"},sold:{bg:"bg-blue-500/20",text:"text-blue-400",icon:k.ShoppingCart,label:"Sold"},returned:{bg:"bg-purple-500/20",text:"text-purple-400",icon:$,label:"Returned"},damaged:{bg:"bg-red-500/20",text:"text-red-400",icon:A.AlertTriangle,label:"Damaged"}}[e],a=s.icon;return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${s.bg} ${s.text}`,children:[(0,t.jsx)(a,{className:"w-3 h-3"}),s.label]})},b=(0,s.useMemo)(()=>c?i.serialNumbers.filter(e=>e.productId===c.productId&&e.id!==c.id).slice(0,5):[],[c,i.serialNumbers]),F=(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(f.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,t.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),onKeyDown:e=>"Enter"===e.key&&h(),placeholder:"Enter or scan serial number...",className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-10 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono",autoFocus:!0}),n&&(0,t.jsx)("button",{onClick:()=>{o(""),d(null),m(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white",children:(0,t.jsx)(S.X,{className:"w-4 h-4"})})]}),(0,t.jsxs)(u.Button,{onClick:h,children:[(0,t.jsx)(f.Search,{className:"w-4 h-4"}),"Search"]})]}),x&&(0,t.jsxs)("div",{className:"p-6 bg-slate-800/50 border border-slate-700 rounded-lg text-center",children:[(0,t.jsx)(N.Hash,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),(0,t.jsx)("h3",{className:"text-white font-medium mb-1",children:"Serial Not Found"}),(0,t.jsxs)("p",{className:"text-sm text-slate-400",children:['No serial number matching "',n,'" was found in the system.']})]}),c&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(g.Card,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-purple-500/20 flex items-center justify-center",children:(0,t.jsx)(N.Hash,{className:"w-6 h-6 text-purple-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-mono font-medium text-white",children:c.serial}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:c.productName})]})]}),p(c.status)]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Package,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{className:"text-slate-400",children:"SKU:"}),(0,t.jsx)("span",{className:"font-mono text-white",children:c.sku})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{className:"text-slate-400",children:"Location:"}),(0,t.jsx)("span",{className:"text-white",children:c.locationName})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Calendar,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{className:"text-slate-400",children:"Received:"}),(0,t.jsx)("span",{className:"text-white",children:(0,j.formatDate)(c.receivedAt)})]}),c.soldAt&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(k.ShoppingCart,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{className:"text-slate-400",children:"Sold:"}),(0,t.jsx)("span",{className:"text-white",children:(0,j.formatDate)(c.soldAt)})]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700/50 flex flex-wrap gap-2",children:[(0,t.jsxs)(l.default,{href:`/inventory/${c.productId}`,className:"inline-flex items-center gap-1 text-sm text-emerald-400 hover:text-emerald-300",children:[(0,t.jsx)(v.Package,{className:"w-4 h-4"}),"View Product",(0,t.jsx)(P.ArrowRight,{className:"w-3 h-3"})]}),c.purchaseOrderId&&(0,t.jsxs)(l.default,{href:"/purchase-orders",className:"inline-flex items-center gap-1 text-sm text-blue-400 hover:text-blue-300 ml-4",children:[(0,t.jsx)(C.FileText,{className:"w-4 h-4"}),"View PO",(0,t.jsx)(P.ArrowRight,{className:"w-3 h-3"})]}),c.salesOrderId&&(0,t.jsxs)(l.default,{href:`/orders/${c.salesOrderId}`,className:"inline-flex items-center gap-1 text-sm text-purple-400 hover:text-purple-300 ml-4",children:[(0,t.jsx)(k.ShoppingCart,{className:"w-4 h-4"}),"View Order",(0,t.jsx)(P.ArrowRight,{className:"w-3 h-3"})]})]}),c.notes&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-slate-800/50 rounded-lg",children:[(0,t.jsx)("span",{className:"text-xs text-slate-400 uppercase",children:"Notes"}),(0,t.jsx)("p",{className:"text-sm text-white mt-1",children:c.notes})]})]}),b.length>0&&(0,t.jsxs)(g.Card,{className:"p-4",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-white mb-3",children:["Other Serials for this Product (",i.serialNumbers.filter(e=>e.productId===c.productId).length," total)"]}),(0,t.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,t.jsxs)("button",{onClick:()=>{o(e.serial),d(e)},className:"w-full flex items-center justify-between p-2 bg-slate-800/50 hover:bg-slate-700/50 rounded-lg transition-colors",children:[(0,t.jsx)("span",{className:"font-mono text-sm text-white",children:e.serial}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-slate-400",children:e.locationName}),p(e.status)]})]},e.id))})]})]}),!c&&!x&&(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)(N.Hash,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Serial Number Lookup"}),(0,t.jsx)("p",{className:"text-sm text-slate-400 max-w-md mx-auto",children:"Enter a serial number above to look up its status, location, and history. You can also scan a barcode with the serial number."})]})]});return a?F:(0,t.jsxs)(g.Card,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-medium text-white flex items-center gap-2",children:[(0,t.jsx)(N.Hash,{className:"w-5 h-5 text-purple-400"}),"Serial Number Lookup"]}),e&&(0,t.jsx)("button",{onClick:e,className:"text-slate-400 hover:text-white",children:(0,t.jsx)(S.X,{className:"w-5 h-5"})})]}),F]})}var _=e.i(52008),M=e.i(31278);e.i(91340);var T=e.i(59216),D=e.i(40554);function z(){return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)(M.Loader2,{className:"w-8 h-8 text-emerald-500 animate-spin"})})}function R(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(z,{}),children:(0,t.jsx)(q,{})})}function q(){let e=(0,a.useRouter)(),u=(0,a.useSearchParams)(),{state:h,dispatch:p}=(0,r.useApp)(),{success:g,error:f,warning:v}=(0,i.useToast)(),y=(0,n.useConfirm)(),[w,k]=(0,s.useState)(""),[C,S]=(0,s.useState)("all"),[P,L]=(0,s.useState)("all"),[I,A]=(0,s.useState)("all"),[$,M]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!$){let e=u.get("location"),t=u.get("status"),s=u.get("category"),a=u.get("search");e&&A(e),t&&["in_stock","low_stock","out_of_stock"].includes(t)&&L(t),s&&["nutrients","supplements","ph_adjusters","bundles"].includes(s)&&S(s),a&&k(a),M(!0)}},[u,$]);let z=(0,s.useCallback)(t=>{let s=new URLSearchParams,a=t.location??I,l=t.status??P,r=t.category??C,i=t.search??w;"all"!==a&&s.set("location",a),"all"!==l&&s.set("status",l),"all"!==r&&s.set("category",r),i&&s.set("search",i);let n=s.toString()?`/inventory?${s.toString()}`:"/inventory";e.replace(n,{scroll:!1})},[e,I,P,C,w]),R=(0,s.useMemo)(()=>{let e,t=[];return"all"!==I&&t.push({key:"location",label:"Location",value:(e=h.locations.find(e=>e.id===I),e?.name||I)}),"all"!==P&&t.push({key:"status",label:"Status",value:{in_stock:"In Stock",low_stock:"Low Stock",out_of_stock:"Out of Stock"}[P]}),"all"!==C&&t.push({key:"category",label:"Category",value:{nutrients:"Nutrients",supplements:"Supplements",ph_adjusters:"pH Adjusters",bundles:"Bundles"}[C]}),w&&t.push({key:"search",label:"Search",value:w}),t},[I,P,C,w,h.locations]),[q,O]=(0,s.useState)(new Set),[E,U]=(0,s.useState)(1),[V,B]=(0,s.useState)("list"),[K,H]=(0,s.useState)(!1),[W,Q]=(0,s.useState)(!1),[X,G]=(0,s.useState)(!1),[Y,J]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)(!1),[ea,el]=(0,s.useState)(null),[er,ei]=(0,s.useState)(null),en=e=>{let t=h.inventory.filter(t=>t.productId===e),s=t.reduce((e,t)=>e+t.quantity,0),a={};return t.forEach(e=>{a[e.locationId]=e.quantity}),{total:s,byLocation:a}},eo=e=>{let t=en(e.id);return 0===t.total?"out_of_stock":t.total<=e.reorderPoint?"low_stock":"in_stock"},ec=(e,t)=>0===e?0:(e-t)/e*100,ed=e=>{let t=[ec(e.prices.msrp,e.cost.rolling),ec(e.prices.shopify,e.cost.rolling),ec(e.prices.amazon,e.cost.rolling),ec(e.prices.wholesale,e.cost.rolling)];return t.reduce((e,t)=>e+t,0)/t.length},ex=(0,s.useMemo)(()=>h.products.filter(e=>{if(w){let t=w.toLowerCase();if(!e.name.toLowerCase().includes(t)&&!e.sku.toLowerCase().includes(t)&&!e.skus?.shopify?.toLowerCase().includes(t)&&!e.skus?.amazon?.toLowerCase().includes(t))return!1}if("all"!==C&&e.category!==C)return!1;let t=eo(e);if("all"!==P&&t!==P)return!1;if("all"!==I){let t=en(e.id);if(!t.byLocation[I]||0===t.byLocation[I])return!1}return!0}),[h.products,h.inventory,w,C,P,I]),em=Math.ceil(ex.length/10),eu=ex.slice((E-1)*10,10*E),eh=(0,s.useMemo)(()=>{let e=h.products.length,t=h.inventory.reduce((e,t)=>e+t.quantity,0),s=0,a=0;h.products.forEach(e=>{let t=en(e.id);s+=t.total*e.prices.msrp,a+=t.total*e.cost.rolling});let l=s>0?(s-a)/s*100:0,r=h.products.filter(e=>"low_stock"===eo(e)).length,i=h.products.filter(e=>"out_of_stock"===eo(e)).length;return{totalProducts:e,totalUnits:t,inventoryValue:s,costOnHand:a,overallMargin:l,lowStockCount:r,outOfStockCount:i}},[h.products,h.inventory]),ep=t=>{e.push(`/inventory/${t}`)},eb=(e,t)=>{t.stopPropagation();let s=new Set(q);s.has(e)?s.delete(e):s.add(e),O(s)},eg=(e,t)=>{t.stopPropagation(),el(e),H(!0)},ej=(e,t)=>{t.stopPropagation(),ei(e),Q(!0)},ef=async(e,t)=>{t.stopPropagation(),await y({title:"Delete Product",message:`Are you sure you want to delete "${e.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",destructive:!0})&&(p({type:"DELETE_PRODUCT",payload:e.id}),g(`Product "${e.name}" deleted successfully`))},eN=async()=>{0===q.size||await y({title:"Delete Products",message:`Are you sure you want to delete ${q.size} product(s)? This action cannot be undone.`,confirmText:"Delete All",cancelText:"Cancel",destructive:!0})&&(q.forEach(e=>{p({type:"DELETE_PRODUCT",payload:e})}),g(`${q.size} product(s) deleted successfully`),O(new Set))},ev=()=>{let e=q.size>0?h.products.filter(e=>q.has(e.id)):ex,t=new Blob([["SKU,Name,Category,Weight,Total Stock,MSRP,Shopify Price,Amazon Price,Wholesale Price,Rolling Cost,Fixed Cost",...e.map(e=>{let t=en(e.id);return[e.sku,`"${e.name}"`,e.category,e.weight.value+" "+e.weight.unit,t.total,e.prices.msrp,e.prices.shopify,e.prices.amazon,e.prices.wholesale,e.cost.rolling,e.cost.fixed].join(",")})].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`inventory-export-${new Date().toISOString().split("T")[0]}.csv`,a.click(),URL.revokeObjectURL(s),g(`Exported ${e.length} product(s) to CSV`)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Inventory"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Manage products, pricing, and stock levels"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:()=>ee(!0),className:"px-4 py-2 bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/30 text-purple-400 rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)(N.Hash,{className:"w-4 h-4"}),"Serial Lookup"]}),(0,t.jsxs)(l.default,{href:"/inventory/lots",className:"px-4 py-2 bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/30 text-purple-400 rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)(_.Layers,{className:"w-4 h-4"}),"Lot Inventory"]}),(0,t.jsxs)("button",{onClick:ev,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-download text-sm"}),"Export"]}),(0,t.jsxs)(l.default,{href:"/inventory/counts",className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-clipboard-check text-sm"}),"Count Stock"]}),(0,t.jsxs)(l.default,{href:"/inventory/transfers",className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-exchange-alt text-sm"}),"Transfers"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>es(!et),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-upload text-sm"}),"Import",(0,t.jsx)("i",{className:"fas fa-chevron-down text-xs"})]}),et&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>es(!1)}),(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[(0,t.jsxs)("button",{onClick:()=>{G(!0),es(!1)},className:"w-full px-4 py-3 text-left text-slate-300 hover:bg-slate-700 transition-colors flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fas fa-file-csv text-emerald-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"Import CSV"}),(0,t.jsx)("div",{className:"text-xs text-slate-400",children:"Generic CSV format"})]})]}),(0,t.jsxs)("button",{onClick:()=>{J(!0),es(!1)},className:"w-full px-4 py-3 text-left text-slate-300 hover:bg-slate-700 transition-colors flex items-center gap-3 border-t border-slate-700",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"fas fa-exchange-alt text-blue-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-white",children:"Import from inFlow"}),(0,t.jsx)("div",{className:"text-xs text-slate-400",children:"inFlow Inventory export"})]})]})]})]})]}),(0,t.jsxs)("button",{onClick:()=>H(!0),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-plus text-sm"}),"Add Product"]})]})]}),R.length>0&&(0,t.jsx)(c.ActiveFilters,{filters:R,onRemove:e=>{"location"===e?(A("all"),z({location:"all"})):"status"===e?(L("all"),z({status:"all"})):"category"===e?(S("all"),z({category:"all"})):"search"===e&&(k(""),z({search:""}))},onClearAll:()=>{A("all"),L("all"),S("all"),k(""),e.replace("/inventory",{scroll:!1})}}),(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,t.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Total Products"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:eh.totalProducts}),(0,t.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Active SKUs"})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,t.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Total Units"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:(0,j.formatNumber)(eh.totalUnits)}),(0,t.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Across all locations"})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,t.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Inventory Value"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:(0,j.formatCurrency)(eh.inventoryValue)}),(0,t.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"At MSRP"})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,t.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Cost on Hand"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-emerald-400",children:(0,j.formatCurrency)(eh.costOnHand)}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[eh.overallMargin.toFixed(1),"% margin"]})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,t.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Low Stock Items"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:eh.lowStockCount}),(0,t.jsxs)("div",{className:"text-xs text-red-400 mt-1",children:[eh.outOfStockCount," out of stock"]})]})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by SKU, name, or barcode...",value:w,onChange:e=>{k(e.target.value),U(1)},onBlur:()=>{$&&z({search:w})},onKeyDown:e=>{"Enter"===e.key&&$&&z({search:w})},className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-400 focus:outline-none focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/50"})]}),(0,t.jsxs)("select",{value:C,onChange:e=>{let t=e.target.value;S(t),U(1),$&&z({category:t})},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:[(0,t.jsx)("option",{value:"all",children:"All Categories"}),(0,t.jsx)("option",{value:"nutrients",children:"Nutrients"}),(0,t.jsx)("option",{value:"supplements",children:"Supplements"}),(0,t.jsx)("option",{value:"ph_adjusters",children:"pH Adjusters"}),(0,t.jsx)("option",{value:"bundles",children:"Bundles"})]}),(0,t.jsxs)("select",{value:I,onChange:e=>{let t=e.target.value;A(t),U(1),$&&z({location:t})},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:[(0,t.jsx)("option",{value:"all",children:"All Locations"}),h.locations.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)("select",{value:P,onChange:e=>{let t=e.target.value;L(t),U(1),$&&z({status:t})},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:[(0,t.jsx)("option",{value:"all",children:"All Stock Levels"}),(0,t.jsx)("option",{value:"in_stock",children:"In Stock"}),(0,t.jsx)("option",{value:"low_stock",children:"Low Stock"}),(0,t.jsx)("option",{value:"out_of_stock",children:"Out of Stock"})]}),(0,t.jsxs)("div",{className:"flex items-center bg-slate-800/50 border border-slate-700 rounded-lg p-1",children:[(0,t.jsx)("button",{onClick:()=>B("list"),className:`px-3 py-1.5 rounded-md text-sm ${"list"===V?"bg-emerald-500/20 text-emerald-400":"text-slate-400 hover:text-white"}`,children:(0,t.jsx)("i",{className:"fas fa-list"})}),(0,t.jsx)("button",{onClick:()=>B("grid"),className:`px-3 py-1.5 rounded-md text-sm ${"grid"===V?"bg-emerald-500/20 text-emerald-400":"text-slate-400 hover:text-white"}`,children:(0,t.jsx)("i",{className:"fas fa-grip"})})]})]}),q.size>0&&(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-4 pt-4 border-t border-slate-700/50",children:[(0,t.jsxs)("span",{className:"text-sm text-slate-400",children:[q.size," selected"]}),(0,t.jsxs)("button",{onClick:ev,className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm transition-colors",children:[(0,t.jsx)("i",{className:"fas fa-download mr-2"}),"Export Selected"]}),(0,t.jsxs)("button",{onClick:eN,className:"px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm transition-colors",children:[(0,t.jsx)("i",{className:"fas fa-trash mr-2"}),"Delete Selected"]}),(0,t.jsx)("button",{onClick:()=>O(new Set),className:"px-3 py-1.5 text-slate-400 hover:text-white text-sm transition-colors",children:"Clear Selection"})]})]}),"grid"===V&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:eu.map(e=>{let s=en(e.id),a=eo(e),l=ed(e);return(0,t.jsxs)("div",{onClick:()=>ep(e.id),className:`bg-slate-800/50 backdrop-blur border rounded-xl p-4 cursor-pointer transition-all hover:border-slate-600 ${q.has(e.id)?"border-emerald-500/50 bg-emerald-500/5":"border-slate-700/50"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsx)(T.CategoryIcon,{category:e.category}),(0,t.jsx)("input",{type:"checkbox",checked:q.has(e.id),onChange:()=>{},onClick:t=>eb(e.id,t),className:"rounded bg-slate-700 border-slate-600"})]}),(0,t.jsx)("h3",{className:"font-medium text-white mb-1 line-clamp-1",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mb-3",children:e.sku}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:`text-lg font-bold ${"in_stock"===a?"text-emerald-400":"low_stock"===a?"text-amber-400":"text-red-400"}`,children:[(0,j.formatNumber)(s.total)," units"]}),(0,t.jsx)(T.StockStatus,{status:a})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-400",children:(0,j.formatCurrency)(e.prices.msrp)}),(0,t.jsxs)("span",{className:"text-emerald-400",children:[l.toFixed(1),"% margin"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-700/50",children:[(0,t.jsxs)("button",{onClick:t=>eg(e,t),className:"flex-1 px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm transition-colors",children:[(0,t.jsx)("i",{className:"fas fa-edit mr-1"}),"Edit"]}),(0,t.jsxs)("button",{onClick:t=>ej(e,t),className:"flex-1 px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm transition-colors",children:[(0,t.jsx)("i",{className:"fas fa-boxes-stacked mr-1"}),"Stock"]})]})]},e.id)})}),"list"===V&&(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-slate-800/50 border-b border-slate-700/50",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left",children:(0,t.jsx)("input",{type:"checkbox",checked:q.size===eu.length&&eu.length>0,onChange:()=>{q.size===eu.length?O(new Set):O(new Set(eu.map(e=>e.id)))},className:"rounded bg-slate-700 border-slate-600"})}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-400",children:"Product"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-400",children:"SKUs"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-400",children:"Stock"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"Cost"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"MSRP"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"Shopify"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"Amazon"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"Wholesale"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-400",children:"Avg Margin"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-400",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:eu.map(e=>{let s,a=en(e.id),l=eo(e),r=ed(e);return(0,t.jsxs)("tr",{onClick:()=>ep(e.id),className:`transition-colors cursor-pointer border-b border-slate-700/30 hover:bg-slate-800/30 ${q.has(e.id)?"bg-emerald-500/5":""}`,children:[(0,t.jsx)("td",{className:"px-4 py-4",onClick:t=>eb(e.id,t),children:(0,t.jsx)("input",{type:"checkbox",checked:q.has(e.id),onChange:()=>{},className:"rounded bg-slate-700 border-slate-600"})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(T.CategoryIcon,{category:e.category}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:[(s=e.category,T.categoryStyles[s]?.label||s)," • ",e.weight.value," ",e.weight.unit]})]})]})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-slate-500 w-16",children:"Internal:"}),(0,t.jsx)("code",{className:"text-xs bg-slate-800 px-2 py-0.5 rounded text-slate-300",children:e.sku})]}),e.skus?.shopify&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-green-400 w-16",children:(0,t.jsx)("i",{className:"fab fa-shopify"})}),(0,t.jsx)("code",{className:"text-xs bg-slate-800 px-2 py-0.5 rounded text-slate-300",children:e.skus.shopify})]}),e.skus?.amazon&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-orange-400 w-16",children:(0,t.jsx)("i",{className:"fab fa-amazon"})}),(0,t.jsx)("code",{className:"text-xs bg-slate-800 px-2 py-0.5 rounded text-slate-300",children:e.skus.amazon})]})]})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:`text-lg font-bold ${"in_stock"===l?"text-emerald-400":"low_stock"===l?"text-amber-400":"text-red-400"}`,children:(0,j.formatNumber)(a.total)}),(0,t.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:h.locations.slice(0,2).map((e,s)=>(0,t.jsxs)("span",{children:[s>0&&" • ",(0,t.jsx)("span",{className:0===s?"text-blue-400":"text-orange-400",children:a.byLocation[e.id]||0})," ",e.name.split(" ")[0]]},e.id))}),(0,t.jsx)(T.StockStatus,{status:l,compact:!0})]})}),(0,t.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,t.jsx)("div",{className:"text-sm text-white",children:(0,j.formatCurrency)(e.cost.rolling)}),(0,t.jsx)("div",{className:"text-xs text-slate-500",children:"Rolling Avg"}),(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:["Fixed: ",(0,j.formatCurrency)(e.cost.fixed)]})]}),(0,t.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-white",children:(0,j.formatCurrency)(e.prices.msrp)}),(0,t.jsxs)("div",{className:"text-xs text-emerald-400",children:[ec(e.prices.msrp,e.cost.rolling).toFixed(1),"%"]})]}),(0,t.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,t.jsx)("div",{className:"text-sm text-white",children:(0,j.formatCurrency)(e.prices.shopify)}),(0,t.jsxs)("div",{className:"text-xs text-emerald-400",children:[ec(e.prices.shopify,e.cost.rolling).toFixed(1),"%"]})]}),(0,t.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,t.jsx)("div",{className:"text-sm text-white",children:(0,j.formatCurrency)(e.prices.amazon)}),(0,t.jsxs)("div",{className:"text-xs text-emerald-400",children:[ec(e.prices.amazon,e.cost.rolling).toFixed(1),"%"]})]}),(0,t.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,t.jsx)("div",{className:"text-sm text-white",children:(0,j.formatCurrency)(e.prices.wholesale)}),(0,t.jsxs)("div",{className:"text-xs text-emerald-400",children:[ec(e.prices.wholesale,e.cost.rolling).toFixed(1),"%"]})]}),(0,t.jsx)("td",{className:"px-4 py-4 text-center",children:(0,t.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-emerald-500/10 text-emerald-400 rounded-full text-sm font-medium",children:[r.toFixed(1),"%"]})}),(0,t.jsx)("td",{className:"px-4 py-4",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)("button",{onClick:t=>eg(e,t),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:(0,t.jsx)("i",{className:"fas fa-edit text-sm"})}),(0,t.jsx)("button",{onClick:t=>ej(e,t),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Adjust Stock",children:(0,t.jsx)("i",{className:"fas fa-boxes-stacked text-sm"})}),(0,t.jsx)("button",{onClick:t=>ef(e,t),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-slate-700 rounded-lg transition-colors",title:"Delete",children:(0,t.jsx)("i",{className:"fas fa-trash text-sm"})})]})})]},e.id)})})]})}),0===ex.length&&(0,t.jsxs)("div",{className:"py-12 text-center",children:[(0,t.jsx)("i",{className:"fas fa-box-open text-4xl text-slate-600 mb-4"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"No products found"}),w&&(0,t.jsx)("button",{onClick:()=>k(""),className:"mt-2 text-emerald-400 hover:text-emerald-300 text-sm",children:"Clear search"})]}),(0,t.jsx)(D.Pagination,{currentPage:E,totalPages:em,totalItems:ex.length,itemsPerPage:10,itemLabel:"products",onPageChange:U})]}),(0,t.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"Stock Locations:"}),h.locations.slice(0,3).map((e,s)=>(0,t.jsxs)("span",{children:[s>0&&(0,t.jsx)("span",{className:"text-slate-500 mx-1",children:"•"}),(0,t.jsx)("span",{className:0===s?"text-blue-400":1===s?"text-orange-400":"text-purple-400",children:e.name})]},e.id))]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:"text-slate-400",children:"Margin = Profit Margin (not markup)"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded bg-emerald-500/20 border border-emerald-500/30"}),(0,t.jsx)("span",{className:"text-slate-400",children:"In Stock"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded bg-amber-500/20 border border-amber-500/30"}),(0,t.jsx)("span",{className:"text-slate-400",children:"Low Stock"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded bg-red-500/20 border border-red-500/30"}),(0,t.jsx)("span",{className:"text-slate-400",children:"Out of Stock"})]})]})]})}),(0,t.jsx)(d.AddProductModal,{isOpen:K,onClose:()=>{H(!1),el(null)},editProduct:ea}),(0,t.jsx)(x.AdjustStockModal,{isOpen:W,onClose:()=>{Q(!1),ei(null)},product:er}),(0,t.jsx)(m.ImportCSVModal,{isOpen:X,onClose:()=>G(!1)}),(0,t.jsx)(b,{isOpen:Y,onClose:()=>J(!1)}),(0,t.jsx)(o.Modal,{open:Z,onClose:()=>ee(!1),title:"Serial Number Lookup",subtitle:"Look up serial number status and history",size:"lg",children:(0,t.jsx)(F,{embedded:!0,onClose:()=>ee(!1)})})]})}e.s(["default",()=>R],19608)}]);