{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/types/organization.ts"],"sourcesContent":["// Organization Types for Multi-Tenant Architecture\n\nexport type PlanType = 'free' | 'starter' | 'professional' | 'enterprise';\nexport type MemberRole = 'owner' | 'admin' | 'manager' | 'staff' | 'viewer';\nexport type InviteStatus = 'pending' | 'accepted' | 'expired' | 'revoked';\n\nexport interface PlanLimits {\n  users: number;\n  products: number;\n  ordersPerMonth: number;\n  locations: number;\n}\n\nexport interface OrganizationSettings {\n  timezone: string;\n  currency: string;\n  dateFormat: string;\n  autoJoinDomain?: boolean; // Allow users with matching domain to auto-join\n  requireApproval?: boolean; // Require admin approval for new members\n  defaultMemberRole: MemberRole;\n}\n\nexport interface Organization {\n  id: string;\n  name: string;\n  slug: string; // URL-friendly identifier (unique)\n  domain?: string; // Company email domain for auto-join\n  logo?: string;\n  plan: PlanType;\n  planLimits: PlanLimits;\n  settings: OrganizationSettings;\n  createdAt: Date;\n  updatedAt: Date;\n  ownerId: string; // User ID of the organization owner\n}\n\nexport interface OrganizationMember {\n  id: string;\n  organizationId: string;\n  userId: string;\n  email: string;\n  displayName?: string;\n  role: MemberRole;\n  invitedBy?: string; // User ID who invited this member\n  joinedAt: Date;\n  lastActiveAt?: Date;\n}\n\nexport interface OrganizationInvite {\n  id: string;\n  organizationId: string;\n  email: string;\n  role: MemberRole;\n  invitedBy: string; // User ID\n  invitedByName?: string;\n  organizationName?: string;\n  status: InviteStatus;\n  expiresAt: Date;\n  createdAt: Date;\n  acceptedAt?: Date;\n  token: string; // Unique token for accepting invite\n}\n\n// Extended user profile with organization info\nexport interface UserWithOrg {\n  id: string;\n  email: string;\n  displayName?: string;\n  organizationId?: string; // Current/primary organization\n  organizations?: string[]; // All organizations user belongs to\n  currentOrgRole?: MemberRole;\n}\n\n// Default plan limits by plan type\nexport const PLAN_LIMITS: Record<PlanType, PlanLimits> = {\n  free: {\n    users: 1,\n    products: 50,\n    ordersPerMonth: 100,\n    locations: 1,\n  },\n  starter: {\n    users: 3,\n    products: 500,\n    ordersPerMonth: 1000,\n    locations: 2,\n  },\n  professional: {\n    users: 10,\n    products: 5000,\n    ordersPerMonth: 10000,\n    locations: 5,\n  },\n  enterprise: {\n    users: -1, // Unlimited\n    products: -1,\n    ordersPerMonth: -1,\n    locations: -1,\n  },\n};\n\n// Default organization settings\nexport const DEFAULT_ORG_SETTINGS: OrganizationSettings = {\n  timezone: 'America/Chicago',\n  currency: 'USD',\n  dateFormat: 'MM/DD/YYYY',\n  autoJoinDomain: false,\n  requireApproval: false,\n  defaultMemberRole: 'staff',\n};\n\n// Role permissions\nexport interface RolePermissions {\n  canManageOrganization: boolean;\n  canManageMembers: boolean;\n  canManageIntegrations: boolean;\n  canManageProducts: boolean;\n  canManageOrders: boolean;\n  canManageInventory: boolean;\n  canViewReports: boolean;\n  canExportData: boolean;\n}\n\nexport const ROLE_PERMISSIONS: Record<MemberRole, RolePermissions> = {\n  owner: {\n    canManageOrganization: true,\n    canManageMembers: true,\n    canManageIntegrations: true,\n    canManageProducts: true,\n    canManageOrders: true,\n    canManageInventory: true,\n    canViewReports: true,\n    canExportData: true,\n  },\n  admin: {\n    canManageOrganization: true,\n    canManageMembers: true,\n    canManageIntegrations: true,\n    canManageProducts: true,\n    canManageOrders: true,\n    canManageInventory: true,\n    canViewReports: true,\n    canExportData: true,\n  },\n  manager: {\n    canManageOrganization: false,\n    canManageMembers: false,\n    canManageIntegrations: false,\n    canManageProducts: true,\n    canManageOrders: true,\n    canManageInventory: true,\n    canViewReports: true,\n    canExportData: true,\n  },\n  staff: {\n    canManageOrganization: false,\n    canManageMembers: false,\n    canManageIntegrations: false,\n    canManageProducts: false,\n    canManageOrders: true,\n    canManageInventory: true,\n    canViewReports: false,\n    canExportData: false,\n  },\n  viewer: {\n    canManageOrganization: false,\n    canManageMembers: false,\n    canManageIntegrations: false,\n    canManageProducts: false,\n    canManageOrders: false,\n    canManageInventory: false,\n    canViewReports: true,\n    canExportData: false,\n  },\n};\n\n// Helper to check if a role has a specific permission\nexport function hasPermission(role: MemberRole, permission: keyof RolePermissions): boolean {\n  return ROLE_PERMISSIONS[role]?.[permission] ?? false;\n}\n\n// Helper to check if user can perform role assignment\nexport function canAssignRole(assignerRole: MemberRole, targetRole: MemberRole): boolean {\n  const roleHierarchy: MemberRole[] = ['owner', 'admin', 'manager', 'staff', 'viewer'];\n  const assignerIndex = roleHierarchy.indexOf(assignerRole);\n  const targetIndex = roleHierarchy.indexOf(targetRole);\n\n  // Can only assign roles lower than your own (higher index)\n  // Owner can assign any role, admin can assign manager and below, etc.\n  if (assignerRole === 'owner') return true;\n  if (assignerRole === 'admin') return targetIndex > 0; // Can't assign owner\n  return false; // Only owner and admin can assign roles\n}\n\n// Generate a URL-friendly slug from organization name\nexport function generateSlug(name: string): string {\n  return name\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-+|-+$/g, '')\n    .slice(0, 50);\n}\n\n// Generate a unique invite token\nexport function generateInviteToken(): string {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let token = '';\n  for (let i = 0; i < 32; i++) {\n    token += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return token;\n}\n"],"names":[],"mappings":"AAAA,mDAAmD;;;;;;;;;;;;;;;;;AA0E5C,MAAM,cAA4C;IACvD,MAAM;QACJ,OAAO;QACP,UAAU;QACV,gBAAgB;QAChB,WAAW;IACb;IACA,SAAS;QACP,OAAO;QACP,UAAU;QACV,gBAAgB;QAChB,WAAW;IACb;IACA,cAAc;QACZ,OAAO;QACP,UAAU;QACV,gBAAgB;QAChB,WAAW;IACb;IACA,YAAY;QACV,OAAO,CAAC;QACR,UAAU,CAAC;QACX,gBAAgB,CAAC;QACjB,WAAW,CAAC;IACd;AACF;AAGO,MAAM,uBAA6C;IACxD,UAAU;IACV,UAAU;IACV,YAAY;IACZ,gBAAgB;IAChB,iBAAiB;IACjB,mBAAmB;AACrB;AAcO,MAAM,mBAAwD;IACnE,OAAO;QACL,uBAAuB;QACvB,kBAAkB;QAClB,uBAAuB;QACvB,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QACpB,gBAAgB;QAChB,eAAe;IACjB;IACA,OAAO;QACL,uBAAuB;QACvB,kBAAkB;QAClB,uBAAuB;QACvB,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QACpB,gBAAgB;QAChB,eAAe;IACjB;IACA,SAAS;QACP,uBAAuB;QACvB,kBAAkB;QAClB,uBAAuB;QACvB,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QACpB,gBAAgB;QAChB,eAAe;IACjB;IACA,OAAO;QACL,uBAAuB;QACvB,kBAAkB;QAClB,uBAAuB;QACvB,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QACpB,gBAAgB;QAChB,eAAe;IACjB;IACA,QAAQ;QACN,uBAAuB;QACvB,kBAAkB;QAClB,uBAAuB;QACvB,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QACpB,gBAAgB;QAChB,eAAe;IACjB;AACF;AAGO,SAAS,cAAc,IAAgB,EAAE,UAAiC;IAC/E,OAAO,gBAAgB,CAAC,KAAK,EAAE,CAAC,WAAW,IAAI;AACjD;AAGO,SAAS,cAAc,YAAwB,EAAE,UAAsB;IAC5E,MAAM,gBAA8B;QAAC;QAAS;QAAS;QAAW;QAAS;KAAS;IACpF,MAAM,gBAAgB,cAAc,OAAO,CAAC;IAC5C,MAAM,cAAc,cAAc,OAAO,CAAC;IAE1C,2DAA2D;IAC3D,sEAAsE;IACtE,IAAI,iBAAiB,SAAS,OAAO;IACrC,IAAI,iBAAiB,SAAS,OAAO,cAAc,GAAG,qBAAqB;IAC3E,OAAO,OAAO,wCAAwC;AACxD;AAGO,SAAS,aAAa,IAAY;IACvC,OAAO,KACJ,WAAW,GACX,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,YAAY,IACpB,KAAK,CAAC,GAAG;AACd;AAGO,SAAS;IACd,MAAM,QAAQ;IACd,IAAI,QAAQ;IACZ,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,IAAK;QAC3B,SAAS,MAAM,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM,MAAM;IAC/D;IACA,OAAO;AACT"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/context/OrganizationContext.tsx"],"sourcesContent":["'use client'\n\nimport { createContext, useContext, useEffect, useState, ReactNode, useCallback } from 'react'\nimport {\n  doc,\n  getDoc,\n  setDoc,\n  collection,\n  query,\n  where,\n  getDocs,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  serverTimestamp,\n  Timestamp,\n  onSnapshot,\n} from 'firebase/firestore'\nimport { db } from '@/lib/firebase'\nimport { useAuth } from './AuthContext'\nimport {\n  Organization,\n  OrganizationMember,\n  OrganizationInvite,\n  MemberRole,\n  PlanType,\n  PLAN_LIMITS,\n  DEFAULT_ORG_SETTINGS,\n  generateSlug,\n  generateInviteToken,\n  hasPermission,\n  RolePermissions,\n  ROLE_PERMISSIONS,\n} from '@/types/organization'\n\n// Demo organization data\nconst DEMO_ORGANIZATION: Organization = {\n  id: 'demo-org-id',\n  name: 'Cronk Nutrients (Demo)',\n  slug: 'cronk-demo',\n  plan: 'enterprise',\n  planLimits: PLAN_LIMITS.enterprise,\n  settings: {\n    ...DEFAULT_ORG_SETTINGS,\n    timezone: 'America/Chicago',\n    currency: 'USD',\n  },\n  createdAt: new Date(),\n  updatedAt: new Date(),\n  ownerId: 'demo-user-id',\n}\n\nconst DEMO_MEMBER: OrganizationMember = {\n  id: 'demo-member-id',\n  organizationId: 'demo-org-id',\n  userId: 'demo-user-id',\n  email: 'demo@cronknutrients.com',\n  displayName: 'Demo User',\n  role: 'owner',\n  joinedAt: new Date(),\n}\n\ninterface OrganizationContextType {\n  // State\n  organization: Organization | null\n  membership: OrganizationMember | null\n  members: OrganizationMember[]\n  invites: OrganizationInvite[]\n  loading: boolean\n  error: string | null\n\n  // Computed\n  isOwner: boolean\n  isAdmin: boolean\n  permissions: RolePermissions | null\n  hasOrganization: boolean\n  needsSetup: boolean\n\n  // Organization management\n  createOrganization: (name: string, plan?: PlanType) => Promise<Organization>\n  updateOrganization: (data: Partial<Organization>) => Promise<void>\n  switchOrganization: (orgId: string) => Promise<void>\n\n  // Member management\n  inviteMember: (email: string, role: MemberRole) => Promise<OrganizationInvite>\n  updateMemberRole: (memberId: string, role: MemberRole) => Promise<void>\n  removeMember: (memberId: string) => Promise<void>\n  revokeInvite: (inviteId: string) => Promise<void>\n\n  // Invite handling\n  checkPendingInvites: (email: string) => Promise<OrganizationInvite[]>\n  acceptInvite: (inviteId: string) => Promise<void>\n  declineInvite: (inviteId: string) => Promise<void>\n\n  // Utilities\n  clearError: () => void\n  refreshOrganization: () => Promise<void>\n}\n\nconst OrganizationContext = createContext<OrganizationContextType | undefined>(undefined)\n\nexport function OrganizationProvider({ children }: { children: ReactNode }) {\n  const { user, userProfile, isDemo, loading: authLoading } = useAuth()\n\n  const [organization, setOrganization] = useState<Organization | null>(null)\n  const [membership, setMembership] = useState<OrganizationMember | null>(null)\n  const [members, setMembers] = useState<OrganizationMember[]>([])\n  const [invites, setInvites] = useState<OrganizationInvite[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  // Computed values\n  const isOwner = membership?.role === 'owner'\n  const isAdmin = membership?.role === 'admin' || membership?.role === 'owner'\n  const permissions = membership ? ROLE_PERMISSIONS[membership.role] : null\n  const hasOrganization = !!organization\n  const needsSetup = !authLoading && !isDemo && user && !organization && !loading\n\n  // Clear error\n  const clearError = useCallback(() => setError(null), [])\n\n  // Fetch organization data\n  const fetchOrganization = useCallback(async (orgId: string) => {\n    try {\n      const orgDoc = await getDoc(doc(db, 'organizations', orgId))\n      if (orgDoc.exists()) {\n        const data = orgDoc.data()\n        return {\n          ...data,\n          id: orgDoc.id,\n          createdAt: data.createdAt?.toDate() || new Date(),\n          updatedAt: data.updatedAt?.toDate() || new Date(),\n        } as Organization\n      }\n      return null\n    } catch (err) {\n      console.error('Error fetching organization:', err)\n      return null\n    }\n  }, [])\n\n  // Fetch user's membership\n  const fetchMembership = useCallback(async (userId: string) => {\n    try {\n      const membershipsQuery = query(\n        collection(db, 'organization_members'),\n        where('userId', '==', userId)\n      )\n      const snapshot = await getDocs(membershipsQuery)\n\n      if (!snapshot.empty) {\n        const doc = snapshot.docs[0]\n        const data = doc.data()\n        return {\n          ...data,\n          id: doc.id,\n          joinedAt: data.joinedAt?.toDate() || new Date(),\n          lastActiveAt: data.lastActiveAt?.toDate(),\n        } as OrganizationMember\n      }\n      return null\n    } catch (err) {\n      console.error('Error fetching membership:', err)\n      return null\n    }\n  }, [])\n\n  // Fetch all members of an organization\n  const fetchMembers = useCallback(async (orgId: string) => {\n    try {\n      const membersQuery = query(\n        collection(db, 'organization_members'),\n        where('organizationId', '==', orgId)\n      )\n      const snapshot = await getDocs(membersQuery)\n\n      return snapshot.docs.map(doc => {\n        const data = doc.data()\n        return {\n          ...data,\n          id: doc.id,\n          joinedAt: data.joinedAt?.toDate() || new Date(),\n          lastActiveAt: data.lastActiveAt?.toDate(),\n        } as OrganizationMember\n      })\n    } catch (err) {\n      console.error('Error fetching members:', err)\n      return []\n    }\n  }, [])\n\n  // Fetch pending invites for an organization\n  const fetchInvites = useCallback(async (orgId: string) => {\n    try {\n      const invitesQuery = query(\n        collection(db, 'organization_invites'),\n        where('organizationId', '==', orgId),\n        where('status', '==', 'pending')\n      )\n      const snapshot = await getDocs(invitesQuery)\n\n      return snapshot.docs.map(doc => {\n        const data = doc.data()\n        return {\n          ...data,\n          id: doc.id,\n          createdAt: data.createdAt?.toDate() || new Date(),\n          expiresAt: data.expiresAt?.toDate() || new Date(),\n          acceptedAt: data.acceptedAt?.toDate(),\n        } as OrganizationInvite\n      })\n    } catch (err) {\n      console.error('Error fetching invites:', err)\n      return []\n    }\n  }, [])\n\n  // Initialize organization data\n  useEffect(() => {\n    if (authLoading) return\n\n    // Handle demo mode\n    if (isDemo) {\n      setOrganization(DEMO_ORGANIZATION)\n      setMembership(DEMO_MEMBER)\n      setMembers([DEMO_MEMBER])\n      setInvites([])\n      setLoading(false)\n      return\n    }\n\n    // No user, clear state\n    if (!user) {\n      setOrganization(null)\n      setMembership(null)\n      setMembers([])\n      setInvites([])\n      setLoading(false)\n      return\n    }\n\n    // Fetch user's organization\n    const initOrganization = async () => {\n      setLoading(true)\n      try {\n        // First, find user's membership\n        const userMembership = await fetchMembership(user.uid)\n\n        if (userMembership) {\n          setMembership(userMembership)\n\n          // Fetch the organization\n          const org = await fetchOrganization(userMembership.organizationId)\n          if (org) {\n            setOrganization(org)\n\n            // Fetch all members if user has permission\n            if (hasPermission(userMembership.role, 'canManageMembers')) {\n              const orgMembers = await fetchMembers(userMembership.organizationId)\n              setMembers(orgMembers)\n\n              const orgInvites = await fetchInvites(userMembership.organizationId)\n              setInvites(orgInvites)\n            } else {\n              setMembers([userMembership])\n              setInvites([])\n            }\n          }\n        } else {\n          // No membership found - user needs to create or join an org\n          setOrganization(null)\n          setMembership(null)\n          setMembers([])\n          setInvites([])\n        }\n      } catch (err) {\n        console.error('Error initializing organization:', err)\n        setError('Failed to load organization data')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    initOrganization()\n  }, [user, isDemo, authLoading, fetchMembership, fetchOrganization, fetchMembers, fetchInvites])\n\n  // Create a new organization\n  const createOrganization = useCallback(async (name: string, plan: PlanType = 'free'): Promise<Organization> => {\n    if (!user) throw new Error('Must be logged in to create an organization')\n    if (isDemo) throw new Error('Cannot create organization in demo mode')\n\n    try {\n      setError(null)\n\n      // Generate unique slug\n      let slug = generateSlug(name)\n      let slugExists = true\n      let attempts = 0\n\n      while (slugExists && attempts < 10) {\n        const slugQuery = query(\n          collection(db, 'organizations'),\n          where('slug', '==', slug)\n        )\n        const slugSnapshot = await getDocs(slugQuery)\n        slugExists = !slugSnapshot.empty\n\n        if (slugExists) {\n          slug = `${generateSlug(name)}-${Math.random().toString(36).substring(2, 6)}`\n          attempts++\n        }\n      }\n\n      // Create organization\n      const orgData = {\n        name,\n        slug,\n        plan,\n        planLimits: PLAN_LIMITS[plan],\n        settings: DEFAULT_ORG_SETTINGS,\n        ownerId: user.uid,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      }\n\n      const orgRef = await addDoc(collection(db, 'organizations'), orgData)\n\n      // Create owner membership\n      const memberData = {\n        organizationId: orgRef.id,\n        userId: user.uid,\n        email: user.email,\n        displayName: userProfile?.displayName || user.displayName,\n        role: 'owner' as MemberRole,\n        joinedAt: serverTimestamp(),\n      }\n\n      await addDoc(collection(db, 'organization_members'), memberData)\n\n      // Update user document with organizationId\n      await setDoc(doc(db, 'users', user.uid), {\n        organizationId: orgRef.id,\n      }, { merge: true })\n\n      const newOrg: Organization = {\n        ...orgData,\n        id: orgRef.id,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      }\n\n      const newMember: OrganizationMember = {\n        ...memberData,\n        id: 'temp-id',\n        joinedAt: new Date(),\n      }\n\n      setOrganization(newOrg)\n      setMembership(newMember)\n      setMembers([newMember])\n\n      return newOrg\n    } catch (err) {\n      console.error('Error creating organization:', err)\n      setError('Failed to create organization')\n      throw err\n    }\n  }, [user, userProfile, isDemo])\n\n  // Update organization\n  const updateOrganization = useCallback(async (data: Partial<Organization>) => {\n    if (!organization || !membership) throw new Error('No organization')\n    if (!hasPermission(membership.role, 'canManageOrganization')) {\n      throw new Error('Insufficient permissions')\n    }\n    if (isDemo) throw new Error('Cannot update organization in demo mode')\n\n    try {\n      setError(null)\n\n      await updateDoc(doc(db, 'organizations', organization.id), {\n        ...data,\n        updatedAt: serverTimestamp(),\n      })\n\n      setOrganization(prev => prev ? { ...prev, ...data, updatedAt: new Date() } : null)\n    } catch (err) {\n      console.error('Error updating organization:', err)\n      setError('Failed to update organization')\n      throw err\n    }\n  }, [organization, membership, isDemo])\n\n  // Switch organization (for users with multiple orgs)\n  const switchOrganization = useCallback(async (orgId: string) => {\n    if (!user) throw new Error('Must be logged in')\n    if (isDemo) throw new Error('Cannot switch organization in demo mode')\n\n    try {\n      setLoading(true)\n      setError(null)\n\n      // Verify user is a member of this org\n      const memberQuery = query(\n        collection(db, 'organization_members'),\n        where('organizationId', '==', orgId),\n        where('userId', '==', user.uid)\n      )\n      const memberSnapshot = await getDocs(memberQuery)\n\n      if (memberSnapshot.empty) {\n        throw new Error('You are not a member of this organization')\n      }\n\n      // Fetch the new organization\n      const org = await fetchOrganization(orgId)\n      if (!org) throw new Error('Organization not found')\n\n      const memberDoc = memberSnapshot.docs[0]\n      const memberData = memberDoc.data()\n      const newMembership: OrganizationMember = {\n        ...memberData,\n        id: memberDoc.id,\n        joinedAt: memberData.joinedAt?.toDate() || new Date(),\n      } as OrganizationMember\n\n      // Update user's current organization\n      await setDoc(doc(db, 'users', user.uid), {\n        organizationId: orgId,\n      }, { merge: true })\n\n      setOrganization(org)\n      setMembership(newMembership)\n\n      // Fetch members if permitted\n      if (hasPermission(newMembership.role, 'canManageMembers')) {\n        const orgMembers = await fetchMembers(orgId)\n        setMembers(orgMembers)\n\n        const orgInvites = await fetchInvites(orgId)\n        setInvites(orgInvites)\n      } else {\n        setMembers([newMembership])\n        setInvites([])\n      }\n    } catch (err) {\n      console.error('Error switching organization:', err)\n      setError('Failed to switch organization')\n      throw err\n    } finally {\n      setLoading(false)\n    }\n  }, [user, isDemo, fetchOrganization, fetchMembers, fetchInvites])\n\n  // Invite a member\n  const inviteMember = useCallback(async (email: string, role: MemberRole): Promise<OrganizationInvite> => {\n    if (!organization || !membership || !user) throw new Error('No organization')\n    if (!hasPermission(membership.role, 'canManageMembers')) {\n      throw new Error('Insufficient permissions')\n    }\n    if (isDemo) throw new Error('Cannot invite members in demo mode')\n\n    try {\n      setError(null)\n\n      // Check if user is already a member\n      const existingMemberQuery = query(\n        collection(db, 'organization_members'),\n        where('organizationId', '==', organization.id),\n        where('email', '==', email.toLowerCase())\n      )\n      const existingMember = await getDocs(existingMemberQuery)\n      if (!existingMember.empty) {\n        throw new Error('User is already a member')\n      }\n\n      // Check for existing pending invite\n      const existingInviteQuery = query(\n        collection(db, 'organization_invites'),\n        where('organizationId', '==', organization.id),\n        where('email', '==', email.toLowerCase()),\n        where('status', '==', 'pending')\n      )\n      const existingInvite = await getDocs(existingInviteQuery)\n      if (!existingInvite.empty) {\n        throw new Error('An invitation is already pending for this email')\n      }\n\n      // Create invite\n      const inviteData = {\n        organizationId: organization.id,\n        email: email.toLowerCase(),\n        role,\n        invitedBy: user.uid,\n        invitedByName: userProfile?.displayName || user.displayName,\n        organizationName: organization.name,\n        status: 'pending' as const,\n        token: generateInviteToken(),\n        createdAt: serverTimestamp(),\n        expiresAt: Timestamp.fromDate(new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)), // 7 days\n      }\n\n      const inviteRef = await addDoc(collection(db, 'organization_invites'), inviteData)\n\n      const newInvite: OrganizationInvite = {\n        ...inviteData,\n        id: inviteRef.id,\n        createdAt: new Date(),\n        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n      }\n\n      setInvites(prev => [...prev, newInvite])\n\n      return newInvite\n    } catch (err) {\n      console.error('Error inviting member:', err)\n      setError(err instanceof Error ? err.message : 'Failed to send invitation')\n      throw err\n    }\n  }, [organization, membership, user, userProfile, isDemo])\n\n  // Update member role\n  const updateMemberRole = useCallback(async (memberId: string, role: MemberRole) => {\n    if (!organization || !membership) throw new Error('No organization')\n    if (!hasPermission(membership.role, 'canManageMembers')) {\n      throw new Error('Insufficient permissions')\n    }\n    if (isDemo) throw new Error('Cannot update members in demo mode')\n\n    try {\n      setError(null)\n\n      await updateDoc(doc(db, 'organization_members', memberId), { role })\n\n      setMembers(prev =>\n        prev.map(m => m.id === memberId ? { ...m, role } : m)\n      )\n    } catch (err) {\n      console.error('Error updating member role:', err)\n      setError('Failed to update member role')\n      throw err\n    }\n  }, [organization, membership, isDemo])\n\n  // Remove member\n  const removeMember = useCallback(async (memberId: string) => {\n    if (!organization || !membership) throw new Error('No organization')\n    if (!hasPermission(membership.role, 'canManageMembers')) {\n      throw new Error('Insufficient permissions')\n    }\n    if (isDemo) throw new Error('Cannot remove members in demo mode')\n\n    try {\n      setError(null)\n\n      // Get the member being removed\n      const memberToRemove = members.find(m => m.id === memberId)\n      if (memberToRemove?.role === 'owner') {\n        throw new Error('Cannot remove the organization owner')\n      }\n\n      await deleteDoc(doc(db, 'organization_members', memberId))\n\n      setMembers(prev => prev.filter(m => m.id !== memberId))\n    } catch (err) {\n      console.error('Error removing member:', err)\n      setError(err instanceof Error ? err.message : 'Failed to remove member')\n      throw err\n    }\n  }, [organization, membership, members, isDemo])\n\n  // Revoke invite\n  const revokeInvite = useCallback(async (inviteId: string) => {\n    if (!organization || !membership) throw new Error('No organization')\n    if (!hasPermission(membership.role, 'canManageMembers')) {\n      throw new Error('Insufficient permissions')\n    }\n    if (isDemo) throw new Error('Cannot revoke invites in demo mode')\n\n    try {\n      setError(null)\n\n      await updateDoc(doc(db, 'organization_invites', inviteId), {\n        status: 'revoked',\n      })\n\n      setInvites(prev => prev.filter(i => i.id !== inviteId))\n    } catch (err) {\n      console.error('Error revoking invite:', err)\n      setError('Failed to revoke invitation')\n      throw err\n    }\n  }, [organization, membership, isDemo])\n\n  // Check for pending invites for an email\n  const checkPendingInvites = useCallback(async (email: string): Promise<OrganizationInvite[]> => {\n    try {\n      const invitesQuery = query(\n        collection(db, 'organization_invites'),\n        where('email', '==', email.toLowerCase()),\n        where('status', '==', 'pending')\n      )\n      const snapshot = await getDocs(invitesQuery)\n\n      return snapshot.docs.map(doc => {\n        const data = doc.data()\n        return {\n          ...data,\n          id: doc.id,\n          createdAt: data.createdAt?.toDate() || new Date(),\n          expiresAt: data.expiresAt?.toDate() || new Date(),\n        } as OrganizationInvite\n      }).filter(invite => invite.expiresAt > new Date())\n    } catch (err) {\n      console.error('Error checking invites:', err)\n      return []\n    }\n  }, [])\n\n  // Accept invite\n  const acceptInvite = useCallback(async (inviteId: string) => {\n    if (!user) throw new Error('Must be logged in')\n    if (isDemo) throw new Error('Cannot accept invites in demo mode')\n\n    try {\n      setLoading(true)\n      setError(null)\n\n      // Get the invite\n      const inviteDoc = await getDoc(doc(db, 'organization_invites', inviteId))\n      if (!inviteDoc.exists()) throw new Error('Invite not found')\n\n      const invite = inviteDoc.data()\n      if (invite.status !== 'pending') throw new Error('Invite is no longer valid')\n      if (invite.email !== user.email?.toLowerCase()) throw new Error('This invite is for a different email')\n      if (invite.expiresAt.toDate() < new Date()) throw new Error('Invite has expired')\n\n      // Create membership\n      const memberData = {\n        organizationId: invite.organizationId,\n        userId: user.uid,\n        email: user.email,\n        displayName: userProfile?.displayName || user.displayName,\n        role: invite.role,\n        invitedBy: invite.invitedBy,\n        joinedAt: serverTimestamp(),\n      }\n\n      await addDoc(collection(db, 'organization_members'), memberData)\n\n      // Update invite status\n      await updateDoc(doc(db, 'organization_invites', inviteId), {\n        status: 'accepted',\n        acceptedAt: serverTimestamp(),\n      })\n\n      // Update user's organization\n      await setDoc(doc(db, 'users', user.uid), {\n        organizationId: invite.organizationId,\n      }, { merge: true })\n\n      // Fetch the organization\n      const org = await fetchOrganization(invite.organizationId)\n      if (org) {\n        setOrganization(org)\n        setMembership({\n          ...memberData,\n          id: 'new-member',\n          joinedAt: new Date(),\n        } as OrganizationMember)\n      }\n    } catch (err) {\n      console.error('Error accepting invite:', err)\n      setError(err instanceof Error ? err.message : 'Failed to accept invitation')\n      throw err\n    } finally {\n      setLoading(false)\n    }\n  }, [user, userProfile, isDemo, fetchOrganization])\n\n  // Decline invite\n  const declineInvite = useCallback(async (inviteId: string) => {\n    if (isDemo) throw new Error('Cannot decline invites in demo mode')\n\n    try {\n      setError(null)\n\n      await updateDoc(doc(db, 'organization_invites', inviteId), {\n        status: 'revoked',\n      })\n    } catch (err) {\n      console.error('Error declining invite:', err)\n      setError('Failed to decline invitation')\n      throw err\n    }\n  }, [isDemo])\n\n  // Refresh organization data\n  const refreshOrganization = useCallback(async () => {\n    if (!organization || isDemo) return\n\n    try {\n      setLoading(true)\n      const org = await fetchOrganization(organization.id)\n      if (org) setOrganization(org)\n\n      if (membership && hasPermission(membership.role, 'canManageMembers')) {\n        const orgMembers = await fetchMembers(organization.id)\n        setMembers(orgMembers)\n\n        const orgInvites = await fetchInvites(organization.id)\n        setInvites(orgInvites)\n      }\n    } catch (err) {\n      console.error('Error refreshing organization:', err)\n    } finally {\n      setLoading(false)\n    }\n  }, [organization, membership, isDemo, fetchOrganization, fetchMembers, fetchInvites])\n\n  const value: OrganizationContextType = {\n    // State\n    organization,\n    membership,\n    members,\n    invites,\n    loading,\n    error,\n\n    // Computed\n    isOwner,\n    isAdmin,\n    permissions,\n    hasOrganization,\n    needsSetup,\n\n    // Organization management\n    createOrganization,\n    updateOrganization,\n    switchOrganization,\n\n    // Member management\n    inviteMember,\n    updateMemberRole,\n    removeMember,\n    revokeInvite,\n\n    // Invite handling\n    checkPendingInvites,\n    acceptInvite,\n    declineInvite,\n\n    // Utilities\n    clearError,\n    refreshOrganization,\n  }\n\n  return (\n    <OrganizationContext.Provider value={value}>\n      {children}\n    </OrganizationContext.Provider>\n  )\n}\n\n// Hook to use organization context\nexport function useOrganization() {\n  const context = useContext(OrganizationContext)\n  if (context === undefined) {\n    throw new Error('useOrganization must be used within an OrganizationProvider')\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAeA;AACA;AACA;AApBA;;;;;;;AAmCA,yBAAyB;AACzB,MAAM,oBAAkC;IACtC,IAAI;IACJ,MAAM;IACN,MAAM;IACN,MAAM;IACN,YAAY,oIAAW,CAAC,UAAU;IAClC,UAAU;QACR,GAAG,6IAAoB;QACvB,UAAU;QACV,UAAU;IACZ;IACA,WAAW,IAAI;IACf,WAAW,IAAI;IACf,SAAS;AACX;AAEA,MAAM,cAAkC;IACtC,IAAI;IACJ,gBAAgB;IAChB,QAAQ;IACR,OAAO;IACP,aAAa;IACb,MAAM;IACN,UAAU,IAAI;AAChB;AAuCA,MAAM,oCAAsB,IAAA,sNAAa,EAAsC;AAExE,SAAS,qBAAqB,EAAE,QAAQ,EAA2B;IACxE,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,SAAS,WAAW,EAAE,GAAG,IAAA,kIAAO;IAEnE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAsB;IACtE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAA4B;IACxE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAuB,EAAE;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAuB,EAAE;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,kBAAkB;IAClB,MAAM,UAAU,YAAY,SAAS;IACrC,MAAM,UAAU,YAAY,SAAS,WAAW,YAAY,SAAS;IACrE,MAAM,cAAc,aAAa,yIAAgB,CAAC,WAAW,IAAI,CAAC,GAAG;IACrE,MAAM,kBAAkB,CAAC,CAAC;IAC1B,MAAM,aAAa,CAAC,eAAe,CAAC,UAAU,QAAQ,CAAC,gBAAgB,CAAC;IAExE,cAAc;IACd,MAAM,aAAa,IAAA,oNAAW,EAAC,IAAM,SAAS,OAAO,EAAE;IAEvD,0BAA0B;IAC1B,MAAM,oBAAoB,IAAA,oNAAW,EAAC,OAAO;QAC3C,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,2KAAM,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,iBAAiB;YACrD,IAAI,OAAO,MAAM,IAAI;gBACnB,MAAM,OAAO,OAAO,IAAI;gBACxB,OAAO;oBACL,GAAG,IAAI;oBACP,IAAI,OAAO,EAAE;oBACb,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;oBAC3C,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;gBAC7C;YACF;YACA,OAAO;QACT,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,OAAO;QACT;IACF,GAAG,EAAE;IAEL,0BAA0B;IAC1B,MAAM,kBAAkB,IAAA,oNAAW,EAAC,OAAO;QACzC,IAAI;YACF,MAAM,mBAAmB,IAAA,0KAAK,EAC5B,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBACf,IAAA,0KAAK,EAAC,UAAU,MAAM;YAExB,MAAM,WAAW,MAAM,IAAA,4KAAO,EAAC;YAE/B,IAAI,CAAC,SAAS,KAAK,EAAE;gBACnB,MAAM,MAAM,SAAS,IAAI,CAAC,EAAE;gBAC5B,MAAM,OAAO,IAAI,IAAI;gBACrB,OAAO;oBACL,GAAG,IAAI;oBACP,IAAI,IAAI,EAAE;oBACV,UAAU,KAAK,QAAQ,EAAE,YAAY,IAAI;oBACzC,cAAc,KAAK,YAAY,EAAE;gBACnC;YACF;YACA,OAAO;QACT,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,OAAO;QACT;IACF,GAAG,EAAE;IAEL,uCAAuC;IACvC,MAAM,eAAe,IAAA,oNAAW,EAAC,OAAO;QACtC,IAAI;YACF,MAAM,eAAe,IAAA,0KAAK,EACxB,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBACf,IAAA,0KAAK,EAAC,kBAAkB,MAAM;YAEhC,MAAM,WAAW,MAAM,IAAA,4KAAO,EAAC;YAE/B,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA;gBACvB,MAAM,OAAO,IAAI,IAAI;gBACrB,OAAO;oBACL,GAAG,IAAI;oBACP,IAAI,IAAI,EAAE;oBACV,UAAU,KAAK,QAAQ,EAAE,YAAY,IAAI;oBACzC,cAAc,KAAK,YAAY,EAAE;gBACnC;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO,EAAE;QACX;IACF,GAAG,EAAE;IAEL,4CAA4C;IAC5C,MAAM,eAAe,IAAA,oNAAW,EAAC,OAAO;QACtC,IAAI;YACF,MAAM,eAAe,IAAA,0KAAK,EACxB,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBACf,IAAA,0KAAK,EAAC,kBAAkB,MAAM,QAC9B,IAAA,0KAAK,EAAC,UAAU,MAAM;YAExB,MAAM,WAAW,MAAM,IAAA,4KAAO,EAAC;YAE/B,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA;gBACvB,MAAM,OAAO,IAAI,IAAI;gBACrB,OAAO;oBACL,GAAG,IAAI;oBACP,IAAI,IAAI,EAAE;oBACV,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;oBAC3C,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;oBAC3C,YAAY,KAAK,UAAU,EAAE;gBAC/B;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO,EAAE;QACX;IACF,GAAG,EAAE;IAEL,+BAA+B;IAC/B,IAAA,kNAAS,EAAC;QACR,IAAI,aAAa;QAEjB,mBAAmB;QACnB,IAAI,QAAQ;YACV,gBAAgB;YAChB,cAAc;YACd,WAAW;gBAAC;aAAY;YACxB,WAAW,EAAE;YACb,WAAW;YACX;QACF;QAEA,uBAAuB;QACvB,IAAI,CAAC,MAAM;YACT,gBAAgB;YAChB,cAAc;YACd,WAAW,EAAE;YACb,WAAW,EAAE;YACb,WAAW;YACX;QACF;QAEA,4BAA4B;QAC5B,MAAM,mBAAmB;YACvB,WAAW;YACX,IAAI;gBACF,gCAAgC;gBAChC,MAAM,iBAAiB,MAAM,gBAAgB,KAAK,GAAG;gBAErD,IAAI,gBAAgB;oBAClB,cAAc;oBAEd,yBAAyB;oBACzB,MAAM,MAAM,MAAM,kBAAkB,eAAe,cAAc;oBACjE,IAAI,KAAK;wBACP,gBAAgB;wBAEhB,2CAA2C;wBAC3C,IAAI,IAAA,sIAAa,EAAC,eAAe,IAAI,EAAE,qBAAqB;4BAC1D,MAAM,aAAa,MAAM,aAAa,eAAe,cAAc;4BACnE,WAAW;4BAEX,MAAM,aAAa,MAAM,aAAa,eAAe,cAAc;4BACnE,WAAW;wBACb,OAAO;4BACL,WAAW;gCAAC;6BAAe;4BAC3B,WAAW,EAAE;wBACf;oBACF;gBACF,OAAO;oBACL,4DAA4D;oBAC5D,gBAAgB;oBAChB,cAAc;oBACd,WAAW,EAAE;oBACb,WAAW,EAAE;gBACf;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,oCAAoC;gBAClD,SAAS;YACX,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;QAAM;QAAQ;QAAa;QAAiB;QAAmB;QAAc;KAAa;IAE9F,4BAA4B;IAC5B,MAAM,qBAAqB,IAAA,oNAAW,EAAC,OAAO,MAAc,OAAiB,MAAM;QACjF,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAC3B,IAAI,QAAQ,MAAM,IAAI,MAAM;QAE5B,IAAI;YACF,SAAS;YAET,uBAAuB;YACvB,IAAI,OAAO,IAAA,qIAAY,EAAC;YACxB,IAAI,aAAa;YACjB,IAAI,WAAW;YAEf,MAAO,cAAc,WAAW,GAAI;gBAClC,MAAM,YAAY,IAAA,0KAAK,EACrB,IAAA,+KAAU,EAAC,qHAAE,EAAE,kBACf,IAAA,0KAAK,EAAC,QAAQ,MAAM;gBAEtB,MAAM,eAAe,MAAM,IAAA,4KAAO,EAAC;gBACnC,aAAa,CAAC,aAAa,KAAK;gBAEhC,IAAI,YAAY;oBACd,OAAO,GAAG,IAAA,qIAAY,EAAC,MAAM,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,IAAI;oBAC5E;gBACF;YACF;YAEA,sBAAsB;YACtB,MAAM,UAAU;gBACd;gBACA;gBACA;gBACA,YAAY,oIAAW,CAAC,KAAK;gBAC7B,UAAU,6IAAoB;gBAC9B,SAAS,KAAK,GAAG;gBACjB,WAAW,IAAA,oLAAe;gBAC1B,WAAW,IAAA,oLAAe;YAC5B;YAEA,MAAM,SAAS,MAAM,IAAA,2KAAM,EAAC,IAAA,+KAAU,EAAC,qHAAE,EAAE,kBAAkB;YAE7D,0BAA0B;YAC1B,MAAM,aAAa;gBACjB,gBAAgB,OAAO,EAAE;gBACzB,QAAQ,KAAK,GAAG;gBAChB,OAAO,KAAK,KAAK;gBACjB,aAAa,aAAa,eAAe,KAAK,WAAW;gBACzD,MAAM;gBACN,UAAU,IAAA,oLAAe;YAC3B;YAEA,MAAM,IAAA,2KAAM,EAAC,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBAAyB;YAErD,2CAA2C;YAC3C,MAAM,IAAA,2KAAM,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,SAAS,KAAK,GAAG,GAAG;gBACvC,gBAAgB,OAAO,EAAE;YAC3B,GAAG;gBAAE,OAAO;YAAK;YAEjB,MAAM,SAAuB;gBAC3B,GAAG,OAAO;gBACV,IAAI,OAAO,EAAE;gBACb,WAAW,IAAI;gBACf,WAAW,IAAI;YACjB;YAEA,MAAM,YAAgC;gBACpC,GAAG,UAAU;gBACb,IAAI;gBACJ,UAAU,IAAI;YAChB;YAEA,gBAAgB;YAChB,cAAc;YACd,WAAW;gBAAC;aAAU;YAEtB,OAAO;QACT,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,SAAS;YACT,MAAM;QACR;IACF,GAAG;QAAC;QAAM;QAAa;KAAO;IAE9B,sBAAsB;IACtB,MAAM,qBAAqB,IAAA,oNAAW,EAAC,OAAO;QAC5C,IAAI,CAAC,gBAAgB,CAAC,YAAY,MAAM,IAAI,MAAM;QAClD,IAAI,CAAC,IAAA,sIAAa,EAAC,WAAW,IAAI,EAAE,0BAA0B;YAC5D,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,QAAQ,MAAM,IAAI,MAAM;QAE5B,IAAI;YACF,SAAS;YAET,MAAM,IAAA,8KAAS,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,iBAAiB,aAAa,EAAE,GAAG;gBACzD,GAAG,IAAI;gBACP,WAAW,IAAA,oLAAe;YAC5B;YAEA,gBAAgB,CAAA,OAAQ,OAAO;oBAAE,GAAG,IAAI;oBAAE,GAAG,IAAI;oBAAE,WAAW,IAAI;gBAAO,IAAI;QAC/E,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,SAAS;YACT,MAAM;QACR;IACF,GAAG;QAAC;QAAc;QAAY;KAAO;IAErC,qDAAqD;IACrD,MAAM,qBAAqB,IAAA,oNAAW,EAAC,OAAO;QAC5C,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAC3B,IAAI,QAAQ,MAAM,IAAI,MAAM;QAE5B,IAAI;YACF,WAAW;YACX,SAAS;YAET,sCAAsC;YACtC,MAAM,cAAc,IAAA,0KAAK,EACvB,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBACf,IAAA,0KAAK,EAAC,kBAAkB,MAAM,QAC9B,IAAA,0KAAK,EAAC,UAAU,MAAM,KAAK,GAAG;YAEhC,MAAM,iBAAiB,MAAM,IAAA,4KAAO,EAAC;YAErC,IAAI,eAAe,KAAK,EAAE;gBACxB,MAAM,IAAI,MAAM;YAClB;YAEA,6BAA6B;YAC7B,MAAM,MAAM,MAAM,kBAAkB;YACpC,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;YAE1B,MAAM,YAAY,eAAe,IAAI,CAAC,EAAE;YACxC,MAAM,aAAa,UAAU,IAAI;YACjC,MAAM,gBAAoC;gBACxC,GAAG,UAAU;gBACb,IAAI,UAAU,EAAE;gBAChB,UAAU,WAAW,QAAQ,EAAE,YAAY,IAAI;YACjD;YAEA,qCAAqC;YACrC,MAAM,IAAA,2KAAM,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,SAAS,KAAK,GAAG,GAAG;gBACvC,gBAAgB;YAClB,GAAG;gBAAE,OAAO;YAAK;YAEjB,gBAAgB;YAChB,cAAc;YAEd,6BAA6B;YAC7B,IAAI,IAAA,sIAAa,EAAC,cAAc,IAAI,EAAE,qBAAqB;gBACzD,MAAM,aAAa,MAAM,aAAa;gBACtC,WAAW;gBAEX,MAAM,aAAa,MAAM,aAAa;gBACtC,WAAW;YACb,OAAO;gBACL,WAAW;oBAAC;iBAAc;gBAC1B,WAAW,EAAE;YACf;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,SAAS;YACT,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;QAAM;QAAQ;QAAmB;QAAc;KAAa;IAEhE,kBAAkB;IAClB,MAAM,eAAe,IAAA,oNAAW,EAAC,OAAO,OAAe;QACrD,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,MAAM,MAAM,IAAI,MAAM;QAC3D,IAAI,CAAC,IAAA,sIAAa,EAAC,WAAW,IAAI,EAAE,qBAAqB;YACvD,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,QAAQ,MAAM,IAAI,MAAM;QAE5B,IAAI;YACF,SAAS;YAET,oCAAoC;YACpC,MAAM,sBAAsB,IAAA,0KAAK,EAC/B,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBACf,IAAA,0KAAK,EAAC,kBAAkB,MAAM,aAAa,EAAE,GAC7C,IAAA,0KAAK,EAAC,SAAS,MAAM,MAAM,WAAW;YAExC,MAAM,iBAAiB,MAAM,IAAA,4KAAO,EAAC;YACrC,IAAI,CAAC,eAAe,KAAK,EAAE;gBACzB,MAAM,IAAI,MAAM;YAClB;YAEA,oCAAoC;YACpC,MAAM,sBAAsB,IAAA,0KAAK,EAC/B,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBACf,IAAA,0KAAK,EAAC,kBAAkB,MAAM,aAAa,EAAE,GAC7C,IAAA,0KAAK,EAAC,SAAS,MAAM,MAAM,WAAW,KACtC,IAAA,0KAAK,EAAC,UAAU,MAAM;YAExB,MAAM,iBAAiB,MAAM,IAAA,4KAAO,EAAC;YACrC,IAAI,CAAC,eAAe,KAAK,EAAE;gBACzB,MAAM,IAAI,MAAM;YAClB;YAEA,gBAAgB;YAChB,MAAM,aAAa;gBACjB,gBAAgB,aAAa,EAAE;gBAC/B,OAAO,MAAM,WAAW;gBACxB;gBACA,WAAW,KAAK,GAAG;gBACnB,eAAe,aAAa,eAAe,KAAK,WAAW;gBAC3D,kBAAkB,aAAa,IAAI;gBACnC,QAAQ;gBACR,OAAO,IAAA,4IAAmB;gBAC1B,WAAW,IAAA,oLAAe;gBAC1B,WAAW,8KAAS,CAAC,QAAQ,CAAC,IAAI,KAAK,KAAK,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK;YACzE;YAEA,MAAM,YAAY,MAAM,IAAA,2KAAM,EAAC,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBAAyB;YAEvE,MAAM,YAAgC;gBACpC,GAAG,UAAU;gBACb,IAAI,UAAU,EAAE;gBAChB,WAAW,IAAI;gBACf,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK;YACtD;YAEA,WAAW,CAAA,OAAQ;uBAAI;oBAAM;iBAAU;YAEvC,OAAO;QACT,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC9C,MAAM;QACR;IACF,GAAG;QAAC;QAAc;QAAY;QAAM;QAAa;KAAO;IAExD,qBAAqB;IACrB,MAAM,mBAAmB,IAAA,oNAAW,EAAC,OAAO,UAAkB;QAC5D,IAAI,CAAC,gBAAgB,CAAC,YAAY,MAAM,IAAI,MAAM;QAClD,IAAI,CAAC,IAAA,sIAAa,EAAC,WAAW,IAAI,EAAE,qBAAqB;YACvD,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,QAAQ,MAAM,IAAI,MAAM;QAE5B,IAAI;YACF,SAAS;YAET,MAAM,IAAA,8KAAS,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,wBAAwB,WAAW;gBAAE;YAAK;YAElE,WAAW,CAAA,OACT,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,WAAW;wBAAE,GAAG,CAAC;wBAAE;oBAAK,IAAI;QAEvD,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,SAAS;YACT,MAAM;QACR;IACF,GAAG;QAAC;QAAc;QAAY;KAAO;IAErC,gBAAgB;IAChB,MAAM,eAAe,IAAA,oNAAW,EAAC,OAAO;QACtC,IAAI,CAAC,gBAAgB,CAAC,YAAY,MAAM,IAAI,MAAM;QAClD,IAAI,CAAC,IAAA,sIAAa,EAAC,WAAW,IAAI,EAAE,qBAAqB;YACvD,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,QAAQ,MAAM,IAAI,MAAM;QAE5B,IAAI;YACF,SAAS;YAET,+BAA+B;YAC/B,MAAM,iBAAiB,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YAClD,IAAI,gBAAgB,SAAS,SAAS;gBACpC,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,IAAA,8KAAS,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,wBAAwB;YAEhD,WAAW,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC/C,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC9C,MAAM;QACR;IACF,GAAG;QAAC;QAAc;QAAY;QAAS;KAAO;IAE9C,gBAAgB;IAChB,MAAM,eAAe,IAAA,oNAAW,EAAC,OAAO;QACtC,IAAI,CAAC,gBAAgB,CAAC,YAAY,MAAM,IAAI,MAAM;QAClD,IAAI,CAAC,IAAA,sIAAa,EAAC,WAAW,IAAI,EAAE,qBAAqB;YACvD,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,QAAQ,MAAM,IAAI,MAAM;QAE5B,IAAI;YACF,SAAS;YAET,MAAM,IAAA,8KAAS,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,wBAAwB,WAAW;gBACzD,QAAQ;YACV;YAEA,WAAW,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC/C,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,SAAS;YACT,MAAM;QACR;IACF,GAAG;QAAC;QAAc;QAAY;KAAO;IAErC,yCAAyC;IACzC,MAAM,sBAAsB,IAAA,oNAAW,EAAC,OAAO;QAC7C,IAAI;YACF,MAAM,eAAe,IAAA,0KAAK,EACxB,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBACf,IAAA,0KAAK,EAAC,SAAS,MAAM,MAAM,WAAW,KACtC,IAAA,0KAAK,EAAC,UAAU,MAAM;YAExB,MAAM,WAAW,MAAM,IAAA,4KAAO,EAAC;YAE/B,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA;gBACvB,MAAM,OAAO,IAAI,IAAI;gBACrB,OAAO;oBACL,GAAG,IAAI;oBACP,IAAI,IAAI,EAAE;oBACV,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;oBAC3C,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;gBAC7C;YACF,GAAG,MAAM,CAAC,CAAA,SAAU,OAAO,SAAS,GAAG,IAAI;QAC7C,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO,EAAE;QACX;IACF,GAAG,EAAE;IAEL,gBAAgB;IAChB,MAAM,eAAe,IAAA,oNAAW,EAAC,OAAO;QACtC,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAC3B,IAAI,QAAQ,MAAM,IAAI,MAAM;QAE5B,IAAI;YACF,WAAW;YACX,SAAS;YAET,iBAAiB;YACjB,MAAM,YAAY,MAAM,IAAA,2KAAM,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,wBAAwB;YAC/D,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM,IAAI,MAAM;YAEzC,MAAM,SAAS,UAAU,IAAI;YAC7B,IAAI,OAAO,MAAM,KAAK,WAAW,MAAM,IAAI,MAAM;YACjD,IAAI,OAAO,KAAK,KAAK,KAAK,KAAK,EAAE,eAAe,MAAM,IAAI,MAAM;YAChE,IAAI,OAAO,SAAS,CAAC,MAAM,KAAK,IAAI,QAAQ,MAAM,IAAI,MAAM;YAE5D,oBAAoB;YACpB,MAAM,aAAa;gBACjB,gBAAgB,OAAO,cAAc;gBACrC,QAAQ,KAAK,GAAG;gBAChB,OAAO,KAAK,KAAK;gBACjB,aAAa,aAAa,eAAe,KAAK,WAAW;gBACzD,MAAM,OAAO,IAAI;gBACjB,WAAW,OAAO,SAAS;gBAC3B,UAAU,IAAA,oLAAe;YAC3B;YAEA,MAAM,IAAA,2KAAM,EAAC,IAAA,+KAAU,EAAC,qHAAE,EAAE,yBAAyB;YAErD,uBAAuB;YACvB,MAAM,IAAA,8KAAS,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,wBAAwB,WAAW;gBACzD,QAAQ;gBACR,YAAY,IAAA,oLAAe;YAC7B;YAEA,6BAA6B;YAC7B,MAAM,IAAA,2KAAM,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,SAAS,KAAK,GAAG,GAAG;gBACvC,gBAAgB,OAAO,cAAc;YACvC,GAAG;gBAAE,OAAO;YAAK;YAEjB,yBAAyB;YACzB,MAAM,MAAM,MAAM,kBAAkB,OAAO,cAAc;YACzD,IAAI,KAAK;gBACP,gBAAgB;gBAChB,cAAc;oBACZ,GAAG,UAAU;oBACb,IAAI;oBACJ,UAAU,IAAI;gBAChB;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC9C,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;QAAM;QAAa;QAAQ;KAAkB;IAEjD,iBAAiB;IACjB,MAAM,gBAAgB,IAAA,oNAAW,EAAC,OAAO;QACvC,IAAI,QAAQ,MAAM,IAAI,MAAM;QAE5B,IAAI;YACF,SAAS;YAET,MAAM,IAAA,8KAAS,EAAC,IAAA,wKAAG,EAAC,qHAAE,EAAE,wBAAwB,WAAW;gBACzD,QAAQ;YACV;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,SAAS;YACT,MAAM;QACR;IACF,GAAG;QAAC;KAAO;IAEX,4BAA4B;IAC5B,MAAM,sBAAsB,IAAA,oNAAW,EAAC;QACtC,IAAI,CAAC,gBAAgB,QAAQ;QAE7B,IAAI;YACF,WAAW;YACX,MAAM,MAAM,MAAM,kBAAkB,aAAa,EAAE;YACnD,IAAI,KAAK,gBAAgB;YAEzB,IAAI,cAAc,IAAA,sIAAa,EAAC,WAAW,IAAI,EAAE,qBAAqB;gBACpE,MAAM,aAAa,MAAM,aAAa,aAAa,EAAE;gBACrD,WAAW;gBAEX,MAAM,aAAa,MAAM,aAAa,aAAa,EAAE;gBACrD,WAAW;YACb;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kCAAkC;QAClD,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;QAAc;QAAY;QAAQ;QAAmB;QAAc;KAAa;IAEpF,MAAM,QAAiC;QACrC,QAAQ;QACR;QACA;QACA;QACA;QACA;QACA;QAEA,WAAW;QACX;QACA;QACA;QACA;QACA;QAEA,0BAA0B;QAC1B;QACA;QACA;QAEA,oBAAoB;QACpB;QACA;QACA;QACA;QAEA,kBAAkB;QAClB;QACA;QACA;QAEA,YAAY;QACZ;QACA;IACF;IAEA,qBACE,8OAAC,oBAAoB,QAAQ;QAAC,OAAO;kBAClC;;;;;;AAGP;AAGO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 836, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/ProtectedRoute.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect } from 'react'\nimport { useRouter, usePathname } from 'next/navigation'\nimport { useAuth } from '@/context/AuthContext'\nimport { useOrganization } from '@/context/OrganizationContext'\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode\n  allowedRoles?: ('admin' | 'warehouse' | 'viewer')[]\n  requireOrganization?: boolean // Default: true - redirect to setup if no org\n}\n\nexport function ProtectedRoute({\n  children,\n  allowedRoles,\n  requireOrganization = true,\n}: ProtectedRouteProps) {\n  const { user, userProfile, loading: authLoading, isDemo } = useAuth()\n  const { organization, loading: orgLoading, needsSetup } = useOrganization()\n  const router = useRouter()\n  const pathname = usePathname()\n\n  const isLoading = authLoading || orgLoading\n\n  useEffect(() => {\n    if (isLoading) return\n\n    if (!user) {\n      // Not logged in - redirect to login\n      router.push(`/login?redirect=${encodeURIComponent(pathname)}`)\n      return\n    }\n\n    // Check role-based access\n    if (allowedRoles && userProfile && !allowedRoles.includes(userProfile.role)) {\n      router.push('/unauthorized')\n      return\n    }\n\n    // Check organization requirement (skip for demo mode)\n    if (requireOrganization && !isDemo && needsSetup) {\n      router.push('/setup')\n      return\n    }\n  }, [user, userProfile, isLoading, router, pathname, allowedRoles, organization, isDemo, needsSetup, requireOrganization])\n\n  // Show loading state\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-slate-950 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-slate-400\">Loading...</p>\n        </div>\n      </div>\n    )\n  }\n\n  // Not authenticated\n  if (!user) {\n    return null\n  }\n\n  // Not authorized\n  if (allowedRoles && userProfile && !allowedRoles.includes(userProfile.role)) {\n    return null\n  }\n\n  // Needs organization setup (non-demo users)\n  if (requireOrganization && !isDemo && needsSetup) {\n    return null\n  }\n\n  return <>{children}</>\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAaO,SAAS,eAAe,EAC7B,QAAQ,EACR,YAAY,EACZ,sBAAsB,IAAI,EACN;IACpB,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,SAAS,WAAW,EAAE,MAAM,EAAE,GAAG,IAAA,kIAAO;IACnE,MAAM,EAAE,YAAY,EAAE,SAAS,UAAU,EAAE,UAAU,EAAE,GAAG,IAAA,kJAAe;IACzE,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,YAAY,eAAe;IAEjC,IAAA,kNAAS,EAAC;QACR,IAAI,WAAW;QAEf,IAAI,CAAC,MAAM;YACT,oCAAoC;YACpC,OAAO,IAAI,CAAC,CAAC,gBAAgB,EAAE,mBAAmB,WAAW;YAC7D;QACF;QAEA,0BAA0B;QAC1B,IAAI,gBAAgB,eAAe,CAAC,aAAa,QAAQ,CAAC,YAAY,IAAI,GAAG;YAC3E,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,sDAAsD;QACtD,IAAI,uBAAuB,CAAC,UAAU,YAAY;YAChD,OAAO,IAAI,CAAC;YACZ;QACF;IACF,GAAG;QAAC;QAAM;QAAa;QAAW;QAAQ;QAAU;QAAc;QAAc;QAAQ;QAAY;KAAoB;IAExH,qBAAqB;IACrB,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;;;;;;IAItC;IAEA,oBAAoB;IACpB,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,iBAAiB;IACjB,IAAI,gBAAgB,eAAe,CAAC,aAAa,QAAQ,CAAC,YAAY,IAAI,GAAG;QAC3E,OAAO;IACT;IAEA,4CAA4C;IAC5C,IAAI,uBAAuB,CAAC,UAAU,YAAY;QAChD,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 940, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/layout/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useApp } from '@/context/AppContext';\nimport { useAuth } from '@/context/AuthContext';\n\ninterface NavItem {\n  href?: string;\n  icon: string;\n  label: string;\n  badge?: number;\n  children?: NavItem[];\n  id?: string;\n  isBrand?: boolean;\n}\n\nexport default function Sidebar() {\n  const pathname = usePathname();\n  const { state } = useApp();\n  const { userProfile, logout } = useAuth();\n  const [expandedMenus, setExpandedMenus] = useState<string[]>([]);\n\n  // Calculate badges from state\n  const toPickCount = state.orders.filter(o => o.status === 'to_pick' || o.status === 'picking').length;\n  const toPackCount = state.orders.filter(o => o.status === 'to_pack' || o.status === 'packing').length;\n  const pendingOrdersCount = state.orders.filter(o => !['shipped', 'delivered', 'cancelled', 'draft'].includes(o.status)).length;\n  const draftOrdersCount = state.orders.filter(o => o.status === 'draft').length;\n  const pendingReturnsCount = state.returns?.filter(r => !['refunded', 'rejected'].includes(r.status)).length || 0;\n  const pendingTransfersCount = state.transfers?.filter(t => t.status === 'in_transit').length || 0;\n  const pendingPOsCount = state.purchaseOrders?.filter(po => !['received', 'cancelled'].includes(po.status)).length || 0;\n  const pendingWOsCount = state.workOrders?.filter(wo => !['completed', 'cancelled'].includes(wo.status)).length || 0;\n\n  // Navigation structure\n  const navItems: NavItem[] = [\n    {\n      href: '/',\n      icon: 'fa-chart-line',\n      label: 'Dashboard'\n    },\n    {\n      id: 'inventory',\n      icon: 'fa-boxes-stacked',\n      label: 'Inventory',\n      children: [\n        { href: '/inventory', icon: 'fa-box', label: 'Products' },\n        { href: '/inventory/counts', icon: 'fa-clipboard-check', label: 'Stock Counts' },\n        { href: '/inventory/transfers', icon: 'fa-exchange-alt', label: 'Transfers', badge: pendingTransfersCount },\n        { href: '/inventory/suppliers', icon: 'fa-truck-loading', label: 'Suppliers' },\n        { href: '/inventory/bundles', icon: 'fa-layer-group', label: 'Bundles & Kits' },\n      ]\n    },\n    {\n      id: 'orders',\n      icon: 'fa-shopping-cart',\n      label: 'Orders',\n      badge: pendingOrdersCount,\n      children: [\n        { href: '/orders', icon: 'fa-list', label: 'All Orders', badge: pendingOrdersCount },\n        { href: '/orders/drafts', icon: 'fa-file-alt', label: 'Draft Orders', badge: draftOrdersCount },\n        { href: '/orders/returns', icon: 'fa-undo', label: 'Returns', badge: pendingReturnsCount },\n      ]\n    },\n    {\n      id: 'fulfillment',\n      icon: 'fa-shipping-fast',\n      label: 'Fulfillment',\n      badge: toPickCount + toPackCount,\n      children: [\n        { href: '/fulfillment', icon: 'fa-clipboard-list', label: 'Overview' },\n        { href: '/fulfillment/pick', icon: 'fa-hand-pointer', label: 'Pick Station', badge: toPickCount },\n        { href: '/fulfillment/pack', icon: 'fa-box-open', label: 'Pack Station', badge: toPackCount },\n        { href: '/fulfillment/fba', icon: 'fa-amazon', label: 'FBA Prep', isBrand: true },\n        { href: '/fulfillment/shipping', icon: 'fa-truck', label: 'Shipping' },\n      ]\n    },\n    {\n      id: 'operations',\n      icon: 'fa-cogs',\n      label: 'Operations',\n      badge: pendingPOsCount + pendingWOsCount,\n      children: [\n        { href: '/operations/purchase-orders', icon: 'fa-file-invoice', label: 'Purchase Orders', badge: pendingPOsCount },\n        { href: '/operations/work-orders', icon: 'fa-industry', label: 'Work Orders', badge: pendingWOsCount },\n      ]\n    },\n    {\n      id: 'marketing',\n      icon: 'fa-bullhorn',\n      label: 'Marketing',\n      children: [\n        { href: '/marketing', icon: 'fa-chart-line', label: 'Dashboard' },\n        { href: '/marketing/google-ads', icon: 'fa-google', label: 'Google Ads', isBrand: true },\n        { href: '/marketing/meta-ads', icon: 'fa-meta', label: 'Meta Ads', isBrand: true },\n        { href: '/marketing/amazon-ads', icon: 'fa-amazon', label: 'Amazon Ads', isBrand: true },\n        { href: '/marketing/tiktok-ads', icon: 'fa-tiktok', label: 'TikTok Ads', isBrand: true },\n        { href: '/marketing/email', icon: 'fa-envelope', label: 'Email Marketing' },\n      ]\n    },\n  ];\n\n  const bottomNavItems: NavItem[] = [\n    {\n      id: 'reports',\n      icon: 'fa-chart-pie',\n      label: 'Reports',\n      children: [\n        { href: '/reports', icon: 'fa-chart-line', label: 'Overview' },\n        { href: '/reports/sales', icon: 'fa-dollar-sign', label: 'Sales' },\n        { href: '/reports/inventory', icon: 'fa-boxes-stacked', label: 'Inventory' },\n        { href: '/reports/shipping', icon: 'fa-truck-fast', label: 'Shipping' },\n        { href: '/reports/returns', icon: 'fa-rotate-left', label: 'Returns' },\n        { href: '/reports/marketing', icon: 'fa-bullhorn', label: 'Marketing' },\n        { href: '/reports/financial', icon: 'fa-file-invoice-dollar', label: 'Financial' },\n        { href: '/reports/custom', icon: 'fa-wand-magic-sparkles', label: 'Custom Builder' },\n        { href: '/reports/scheduled', icon: 'fa-clock', label: 'Scheduled' },\n      ]\n    },\n    { href: '/settings', icon: 'fa-cog', label: 'Settings' },\n  ];\n\n  // Auto-expand menu based on current route\n  useEffect(() => {\n    [...navItems, ...bottomNavItems].forEach(item => {\n      if (item.children && item.id) {\n        const isActive = item.children.some(child =>\n          child.href === pathname || pathname.startsWith(child.href + '/')\n        );\n        if (isActive && !expandedMenus.includes(item.id)) {\n          setExpandedMenus(prev => [...prev, item.id!]);\n        }\n      }\n    });\n  }, [pathname]);\n\n  const toggleMenu = (menuId: string) => {\n    setExpandedMenus(prev =>\n      prev.includes(menuId)\n        ? prev.filter(id => id !== menuId)\n        : [...prev, menuId]\n    );\n  };\n\n  const isActiveRoute = (href: string) => {\n    if (href === '/') return pathname === '/';\n    return pathname === href || pathname.startsWith(href + '/');\n  };\n\n  const isParentActive = (item: NavItem) => {\n    if (!item.children) return false;\n    return item.children.some(child => child.href && isActiveRoute(child.href));\n  };\n\n  return (\n    <aside className=\"fixed left-0 top-0 z-40 h-screen w-64 bg-slate-900/80 border-r border-slate-700/50 flex flex-col\">\n      {/* Logo */}\n      <Link href=\"/\" className=\"block p-5 border-b border-slate-700/50 hover:bg-slate-800/30 transition-colors\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center\">\n            <i className=\"fas fa-leaf text-white text-lg\"></i>\n          </div>\n          <div>\n            <h1 className=\"font-bold text-white text-lg\">Cronk HQ</h1>\n            <p className=\"text-xs text-slate-400\">Operations & Fulfillment</p>\n          </div>\n        </div>\n      </Link>\n\n      {/* Main Navigation */}\n      <nav className=\"flex-1 p-4 space-y-1 overflow-y-auto\">\n        {navItems.map((item) => (\n          <div key={item.id || item.href}>\n            {item.children ? (\n              // Expandable menu\n              <>\n                <button\n                  onClick={() => toggleMenu(item.id!)}\n                  className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n                    isParentActive(item)\n                      ? 'bg-emerald-500/10 text-emerald-400'\n                      : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\n                  }`}\n                >\n                  <i className={`fas ${item.icon} w-5`}></i>\n                  <span className=\"font-medium\">{item.label}</span>\n                  {(item.badge ?? 0) > 0 && (\n                    <span className=\"ml-auto mr-2 bg-amber-500/20 text-amber-400 text-xs px-2 py-0.5 rounded-full\">\n                      {item.badge}\n                    </span>\n                  )}\n                  <i className={`fas fa-chevron-${expandedMenus.includes(item.id!) ? 'down' : 'right'} text-xs text-slate-500 ${(item.badge ?? 0) > 0 ? '' : 'ml-auto'}`}></i>\n                </button>\n\n                {/* Sub-menu */}\n                {expandedMenus.includes(item.id!) && (\n                  <div className=\"ml-4 mt-1 space-y-1 border-l border-slate-700/50 pl-3\">\n                    {item.children.map((child) => (\n                      <Link\n                        key={child.href}\n                        href={child.href!}\n                        className={`flex items-center gap-3 px-4 py-2 rounded-lg transition-all text-sm ${\n                          isActiveRoute(child.href!)\n                            ? 'bg-emerald-500/10 text-emerald-400'\n                            : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\n                        }`}\n                      >\n                        <i className={`${child.isBrand ? 'fab' : 'fas'} ${child.icon} w-4 text-xs`}></i>\n                        <span>{child.label}</span>\n                        {(child.badge ?? 0) > 0 && (\n                          <span className={`ml-auto text-xs px-2 py-0.5 rounded-full ${\n                            child.label.includes('Pick') ? 'bg-amber-500/20 text-amber-400' :\n                            child.label.includes('Pack') ? 'bg-blue-500/20 text-blue-400' :\n                            child.label.includes('Return') ? 'bg-purple-500/20 text-purple-400' :\n                            child.label.includes('Draft') ? 'bg-slate-500/20 text-slate-400' :\n                            'bg-slate-500/20 text-slate-400'\n                          }`}>\n                            {child.badge}\n                          </span>\n                        )}\n                      </Link>\n                    ))}\n                  </div>\n                )}\n              </>\n            ) : (\n              // Single menu item\n              <Link\n                href={item.href!}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n                  isActiveRoute(item.href!)\n                    ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20'\n                    : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\n                }`}\n              >\n                <i className={`fas ${item.icon} w-5`}></i>\n                <span className=\"font-medium\">{item.label}</span>\n                {(item.badge ?? 0) > 0 && (\n                  <span className=\"ml-auto bg-amber-500/20 text-amber-400 text-xs px-2 py-0.5 rounded-full\">\n                    {item.badge}\n                  </span>\n                )}\n              </Link>\n            )}\n          </div>\n        ))}\n\n        {/* Divider */}\n        <div className=\"my-4 border-t border-slate-700/50\"></div>\n\n        {/* Bottom Nav Items */}\n        {bottomNavItems.map((item) => (\n          <div key={item.id || item.href}>\n            {item.children ? (\n              // Expandable menu\n              <>\n                <button\n                  onClick={() => toggleMenu(item.id!)}\n                  className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n                    isParentActive(item)\n                      ? 'bg-emerald-500/10 text-emerald-400'\n                      : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\n                  }`}\n                >\n                  <i className={`fas ${item.icon} w-5`}></i>\n                  <span className=\"font-medium\">{item.label}</span>\n                  <i className={`fas fa-chevron-${expandedMenus.includes(item.id!) ? 'down' : 'right'} text-xs text-slate-500 ml-auto`}></i>\n                </button>\n\n                {/* Sub-menu */}\n                {expandedMenus.includes(item.id!) && (\n                  <div className=\"ml-4 mt-1 space-y-1 border-l border-slate-700/50 pl-3\">\n                    {item.children.map((child) => (\n                      <Link\n                        key={child.href}\n                        href={child.href!}\n                        className={`flex items-center gap-3 px-4 py-2 rounded-lg transition-all text-sm ${\n                          isActiveRoute(child.href!)\n                            ? 'bg-emerald-500/10 text-emerald-400'\n                            : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\n                        }`}\n                      >\n                        <i className={`${child.isBrand ? 'fab' : 'fas'} ${child.icon} w-4 text-xs`}></i>\n                        <span>{child.label}</span>\n                      </Link>\n                    ))}\n                  </div>\n                )}\n              </>\n            ) : (\n              // Single menu item\n              <Link\n                href={item.href!}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n                  isActiveRoute(item.href!)\n                    ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20'\n                    : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\n                }`}\n              >\n                <i className={`fas ${item.icon} w-5`}></i>\n                <span>{item.label}</span>\n              </Link>\n            )}\n          </div>\n        ))}\n      </nav>\n\n      {/* User */}\n      <div className=\"p-4 border-t border-slate-700/50\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-9 h-9 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center\">\n            <span className=\"text-white font-medium text-sm\">\n              {userProfile?.displayName\n                ? userProfile.displayName.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2)\n                : userProfile?.email?.slice(0, 2).toUpperCase() || 'U'}\n            </span>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"text-sm font-medium text-white truncate\">\n              {userProfile?.displayName || userProfile?.email || 'User'}\n            </div>\n            <div className=\"text-xs text-slate-400 truncate capitalize\">\n              {userProfile?.role || 'User'}\n            </div>\n          </div>\n          <button\n            onClick={() => logout()}\n            className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n            title=\"Sign out\"\n          >\n            <i className=\"fas fa-sign-out-alt\"></i>\n          </button>\n        </div>\n      </div>\n    </aside>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1619, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/layout/Header.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport {\n  Bell,\n  RefreshCw,\n  Calendar,\n  ChevronDown,\n  Check,\n  AlertTriangle,\n  Package,\n  ShoppingCart,\n} from 'lucide-react';\n\ntype DateRange = 'today' | 'wtd' | 'mtd' | 'ytd' | 'custom';\n\ninterface DateRangeOption {\n  value: DateRange;\n  label: string;\n}\n\nconst dateRangeOptions: DateRangeOption[] = [\n  { value: 'today', label: 'Today' },\n  { value: 'wtd', label: 'Week to Date' },\n  { value: 'mtd', label: 'Month to Date' },\n  { value: 'ytd', label: 'Year to Date' },\n  { value: 'custom', label: 'Custom Range' },\n];\n\nconst mockNotifications = [\n  {\n    id: 1,\n    type: 'warning',\n    title: 'Low Stock Alert',\n    message: 'Big Bud 1L is below reorder point (12 units)',\n    time: '5 min ago',\n  },\n  {\n    id: 2,\n    type: 'order',\n    title: 'New Order',\n    message: 'Order #10492 received from Shopify',\n    time: '12 min ago',\n  },\n  {\n    id: 3,\n    type: 'success',\n    title: 'Shipment Delivered',\n    message: 'Order #10485 delivered to customer',\n    time: '1 hour ago',\n  },\n];\n\nexport default function Header() {\n  const [dateRange, setDateRange] = useState<DateRange>('mtd');\n  const [showDateDropdown, setShowDateDropdown] = useState(false);\n  const [showNotifications, setShowNotifications] = useState(false);\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [lastSync, setLastSync] = useState('2 min ago');\n\n  const handleSync = () => {\n    setIsSyncing(true);\n    setTimeout(() => {\n      setIsSyncing(false);\n      setLastSync('Just now');\n    }, 2000);\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'warning':\n        return <AlertTriangle className=\"h-4 w-4 text-amber-400\" />;\n      case 'order':\n        return <ShoppingCart className=\"h-4 w-4 text-blue-400\" />;\n      case 'success':\n        return <Check className=\"h-4 w-4 text-emerald-400\" />;\n      default:\n        return <Package className=\"h-4 w-4 text-slate-400\" />;\n    }\n  };\n\n  return (\n    <header className=\"fixed top-0 left-64 right-0 z-30 h-16 bg-slate-900/80 backdrop-blur border-b border-slate-700/50\">\n      <div className=\"flex h-full items-center justify-between px-6\">\n        {/* Left side - Page context area (can be used by pages) */}\n        <div className=\"flex items-center gap-4\">\n          {/* This space can be used for breadcrumbs or page-specific actions */}\n        </div>\n\n        {/* Right side - Actions */}\n        <div className=\"flex items-center gap-4\">\n          {/* Date Range Picker */}\n          <div className=\"relative\">\n            <button\n              onClick={() => setShowDateDropdown(!showDateDropdown)}\n              className=\"flex items-center gap-2 rounded-lg bg-slate-800/50 px-4 py-2 text-sm font-medium text-white border border-slate-700/50 hover:bg-slate-700/50 transition-colors\"\n            >\n              <Calendar className=\"h-4 w-4 text-slate-400\" />\n              {dateRangeOptions.find((o) => o.value === dateRange)?.label}\n              <ChevronDown className=\"h-4 w-4 text-slate-400\" />\n            </button>\n\n            {showDateDropdown && (\n              <>\n                <div\n                  className=\"fixed inset-0 z-10\"\n                  onClick={() => setShowDateDropdown(false)}\n                />\n                <div className=\"absolute right-0 top-full mt-2 z-20 w-48 rounded-xl bg-slate-800 border border-slate-700/50 shadow-xl overflow-hidden\">\n                  {dateRangeOptions.map((option) => (\n                    <button\n                      key={option.value}\n                      onClick={() => {\n                        setDateRange(option.value);\n                        setShowDateDropdown(false);\n                      }}\n                      className={`w-full px-4 py-2.5 text-left text-sm transition-colors ${\n                        dateRange === option.value\n                          ? 'bg-emerald-500/20 text-emerald-400'\n                          : 'text-slate-300 hover:bg-slate-700/50'\n                      }`}\n                    >\n                      {option.label}\n                    </button>\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n\n          {/* Sync Status */}\n          <button\n            onClick={handleSync}\n            disabled={isSyncing}\n            className=\"flex items-center gap-2 rounded-lg bg-slate-800/50 px-4 py-2 text-sm font-medium border border-slate-700/50 hover:bg-slate-700/50 transition-colors disabled:opacity-50\"\n          >\n            <RefreshCw\n              className={`h-4 w-4 text-emerald-400 ${isSyncing ? 'animate-spin' : ''}`}\n            />\n            <span className=\"text-slate-300\">\n              {isSyncing ? 'Syncing...' : `Synced ${lastSync}`}\n            </span>\n          </button>\n\n          {/* Notifications */}\n          <div className=\"relative\">\n            <button\n              onClick={() => setShowNotifications(!showNotifications)}\n              className=\"relative flex h-10 w-10 items-center justify-center rounded-lg bg-slate-800/50 border border-slate-700/50 hover:bg-slate-700/50 transition-colors\"\n            >\n              <Bell className=\"h-5 w-5 text-slate-400\" />\n              <span className=\"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500 text-xs font-bold text-white\">\n                {mockNotifications.length}\n              </span>\n            </button>\n\n            {showNotifications && (\n              <>\n                <div\n                  className=\"fixed inset-0 z-10\"\n                  onClick={() => setShowNotifications(false)}\n                />\n                <div className=\"absolute right-0 top-full mt-2 z-20 w-80 rounded-xl bg-slate-800 border border-slate-700/50 shadow-xl overflow-hidden\">\n                  <div className=\"border-b border-slate-700/50 px-4 py-3\">\n                    <h3 className=\"text-sm font-semibold text-white\">\n                      Notifications\n                    </h3>\n                  </div>\n                  <div className=\"max-h-80 overflow-y-auto\">\n                    {mockNotifications.map((notification) => (\n                      <div\n                        key={notification.id}\n                        className=\"flex gap-3 px-4 py-3 hover:bg-slate-700/30 transition-colors border-b border-slate-700/30 last:border-0\"\n                      >\n                        <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-slate-700/50\">\n                          {getNotificationIcon(notification.type)}\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"text-sm font-medium text-white\">\n                            {notification.title}\n                          </p>\n                          <p className=\"text-xs text-slate-400 truncate\">\n                            {notification.message}\n                          </p>\n                          <p className=\"text-xs text-slate-500 mt-1\">\n                            {notification.time}\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"border-t border-slate-700/50 px-4 py-2\">\n                    <button className=\"w-full text-center text-sm text-emerald-400 hover:text-emerald-300 transition-colors\">\n                      View all notifications\n                    </button>\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2001, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/app/%28dashboard%29/layout.tsx"],"sourcesContent":["'use client'\n\nimport { ProtectedRoute } from '@/components/ProtectedRoute'\nimport Sidebar from '@/components/layout/Sidebar'\nimport Header from '@/components/layout/Header'\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <ProtectedRoute>\n      <Sidebar />\n      <Header />\n      <main className=\"ml-64 pt-16 min-h-screen bg-slate-900\">\n        <div className=\"p-6\">\n          {children}\n        </div>\n      </main>\n    </ProtectedRoute>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;IACC,qBACE,8OAAC,+IAAc;;0BACb,8OAAC,2IAAO;;;;;0BACR,8OAAC,0IAAM;;;;;0BACP,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAKX"}}]
}