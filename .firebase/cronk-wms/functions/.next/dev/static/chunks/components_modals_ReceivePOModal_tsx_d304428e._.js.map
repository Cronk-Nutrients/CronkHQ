{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/ReceivePOModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, PurchaseOrder, PurchaseOrderItem, SerialNumber, InventoryLot } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatCurrencyPrecise, formatNumber, formatDate } from '@/lib/formatting';\nimport { Package, Check, AlertTriangle, Hash, Wand2, X, Layers, Calendar } from 'lucide-react';\n\ninterface ReceivePOModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  po: PurchaseOrder | null;\n}\n\ntype ItemCondition = 'good' | 'damaged' | 'wrong_item' | 'short';\n\ninterface LotEntry {\n  lotNumber: string;\n  quantity: number;\n  expirationDate?: string;\n  manufacturedDate?: string;\n  supplierLotNumber?: string;\n  notes?: string;\n}\n\ninterface ReceivingItem {\n  productId: string;\n  productName: string;\n  sku: string;\n  ordered: number;\n  previouslyReceived: number;\n  receivingNow: number;\n  condition: ItemCondition;\n}\n\nexport function ReceivePOModal({ isOpen, onClose, po }: ReceivePOModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error, warning } = useToast();\n\n  // Form state\n  const [receivingItems, setReceivingItems] = useState<ReceivingItem[]>([]);\n  const [receivingNotes, setReceivingNotes] = useState('');\n  const [receiveLocation, setReceiveLocation] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Serial number state for serialized products\n  const [serialsByProduct, setSerialsByProduct] = useState<Record<string, string[]>>({});\n  const [serialInputs, setSerialInputs] = useState<Record<string, string>>({});\n\n  // Lot state for lot-tracked products\n  const [lotsByProduct, setLotsByProduct] = useState<Record<string, LotEntry[]>>({});\n  const [showLotForm, setShowLotForm] = useState<Record<string, boolean>>({});\n  const [newLot, setNewLot] = useState<LotEntry>({ lotNumber: '', quantity: 0 });\n\n  // Initialize receiving items when modal opens\n  useEffect(() => {\n    if (isOpen && po) {\n      setReceivingItems(po.items.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        ordered: item.quantity,\n        previouslyReceived: item.receivedQty,\n        receivingNow: item.quantity - item.receivedQty, // Default to remaining\n        condition: 'good' as ItemCondition,\n      })));\n      setReceivingNotes('');\n      setSerialsByProduct({});\n      setSerialInputs({});\n      setLotsByProduct({});\n      setShowLotForm({});\n      setNewLot({ lotNumber: '', quantity: 0 });\n      // Set default location\n      const defaultLoc = state.locations.find(l => l.isDefault);\n      setReceiveLocation(defaultLoc?.id || state.locations[0]?.id || '');\n    }\n  }, [isOpen, po, state.locations]);\n\n  // Update receiving quantity\n  const updateReceivingQty = (productId: string, qty: number) => {\n    setReceivingItems(prev => prev.map(item => {\n      if (item.productId === productId) {\n        const maxReceivable = item.ordered - item.previouslyReceived;\n        const clampedQty = Math.max(0, Math.min(qty, maxReceivable));\n        return { ...item, receivingNow: clampedQty };\n      }\n      return item;\n    }));\n  };\n\n  // Update condition\n  const updateCondition = (productId: string, condition: ItemCondition) => {\n    setReceivingItems(prev => prev.map(item =>\n      item.productId === productId ? { ...item, condition } : item\n    ));\n  };\n\n  // Receive all remaining\n  const receiveAllRemaining = () => {\n    setReceivingItems(prev => prev.map(item => ({\n      ...item,\n      receivingNow: item.ordered - item.previouslyReceived,\n      condition: 'good',\n    })));\n  };\n\n  // Get product info for serial tracking\n  const getProduct = (productId: string) => state.products.find(p => p.id === productId);\n\n  // Check if product tracks serials\n  const isSerialTracked = (productId: string) => {\n    const product = getProduct(productId);\n    return product?.trackSerials === true;\n  };\n\n  // Add serial number for a product\n  const addSerial = (productId: string, serial: string) => {\n    if (!serial.trim()) return;\n\n    const currentSerials = serialsByProduct[productId] || [];\n    // Check for duplicates\n    if (currentSerials.includes(serial.trim())) {\n      warning('Serial number already entered');\n      return;\n    }\n\n    setSerialsByProduct(prev => ({\n      ...prev,\n      [productId]: [...(prev[productId] || []), serial.trim()]\n    }));\n    setSerialInputs(prev => ({ ...prev, [productId]: '' }));\n  };\n\n  // Remove serial number\n  const removeSerial = (productId: string, index: number) => {\n    setSerialsByProduct(prev => ({\n      ...prev,\n      [productId]: (prev[productId] || []).filter((_, i) => i !== index)\n    }));\n  };\n\n  // Auto-generate serials for a product\n  const autoGenerateSerials = (productId: string, quantity: number) => {\n    const product = getProduct(productId);\n    if (!product) return;\n\n    const generated: string[] = [];\n    let nextNum = product.serialNextNumber || 1;\n\n    for (let i = 0; i < quantity; i++) {\n      const serial = `${product.serialPrefix || ''}${String(nextNum).padStart(4, '0')}${product.serialSuffix || ''}`;\n      generated.push(serial);\n      nextNum++;\n    }\n\n    setSerialsByProduct(prev => ({\n      ...prev,\n      [productId]: generated\n    }));\n\n    // Update product's next serial number\n    dispatch({\n      type: 'UPDATE_PRODUCT',\n      payload: { ...product, serialNextNumber: nextNum, updatedAt: new Date() }\n    });\n  };\n\n  // Check if product tracks lots\n  const isLotTracked = (productId: string) => {\n    const product = getProduct(productId);\n    return product?.trackLots === true;\n  };\n\n  // Check if product tracks expiration\n  const tracksExpiration = (productId: string) => {\n    const product = getProduct(productId);\n    return product?.expirationTracking === true;\n  };\n\n  // Generate lot number for a product\n  const generateLotNumber = (productId: string) => {\n    const product = getProduct(productId);\n    if (!product) return '';\n\n    const prefix = product.lotPrefix || 'LOT-';\n    const dateStr = new Date().toISOString().slice(0, 10).replace(/-/g, '');\n    const nextNum = product.lotNextNumber || 1;\n\n    return `${prefix}${dateStr}-${String(nextNum).padStart(3, '0')}`;\n  };\n\n  // Add lot for a product\n  const addLot = (productId: string, lot: LotEntry) => {\n    if (!lot.lotNumber.trim() || lot.quantity <= 0) return;\n\n    const existingLots = lotsByProduct[productId] || [];\n    // Check for duplicate lot numbers\n    if (existingLots.some(l => l.lotNumber === lot.lotNumber)) {\n      warning('Lot number already exists');\n      return;\n    }\n\n    setLotsByProduct(prev => ({\n      ...prev,\n      [productId]: [...(prev[productId] || []), { ...lot }]\n    }));\n\n    // Update product's next lot number\n    const product = getProduct(productId);\n    if (product) {\n      dispatch({\n        type: 'UPDATE_PRODUCT',\n        payload: { ...product, lotNextNumber: (product.lotNextNumber || 1) + 1, updatedAt: new Date() }\n      });\n    }\n\n    // Reset form\n    setNewLot({ lotNumber: '', quantity: 0 });\n    setShowLotForm(prev => ({ ...prev, [productId]: false }));\n  };\n\n  // Remove lot\n  const removeLot = (productId: string, index: number) => {\n    setLotsByProduct(prev => ({\n      ...prev,\n      [productId]: (prev[productId] || []).filter((_, i) => i !== index)\n    }));\n  };\n\n  // Get total qty in lots for a product\n  const getLotTotalQty = (productId: string) => {\n    const lots = lotsByProduct[productId] || [];\n    return lots.reduce((sum, l) => sum + l.quantity, 0);\n  };\n\n  // Calculate totals\n  const totals = useMemo(() => {\n    const totalOrdered = receivingItems.reduce((sum, i) => sum + i.ordered, 0);\n    const totalPreviouslyReceived = receivingItems.reduce((sum, i) => sum + i.previouslyReceived, 0);\n    const totalReceivingNow = receivingItems.reduce((sum, i) => sum + i.receivingNow, 0);\n    const totalAfter = totalPreviouslyReceived + totalReceivingNow;\n\n    return {\n      totalOrdered,\n      totalPreviouslyReceived,\n      totalReceivingNow,\n      totalAfter,\n      percentComplete: totalOrdered > 0 ? (totalAfter / totalOrdered) * 100 : 0,\n      willBeFullyReceived: totalAfter >= totalOrdered,\n    };\n  }, [receivingItems]);\n\n  // Check if any items have issues\n  const hasIssues = useMemo(() => {\n    return receivingItems.some(item => item.condition !== 'good' && item.receivingNow > 0);\n  }, [receivingItems]);\n\n  // Submit receive\n  const handleReceive = () => {\n    if (!po || totals.totalReceivingNow <= 0) return;\n\n    setIsSubmitting(true);\n\n    try {\n      // Update PO items with new received quantities\n      const updatedItems: PurchaseOrderItem[] = po.items.map(item => {\n        const receiving = receivingItems.find(r => r.productId === item.productId);\n        return {\n          ...item,\n          receivedQty: item.receivedQty + (receiving?.receivingNow || 0),\n        };\n      });\n\n      // Check if fully received\n      const fullyReceived = updatedItems.every(item => item.receivedQty >= item.quantity);\n\n      // Determine new status\n      let newStatus: PurchaseOrder['status'] = po.status;\n      if (fullyReceived) {\n        newStatus = 'received';\n      } else if (updatedItems.some(item => item.receivedQty > 0)) {\n        newStatus = 'partial';\n      }\n\n      // Update PO\n      const updatedPO: PurchaseOrder = {\n        ...po,\n        items: updatedItems,\n        status: newStatus,\n        updatedAt: new Date(),\n      };\n\n      dispatch({ type: 'UPDATE_PURCHASE_ORDER', payload: updatedPO });\n\n      // Update inventory for each received item\n      const locationName = state.locations.find(l => l.id === receiveLocation)?.name || '';\n\n      receivingItems.forEach(item => {\n        if (item.receivingNow > 0 && item.condition === 'good') {\n          dispatch({\n            type: 'ADJUST_STOCK',\n            payload: {\n              productId: item.productId,\n              locationId: receiveLocation,\n              adjustment: item.receivingNow,\n            }\n          });\n\n          // Create serial number records for serialized products\n          if (isSerialTracked(item.productId)) {\n            const productSerials = serialsByProduct[item.productId] || [];\n            const serialRecords: SerialNumber[] = productSerials.map(serial => ({\n              id: crypto.randomUUID(),\n              serial,\n              productId: item.productId,\n              productName: item.productName,\n              sku: item.sku,\n              status: 'in_stock' as const,\n              locationId: receiveLocation,\n              locationName,\n              purchaseOrderId: po.id,\n              receivedAt: new Date()\n            }));\n\n            if (serialRecords.length > 0) {\n              dispatch({ type: 'ADD_SERIAL_NUMBERS', payload: serialRecords });\n            }\n          }\n\n          // Create lot records for lot-tracked products\n          if (isLotTracked(item.productId)) {\n            const productLots = lotsByProduct[item.productId] || [];\n            const lotRecords: InventoryLot[] = productLots.map(lot => ({\n              id: crypto.randomUUID(),\n              lotNumber: lot.lotNumber,\n              productId: item.productId,\n              productName: item.productName,\n              sku: item.sku,\n              quantity: lot.quantity,\n              reservedQty: 0,\n              expirationDate: lot.expirationDate ? new Date(lot.expirationDate) : undefined,\n              manufacturedDate: lot.manufacturedDate ? new Date(lot.manufacturedDate) : undefined,\n              receivedDate: new Date(),\n              status: 'active' as const,\n              locationId: receiveLocation,\n              locationName,\n              purchaseOrderId: po.id,\n              supplierLotNumber: lot.supplierLotNumber,\n              notes: lot.notes\n            }));\n\n            if (lotRecords.length > 0) {\n              dispatch({ type: 'ADD_LOTS', payload: lotRecords });\n            }\n          }\n        }\n      });\n\n      // Show appropriate message\n      if (hasIssues) {\n        warning(`Received ${formatNumber(totals.totalReceivingNow)} units with some issues noted`);\n      } else if (fullyReceived) {\n        success(`PO ${po.poNumber} fully received! ${formatNumber(totals.totalReceivingNow)} units added to inventory`);\n      } else {\n        success(`Received ${formatNumber(totals.totalReceivingNow)} units on PO ${po.poNumber}`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to receive items');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!po) return null;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title=\"Receive Items\"\n      subtitle={`${po.poNumber} from ${po.supplier}`}\n      size=\"xl\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleReceive}\n            disabled={isSubmitting || totals.totalReceivingNow <= 0}\n          >\n            {isSubmitting ? (\n              'Processing...'\n            ) : (\n              <>\n                <Check className=\"w-4 h-4\" />\n                Receive {formatNumber(totals.totalReceivingNow)} Units\n              </>\n            )}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* PO Summary */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <div className=\"grid grid-cols-4 gap-4 text-sm\">\n            <div>\n              <span className=\"text-slate-400\">PO Number:</span>\n              <span className=\"ml-2 text-white font-mono\">{po.poNumber}</span>\n            </div>\n            <div>\n              <span className=\"text-slate-400\">Supplier:</span>\n              <span className=\"ml-2 text-white\">{po.supplier}</span>\n            </div>\n            <div>\n              <span className=\"text-slate-400\">Expected:</span>\n              <span className=\"ml-2 text-white\">\n                {po.expectedDate ? formatDate(po.expectedDate) : 'Not set'}\n              </span>\n            </div>\n            <div>\n              <span className=\"text-slate-400\">Total Value:</span>\n              <span className=\"ml-2 text-white font-medium\">{formatCurrencyPrecise(po.total)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Progress */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm text-slate-400\">Receiving Progress</span>\n            <span className=\"text-sm text-white\">\n              {formatNumber(totals.totalAfter)} / {formatNumber(totals.totalOrdered)} units\n              ({totals.percentComplete.toFixed(0)}%)\n            </span>\n          </div>\n          <div className=\"w-full bg-slate-700 rounded-full h-2\">\n            <div\n              className={`h-2 rounded-full transition-all ${\n                totals.willBeFullyReceived ? 'bg-emerald-500' : 'bg-blue-500'\n              }`}\n              style={{ width: `${Math.min(totals.percentComplete, 100)}%` }}\n            />\n          </div>\n          {totals.willBeFullyReceived && (\n            <p className=\"text-xs text-emerald-400 mt-2\">\n              <Check className=\"w-3 h-3 inline mr-1\" />\n              This will complete the PO\n            </p>\n          )}\n        </div>\n\n        {/* Receive Location */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Receive to Location</label>\n          <select\n            value={receiveLocation}\n            onChange={e => setReceiveLocation(e.target.value)}\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n          >\n            {state.locations.map(loc => (\n              <option key={loc.id} value={loc.id}>{loc.name}</option>\n            ))}\n          </select>\n        </div>\n\n        {/* Line Items */}\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-sm font-medium text-white\">Items to Receive</h3>\n            <button\n              onClick={receiveAllRemaining}\n              className=\"text-sm text-emerald-400 hover:text-emerald-300\"\n            >\n              Receive All Remaining\n            </button>\n          </div>\n\n          <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n            <table className=\"w-full\">\n              <thead className=\"bg-slate-800/50\">\n                <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                  <th className=\"px-4 py-3 text-left\">Product</th>\n                  <th className=\"px-4 py-3 text-center\">Ordered</th>\n                  <th className=\"px-4 py-3 text-center\">Previously Received</th>\n                  <th className=\"px-4 py-3 text-center\">Receiving Now</th>\n                  <th className=\"px-4 py-3 text-center\">Condition</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-slate-700/50\">\n                {receivingItems.map(item => {\n                  const remaining = item.ordered - item.previouslyReceived;\n                  const isComplete = remaining <= 0;\n                  const isSerial = isSerialTracked(item.productId);\n                  const isLot = isLotTracked(item.productId);\n                  const productSerials = serialsByProduct[item.productId] || [];\n                  const serialInput = serialInputs[item.productId] || '';\n\n                  return (\n                    <tr\n                      key={item.productId}\n                      className={`${isComplete ? 'bg-emerald-500/5' : 'hover:bg-slate-800/30'}`}\n                    >\n                      <td className=\"px-4 py-3\" colSpan={isSerial && !isComplete && item.receivingNow > 0 ? 1 : undefined}>\n                        <div className=\"text-sm text-white\">{item.productName}</div>\n                        <div className=\"text-xs text-slate-400 font-mono\">\n                          {item.sku}\n                          {isSerial && (\n                            <span className=\"ml-2 text-purple-400\">\n                              <Hash className=\"w-3 h-3 inline\" /> Serial Tracked\n                            </span>\n                          )}\n                          {isLot && (\n                            <span className=\"ml-2 text-purple-400\">\n                              <Layers className=\"w-3 h-3 inline\" /> Lot Tracked\n                            </span>\n                          )}\n                        </div>\n\n                        {/* Serial Entry Section */}\n                        {isSerial && !isComplete && item.receivingNow > 0 && (\n                          <div className=\"mt-3 p-3 bg-slate-800/50 rounded-lg border border-slate-700/50\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                              <span className=\"text-xs text-slate-400\">\n                                Serial Numbers ({productSerials.length} / {item.receivingNow})\n                              </span>\n                              <button\n                                type=\"button\"\n                                onClick={() => autoGenerateSerials(item.productId, item.receivingNow)}\n                                className=\"text-xs text-emerald-400 hover:text-emerald-300 flex items-center gap-1\"\n                              >\n                                <Wand2 className=\"w-3 h-3\" />\n                                Auto-Generate\n                              </button>\n                            </div>\n\n                            {/* Serial Input */}\n                            <div className=\"flex gap-2 mb-2\">\n                              <input\n                                type=\"text\"\n                                value={serialInput}\n                                onChange={(e) => setSerialInputs(prev => ({ ...prev, [item.productId]: e.target.value }))}\n                                onKeyDown={(e) => {\n                                  if (e.key === 'Enter') {\n                                    e.preventDefault();\n                                    addSerial(item.productId, serialInput);\n                                  }\n                                }}\n                                placeholder=\"Enter or scan serial...\"\n                                className=\"flex-1 bg-slate-700 border border-slate-600 rounded px-3 py-1.5 text-sm text-white placeholder-slate-500 font-mono\"\n                              />\n                              <button\n                                type=\"button\"\n                                onClick={() => addSerial(item.productId, serialInput)}\n                                className=\"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-sm rounded transition-colors\"\n                              >\n                                Add\n                              </button>\n                            </div>\n\n                            {/* Serial List */}\n                            {productSerials.length > 0 && (\n                              <div className=\"max-h-24 overflow-y-auto space-y-1\">\n                                {productSerials.map((serial, idx) => (\n                                  <div key={idx} className=\"flex items-center justify-between px-2 py-1 bg-slate-700/50 rounded text-xs\">\n                                    <span className=\"font-mono text-white\">{serial}</span>\n                                    <button\n                                      type=\"button\"\n                                      onClick={() => removeSerial(item.productId, idx)}\n                                      className=\"text-red-400 hover:text-red-300\"\n                                    >\n                                      <X className=\"w-3 h-3\" />\n                                    </button>\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n\n                            {/* Warning if count mismatch */}\n                            {productSerials.length !== item.receivingNow && (\n                              <div className=\"mt-2 text-xs text-amber-400 flex items-center gap-1\">\n                                <AlertTriangle className=\"w-3 h-3\" />\n                                {productSerials.length < item.receivingNow\n                                  ? `Need ${item.receivingNow - productSerials.length} more serial(s)`\n                                  : `${productSerials.length - item.receivingNow} extra serial(s)`}\n                              </div>\n                            )}\n                          </div>\n                        )}\n\n                        {/* Lot Entry Section */}\n                        {isLot && !isComplete && item.receivingNow > 0 && (\n                          <div className=\"mt-3 p-3 bg-purple-900/20 rounded-lg border border-purple-500/30\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                              <span className=\"text-xs text-slate-400 flex items-center gap-1\">\n                                <Layers className=\"w-3 h-3 text-purple-400\" />\n                                Lot Numbers ({getLotTotalQty(item.productId)} / {item.receivingNow} units)\n                              </span>\n                              <button\n                                type=\"button\"\n                                onClick={() => {\n                                  setNewLot({\n                                    lotNumber: generateLotNumber(item.productId),\n                                    quantity: item.receivingNow - getLotTotalQty(item.productId)\n                                  });\n                                  setShowLotForm(prev => ({ ...prev, [item.productId]: true }));\n                                }}\n                                className=\"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1\"\n                              >\n                                <Wand2 className=\"w-3 h-3\" />\n                                Add Lot\n                              </button>\n                            </div>\n\n                            {/* Lot List */}\n                            {(lotsByProduct[item.productId] || []).map((lot, idx) => (\n                              <div key={idx} className=\"flex items-center justify-between px-3 py-2 bg-slate-700/50 rounded mb-1 text-xs\">\n                                <div>\n                                  <span className=\"font-mono text-white\">{lot.lotNumber}</span>\n                                  <span className=\"text-slate-400 ml-2\">x{lot.quantity}</span>\n                                  {lot.expirationDate && (\n                                    <span className=\"text-amber-400 ml-2 flex items-center gap-1 inline-flex\">\n                                      <Calendar className=\"w-3 h-3\" />\n                                      Exp: {lot.expirationDate}\n                                    </span>\n                                  )}\n                                </div>\n                                <button\n                                  type=\"button\"\n                                  onClick={() => removeLot(item.productId, idx)}\n                                  className=\"text-red-400 hover:text-red-300\"\n                                >\n                                  <X className=\"w-3 h-3\" />\n                                </button>\n                              </div>\n                            ))}\n\n                            {/* Add Lot Form */}\n                            {showLotForm[item.productId] && (\n                              <div className=\"mt-2 p-3 bg-slate-800/50 rounded-lg space-y-2\">\n                                <div className=\"grid grid-cols-2 gap-2\">\n                                  <div>\n                                    <label className=\"text-xs text-slate-400 block mb-1\">Lot Number</label>\n                                    <input\n                                      type=\"text\"\n                                      value={newLot.lotNumber}\n                                      onChange={(e) => setNewLot(prev => ({ ...prev, lotNumber: e.target.value }))}\n                                      className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white font-mono\"\n                                    />\n                                  </div>\n                                  <div>\n                                    <label className=\"text-xs text-slate-400 block mb-1\">Quantity</label>\n                                    <input\n                                      type=\"number\"\n                                      min=\"1\"\n                                      value={newLot.quantity}\n                                      onChange={(e) => setNewLot(prev => ({ ...prev, quantity: parseInt(e.target.value) || 0 }))}\n                                      className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white\"\n                                    />\n                                  </div>\n                                </div>\n\n                                {tracksExpiration(item.productId) && (\n                                  <div className=\"grid grid-cols-2 gap-2\">\n                                    <div>\n                                      <label className=\"text-xs text-slate-400 block mb-1\">Expiration Date</label>\n                                      <input\n                                        type=\"date\"\n                                        value={newLot.expirationDate || ''}\n                                        onChange={(e) => setNewLot(prev => ({ ...prev, expirationDate: e.target.value }))}\n                                        className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white\"\n                                      />\n                                    </div>\n                                    <div>\n                                      <label className=\"text-xs text-slate-400 block mb-1\">Manufactured Date</label>\n                                      <input\n                                        type=\"date\"\n                                        value={newLot.manufacturedDate || ''}\n                                        onChange={(e) => setNewLot(prev => ({ ...prev, manufacturedDate: e.target.value }))}\n                                        className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white\"\n                                      />\n                                    </div>\n                                  </div>\n                                )}\n\n                                <div>\n                                  <label className=\"text-xs text-slate-400 block mb-1\">Supplier Lot # (Optional)</label>\n                                  <input\n                                    type=\"text\"\n                                    value={newLot.supplierLotNumber || ''}\n                                    onChange={(e) => setNewLot(prev => ({ ...prev, supplierLotNumber: e.target.value }))}\n                                    placeholder=\"Manufacturer's lot number\"\n                                    className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white placeholder-slate-500\"\n                                  />\n                                </div>\n\n                                <div className=\"flex justify-end gap-2 mt-2\">\n                                  <button\n                                    type=\"button\"\n                                    onClick={() => setShowLotForm(prev => ({ ...prev, [item.productId]: false }))}\n                                    className=\"px-3 py-1.5 text-sm text-slate-400 hover:text-white\"\n                                  >\n                                    Cancel\n                                  </button>\n                                  <button\n                                    type=\"button\"\n                                    onClick={() => addLot(item.productId, newLot)}\n                                    className=\"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded transition-colors\"\n                                  >\n                                    Add Lot\n                                  </button>\n                                </div>\n                              </div>\n                            )}\n\n                            {/* Warning if qty mismatch */}\n                            {getLotTotalQty(item.productId) !== item.receivingNow && !showLotForm[item.productId] && (\n                              <div className=\"mt-2 text-xs text-amber-400 flex items-center gap-1\">\n                                <AlertTriangle className=\"w-3 h-3\" />\n                                {getLotTotalQty(item.productId) < item.receivingNow\n                                  ? `Need ${item.receivingNow - getLotTotalQty(item.productId)} more units assigned to lots`\n                                  : `${getLotTotalQty(item.productId) - item.receivingNow} extra units assigned`}\n                              </div>\n                            )}\n                          </div>\n                        )}\n                      </td>\n                      <td className=\"px-4 py-3 text-center text-sm text-white align-top\">\n                        {formatNumber(item.ordered)}\n                      </td>\n                      <td className=\"px-4 py-3 text-center text-sm align-top\">\n                        <span className={item.previouslyReceived > 0 ? 'text-emerald-400' : 'text-slate-400'}>\n                          {formatNumber(item.previouslyReceived)}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-3 align-top\">\n                        {isComplete ? (\n                          <div className=\"text-center text-sm text-emerald-400\">\n                            <Check className=\"w-4 h-4 inline mr-1\" />\n                            Complete\n                          </div>\n                        ) : (\n                          <input\n                            type=\"number\"\n                            min=\"0\"\n                            max={remaining}\n                            value={item.receivingNow}\n                            onChange={e => updateReceivingQty(item.productId, parseInt(e.target.value) || 0)}\n                            className=\"w-20 mx-auto block bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-white text-center text-sm\"\n                          />\n                        )}\n                      </td>\n                      <td className=\"px-4 py-3 align-top\">\n                        {!isComplete && item.receivingNow > 0 && (\n                          <select\n                            value={item.condition}\n                            onChange={e => updateCondition(item.productId, e.target.value as ItemCondition)}\n                            className={`w-full bg-slate-700 border rounded px-2 py-1.5 text-sm ${\n                              item.condition === 'good'\n                                ? 'border-slate-600 text-white'\n                                : 'border-amber-500/50 text-amber-400'\n                            }`}\n                          >\n                            <option value=\"good\">Good</option>\n                            <option value=\"damaged\">Damaged</option>\n                            <option value=\"wrong_item\">Wrong Item</option>\n                            <option value=\"short\">Short</option>\n                          </select>\n                        )}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        {/* Issues Warning */}\n        {hasIssues && (\n          <div className=\"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-start gap-3\">\n            <AlertTriangle className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" />\n            <div>\n              <div className=\"text-sm font-medium text-amber-400\">Issues Noted</div>\n              <div className=\"text-sm text-slate-300 mt-1\">\n                Some items are marked with condition issues. Items marked as damaged, wrong item, or short\n                will still be received but the issues will be logged.\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Receiving Notes */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Receiving Notes (Optional)</label>\n          <textarea\n            value={receivingNotes}\n            onChange={e => setReceivingNotes(e.target.value)}\n            rows={2}\n            placeholder=\"Note any issues, discrepancies, or special handling...\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default ReceivePOModal;\n"],"names":[],"mappings":"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"}}]
}