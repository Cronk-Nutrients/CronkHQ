{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/lib/formatting.ts"],"sourcesContent":["/**\n * Shared formatting utilities\n */\n\nexport function formatCurrency(amount: number): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(amount);\n}\n\nexport function formatCurrencyPrecise(amount: number): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(amount);\n}\n\nexport function formatNumber(num: number): string {\n  return new Intl.NumberFormat('en-US').format(num);\n}\n\nexport function formatPercent(num: number, showSign: boolean = true): string {\n  if (showSign) {\n    return `${num >= 0 ? '+' : ''}${num.toFixed(1)}%`;\n  }\n  return `${num.toFixed(1)}%`;\n}\n\nexport function formatWeight(oz: number): string {\n  if (oz >= 16) {\n    return `${(oz / 16).toFixed(1)} lbs`;\n  }\n  return `${oz.toFixed(1)} oz`;\n}\n\nexport function formatDate(date: string | Date): string {\n  return new Date(date).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nexport function formatDateTime(date: string | Date): string {\n  return new Date(date).toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n  });\n}\n\nexport function formatRelativeTime(date: string | Date): string {\n  const now = new Date();\n  const then = new Date(date);\n  const diffMs = now.getTime() - then.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMs / 3600000);\n  const diffDays = Math.floor(diffMs / 86400000);\n\n  if (diffMins < 1) return 'Just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n  return formatDate(date);\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;;;AAEM,SAAS,eAAe,MAAc;IAC3C,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,sBAAsB,MAAc;IAClD,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,aAAa,GAAW;IACtC,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS,MAAM,CAAC;AAC/C;AAEO,SAAS,cAAc,GAAW,EAAE,WAAoB,IAAI;IACjE,IAAI,UAAU;QACZ,OAAO,GAAG,OAAO,IAAI,MAAM,KAAK,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC;IACnD;IACA,OAAO,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC;AAC7B;AAEO,SAAS,aAAa,EAAU;IACrC,IAAI,MAAM,IAAI;QACZ,OAAO,GAAG,CAAC,KAAK,EAAE,EAAE,OAAO,CAAC,GAAG,IAAI,CAAC;IACtC;IACA,OAAO,GAAG,GAAG,OAAO,CAAC,GAAG,GAAG,CAAC;AAC9B;AAEO,SAAS,WAAW,IAAmB;IAC5C,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;QAChD,OAAO;QACP,KAAK;QACL,MAAM;IACR;AACF;AAEO,SAAS,eAAe,IAAmB;IAChD,OAAO,IAAI,KAAK,MAAM,cAAc,CAAC,SAAS;QAC5C,OAAO;QACP,KAAK;QACL,MAAM;QACN,MAAM;QACN,QAAQ;IACV;AACF;AAEO,SAAS,mBAAmB,IAAmB;IACpD,MAAM,MAAM,IAAI;IAChB,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,SAAS,IAAI,OAAO,KAAK,KAAK,OAAO;IAC3C,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;IACrC,MAAM,YAAY,KAAK,KAAK,CAAC,SAAS;IACtC,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;IAErC,IAAI,WAAW,GAAG,OAAO;IACzB,IAAI,WAAW,IAAI,OAAO,GAAG,SAAS,KAAK,CAAC;IAC5C,IAAI,YAAY,IAAI,OAAO,GAAG,UAAU,KAAK,CAAC;IAC9C,IAAI,WAAW,GAAG,OAAO,GAAG,SAAS,KAAK,CAAC;IAC3C,OAAO,WAAW;AACpB"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/lib/firestore.ts"],"sourcesContent":["import {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  setDoc,\n  updateDoc,\n  deleteDoc,\n  query,\n  where,\n  orderBy,\n  limit,\n  startAfter,\n  onSnapshot,\n  writeBatch,\n  increment,\n  serverTimestamp,\n  Timestamp,\n  QueryConstraint,\n  DocumentSnapshot,\n  Unsubscribe,\n} from 'firebase/firestore'\nimport { db } from '@/lib/firebase'\n\n// Helper to convert Firestore timestamps to Dates\nexport function convertTimestamps<T>(data: any): T {\n  if (!data) return data\n\n  const converted = { ...data }\n\n  for (const key in converted) {\n    if (converted[key] instanceof Timestamp) {\n      converted[key] = converted[key].toDate()\n    } else if (converted[key] && typeof converted[key] === 'object' && !Array.isArray(converted[key])) {\n      converted[key] = convertTimestamps(converted[key])\n    }\n  }\n\n  return converted as T\n}\n\n// Generic Firestore service for organization-scoped data\nexport class FirestoreService<T extends { id: string }> {\n  private orgId: string\n  private collectionName: string\n\n  constructor(organizationId: string, collectionName: string) {\n    this.orgId = organizationId\n    this.collectionName = collectionName\n  }\n\n  // Get collection reference\n  private getCollectionRef() {\n    return collection(db, 'organizations', this.orgId, this.collectionName)\n  }\n\n  // Get document reference\n  private getDocRef(id: string) {\n    return doc(db, 'organizations', this.orgId, this.collectionName, id)\n  }\n\n  // Get all documents\n  async getAll(...queryConstraints: QueryConstraint[]): Promise<T[]> {\n    const ref = this.getCollectionRef()\n    const q = queryConstraints.length > 0 ? query(ref, ...queryConstraints) : query(ref)\n    const snapshot = await getDocs(q)\n    return snapshot.docs.map(doc => convertTimestamps<T>({ id: doc.id, ...doc.data() }))\n  }\n\n  // Get single document\n  async get(id: string): Promise<T | null> {\n    const docRef = this.getDocRef(id)\n    const docSnap = await getDoc(docRef)\n    if (docSnap.exists()) {\n      return convertTimestamps<T>({ id: docSnap.id, ...docSnap.data() })\n    }\n    return null\n  }\n\n  // Create document\n  async create(data: Omit<T, 'id' | 'createdAt' | 'updatedAt'>, customId?: string): Promise<string> {\n    const colRef = this.getCollectionRef()\n    const docRef = customId ? doc(colRef, customId) : doc(colRef)\n\n    await setDoc(docRef, {\n      ...data,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    })\n\n    return docRef.id\n  }\n\n  // Update document\n  async update(id: string, data: Partial<T>): Promise<void> {\n    const docRef = this.getDocRef(id)\n    await updateDoc(docRef, {\n      ...data,\n      updatedAt: serverTimestamp(),\n    })\n  }\n\n  // Delete document\n  async delete(id: string): Promise<void> {\n    const docRef = this.getDocRef(id)\n    await deleteDoc(docRef)\n  }\n\n  // Subscribe to real-time updates (all documents)\n  subscribe(\n    callback: (data: T[]) => void,\n    errorCallback?: (error: Error) => void,\n    ...queryConstraints: QueryConstraint[]\n  ): Unsubscribe {\n    const ref = this.getCollectionRef()\n    const q = queryConstraints.length > 0 ? query(ref, ...queryConstraints) : query(ref)\n\n    return onSnapshot(\n      q,\n      (snapshot) => {\n        const data = snapshot.docs.map(doc => convertTimestamps<T>({ id: doc.id, ...doc.data() }))\n        callback(data)\n      },\n      errorCallback\n    )\n  }\n\n  // Subscribe to single document\n  subscribeToDoc(\n    id: string,\n    callback: (data: T | null) => void,\n    errorCallback?: (error: Error) => void\n  ): Unsubscribe {\n    const docRef = this.getDocRef(id)\n\n    return onSnapshot(\n      docRef,\n      (docSnap) => {\n        if (docSnap.exists()) {\n          callback(convertTimestamps<T>({ id: docSnap.id, ...docSnap.data() }))\n        } else {\n          callback(null)\n        }\n      },\n      errorCallback\n    )\n  }\n\n  // Batch operations\n  async batchCreate(items: Omit<T, 'id' | 'createdAt' | 'updatedAt'>[]): Promise<string[]> {\n    const batch = writeBatch(db)\n    const ids: string[] = []\n\n    for (const item of items) {\n      const docRef = doc(this.getCollectionRef())\n      ids.push(docRef.id)\n      batch.set(docRef, {\n        ...item,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      })\n    }\n\n    await batch.commit()\n    return ids\n  }\n\n  async batchUpdate(updates: { id: string; data: Partial<T> }[]): Promise<void> {\n    const batch = writeBatch(db)\n\n    for (const { id, data } of updates) {\n      const docRef = this.getDocRef(id)\n      batch.update(docRef, {\n        ...data,\n        updatedAt: serverTimestamp(),\n      })\n    }\n\n    await batch.commit()\n  }\n\n  async batchDelete(ids: string[]): Promise<void> {\n    const batch = writeBatch(db)\n\n    for (const id of ids) {\n      batch.delete(this.getDocRef(id))\n    }\n\n    await batch.commit()\n  }\n\n  // Pagination helper\n  async getPaginated(\n    pageSize: number,\n    lastDoc?: DocumentSnapshot,\n    ...queryConstraints: QueryConstraint[]\n  ): Promise<{ data: T[]; lastDoc: DocumentSnapshot | null; hasMore: boolean }> {\n    const ref = this.getCollectionRef()\n\n    let q = query(ref, ...queryConstraints, limit(pageSize + 1))\n\n    if (lastDoc) {\n      q = query(ref, ...queryConstraints, startAfter(lastDoc), limit(pageSize + 1))\n    }\n\n    const snapshot = await getDocs(q)\n    const hasMore = snapshot.docs.length > pageSize\n    const docs = hasMore ? snapshot.docs.slice(0, -1) : snapshot.docs\n\n    return {\n      data: docs.map(doc => convertTimestamps<T>({ id: doc.id, ...doc.data() })),\n      lastDoc: docs.length > 0 ? docs[docs.length - 1] : null,\n      hasMore,\n    }\n  }\n}\n\n// Increment/decrement helper for inventory\nexport async function adjustInventory(\n  organizationId: string,\n  productId: string,\n  locationId: string,\n  adjustment: number,\n  reason?: string\n) {\n  const inventoryRef = doc(\n    db,\n    'organizations',\n    organizationId,\n    'inventory',\n    `${productId}_${locationId}`\n  )\n\n  await updateDoc(inventoryRef, {\n    quantity: increment(adjustment),\n    availableQuantity: increment(adjustment),\n    updatedAt: serverTimestamp(),\n  })\n\n  // Log the adjustment\n  const logRef = collection(db, 'organizations', organizationId, 'inventoryLogs')\n  await setDoc(doc(logRef), {\n    productId,\n    locationId,\n    adjustment,\n    reason: reason || 'manual_adjustment',\n    createdAt: serverTimestamp(),\n  })\n}\n\n// Generate next number (for order numbers, PO numbers, etc.)\nexport async function getNextNumber(\n  organizationId: string,\n  type: 'order' | 'po' | 'wo' | 'transfer' | 'return'\n): Promise<string> {\n  const counterRef = doc(db, 'organizations', organizationId, 'counters', type)\n  const counterSnap = await getDoc(counterRef)\n\n  let nextNumber = 1\n\n  if (counterSnap.exists()) {\n    nextNumber = (counterSnap.data().current || 0) + 1\n  }\n\n  await setDoc(counterRef, { current: nextNumber }, { merge: true })\n\n  const prefixes: Record<string, string> = {\n    order: 'ORD',\n    po: 'PO',\n    wo: 'WO',\n    transfer: 'TRF',\n    return: 'RET',\n  }\n\n  return `${prefixes[type]}-${String(nextNumber).padStart(5, '0')}`\n}\n\n// Helper to check if using demo mode (no Firestore operations)\nexport function isDemoOrganization(orgId: string): boolean {\n  return orgId === 'demo-org-id'\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/lib/ruleTemplates.ts"],"sourcesContent":["import type { RuleTrigger, RuleCondition, RuleAction } from '@/context/AppContext';\n\nexport interface RuleTemplate {\n  id: string;\n  name: string;\n  description: string;\n  category: 'shipping' | 'tagging' | 'inventory' | 'notification';\n  trigger: RuleTrigger;\n  conditions: Omit<RuleCondition, 'id'>[];\n  actions: Omit<RuleAction, 'id'>[];\n}\n\nexport const ruleTemplates: RuleTemplate[] = [\n  // Shipping Templates\n  {\n    id: 'tpl-usps-small',\n    name: 'Auto-assign USPS for small orders',\n    description: 'Orders under $50 with weight less than 1lb ship USPS First Class',\n    category: 'shipping',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'total', operator: 'less_than', value: 50 }\n    ],\n    actions: [\n      { type: 'assign_carrier', config: { carrier: 'usps' } },\n      { type: 'assign_service', config: { service: 'first_class' } }\n    ]\n  },\n  {\n    id: 'tpl-ups-heavy',\n    name: 'Use UPS for heavy orders',\n    description: 'Orders over 5lbs ship via UPS Ground',\n    category: 'shipping',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'weight', operator: 'greater_than', value: 80 } // 80oz = 5lbs\n    ],\n    actions: [\n      { type: 'assign_carrier', config: { carrier: 'ups' } },\n      { type: 'assign_service', config: { service: 'ground' } }\n    ]\n  },\n  {\n    id: 'tpl-fedex-express',\n    name: 'FedEx for high-value orders',\n    description: 'Orders over $200 ship FedEx with signature required',\n    category: 'shipping',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'total', operator: 'greater_than', value: 200 }\n    ],\n    actions: [\n      { type: 'assign_carrier', config: { carrier: 'fedex' } },\n      { type: 'assign_service', config: { service: 'express_saver' } }\n    ]\n  },\n\n  // Tagging Templates\n  {\n    id: 'tpl-prime-tag',\n    name: 'Tag Amazon Prime orders as urgent',\n    description: 'Add PRIME tag and set high priority for Amazon Prime orders',\n    category: 'tagging',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'is_prime', operator: 'equals', value: true }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'PRIME' } },\n      { type: 'set_priority', config: { priority: 'high' } }\n    ]\n  },\n  {\n    id: 'tpl-wholesale-tag',\n    name: 'Tag wholesale orders',\n    description: 'Add WHOLESALE tag and notify team for bulk orders',\n    category: 'tagging',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'item_count', operator: 'greater_than', value: 10 }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'WHOLESALE' } },\n      { type: 'send_notification', config: { message: 'New wholesale order received' } }\n    ]\n  },\n  {\n    id: 'tpl-international-tag',\n    name: 'Tag international orders',\n    description: 'Flag orders shipping outside the US',\n    category: 'tagging',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'shipping_country', operator: 'not_equals', value: 'US' }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'INTERNATIONAL' } },\n      { type: 'set_priority', config: { priority: 'low' } }\n    ]\n  },\n  {\n    id: 'tpl-fragile-tag',\n    name: 'Tag fragile product orders',\n    description: 'Add FRAGILE tag when order contains specific SKUs',\n    category: 'tagging',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'contains_sku', operator: 'contains', value: '4L' }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'FRAGILE' } }\n    ]\n  },\n\n  // Inventory Templates\n  {\n    id: 'tpl-low-stock-alert',\n    name: 'Create PO when stock is low',\n    description: 'Automatically create a PO draft and notify when stock drops below threshold',\n    category: 'inventory',\n    trigger: { type: 'low_stock', threshold: 50 },\n    conditions: [],\n    actions: [\n      { type: 'create_po_draft', config: { quantity: 100 } },\n      { type: 'send_notification', config: { message: 'Low stock alert! PO draft created.' } }\n    ]\n  },\n  {\n    id: 'tpl-critical-stock',\n    name: 'Critical stock email alert',\n    description: 'Send urgent email when stock is critically low',\n    category: 'inventory',\n    trigger: { type: 'low_stock', threshold: 10 },\n    conditions: [],\n    actions: [\n      { type: 'send_email', config: { recipient: 'admin@company.com', subject: 'URGENT: Critical stock level' } },\n      { type: 'send_notification', config: { message: 'CRITICAL: Stock nearly depleted!' } }\n    ]\n  },\n\n  // Notification Templates\n  {\n    id: 'tpl-new-order-notify',\n    name: 'Notify on new Shopify orders',\n    description: 'Send notification when a new Shopify order is received',\n    category: 'notification',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'channel', operator: 'equals', value: 'shopify' }\n    ],\n    actions: [\n      { type: 'send_notification', config: { message: 'New Shopify order received!' } }\n    ]\n  },\n  {\n    id: 'tpl-vip-customer',\n    name: 'VIP customer alert',\n    description: 'Notify when orders come from VIP email domains',\n    category: 'notification',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'total', operator: 'greater_than', value: 500 }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'VIP' } },\n      { type: 'set_priority', config: { priority: 'urgent' } },\n      { type: 'send_notification', config: { message: 'VIP order received - prioritize!' } }\n    ]\n  },\n  {\n    id: 'tpl-gripper-sticker',\n    name: 'Add gripper sticker to every bottle',\n    description: 'Automatically add gripper stickers to orders containing bottles',\n    category: 'shipping',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'contains_sku', operator: 'contains', value: 'CN' }\n    ],\n    actions: [\n      { type: 'add_fulfillment_item', config: { productId: 'gripper-sku', quantity: 1 } }\n    ]\n  }\n];\n\n// Get templates by category\nexport function getTemplatesByCategory(category: RuleTemplate['category']): RuleTemplate[] {\n  return ruleTemplates.filter(t => t.category === category);\n}\n\n// Get all unique categories\nexport function getTemplateCategories(): RuleTemplate['category'][] {\n  return [...new Set(ruleTemplates.map(t => t.category))];\n}\n\n// Get category label\nexport function getCategoryLabel(category: RuleTemplate['category']): string {\n  const labels: Record<RuleTemplate['category'], string> = {\n    shipping: 'Shipping & Carriers',\n    tagging: 'Order Tagging',\n    inventory: 'Inventory Management',\n    notification: 'Notifications'\n  };\n  return labels[category];\n}\n\n// Get category icon (Font Awesome class)\nexport function getCategoryIcon(category: RuleTemplate['category']): string {\n  const icons: Record<RuleTemplate['category'], string> = {\n    shipping: 'fa-truck',\n    tagging: 'fa-tags',\n    inventory: 'fa-boxes',\n    notification: 'fa-bell'\n  };\n  return icons[category];\n}\n\n// Trigger options for the UI\nexport const triggerOptions = [\n  {\n    type: 'order_created' as const,\n    icon: 'ShoppingCart',\n    label: 'New Order',\n    description: 'When an order is created'\n  },\n  {\n    type: 'order_status_changed' as const,\n    icon: 'ArrowLeftRight',\n    label: 'Status Change',\n    description: 'When order status changes'\n  },\n  {\n    type: 'low_stock' as const,\n    icon: 'AlertTriangle',\n    label: 'Low Stock',\n    description: 'When stock falls below threshold'\n  },\n  {\n    type: 'item_received' as const,\n    icon: 'PackageCheck',\n    label: 'Item Received',\n    description: 'When inventory is received'\n  },\n  {\n    type: 'daily' as const,\n    icon: 'Clock',\n    label: 'Scheduled',\n    description: 'Run at a specific time daily'\n  },\n  {\n    type: 'manual' as const,\n    icon: 'Hand',\n    label: 'Manual',\n    description: 'Run manually when triggered'\n  }\n];\n\n// Action options for the UI\nexport const actionOptions = [\n  { type: 'set_order_tag', label: 'Add Order Tag', icon: 'Tag' },\n  { type: 'set_priority', label: 'Set Priority', icon: 'Flag' },\n  { type: 'assign_carrier', label: 'Assign Carrier', icon: 'Truck' },\n  { type: 'assign_service', label: 'Assign Shipping Service', icon: 'Package' },\n  { type: 'select_box', label: 'Select Box', icon: 'Box' },\n  { type: 'add_fulfillment_item', label: 'Add Fulfillment Item', icon: 'Plus' },\n  { type: 'send_notification', label: 'Send Notification', icon: 'Bell' },\n  { type: 'create_po_draft', label: 'Create PO Draft', icon: 'FileText' },\n  { type: 'send_email', label: 'Send Email', icon: 'Mail' },\n  { type: 'set_location', label: 'Set Location', icon: 'MapPin' }\n];\n\n// Operator options\nexport const operatorOptions = [\n  { value: 'equals', label: 'equals' },\n  { value: 'not_equals', label: 'does not equal' },\n  { value: 'contains', label: 'contains' },\n  { value: 'greater_than', label: 'is greater than' },\n  { value: 'less_than', label: 'is less than' },\n  { value: 'in_list', label: 'is one of' }\n];\n\n// Priority options\nexport const priorityOptions = [\n  { value: 'low', label: 'Low' },\n  { value: 'normal', label: 'Normal' },\n  { value: 'high', label: 'High' },\n  { value: 'urgent', label: 'Urgent' }\n];\n\n// Carrier options\nexport const carrierOptions = [\n  { value: 'usps', label: 'USPS' },\n  { value: 'ups', label: 'UPS' },\n  { value: 'fedex', label: 'FedEx' },\n  { value: 'dhl', label: 'DHL' }\n];\n\n// Service options per carrier\nexport const serviceOptions: Record<string, { value: string; label: string }[]> = {\n  usps: [\n    { value: 'first_class', label: 'First Class' },\n    { value: 'priority', label: 'Priority Mail' },\n    { value: 'priority_express', label: 'Priority Express' },\n    { value: 'ground_advantage', label: 'Ground Advantage' }\n  ],\n  ups: [\n    { value: 'ground', label: 'UPS Ground' },\n    { value: 'three_day_select', label: '3 Day Select' },\n    { value: 'second_day_air', label: '2nd Day Air' },\n    { value: 'next_day_air', label: 'Next Day Air' }\n  ],\n  fedex: [\n    { value: 'ground', label: 'FedEx Ground' },\n    { value: 'home_delivery', label: 'Home Delivery' },\n    { value: 'express_saver', label: 'Express Saver' },\n    { value: 'standard_overnight', label: 'Standard Overnight' }\n  ],\n  dhl: [\n    { value: 'express', label: 'DHL Express' },\n    { value: 'express_worldwide', label: 'Express Worldwide' }\n  ]\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 932, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/lib/automationEngine.ts"],"sourcesContent":["import type {\n  AutomationRule,\n  RuleCondition,\n  RuleAction,\n  Order\n} from '@/context/AppContext';\n\n// Evaluate a single condition against a context\nexport function evaluateCondition(\n  condition: RuleCondition,\n  context: Record<string, any>\n): boolean {\n  const fieldValue = context[condition.field];\n\n  // Handle special case for contains_sku which is a function\n  if (condition.field === 'contains_sku' && typeof context.contains_sku === 'function') {\n    return context.contains_sku(condition.value);\n  }\n\n  switch (condition.operator) {\n    case 'equals':\n      return fieldValue === condition.value;\n    case 'not_equals':\n      return fieldValue !== condition.value;\n    case 'contains':\n      return String(fieldValue).toLowerCase().includes(String(condition.value).toLowerCase());\n    case 'greater_than':\n      return Number(fieldValue) > Number(condition.value);\n    case 'less_than':\n      return Number(fieldValue) < Number(condition.value);\n    case 'in_list':\n      if (Array.isArray(condition.value)) {\n        return condition.value.includes(fieldValue);\n      }\n      return false;\n    default:\n      return false;\n  }\n}\n\n// Evaluate all conditions (AND logic by default)\nexport function evaluateConditions(\n  conditions: RuleCondition[],\n  context: Record<string, any>\n): boolean {\n  if (conditions.length === 0) return true;\n\n  return conditions.every(condition => evaluateCondition(condition, context));\n}\n\n// Execute a single action\nexport function executeAction(\n  action: RuleAction,\n  context: Record<string, any>,\n  dispatch: React.Dispatch<any>\n): void {\n  const order = context.order as Order;\n\n  switch (action.type) {\n    case 'set_order_tag':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            tags: [...(order.tags || []), action.config.tag],\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'set_priority':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            priority: action.config.priority,\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'assign_carrier':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            suggestedCarrier: action.config.carrier,\n            carrier: action.config.carrier,\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'assign_service':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            suggestedService: action.config.service,\n            service: action.config.service,\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'select_box':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            suggestedBoxId: action.config.boxId,\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'add_fulfillment_item':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            fulfillmentItems: [\n              ...(order.fulfillmentItems || []),\n              {\n                productId: action.config.productId,\n                quantity: action.config.quantity || 1,\n                reason: 'automation_rule'\n              }\n            ],\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'send_notification':\n      // In a real app, this would trigger a notification system\n      console.log(`[Automation] Notification: ${action.config.message}`);\n      break;\n\n    case 'create_po_draft':\n      // In a real app, this would create a PO draft\n      console.log(`[Automation] Create PO draft with quantity: ${action.config.quantity}`);\n      break;\n\n    case 'send_email':\n      // In a real app, this would send an email\n      console.log(`[Automation] Send email to: ${action.config.recipient}`);\n      break;\n\n    case 'set_location':\n      // Set preferred fulfillment location\n      console.log(`[Automation] Set location: ${action.config.locationId}`);\n      break;\n\n    default:\n      console.warn(`[Automation] Unknown action type: ${action.type}`);\n  }\n}\n\n// Execute all actions for a rule\nexport function executeActions(\n  actions: RuleAction[],\n  context: Record<string, any>,\n  dispatch: React.Dispatch<any>\n): void {\n  actions.forEach(action => {\n    executeAction(action, context, dispatch);\n  });\n}\n\n// Build context object from an order\nexport function buildOrderContext(order: Order): Record<string, any> {\n  const itemCount = order.items.reduce((sum, item) => sum + item.quantity, 0);\n\n  return {\n    order,\n    channel: order.channel,\n    total: order.total,\n    subtotal: order.subtotal,\n    item_count: itemCount,\n    shipping_country: order.customer?.address?.country || '',\n    shipping_state: order.customer?.address?.state || '',\n    shipping_city: order.customer?.address?.city || '',\n    customer_email: order.customer?.email || '',\n    customer_name: order.customer?.name || '',\n    contains_sku: (sku: string) => order.items.some(item =>\n      item.sku?.toLowerCase().includes(sku.toLowerCase())\n    ),\n    weight: order.totalWeight || 0,\n    is_prime: order.isPrime || false,\n    requires_signature: order.requiresSignature || false,\n    order_number: order.orderNumber,\n    status: order.status\n  };\n}\n\n// Run all matching rules for a specific trigger\nexport function runRulesForTrigger(\n  triggerType: string,\n  context: Record<string, any>,\n  rules: AutomationRule[],\n  dispatch: React.Dispatch<any>\n): { rulesRun: number; actionsExecuted: number } {\n  let rulesRun = 0;\n  let actionsExecuted = 0;\n\n  // Filter enabled rules with matching trigger, sorted by priority\n  const matchingRules = rules\n    .filter(rule => rule.enabled && rule.trigger.type === triggerType)\n    .sort((a, b) => a.priority - b.priority);\n\n  matchingRules.forEach(rule => {\n    if (evaluateConditions(rule.conditions, context)) {\n      executeActions(rule.actions, context, dispatch);\n      rulesRun++;\n      actionsExecuted += rule.actions.length;\n    }\n  });\n\n  return { rulesRun, actionsExecuted };\n}\n\n// Helper to run rules when an order is created\nexport function runOrderCreatedRules(\n  order: Order,\n  rules: AutomationRule[],\n  dispatch: React.Dispatch<any>\n): { rulesRun: number; actionsExecuted: number } {\n  const context = buildOrderContext(order);\n  return runRulesForTrigger('order_created', context, rules, dispatch);\n}\n\n// Helper to run rules when order status changes\nexport function runOrderStatusChangedRules(\n  order: Order,\n  fromStatus: string,\n  toStatus: string,\n  rules: AutomationRule[],\n  dispatch: React.Dispatch<any>\n): { rulesRun: number; actionsExecuted: number } {\n  const context = {\n    ...buildOrderContext(order),\n    from_status: fromStatus,\n    to_status: toStatus\n  };\n\n  // Filter rules that match the status change\n  const statusRules = rules.filter(rule => {\n    if (rule.trigger.type !== 'order_status_changed') return false;\n    const trigger = rule.trigger as { type: 'order_status_changed'; fromStatus?: string; toStatus?: string };\n\n    // Check if fromStatus matches (if specified)\n    if (trigger.fromStatus && trigger.fromStatus !== fromStatus) return false;\n    // Check if toStatus matches (if specified)\n    if (trigger.toStatus && trigger.toStatus !== toStatus) return false;\n\n    return true;\n  });\n\n  let rulesRun = 0;\n  let actionsExecuted = 0;\n\n  statusRules\n    .filter(rule => rule.enabled)\n    .sort((a, b) => a.priority - b.priority)\n    .forEach(rule => {\n      if (evaluateConditions(rule.conditions, context)) {\n        executeActions(rule.actions, context, dispatch);\n        rulesRun++;\n        actionsExecuted += rule.actions.length;\n      }\n    });\n\n  return { rulesRun, actionsExecuted };\n}\n\n// Helper to run low stock rules\nexport function runLowStockRules(\n  productId: string,\n  productSku: string,\n  currentQuantity: number,\n  rules: AutomationRule[],\n  dispatch: React.Dispatch<any>\n): { rulesRun: number; actionsExecuted: number } {\n  let rulesRun = 0;\n  let actionsExecuted = 0;\n\n  const lowStockRules = rules.filter(rule => {\n    if (rule.trigger.type !== 'low_stock') return false;\n    const trigger = rule.trigger as { type: 'low_stock'; threshold?: number };\n    const threshold = trigger.threshold || 50;\n    return currentQuantity <= threshold;\n  });\n\n  const context = {\n    product_id: productId,\n    sku: productSku,\n    quantity: currentQuantity\n  };\n\n  lowStockRules\n    .filter(rule => rule.enabled)\n    .sort((a, b) => a.priority - b.priority)\n    .forEach(rule => {\n      if (evaluateConditions(rule.conditions, context)) {\n        executeActions(rule.actions, context, dispatch);\n        rulesRun++;\n        actionsExecuted += rule.actions.length;\n      }\n    });\n\n  return { rulesRun, actionsExecuted };\n}\n\n// Get human-readable trigger label\nexport function getTriggerLabel(trigger: AutomationRule['trigger']): string {\n  switch (trigger.type) {\n    case 'order_created':\n      return 'New Order';\n    case 'order_status_changed':\n      const statusTrigger = trigger as { type: 'order_status_changed'; fromStatus?: string; toStatus?: string };\n      if (statusTrigger.toStatus) {\n        return `Status → ${statusTrigger.toStatus}`;\n      }\n      return 'Status Change';\n    case 'low_stock':\n      const lowStockTrigger = trigger as { type: 'low_stock'; threshold?: number };\n      return `Low Stock (≤${lowStockTrigger.threshold || 50})`;\n    case 'item_received':\n      return 'Item Received';\n    case 'daily':\n      const dailyTrigger = trigger as { type: 'daily'; time: string };\n      return `Daily at ${dailyTrigger.time}`;\n    case 'manual':\n      return 'Manual';\n    default:\n      return 'Unknown';\n  }\n}\n\n// Get human-readable action label\nexport function getActionLabel(action: RuleAction): string {\n  switch (action.type) {\n    case 'set_order_tag':\n      return `Add tag \"${action.config.tag}\"`;\n    case 'set_priority':\n      return `Set priority to ${action.config.priority}`;\n    case 'assign_carrier':\n      return `Assign ${action.config.carrier?.toUpperCase()}`;\n    case 'assign_service':\n      return `Use ${action.config.service}`;\n    case 'select_box':\n      return `Select box ${action.config.boxId}`;\n    case 'send_notification':\n      return 'Send notification';\n    case 'add_fulfillment_item':\n      return `Add item (qty: ${action.config.quantity || 1})`;\n    case 'set_location':\n      return `Set location`;\n    case 'create_po_draft':\n      return `Create PO draft`;\n    case 'send_email':\n      return `Send email`;\n    default:\n      return 'Unknown action';\n  }\n}\n\n// Get operator label\nexport function getOperatorLabel(operator: RuleCondition['operator']): string {\n  const labels: Record<RuleCondition['operator'], string> = {\n    equals: 'equals',\n    not_equals: 'does not equal',\n    contains: 'contains',\n    greater_than: 'is greater than',\n    less_than: 'is less than',\n    in_list: 'is one of'\n  };\n  return labels[operator] || operator;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1266, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/hooks/useFirestore.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback, useMemo } from 'react'\nimport { QueryConstraint, orderBy, where, limit } from 'firebase/firestore'\nimport { useAuth } from '@/context/AuthContext'\nimport { useOrganization } from '@/context/OrganizationContext'\nimport { FirestoreService, isDemoOrganization } from '@/lib/firestore'\nimport {\n  Product,\n  Order,\n  PurchaseOrder,\n  WorkOrder,\n  Supplier,\n  Location,\n  Return,\n  StockTransfer,\n  Bundle,\n  InventoryLevel,\n  InventoryItem,\n} from '@/types'\n\n// Generic hook for Firestore collections\nfunction useFirestoreCollection<T extends { id: string }>(\n  collectionName: string,\n  queryConstraints: QueryConstraint[] = [],\n  enabled: boolean = true\n) {\n  const { organization } = useOrganization()\n  const [data, setData] = useState<T[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<Error | null>(null)\n\n  const orgId = organization?.id\n\n  const service = useMemo(() => {\n    if (!orgId) return null\n    // Skip Firestore for demo org\n    if (isDemoOrganization(orgId)) return null\n    return new FirestoreService<T>(orgId, collectionName)\n  }, [orgId, collectionName])\n\n  useEffect(() => {\n    // For demo mode, don't fetch from Firestore\n    if (!orgId || isDemoOrganization(orgId)) {\n      setLoading(false)\n      return\n    }\n\n    if (!service || !enabled) {\n      setLoading(false)\n      return\n    }\n\n    setLoading(true)\n\n    const unsubscribe = service.subscribe(\n      (newData) => {\n        setData(newData)\n        setLoading(false)\n        setError(null)\n      },\n      (err) => {\n        console.error(`Error fetching ${collectionName}:`, err)\n        setError(err)\n        setLoading(false)\n      },\n      ...queryConstraints\n    )\n\n    return () => unsubscribe()\n  }, [service, enabled, orgId, collectionName, JSON.stringify(queryConstraints)])\n\n  const create = useCallback(\n    async (item: Omit<T, 'id' | 'createdAt' | 'updatedAt'>) => {\n      if (!service) throw new Error('No organization or in demo mode')\n      return service.create(item)\n    },\n    [service]\n  )\n\n  const update = useCallback(\n    async (id: string, updates: Partial<T>) => {\n      if (!service) throw new Error('No organization or in demo mode')\n      return service.update(id, updates)\n    },\n    [service]\n  )\n\n  const remove = useCallback(\n    async (id: string) => {\n      if (!service) throw new Error('No organization or in demo mode')\n      return service.delete(id)\n    },\n    [service]\n  )\n\n  const getById = useCallback(\n    async (id: string) => {\n      if (!service) throw new Error('No organization or in demo mode')\n      return service.get(id)\n    },\n    [service]\n  )\n\n  return {\n    data,\n    loading,\n    error,\n    create,\n    update,\n    remove,\n    getById,\n    service,\n    isDemo: orgId ? isDemoOrganization(orgId) : false,\n  }\n}\n\n// Products hook\nexport function useProducts() {\n  const result = useFirestoreCollection<Product>('products', [orderBy('name')])\n\n  return {\n    products: result.data,\n    ...result,\n  }\n}\n\n// Single product hook\nexport function useProduct(productId: string | null) {\n  const { organization } = useOrganization()\n  const [product, setProduct] = useState<Product | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<Error | null>(null)\n\n  const orgId = organization?.id\n\n  useEffect(() => {\n    if (!orgId || !productId || isDemoOrganization(orgId)) {\n      setLoading(false)\n      return\n    }\n\n    const service = new FirestoreService<Product>(orgId, 'products')\n\n    const unsubscribe = service.subscribeToDoc(\n      productId,\n      (data) => {\n        setProduct(data)\n        setLoading(false)\n      },\n      (err) => {\n        setError(err)\n        setLoading(false)\n      }\n    )\n\n    return () => unsubscribe()\n  }, [orgId, productId])\n\n  return { product, loading, error }\n}\n\n// Orders hook\nexport function useOrders(status?: string) {\n  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]\n\n  if (status && status !== 'all') {\n    constraints.unshift(where('status', '==', status))\n  }\n\n  const result = useFirestoreCollection<Order>('orders', constraints)\n\n  return {\n    orders: result.data,\n    ...result,\n  }\n}\n\n// Recent orders hook (for dashboard)\nexport function useRecentOrders(count: number = 10) {\n  const result = useFirestoreCollection<Order>('orders', [\n    orderBy('createdAt', 'desc'),\n    limit(count),\n  ])\n\n  return {\n    orders: result.data,\n    ...result,\n  }\n}\n\n// Purchase Orders hook\nexport function usePurchaseOrders(status?: string) {\n  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]\n\n  if (status && status !== 'all') {\n    constraints.unshift(where('status', '==', status))\n  }\n\n  const result = useFirestoreCollection<PurchaseOrder>('purchaseOrders', constraints)\n\n  return {\n    purchaseOrders: result.data,\n    ...result,\n  }\n}\n\n// Work Orders hook\nexport function useWorkOrders(status?: string) {\n  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]\n\n  if (status && status !== 'all') {\n    constraints.unshift(where('status', '==', status))\n  }\n\n  const result = useFirestoreCollection<WorkOrder>('workOrders', constraints)\n\n  return {\n    workOrders: result.data,\n    ...result,\n  }\n}\n\n// Suppliers hook\nexport function useSuppliers() {\n  const result = useFirestoreCollection<Supplier>('suppliers', [orderBy('name')])\n\n  return {\n    suppliers: result.data,\n    ...result,\n  }\n}\n\n// Locations hook\nexport function useLocations() {\n  const result = useFirestoreCollection<Location>('locations', [orderBy('name')])\n\n  return {\n    locations: result.data,\n    ...result,\n  }\n}\n\n// Returns hook\nexport function useReturns(status?: string) {\n  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]\n\n  if (status && status !== 'all') {\n    constraints.unshift(where('status', '==', status))\n  }\n\n  const result = useFirestoreCollection<Return>('returns', constraints)\n\n  return {\n    returns: result.data,\n    ...result,\n  }\n}\n\n// Stock Transfers hook\nexport function useStockTransfers(status?: string) {\n  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]\n\n  if (status && status !== 'all') {\n    constraints.unshift(where('status', '==', status))\n  }\n\n  const result = useFirestoreCollection<StockTransfer>('transfers', constraints)\n\n  return {\n    transfers: result.data,\n    ...result,\n  }\n}\n\n// Bundles hook\nexport function useBundles() {\n  const result = useFirestoreCollection<Bundle>('bundles', [orderBy('name')])\n\n  return {\n    bundles: result.data,\n    ...result,\n  }\n}\n\n// Inventory levels hook\nexport function useInventory(locationId?: string) {\n  const constraints: QueryConstraint[] = []\n\n  if (locationId) {\n    constraints.push(where('locationId', '==', locationId))\n  }\n\n  const result = useFirestoreCollection<InventoryItem>('inventory', constraints)\n\n  return {\n    inventory: result.data,\n    ...result,\n  }\n}\n\n// Low stock products hook\nexport function useLowStockProducts() {\n  const { products } = useProducts()\n\n  const lowStock = useMemo(() => {\n    return products.filter(p => {\n      // Check using reorderPoint as threshold\n      const threshold = p.reorderPoint || 10\n      // We need inventory data to check actual stock levels\n      // For now, just return empty as we need to join with inventory\n      return false\n    })\n  }, [products])\n\n  const outOfStock = useMemo(() => {\n    // Need inventory data to determine out of stock\n    return []\n  }, [products])\n\n  return { lowStock, outOfStock }\n}\n\n// Dashboard stats hook - combines real Firestore data with demo fallback\nexport function useDashboardStats() {\n  const { orders, loading: ordersLoading, isDemo } = useOrders()\n  const { products, loading: productsLoading } = useProducts()\n\n  const stats = useMemo(() => {\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n\n    const todayOrders = orders.filter(o => {\n      const createdAt = o.createdAt as string | Date\n      const orderDate = typeof createdAt === 'string'\n        ? new Date(createdAt)\n        : createdAt instanceof Date\n          ? createdAt\n          : new Date()\n      return orderDate >= today\n    })\n\n    const pendingOrders = orders.filter(o =>\n      ['pending', 'to_pick', 'to_pack'].includes(o.status)\n    )\n\n    const shippedToday = orders.filter(o => {\n      if (o.status !== 'shipped' && o.status !== 'delivered') return false\n      // Check shipments for shipped date\n      const shippedDate = o.shipments?.[0]?.shippedAt\n      if (!shippedDate) return false\n      const shipped = typeof shippedDate === 'string' ? new Date(shippedDate) : new Date()\n      return shipped >= today\n    })\n\n    return {\n      todayOrders: todayOrders.length,\n      todayRevenue: todayOrders.reduce((sum, o) => sum + (o.total || 0), 0),\n      pendingOrders: pendingOrders.length,\n      shippedToday: shippedToday.length,\n      totalProducts: products.length,\n      lowStockCount: 0, // Would need inventory join\n      outOfStockCount: 0, // Would need inventory join\n    }\n  }, [orders, products])\n\n  return {\n    ...stats,\n    loading: ordersLoading || productsLoading,\n    isDemo,\n  }\n}\n\n// Hook for combined product + inventory data\nexport function useProductsWithInventory() {\n  const { products, loading: productsLoading, ...productMethods } = useProducts()\n  const { inventory, loading: inventoryLoading } = useInventory()\n\n  const productsWithStock = useMemo(() => {\n    return products.map(product => {\n      const stockItems = inventory.filter(i => i.productId === product.id)\n      const totalStock = stockItems.reduce((sum, i) => sum + i.quantity, 0)\n\n      return {\n        ...product,\n        totalStock,\n        stockByLocation: stockItems,\n      }\n    })\n  }, [products, inventory])\n\n  return {\n    products: productsWithStock,\n    loading: productsLoading || inventoryLoading,\n    ...productMethods,\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1786, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/app/%28dashboard%29/inventory/counts/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo, Suspense } from 'react';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { useApp, StockCount } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency } from '@/lib/formatting';\nimport { CreateStockCountModal } from '@/components/modals';\nimport {\n  StatusBadge,\n  TypeBadge,\n  stockCountStatusConfig,\n  countTypeConfig,\n} from '@/components/inventory/StatusBadge';\nimport { ClickableStatCard, InventoryStatsGrid, ProgressBar } from '@/components/inventory/InventoryStats';\nimport { SearchInput, FilterSelect, ClearFiltersButton, FilterBar, PageHeader } from '@/components/inventory/InventoryFilters';\nimport { EmptyState, Pagination, TableWrapper, ActionButton, PrimaryActionButton } from '@/components/inventory/InventoryTable';\n\ntype StatusFilter = StockCount['status'] | '';\ntype TypeFilter = StockCount['type'] | '';\n\nfunction StockCountsPageContent() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const { state, dispatch } = useApp();\n  const { success, warning } = useToast();\n\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<StatusFilter>(\n    (searchParams.get('status') as StatusFilter) || ''\n  );\n  const [typeFilter, setTypeFilter] = useState<TypeFilter>('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 10;\n\n  const filteredCounts = useMemo(() => {\n    return state.stockCounts.filter(count => {\n      const matchesSearch =\n        count.countNumber.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        count.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        count.locationName.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesStatus = !statusFilter || count.status === statusFilter;\n      const matchesType = !typeFilter || count.type === typeFilter;\n      return matchesSearch && matchesStatus && matchesType;\n    });\n  }, [state.stockCounts, searchQuery, statusFilter, typeFilter]);\n\n  const totalPages = Math.ceil(filteredCounts.length / itemsPerPage);\n  const paginatedCounts = filteredCounts.slice(\n    (currentPage - 1) * itemsPerPage,\n    currentPage * itemsPerPage\n  );\n\n  const stats = useMemo(() => {\n    const today = new Date();\n    const thisMonth = new Date(today.getFullYear(), today.getMonth(), 1);\n    return {\n      activeCounts: state.stockCounts.filter(c => c.status === 'in_progress').length,\n      completedThisMonth: state.stockCounts.filter(\n        c => c.status === 'completed' && c.completedAt && new Date(c.completedAt) >= thisMonth\n      ).length,\n      discrepancyItems: state.stockCounts\n        .filter(c => c.status === 'in_progress' || c.status === 'completed')\n        .reduce((sum, c) => sum + c.summary.discrepancyItems, 0),\n      totalVariance: state.stockCounts\n        .filter(c => c.status === 'completed')\n        .reduce((sum, c) => sum + c.summary.totalVariance, 0),\n    };\n  }, [state.stockCounts]);\n\n  const formatDate = (date: Date) => new Date(date).toLocaleDateString('en-US', {\n    month: 'short', day: 'numeric', year: 'numeric',\n  });\n\n  const handleDelete = (count: StockCount, e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (count.status === 'in_progress') {\n      warning('Cannot delete an active count. Cancel it first.');\n      return;\n    }\n    dispatch({ type: 'DELETE_STOCK_COUNT', payload: count.id });\n    success(`Stock count ${count.countNumber} deleted`);\n  };\n\n  const handleStatClick = (status: StatusFilter) => {\n    setStatusFilter(prev => prev === status ? '' : status);\n    setCurrentPage(1);\n  };\n\n  const hasFilters = !!(searchQuery || statusFilter || typeFilter);\n\n  return (\n    <div className=\"space-y-6\">\n      <PageHeader\n        title=\"Stock Counts\"\n        subtitle=\"Physical inventory verification\"\n        backHref=\"/inventory\"\n        actions={<PrimaryActionButton icon=\"fa-plus\" label=\"New Count\" onClick={() => setIsCreateModalOpen(true)} />}\n      />\n\n      <InventoryStatsGrid>\n        <ClickableStatCard\n          icon=\"fa-clipboard-list\"\n          iconColor=\"blue\"\n          value={stats.activeCounts}\n          label=\"Active Counts\"\n          onClick={() => handleStatClick('in_progress')}\n          isActive={statusFilter === 'in_progress'}\n        />\n        <ClickableStatCard\n          icon=\"fa-check-circle\"\n          iconColor=\"emerald\"\n          value={stats.completedThisMonth}\n          label=\"Completed This Month\"\n          onClick={() => handleStatClick('completed')}\n          isActive={statusFilter === 'completed'}\n        />\n        <ClickableStatCard\n          icon=\"fa-exclamation-triangle\"\n          iconColor=\"amber\"\n          value={stats.discrepancyItems}\n          label=\"Items with Discrepancy\"\n        />\n        <ClickableStatCard\n          icon=\"fa-dollar-sign\"\n          iconColor={stats.totalVariance >= 0 ? 'emerald' : 'red'}\n          value={Math.abs(stats.totalVariance)}\n          format=\"currency\"\n          label=\"Total Variance Value\"\n        />\n      </InventoryStatsGrid>\n\n      <FilterBar>\n        <SearchInput\n          value={searchQuery}\n          onChange={setSearchQuery}\n          placeholder=\"Search counts...\"\n        />\n        <FilterSelect\n          value={statusFilter}\n          onChange={(v) => { setStatusFilter(v as StatusFilter); setCurrentPage(1); }}\n          placeholder=\"All Statuses\"\n          options={[\n            { value: 'draft', label: 'Draft' },\n            { value: 'in_progress', label: 'In Progress' },\n            { value: 'completed', label: 'Completed' },\n            { value: 'cancelled', label: 'Cancelled' },\n          ]}\n        />\n        <FilterSelect\n          value={typeFilter}\n          onChange={(v) => { setTypeFilter(v as TypeFilter); setCurrentPage(1); }}\n          placeholder=\"All Types\"\n          options={[\n            { value: 'full', label: 'Full Count' },\n            { value: 'cycle', label: 'Cycle Count' },\n            { value: 'spot', label: 'Spot Check' },\n          ]}\n        />\n        {hasFilters && (\n          <ClearFiltersButton onClick={() => {\n            setSearchQuery('');\n            setStatusFilter('');\n            setTypeFilter('');\n            setCurrentPage(1);\n          }} />\n        )}\n      </FilterBar>\n\n      <TableWrapper>\n        <table className=\"w-full\">\n          <thead>\n            <tr className=\"border-b border-slate-700/50\">\n              <th className=\"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider\">Count #</th>\n              <th className=\"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider\">Name</th>\n              <th className=\"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider\">Type</th>\n              <th className=\"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider\">Location</th>\n              <th className=\"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider\">Progress</th>\n              <th className=\"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider\">Status</th>\n              <th className=\"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider\">Started</th>\n              <th className=\"text-right p-4 text-xs font-medium text-slate-400 uppercase tracking-wider\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {paginatedCounts.length === 0 ? (\n              <tr>\n                <td colSpan={8}>\n                  <EmptyState\n                    icon=\"fa-clipboard-check\"\n                    title=\"No stock counts found\"\n                    description={hasFilters ? 'Try adjusting your filters' : 'Create your first stock count to verify inventory'}\n                    showFilterHint={hasFilters}\n                  />\n                </td>\n              </tr>\n            ) : (\n              paginatedCounts.map((count) => (\n                <tr\n                  key={count.id}\n                  className=\"border-b border-slate-700/30 hover:bg-slate-700/30 cursor-pointer transition-colors\"\n                  onClick={() => router.push(`/inventory/counts/${count.id}`)}\n                >\n                  <td className=\"p-4\">\n                    <div className=\"font-medium text-white\">{count.countNumber}</div>\n                  </td>\n                  <td className=\"p-4\">\n                    <div className=\"text-slate-200\">{count.name}</div>\n                    {count.assignedTo && (\n                      <div className=\"text-xs text-slate-500\">Assigned to: {count.assignedTo}</div>\n                    )}\n                  </td>\n                  <td className=\"p-4\">\n                    <TypeBadge type={count.type} config={countTypeConfig} />\n                  </td>\n                  <td className=\"p-4 text-slate-300\">{count.locationName}</td>\n                  <td className=\"p-4\">\n                    <ProgressBar\n                      current={count.summary.countedItems}\n                      total={count.summary.totalItems}\n                      completed={count.status === 'completed'}\n                    />\n                  </td>\n                  <td className=\"p-4\">\n                    <StatusBadge\n                      status={count.status}\n                      config={stockCountStatusConfig}\n                      animated={count.status === 'in_progress'}\n                    />\n                  </td>\n                  <td className=\"p-4 text-slate-300\">\n                    {count.startedAt ? formatDate(count.startedAt) : '-'}\n                  </td>\n                  <td className=\"p-4 text-right\" onClick={(e) => e.stopPropagation()}>\n                    <div className=\"flex items-center justify-end gap-2\">\n                      {count.status === 'draft' && (\n                        <ActionButton\n                          icon=\"fa-play\"\n                          color=\"blue\"\n                          title=\"Start Count\"\n                          onClick={() => router.push(`/inventory/counts/${count.id}`)}\n                        />\n                      )}\n                      {count.status === 'in_progress' && (\n                        <ActionButton\n                          icon=\"fa-arrow-right\"\n                          color=\"emerald\"\n                          title=\"Continue Count\"\n                          onClick={() => router.push(`/inventory/counts/${count.id}`)}\n                        />\n                      )}\n                      {count.status !== 'in_progress' && (\n                        <ActionButton\n                          icon=\"fa-trash\"\n                          color=\"red\"\n                          title=\"Delete\"\n                          onClick={(e) => handleDelete(count, e)}\n                        />\n                      )}\n                      <ActionButton\n                        icon=\"fa-chevron-right\"\n                        title=\"View Details\"\n                        onClick={() => router.push(`/inventory/counts/${count.id}`)}\n                      />\n                    </div>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n\n        <Pagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          totalItems={filteredCounts.length}\n          itemsPerPage={itemsPerPage}\n          itemLabel=\"counts\"\n          onPageChange={setCurrentPage}\n        />\n      </TableWrapper>\n\n      <CreateStockCountModal\n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n      />\n    </div>\n  );\n}\n\nexport default function StockCountsPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"animate-pulse space-y-6\">\n        <div className=\"h-8 bg-slate-800/50 rounded w-48\"></div>\n        <div className=\"grid grid-cols-4 gap-4\">\n          {[...Array(4)].map((_, i) => (\n            <div key={i} className=\"h-24 bg-slate-800/50 rounded-xl\"></div>\n          ))}\n        </div>\n        <div className=\"h-96 bg-slate-800/50 rounded-xl\"></div>\n      </div>\n    }>\n      <StockCountsPageContent />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AAMA;AACA;AACA;;;AAjBA;;;;;;;;;;AAsBA,SAAS;;IACP,MAAM,eAAe,IAAA,wJAAe;IACpC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,mIAAM;IAClC,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,yIAAQ;IAErC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAC9C,AAAC,aAAa,GAAG,CAAC,aAA8B;IAElD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAa;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,eAAe;IAErB,MAAM,iBAAiB,IAAA,wKAAO;0DAAC;YAC7B,OAAO,MAAM,WAAW,CAAC,MAAM;kEAAC,CAAA;oBAC9B,MAAM,gBACJ,MAAM,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OAChE,MAAM,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OACzD,MAAM,YAAY,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW;oBACnE,MAAM,gBAAgB,CAAC,gBAAgB,MAAM,MAAM,KAAK;oBACxD,MAAM,cAAc,CAAC,cAAc,MAAM,IAAI,KAAK;oBAClD,OAAO,iBAAiB,iBAAiB;gBAC3C;;QACF;yDAAG;QAAC,MAAM,WAAW;QAAE;QAAa;QAAc;KAAW;IAE7D,MAAM,aAAa,KAAK,IAAI,CAAC,eAAe,MAAM,GAAG;IACrD,MAAM,kBAAkB,eAAe,KAAK,CAC1C,CAAC,cAAc,CAAC,IAAI,cACpB,cAAc;IAGhB,MAAM,QAAQ,IAAA,wKAAO;iDAAC;YACpB,MAAM,QAAQ,IAAI;YAClB,MAAM,YAAY,IAAI,KAAK,MAAM,WAAW,IAAI,MAAM,QAAQ,IAAI;YAClE,OAAO;gBACL,cAAc,MAAM,WAAW,CAAC,MAAM;6DAAC,CAAA,IAAK,EAAE,MAAM,KAAK;4DAAe,MAAM;gBAC9E,oBAAoB,MAAM,WAAW,CAAC,MAAM;6DAC1C,CAAA,IAAK,EAAE,MAAM,KAAK,eAAe,EAAE,WAAW,IAAI,IAAI,KAAK,EAAE,WAAW,KAAK;4DAC7E,MAAM;gBACR,kBAAkB,MAAM,WAAW,CAChC,MAAM;6DAAC,CAAA,IAAK,EAAE,MAAM,KAAK,iBAAiB,EAAE,MAAM,KAAK;4DACvD,MAAM;6DAAC,CAAC,KAAK,IAAM,MAAM,EAAE,OAAO,CAAC,gBAAgB;4DAAE;gBACxD,eAAe,MAAM,WAAW,CAC7B,MAAM;6DAAC,CAAA,IAAK,EAAE,MAAM,KAAK;4DACzB,MAAM;6DAAC,CAAC,KAAK,IAAM,MAAM,EAAE,OAAO,CAAC,aAAa;4DAAE;YACvD;QACF;gDAAG;QAAC,MAAM,WAAW;KAAC;IAEtB,MAAM,aAAa,CAAC,OAAe,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;YAC5E,OAAO;YAAS,KAAK;YAAW,MAAM;QACxC;IAEA,MAAM,eAAe,CAAC,OAAmB;QACvC,EAAE,eAAe;QACjB,IAAI,MAAM,MAAM,KAAK,eAAe;YAClC,QAAQ;YACR;QACF;QACA,SAAS;YAAE,MAAM;YAAsB,SAAS,MAAM,EAAE;QAAC;QACzD,QAAQ,CAAC,YAAY,EAAE,MAAM,WAAW,CAAC,QAAQ,CAAC;IACpD;IAEA,MAAM,kBAAkB,CAAC;QACvB,gBAAgB,CAAA,OAAQ,SAAS,SAAS,KAAK;QAC/C,eAAe;IACjB;IAEA,MAAM,aAAa,CAAC,CAAC,CAAC,eAAe,gBAAgB,UAAU;IAE/D,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,6JAAU;gBACT,OAAM;gBACN,UAAS;gBACT,UAAS;gBACT,uBAAS,6LAAC,oKAAmB;oBAAC,MAAK;oBAAU,OAAM;oBAAY,SAAS,IAAM,qBAAqB;;;;;;;;;;;0BAGrG,6LAAC,mKAAkB;;kCACjB,6LAAC,kKAAiB;wBAChB,MAAK;wBACL,WAAU;wBACV,OAAO,MAAM,YAAY;wBACzB,OAAM;wBACN,SAAS,IAAM,gBAAgB;wBAC/B,UAAU,iBAAiB;;;;;;kCAE7B,6LAAC,kKAAiB;wBAChB,MAAK;wBACL,WAAU;wBACV,OAAO,MAAM,kBAAkB;wBAC/B,OAAM;wBACN,SAAS,IAAM,gBAAgB;wBAC/B,UAAU,iBAAiB;;;;;;kCAE7B,6LAAC,kKAAiB;wBAChB,MAAK;wBACL,WAAU;wBACV,OAAO,MAAM,gBAAgB;wBAC7B,OAAM;;;;;;kCAER,6LAAC,kKAAiB;wBAChB,MAAK;wBACL,WAAW,MAAM,aAAa,IAAI,IAAI,YAAY;wBAClD,OAAO,KAAK,GAAG,CAAC,MAAM,aAAa;wBACnC,QAAO;wBACP,OAAM;;;;;;;;;;;;0BAIV,6LAAC,4JAAS;;kCACR,6LAAC,8JAAW;wBACV,OAAO;wBACP,UAAU;wBACV,aAAY;;;;;;kCAEd,6LAAC,+JAAY;wBACX,OAAO;wBACP,UAAU,CAAC;4BAAQ,gBAAgB;4BAAoB,eAAe;wBAAI;wBAC1E,aAAY;wBACZ,SAAS;4BACP;gCAAE,OAAO;gCAAS,OAAO;4BAAQ;4BACjC;gCAAE,OAAO;gCAAe,OAAO;4BAAc;4BAC7C;gCAAE,OAAO;gCAAa,OAAO;4BAAY;4BACzC;gCAAE,OAAO;gCAAa,OAAO;4BAAY;yBAC1C;;;;;;kCAEH,6LAAC,+JAAY;wBACX,OAAO;wBACP,UAAU,CAAC;4BAAQ,cAAc;4BAAkB,eAAe;wBAAI;wBACtE,aAAY;wBACZ,SAAS;4BACP;gCAAE,OAAO;gCAAQ,OAAO;4BAAa;4BACrC;gCAAE,OAAO;gCAAS,OAAO;4BAAc;4BACvC;gCAAE,OAAO;gCAAQ,OAAO;4BAAa;yBACtC;;;;;;oBAEF,4BACC,6LAAC,qKAAkB;wBAAC,SAAS;4BAC3B,eAAe;4BACf,gBAAgB;4BAChB,cAAc;4BACd,eAAe;wBACjB;;;;;;;;;;;;0BAIJ,6LAAC,6JAAY;;kCACX,6LAAC;wBAAM,WAAU;;0CACf,6LAAC;0CACC,cAAA,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;4CAAG,WAAU;sDAA4E;;;;;;sDAC1F,6LAAC;4CAAG,WAAU;sDAA4E;;;;;;sDAC1F,6LAAC;4CAAG,WAAU;sDAA4E;;;;;;sDAC1F,6LAAC;4CAAG,WAAU;sDAA4E;;;;;;sDAC1F,6LAAC;4CAAG,WAAU;sDAA4E;;;;;;sDAC1F,6LAAC;4CAAG,WAAU;sDAA4E;;;;;;sDAC1F,6LAAC;4CAAG,WAAU;sDAA4E;;;;;;sDAC1F,6LAAC;4CAAG,WAAU;sDAA6E;;;;;;;;;;;;;;;;;0CAG/F,6LAAC;0CACE,gBAAgB,MAAM,KAAK,kBAC1B,6LAAC;8CACC,cAAA,6LAAC;wCAAG,SAAS;kDACX,cAAA,6LAAC,2JAAU;4CACT,MAAK;4CACL,OAAM;4CACN,aAAa,aAAa,+BAA+B;4CACzD,gBAAgB;;;;;;;;;;;;;;;2CAKtB,gBAAgB,GAAG,CAAC,CAAC,sBACnB,6LAAC;wCAEC,WAAU;wCACV,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,kBAAkB,EAAE,MAAM,EAAE,EAAE;;0DAE1D,6LAAC;gDAAG,WAAU;0DACZ,cAAA,6LAAC;oDAAI,WAAU;8DAA0B,MAAM,WAAW;;;;;;;;;;;0DAE5D,6LAAC;gDAAG,WAAU;;kEACZ,6LAAC;wDAAI,WAAU;kEAAkB,MAAM,IAAI;;;;;;oDAC1C,MAAM,UAAU,kBACf,6LAAC;wDAAI,WAAU;;4DAAyB;4DAAc,MAAM,UAAU;;;;;;;;;;;;;0DAG1E,6LAAC;gDAAG,WAAU;0DACZ,cAAA,6LAAC,uJAAS;oDAAC,MAAM,MAAM,IAAI;oDAAE,QAAQ,6JAAe;;;;;;;;;;;0DAEtD,6LAAC;gDAAG,WAAU;0DAAsB,MAAM,YAAY;;;;;;0DACtD,6LAAC;gDAAG,WAAU;0DACZ,cAAA,6LAAC,4JAAW;oDACV,SAAS,MAAM,OAAO,CAAC,YAAY;oDACnC,OAAO,MAAM,OAAO,CAAC,UAAU;oDAC/B,WAAW,MAAM,MAAM,KAAK;;;;;;;;;;;0DAGhC,6LAAC;gDAAG,WAAU;0DACZ,cAAA,6LAAC,yJAAW;oDACV,QAAQ,MAAM,MAAM;oDACpB,QAAQ,oKAAsB;oDAC9B,UAAU,MAAM,MAAM,KAAK;;;;;;;;;;;0DAG/B,6LAAC;gDAAG,WAAU;0DACX,MAAM,SAAS,GAAG,WAAW,MAAM,SAAS,IAAI;;;;;;0DAEnD,6LAAC;gDAAG,WAAU;gDAAiB,SAAS,CAAC,IAAM,EAAE,eAAe;0DAC9D,cAAA,6LAAC;oDAAI,WAAU;;wDACZ,MAAM,MAAM,KAAK,yBAChB,6LAAC,6JAAY;4DACX,MAAK;4DACL,OAAM;4DACN,OAAM;4DACN,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,kBAAkB,EAAE,MAAM,EAAE,EAAE;;;;;;wDAG7D,MAAM,MAAM,KAAK,+BAChB,6LAAC,6JAAY;4DACX,MAAK;4DACL,OAAM;4DACN,OAAM;4DACN,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,kBAAkB,EAAE,MAAM,EAAE,EAAE;;;;;;wDAG7D,MAAM,MAAM,KAAK,+BAChB,6LAAC,6JAAY;4DACX,MAAK;4DACL,OAAM;4DACN,OAAM;4DACN,SAAS,CAAC,IAAM,aAAa,OAAO;;;;;;sEAGxC,6LAAC,6JAAY;4DACX,MAAK;4DACL,OAAM;4DACN,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,kBAAkB,EAAE,MAAM,EAAE,EAAE;;;;;;;;;;;;;;;;;;uCA/D3D,MAAM,EAAE;;;;;;;;;;;;;;;;kCAyEvB,6LAAC,2JAAU;wBACT,aAAa;wBACb,YAAY;wBACZ,YAAY,eAAe,MAAM;wBACjC,cAAc;wBACd,WAAU;wBACV,cAAc;;;;;;;;;;;;0BAIlB,6LAAC,0KAAqB;gBACpB,QAAQ;gBACR,SAAS,IAAM,qBAAqB;;;;;;;;;;;;AAI5C;GA3QS;;QACc,wJAAe;QACrB,kJAAS;QACI,mIAAM;QACL,yIAAQ;;;KAJ9B;AA6QM,SAAS;IACtB,qBACE,6LAAC,yKAAQ;QAAC,wBACR,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;;;;;8BACf,6LAAC;oBAAI,WAAU;8BACZ;2BAAI,MAAM;qBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,6LAAC;4BAAY,WAAU;2BAAb;;;;;;;;;;8BAGd,6LAAC;oBAAI,WAAU;;;;;;;;;;;;kBAGjB,cAAA,6LAAC;;;;;;;;;;AAGP;MAhBwB"}}]
}