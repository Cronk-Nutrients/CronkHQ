{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/ui/Modal.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode, useEffect } from 'react';\n\ninterface ModalProps {\n  open: boolean;\n  onClose: () => void;\n  title: string;\n  subtitle?: string;\n  children: ReactNode;\n  footer?: ReactNode;\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  className?: string;\n}\n\nconst sizeClasses = {\n  sm: 'max-w-sm',\n  md: 'max-w-lg',\n  lg: 'max-w-2xl',\n  xl: 'max-w-4xl',\n};\n\nexport function Modal({\n  open,\n  onClose,\n  title,\n  subtitle,\n  children,\n  footer,\n  size = 'md',\n  className = '',\n}: ModalProps) {\n  // Handle escape key\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && open) {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [open, onClose]);\n\n  // Prevent body scroll when open\n  useEffect(() => {\n    if (open) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n    }\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [open]);\n\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      {/* Backdrop */}\n      <div\n        className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\n        onClick={onClose}\n      />\n\n      {/* Modal */}\n      <div className={`relative bg-slate-900 border border-slate-700 rounded-2xl w-full ${sizeClasses[size]} m-4 shadow-2xl ${className}`}>\n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-slate-700 flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-xl font-bold text-white\">{title}</h2>\n            {subtitle && (\n              <p className=\"text-sm text-slate-400 mt-0.5\">{subtitle}</p>\n            )}\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n          >\n            <i className=\"fas fa-times\"></i>\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 max-h-[calc(100vh-16rem)] overflow-y-auto\">\n          {children}\n        </div>\n\n        {/* Footer */}\n        {footer && (\n          <div className=\"px-6 py-4 border-t border-slate-700 flex items-center justify-end gap-3\">\n            {footer}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Modal;\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAeA,MAAM,cAAc;IAClB,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;AACN;AAEO,SAAS,MAAM,EACpB,IAAI,EACJ,OAAO,EACP,KAAK,EACL,QAAQ,EACR,QAAQ,EACR,MAAM,EACN,OAAO,IAAI,EACX,YAAY,EAAE,EACH;;IACX,oBAAoB;IACpB,IAAA,0KAAS;2BAAC;YACR,MAAM;gDAAe,CAAC;oBACpB,IAAI,EAAE,GAAG,KAAK,YAAY,MAAM;wBAC9B;oBACF;gBACF;;YACA,SAAS,gBAAgB,CAAC,WAAW;YACrC;mCAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;0BAAG;QAAC;QAAM;KAAQ;IAElB,gCAAgC;IAChC,IAAA,0KAAS;2BAAC;YACR,IAAI,MAAM;gBACR,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;YACjC,OAAO;gBACL,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;YACjC;YACA;mCAAO;oBACL,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;gBACjC;;QACF;0BAAG;QAAC;KAAK;IAET,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAIX,6LAAC;gBAAI,WAAW,CAAC,iEAAiE,EAAE,WAAW,CAAC,KAAK,CAAC,gBAAgB,EAAE,WAAW;;kCAEjI,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;kDACC,6LAAC;wCAAG,WAAU;kDAAgC;;;;;;oCAC7C,0BACC,6LAAC;wCAAE,WAAU;kDAAiC;;;;;;;;;;;;0CAGlD,6LAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,6LAAC;oCAAE,WAAU;;;;;;;;;;;;;;;;;kCAKjB,6LAAC;wBAAI,WAAU;kCACZ;;;;;;oBAIF,wBACC,6LAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;;;;;;;AAMb;GA3EgB;KAAA;uCA6ED"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/ui/Button.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode, ButtonHTMLAttributes } from 'react';\nimport Link from 'next/link';\n\ntype ButtonVariant = 'primary' | 'secondary' | 'ghost' | 'danger';\ntype ButtonSize = 'sm' | 'md' | 'lg';\n\ninterface ButtonBaseProps {\n  variant?: ButtonVariant;\n  size?: ButtonSize;\n  icon?: string;\n  iconPosition?: 'left' | 'right';\n  children?: ReactNode;\n  className?: string;\n  disabled?: boolean;\n}\n\ninterface ButtonAsButton extends ButtonBaseProps, Omit<ButtonHTMLAttributes<HTMLButtonElement>, keyof ButtonBaseProps> {\n  href?: never;\n}\n\ninterface ButtonAsLink extends ButtonBaseProps {\n  href: string;\n  onClick?: never;\n  type?: never;\n}\n\ntype ButtonProps = ButtonAsButton | ButtonAsLink;\n\nconst variantClasses: Record<ButtonVariant, string> = {\n  primary: 'bg-emerald-600 hover:bg-emerald-500 text-white border-transparent',\n  secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-300 border-slate-700',\n  ghost: 'bg-transparent hover:bg-slate-800 text-slate-400 hover:text-white border-transparent',\n  danger: 'bg-red-600 hover:bg-red-500 text-white border-transparent',\n};\n\nconst sizeClasses: Record<ButtonSize, string> = {\n  sm: 'px-3 py-1.5 text-xs',\n  md: 'px-4 py-2 text-sm',\n  lg: 'px-5 py-2.5 text-base',\n};\n\nexport function Button({\n  variant = 'primary',\n  size = 'md',\n  icon,\n  iconPosition = 'left',\n  children,\n  className = '',\n  disabled,\n  href,\n  ...props\n}: ButtonProps) {\n  const baseClasses = 'inline-flex items-center justify-center gap-2 font-medium rounded-lg border transition-colors disabled:opacity-50 disabled:cursor-not-allowed';\n  const classes = `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`;\n\n  const content = (\n    <>\n      {icon && iconPosition === 'left' && <i className={icon}></i>}\n      {children}\n      {icon && iconPosition === 'right' && <i className={icon}></i>}\n    </>\n  );\n\n  if (href) {\n    return (\n      <Link href={href} className={classes}>\n        {content}\n      </Link>\n    );\n  }\n\n  return (\n    <button className={classes} disabled={disabled} {...props}>\n      {content}\n    </button>\n  );\n}\n\nexport default Button;\n"],"names":[],"mappings":";;;;;;;AAGA;AAHA;;;AA8BA,MAAM,iBAAgD;IACpD,SAAS;IACT,WAAW;IACX,OAAO;IACP,QAAQ;AACV;AAEA,MAAM,cAA0C;IAC9C,IAAI;IACJ,IAAI;IACJ,IAAI;AACN;AAEO,SAAS,OAAO,EACrB,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,IAAI,EACJ,eAAe,MAAM,EACrB,QAAQ,EACR,YAAY,EAAE,EACd,QAAQ,EACR,IAAI,EACJ,GAAG,OACS;IACZ,MAAM,cAAc;IACpB,MAAM,UAAU,GAAG,YAAY,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW;IAE7F,MAAM,wBACJ;;YACG,QAAQ,iBAAiB,wBAAU,6LAAC;gBAAE,WAAW;;;;;;YACjD;YACA,QAAQ,iBAAiB,yBAAW,6LAAC;gBAAE,WAAW;;;;;;;;IAIvD,IAAI,MAAM;QACR,qBACE,6LAAC,0KAAI;YAAC,MAAM;YAAM,WAAW;sBAC1B;;;;;;IAGP;IAEA,qBACE,6LAAC;QAAO,WAAW;QAAS,UAAU;QAAW,GAAG,KAAK;kBACtD;;;;;;AAGP;KAnCgB;uCAqCD"}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/AddProductModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Product, ProductComponent } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatNumber } from '@/lib/formatting';\nimport { Plus, X, Package, Search } from 'lucide-react';\n\ninterface AddProductModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editProduct?: Product | null;\n}\n\nconst CATEGORIES = [\n  { value: 'classic_line', label: 'Classic Line' },\n  { value: 'additives', label: 'Additives' },\n  { value: 'autoflower_line', label: 'Autoflower Line' },\n  { value: 'puur_organics', label: 'PuurOrganics' },\n  { value: 'shipping_supplies', label: 'Shipping Supplies' },\n  { value: 'merch', label: 'Merch' },\n  { value: 'labels', label: 'Labels' },\n];\n\ninterface FormData {\n  name: string;\n  sku: string;\n  barcode: string;\n  category: string;\n  description: string;\n  cost: string;\n  priceMSRP: string;\n  priceShopify: string;\n  priceAmazon: string;\n  priceWholesale: string;\n  weight: string;\n  length: string;\n  width: string;\n  height: string;\n  reorderPoint: string;\n  supplier: string;\n}\n\nconst initialFormData: FormData = {\n  name: '',\n  sku: '',\n  barcode: '',\n  category: 'classic_line',\n  description: '',\n  cost: '',\n  priceMSRP: '',\n  priceShopify: '',\n  priceAmazon: '',\n  priceWholesale: '',\n  weight: '',\n  length: '',\n  width: '',\n  height: '',\n  reorderPoint: '50',\n  supplier: '',\n};\n\nexport function AddProductModal({ isOpen, onClose, editProduct }: AddProductModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n  const [formData, setFormData] = useState<FormData>(initialFormData);\n  const [errors, setErrors] = useState<Partial<FormData>>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Components state for BOM\n  const [components, setComponents] = useState<ProductComponent[]>([]);\n  const [componentSearch, setComponentSearch] = useState('');\n  const [showComponentDropdown, setShowComponentDropdown] = useState(false);\n\n  const isEditing = !!editProduct;\n\n  // Filter products for component search (exclude current product and already added)\n  const filteredComponentProducts = useMemo(() => {\n    if (!componentSearch.trim()) return [];\n    const search = componentSearch.toLowerCase();\n    return state.products\n      .filter(p =>\n        (p.name.toLowerCase().includes(search) || p.sku.toLowerCase().includes(search)) &&\n        p.id !== editProduct?.id &&\n        !components.some(c => c.productId === p.id)\n      )\n      .slice(0, 6);\n  }, [componentSearch, state.products, components, editProduct?.id]);\n\n  // Get total stock for a product\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Add component to list\n  const addComponent = (productId: string) => {\n    const product = state.products.find(p => p.id === productId);\n    if (!product) return;\n\n    setComponents(prev => [\n      ...prev,\n      {\n        productId: product.id,\n        productName: product.name,\n        quantity: 1,\n      }\n    ]);\n    setComponentSearch('');\n    setShowComponentDropdown(false);\n  };\n\n  // Remove component from list\n  const removeComponent = (productId: string) => {\n    setComponents(prev => prev.filter(c => c.productId !== productId));\n  };\n\n  // Update component quantity\n  const updateComponentQty = (productId: string, quantity: number) => {\n    if (quantity < 1) return;\n    setComponents(prev => prev.map(c =>\n      c.productId === productId ? { ...c, quantity } : c\n    ));\n  };\n\n  // Reset form when modal opens/closes or editProduct changes\n  useEffect(() => {\n    if (isOpen) {\n      if (editProduct) {\n        setFormData({\n          name: editProduct.name,\n          sku: editProduct.sku,\n          barcode: editProduct.barcode || '',\n          category: editProduct.category,\n          description: editProduct.description || '',\n          cost: editProduct.cost.rolling.toString(),\n          priceMSRP: editProduct.prices.msrp.toString(),\n          priceShopify: editProduct.prices.shopify?.toString() || '',\n          priceAmazon: editProduct.prices.amazon?.toString() || '',\n          priceWholesale: editProduct.prices.wholesale?.toString() || '',\n          weight: editProduct.weight.value.toString(),\n          length: editProduct.dimensions?.length?.toString() || '',\n          width: editProduct.dimensions?.width?.toString() || '',\n          height: editProduct.dimensions?.height?.toString() || '',\n          reorderPoint: editProduct.reorderPoint.toString(),\n          supplier: editProduct.supplier || '',\n        });\n        // Load existing components\n        setComponents(editProduct.components || []);\n      } else {\n        setFormData(initialFormData);\n        setComponents([]);\n      }\n      setErrors({});\n      setComponentSearch('');\n      setShowComponentDropdown(false);\n    }\n  }, [isOpen, editProduct]);\n\n  const handleChange = (field: keyof FormData, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    // Clear error when user types\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: undefined }));\n    }\n  };\n\n  const generateSku = () => {\n    const categoryPrefix = formData.category.substring(0, 3).toUpperCase();\n    const randomNum = Math.floor(Math.random() * 900) + 100;\n    const newSku = `CN${categoryPrefix}${randomNum}`;\n    handleChange('sku', newSku);\n  };\n\n  const validate = (): boolean => {\n    const newErrors: Partial<FormData> = {};\n\n    if (!formData.name.trim()) {\n      newErrors.name = 'Product name is required';\n    }\n\n    if (!formData.sku.trim()) {\n      newErrors.sku = 'SKU is required';\n    } else if (!isEditing || formData.sku !== editProduct?.sku) {\n      // Check for duplicate SKU\n      const existingSku = state.products.find(\n        p => p.sku.toLowerCase() === formData.sku.toLowerCase() && p.id !== editProduct?.id\n      );\n      if (existingSku) {\n        newErrors.sku = 'SKU already exists';\n      }\n    }\n\n    if (!formData.category) {\n      newErrors.category = 'Category is required';\n    }\n\n    const cost = parseFloat(formData.cost);\n    if (isNaN(cost) || cost < 0) {\n      newErrors.cost = 'Valid cost is required';\n    }\n\n    const msrp = parseFloat(formData.priceMSRP);\n    if (isNaN(msrp) || msrp < 0) {\n      newErrors.priceMSRP = 'Valid MSRP is required';\n    }\n\n    const weight = parseFloat(formData.weight);\n    if (isNaN(weight) || weight < 0) {\n      newErrors.weight = 'Valid weight is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async () => {\n    if (!validate()) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const productData: Product = {\n        id: editProduct?.id || crypto.randomUUID(),\n        name: formData.name.trim(),\n        sku: formData.sku.trim(),\n        barcode: formData.barcode.trim() || undefined,\n        category: formData.category,\n        description: formData.description.trim() || undefined,\n        cost: {\n          rolling: parseFloat(formData.cost),\n          fixed: parseFloat(formData.cost),\n        },\n        prices: {\n          msrp: parseFloat(formData.priceMSRP),\n          shopify: formData.priceShopify ? parseFloat(formData.priceShopify) : parseFloat(formData.priceMSRP),\n          amazon: formData.priceAmazon ? parseFloat(formData.priceAmazon) : parseFloat(formData.priceMSRP),\n          wholesale: formData.priceWholesale ? parseFloat(formData.priceWholesale) : parseFloat(formData.priceMSRP) * 0.6,\n        },\n        weight: {\n          value: parseFloat(formData.weight),\n          unit: 'lbs',\n        },\n        dimensions: {\n          length: parseFloat(formData.length) || 0,\n          width: parseFloat(formData.width) || 0,\n          height: parseFloat(formData.height) || 0,\n        },\n        reorderPoint: parseInt(formData.reorderPoint) || 50,\n        supplier: formData.supplier.trim() || undefined,\n        skus: editProduct?.skus,\n        // Include manufacturing components (BOM)\n        components: components.length > 0 ? components : undefined,\n        createdAt: editProduct?.createdAt || new Date(),\n        updatedAt: new Date(),\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_PRODUCT', payload: productData });\n        success('Product updated successfully!');\n      } else {\n        dispatch({ type: 'ADD_PRODUCT', payload: productData });\n\n        // Create initial inventory levels (0) for all locations\n        state.locations.forEach(location => {\n          const existingInventory = state.inventory.find(\n            inv => inv.productId === productData.id && inv.locationId === location.id\n          );\n          if (!existingInventory) {\n            dispatch({\n              type: 'UPDATE_INVENTORY',\n              payload: {\n                productId: productData.id,\n                locationId: location.id,\n                quantity: 0,\n                updatedAt: new Date(),\n              },\n            });\n          }\n        });\n\n        success('Product created successfully!');\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save product. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Product' : 'Add Product'}\n      subtitle={isEditing ? `Editing ${editProduct?.name}` : 'Create a new product in your inventory'}\n      size=\"lg\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={isSubmitting}>\n            {isSubmitting ? (\n              <>\n                <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                Saving...\n              </>\n            ) : isEditing ? (\n              'Save Changes'\n            ) : (\n              'Create Product'\n            )}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Basic Info */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Basic Information</h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"col-span-2\">\n              <label className=\"block text-sm text-slate-400 mb-1.5\">\n                Product Name <span className=\"text-red-400\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.name}\n                onChange={e => handleChange('name', e.target.value)}\n                className={`w-full bg-slate-800 border ${errors.name ? 'border-red-500' : 'border-slate-700'} rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`}\n                placeholder=\"e.g., 1L Micro Classic\"\n              />\n              {errors.name && <p className=\"text-red-400 text-xs mt-1\">{errors.name}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">\n                SKU <span className=\"text-red-400\">*</span>\n              </label>\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={formData.sku}\n                  onChange={e => handleChange('sku', e.target.value.toUpperCase())}\n                  className={`flex-1 bg-slate-800 border ${errors.sku ? 'border-red-500' : 'border-slate-700'} rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`}\n                  placeholder=\"e.g., CLM1L\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={generateSku}\n                  className=\"px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg transition-colors text-sm\"\n                  title=\"Auto-generate SKU\"\n                >\n                  <i className=\"fas fa-magic\"></i>\n                </button>\n              </div>\n              {errors.sku && <p className=\"text-red-400 text-xs mt-1\">{errors.sku}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Barcode</label>\n              <input\n                type=\"text\"\n                value={formData.barcode}\n                onChange={e => handleChange('barcode', e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                placeholder=\"UPC or EAN\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">\n                Category <span className=\"text-red-400\">*</span>\n              </label>\n              <select\n                value={formData.category}\n                onChange={e => handleChange('category', e.target.value)}\n                className={`w-full bg-slate-800 border ${errors.category ? 'border-red-500' : 'border-slate-700'} rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50`}\n              >\n                {CATEGORIES.map(cat => (\n                  <option key={cat.value} value={cat.value}>\n                    {cat.label}\n                  </option>\n                ))}\n              </select>\n              {errors.category && <p className=\"text-red-400 text-xs mt-1\">{errors.category}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Supplier</label>\n              <input\n                type=\"text\"\n                value={formData.supplier}\n                onChange={e => handleChange('supplier', e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                placeholder=\"e.g., HIGROCORP\"\n              />\n            </div>\n\n            <div className=\"col-span-2\">\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Description</label>\n              <textarea\n                value={formData.description}\n                onChange={e => handleChange('description', e.target.value)}\n                rows={2}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n                placeholder=\"Product description...\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Pricing */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Pricing</h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">\n                Cost (COGS) <span className=\"text-red-400\">*</span>\n              </label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={formData.cost}\n                  onChange={e => handleChange('cost', e.target.value)}\n                  className={`w-full bg-slate-800 border ${errors.cost ? 'border-red-500' : 'border-slate-700'} rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`}\n                  placeholder=\"0.00\"\n                />\n              </div>\n              {errors.cost && <p className=\"text-red-400 text-xs mt-1\">{errors.cost}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">\n                MSRP <span className=\"text-red-400\">*</span>\n              </label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={formData.priceMSRP}\n                  onChange={e => handleChange('priceMSRP', e.target.value)}\n                  className={`w-full bg-slate-800 border ${errors.priceMSRP ? 'border-red-500' : 'border-slate-700'} rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`}\n                  placeholder=\"0.00\"\n                />\n              </div>\n              {errors.priceMSRP && <p className=\"text-red-400 text-xs mt-1\">{errors.priceMSRP}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Shopify Price</label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={formData.priceShopify}\n                  onChange={e => handleChange('priceShopify', e.target.value)}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                  placeholder=\"Same as MSRP\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Amazon Price</label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={formData.priceAmazon}\n                  onChange={e => handleChange('priceAmazon', e.target.value)}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                  placeholder=\"Same as MSRP\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Wholesale Price</label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={formData.priceWholesale}\n                  onChange={e => handleChange('priceWholesale', e.target.value)}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                  placeholder=\"60% of MSRP\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Reorder Point</label>\n              <input\n                type=\"number\"\n                min=\"0\"\n                value={formData.reorderPoint}\n                onChange={e => handleChange('reorderPoint', e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                placeholder=\"50\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Physical Attributes */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Physical Attributes</h3>\n          <div className=\"grid grid-cols-4 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">\n                Weight (lbs) <span className=\"text-red-400\">*</span>\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0\"\n                value={formData.weight}\n                onChange={e => handleChange('weight', e.target.value)}\n                className={`w-full bg-slate-800 border ${errors.weight ? 'border-red-500' : 'border-slate-700'} rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`}\n                placeholder=\"0.00\"\n              />\n              {errors.weight && <p className=\"text-red-400 text-xs mt-1\">{errors.weight}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Length (in)</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                value={formData.length}\n                onChange={e => handleChange('length', e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                placeholder=\"0\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Width (in)</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                value={formData.width}\n                onChange={e => handleChange('width', e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                placeholder=\"0\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Height (in)</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                value={formData.height}\n                onChange={e => handleChange('height', e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                placeholder=\"0\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Manufacturing Components (BOM) */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">\n            Manufacturing Components (Bill of Materials)\n          </h3>\n          <p className=\"text-xs text-slate-400 mb-3\">\n            Add components required to manufacture this product (e.g., front label, back label, bottle)\n          </p>\n\n          {/* Search for components */}\n          <div className=\"relative mb-3\">\n            <div className=\"flex gap-2\">\n              <div className=\"flex-1 relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n                <input\n                  type=\"text\"\n                  value={componentSearch}\n                  onChange={e => {\n                    setComponentSearch(e.target.value);\n                    setShowComponentDropdown(true);\n                  }}\n                  onFocus={() => setShowComponentDropdown(true)}\n                  placeholder=\"Search products to add as components...\"\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                />\n\n                {/* Dropdown */}\n                {showComponentDropdown && filteredComponentProducts.length > 0 && (\n                  <div className=\"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-48 overflow-auto\">\n                    {filteredComponentProducts.map(product => {\n                      const stock = getProductStock(product.id);\n                      return (\n                        <button\n                          key={product.id}\n                          type=\"button\"\n                          onClick={() => addComponent(product.id)}\n                          className=\"w-full px-4 py-2.5 flex items-center justify-between hover:bg-slate-700/50 text-left\"\n                        >\n                          <div>\n                            <div className=\"text-sm text-white\">{product.name}</div>\n                            <div className=\"text-xs text-slate-400\">{product.sku}</div>\n                          </div>\n                          <div className=\"text-right\">\n                            <div className={`text-xs ${stock > 0 ? 'text-emerald-400' : 'text-slate-500'}`}>\n                              {formatNumber(stock)} in stock\n                            </div>\n                          </div>\n                        </button>\n                      );\n                    })}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Component List */}\n          {components.length > 0 ? (\n            <div className=\"space-y-2\">\n              {components.map(comp => {\n                const product = state.products.find(p => p.id === comp.productId);\n                const stock = getProductStock(comp.productId);\n\n                return (\n                  <div\n                    key={comp.productId}\n                    className=\"flex items-center gap-3 p-3 bg-slate-800/50 border border-slate-700/50 rounded-lg\"\n                  >\n                    <div className=\"w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center flex-shrink-0\">\n                      <Package className=\"w-4 h-4 text-emerald-400\" />\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"text-sm text-white truncate\">{comp.productName}</div>\n                      <div className=\"text-xs text-slate-400\">\n                        {product?.sku} - {formatNumber(stock)} available\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-xs text-slate-400\">Qty:</span>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={comp.quantity}\n                        onChange={e => updateComponentQty(comp.productId, parseInt(e.target.value) || 1)}\n                        className=\"w-16 bg-slate-700 border border-slate-600 rounded-lg px-2 py-1.5 text-white text-center text-sm focus:outline-none focus:border-emerald-500/50\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => removeComponent(comp.productId)}\n                        className=\"p-1.5 text-slate-400 hover:text-red-400 hover:bg-slate-700 rounded-lg transition-colors\"\n                      >\n                        <X className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <div className=\"p-4 border-2 border-dashed border-slate-700 rounded-lg text-center\">\n              <Package className=\"w-8 h-8 text-slate-600 mx-auto mb-2\" />\n              <p className=\"text-sm text-slate-500\">No components added</p>\n              <p className=\"text-xs text-slate-600 mt-1\">\n                Search and add components to track BOM for manufacturing\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default AddProductModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1632, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/AdjustStockModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Product } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatNumber } from '@/lib/formatting';\n\ninterface AdjustStockModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  product: Product | null;\n}\n\ntype AdjustmentType = 'add' | 'remove' | 'set';\n\nconst ADJUSTMENT_REASONS = [\n  { value: 'received', label: 'Received (PO)' },\n  { value: 'sold', label: 'Sold' },\n  { value: 'damaged', label: 'Damaged' },\n  { value: 'count_adjustment', label: 'Count Adjustment' },\n  { value: 'transfer_in', label: 'Transfer In' },\n  { value: 'transfer_out', label: 'Transfer Out' },\n  { value: 'returned', label: 'Customer Return' },\n  { value: 'other', label: 'Other' },\n];\n\nexport function AdjustStockModal({ isOpen, onClose, product }: AdjustStockModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, warning } = useToast();\n\n  const [selectedLocation, setSelectedLocation] = useState('');\n  const [adjustmentType, setAdjustmentType] = useState<AdjustmentType>('add');\n  const [quantity, setQuantity] = useState('');\n  const [reason, setReason] = useState('count_adjustment');\n  const [notes, setNotes] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen && product) {\n      setSelectedLocation(state.locations[0]?.id || '');\n      setAdjustmentType('add');\n      setQuantity('');\n      setReason('count_adjustment');\n      setNotes('');\n    }\n  }, [isOpen, product, state.locations]);\n\n  // Get current stock for selected location\n  const currentStock = useMemo(() => {\n    if (!product || !selectedLocation) return 0;\n    const inv = state.inventory.find(\n      i => i.productId === product.id && i.locationId === selectedLocation\n    );\n    return inv?.quantity || 0;\n  }, [product, selectedLocation, state.inventory]);\n\n  // Get stock by location for display\n  const stockByLocation = useMemo(() => {\n    if (!product) return [];\n    return state.locations.map(loc => {\n      const inv = state.inventory.find(\n        i => i.productId === product.id && i.locationId === loc.id\n      );\n      return {\n        locationId: loc.id,\n        locationName: loc.name,\n        quantity: inv?.quantity || 0,\n      };\n    });\n  }, [product, state.locations, state.inventory]);\n\n  // Calculate new stock\n  const newStock = useMemo(() => {\n    const qty = parseInt(quantity) || 0;\n    if (adjustmentType === 'add') return currentStock + qty;\n    if (adjustmentType === 'remove') return currentStock - qty;\n    if (adjustmentType === 'set') return qty;\n    return currentStock;\n  }, [currentStock, adjustmentType, quantity]);\n\n  // Check if removal would go negative\n  const wouldGoNegative = adjustmentType === 'remove' && newStock < 0;\n\n  const handleSubmit = () => {\n    if (!product || !selectedLocation) return;\n\n    const qty = parseInt(quantity) || 0;\n    if (qty === 0) return;\n\n    setIsSubmitting(true);\n\n    try {\n      let adjustment = 0;\n      if (adjustmentType === 'add') adjustment = qty;\n      if (adjustmentType === 'remove') adjustment = -qty;\n      if (adjustmentType === 'set') adjustment = qty - currentStock;\n\n      dispatch({\n        type: 'ADJUST_STOCK',\n        payload: {\n          productId: product.id,\n          locationId: selectedLocation,\n          adjustment,\n        },\n      });\n\n      const locationName = state.locations.find(l => l.id === selectedLocation)?.name || 'Unknown';\n\n      if (wouldGoNegative) {\n        warning(`Stock adjusted: ${product.name} now has ${newStock} units at ${locationName} (negative stock)`);\n      } else {\n        success(`Stock adjusted: ${product.name} now has ${formatNumber(newStock)} units at ${locationName}`);\n      }\n\n      onClose();\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!product) return null;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title=\"Adjust Stock\"\n      subtitle={product.name}\n      size=\"md\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleSubmit}\n            disabled={isSubmitting || !quantity || parseInt(quantity) === 0}\n          >\n            {isSubmitting ? (\n              <>\n                <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                Saving...\n              </>\n            ) : (\n              'Apply Adjustment'\n            )}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Product Info */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 bg-emerald-500/20 rounded-lg flex items-center justify-center\">\n              <i className=\"fas fa-flask text-emerald-400\"></i>\n            </div>\n            <div>\n              <div className=\"font-medium text-white\">{product.name}</div>\n              <div className=\"text-sm text-slate-400\">SKU: {product.sku}</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Current Stock by Location */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Current Stock by Location</h3>\n          <div className=\"grid grid-cols-1 gap-2\">\n            {stockByLocation.map(loc => (\n              <div\n                key={loc.locationId}\n                className={`flex items-center justify-between p-3 rounded-lg border ${\n                  selectedLocation === loc.locationId\n                    ? 'bg-emerald-500/10 border-emerald-500/30'\n                    : 'bg-slate-800/50 border-slate-700/50'\n                }`}\n              >\n                <span className=\"text-slate-300\">{loc.locationName}</span>\n                <span className={`font-medium ${loc.quantity > 0 ? 'text-white' : 'text-slate-500'}`}>\n                  {formatNumber(loc.quantity)} units\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Adjustment Form */}\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Location</label>\n            <select\n              value={selectedLocation}\n              onChange={e => setSelectedLocation(e.target.value)}\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n            >\n              {state.locations.map(loc => (\n                <option key={loc.id} value={loc.id}>\n                  {loc.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Adjustment Type</label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              {[\n                { value: 'add', label: 'Add', icon: 'fa-plus' },\n                { value: 'remove', label: 'Remove', icon: 'fa-minus' },\n                { value: 'set', label: 'Set To', icon: 'fa-equals' },\n              ].map(type => (\n                <button\n                  key={type.value}\n                  type=\"button\"\n                  onClick={() => setAdjustmentType(type.value as AdjustmentType)}\n                  className={`p-3 rounded-lg border transition-colors ${\n                    adjustmentType === type.value\n                      ? 'bg-emerald-500/20 border-emerald-500/30 text-emerald-400'\n                      : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n                  }`}\n                >\n                  <i className={`fas ${type.icon} mr-2`}></i>\n                  {type.label}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Quantity</label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              value={quantity}\n              onChange={e => setQuantity(e.target.value)}\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              placeholder=\"Enter quantity\"\n            />\n          </div>\n\n          {/* Preview */}\n          {quantity && parseInt(quantity) > 0 && (\n            <div className={`p-4 rounded-lg border ${\n              wouldGoNegative\n                ? 'bg-red-500/10 border-red-500/30'\n                : 'bg-blue-500/10 border-blue-500/30'\n            }`}>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-slate-300\">Stock Change Preview</span>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-slate-400\">{formatNumber(currentStock)}</span>\n                  <i className=\"fas fa-arrow-right text-slate-500\"></i>\n                  <span className={`font-medium ${wouldGoNegative ? 'text-red-400' : 'text-emerald-400'}`}>\n                    {formatNumber(newStock)}\n                  </span>\n                </div>\n              </div>\n              {wouldGoNegative && (\n                <p className=\"text-red-400 text-sm mt-2\">\n                  <i className=\"fas fa-exclamation-triangle mr-1\"></i>\n                  This will result in negative stock. Proceed with caution.\n                </p>\n              )}\n            </div>\n          )}\n\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Reason</label>\n            <select\n              value={reason}\n              onChange={e => setReason(e.target.value)}\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n            >\n              {ADJUSTMENT_REASONS.map(r => (\n                <option key={r.value} value={r.value}>\n                  {r.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Notes (Optional)</label>\n            <textarea\n              value={notes}\n              onChange={e => setNotes(e.target.value)}\n              rows={2}\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n              placeholder=\"Additional notes about this adjustment...\"\n            />\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default AdjustStockModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2238, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/ImportCSVModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useRef } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Product } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\n\ninterface ImportCSVModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ninterface ParsedRow {\n  [key: string]: string;\n}\n\ninterface ColumnMapping {\n  name: string;\n  sku: string;\n  category: string;\n  cost: string;\n  priceMSRP: string;\n  priceShopify?: string;\n  priceAmazon?: string;\n  weight?: string;\n  barcode?: string;\n}\n\nconst REQUIRED_FIELDS = ['name', 'sku', 'category', 'cost', 'priceMSRP'];\nconst FIELD_LABELS: Record<string, string> = {\n  name: 'Product Name',\n  sku: 'SKU',\n  category: 'Category',\n  cost: 'Cost',\n  priceMSRP: 'MSRP',\n  priceShopify: 'Shopify Price',\n  priceAmazon: 'Amazon Price',\n  weight: 'Weight',\n  barcode: 'Barcode',\n};\n\nexport function ImportCSVModal({ isOpen, onClose }: ImportCSVModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error, warning } = useToast();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const [step, setStep] = useState<'upload' | 'mapping' | 'preview'>('upload');\n  const [fileName, setFileName] = useState('');\n  const [csvHeaders, setCsvHeaders] = useState<string[]>([]);\n  const [csvData, setCsvData] = useState<ParsedRow[]>([]);\n  const [columnMapping, setColumnMapping] = useState<Partial<ColumnMapping>>({});\n  const [isImporting, setIsImporting] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n\n  const resetState = () => {\n    setStep('upload');\n    setFileName('');\n    setCsvHeaders([]);\n    setCsvData([]);\n    setColumnMapping({});\n    setIsImporting(false);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const parseCSV = (text: string): { headers: string[]; data: ParsedRow[] } => {\n    const lines = text.split(/\\r?\\n/).filter(line => line.trim());\n    if (lines.length === 0) return { headers: [], data: [] };\n\n    // Parse headers\n    const headers = lines[0].split(',').map(h => h.trim().replace(/^\"|\"$/g, ''));\n\n    // Parse data rows\n    const data: ParsedRow[] = [];\n    for (let i = 1; i < lines.length; i++) {\n      const values = lines[i].split(',').map(v => v.trim().replace(/^\"|\"$/g, ''));\n      const row: ParsedRow = {};\n      headers.forEach((header, index) => {\n        row[header] = values[index] || '';\n      });\n      data.push(row);\n    }\n\n    return { headers, data };\n  };\n\n  const autoMapColumns = (headers: string[]) => {\n    const mapping: Partial<ColumnMapping> = {};\n    const lowerHeaders = headers.map(h => h.toLowerCase());\n\n    // Try to auto-map common column names\n    const mappings: Record<keyof ColumnMapping, string[]> = {\n      name: ['name', 'product name', 'product', 'title'],\n      sku: ['sku', 'product sku', 'item number', 'item #'],\n      category: ['category', 'type', 'product type'],\n      cost: ['cost', 'cogs', 'unit cost', 'price cost'],\n      priceMSRP: ['msrp', 'price', 'retail price', 'price msrp'],\n      priceShopify: ['shopify price', 'shopify', 'web price'],\n      priceAmazon: ['amazon price', 'amazon', 'marketplace price'],\n      weight: ['weight', 'weight (lbs)', 'lbs'],\n      barcode: ['barcode', 'upc', 'ean', 'gtin'],\n    };\n\n    Object.entries(mappings).forEach(([field, possibleNames]) => {\n      const matchIndex = lowerHeaders.findIndex(h =>\n        possibleNames.some(name => h.includes(name))\n      );\n      if (matchIndex !== -1) {\n        mapping[field as keyof ColumnMapping] = headers[matchIndex];\n      }\n    });\n\n    return mapping;\n  };\n\n  const handleFileSelect = (file: File) => {\n    if (!file.name.endsWith('.csv')) {\n      error('Please select a CSV file');\n      return;\n    }\n\n    setFileName(file.name);\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const text = e.target?.result as string;\n      const { headers, data } = parseCSV(text);\n\n      if (headers.length === 0) {\n        error('Could not parse CSV file');\n        return;\n      }\n\n      setCsvHeaders(headers);\n      setCsvData(data);\n      setColumnMapping(autoMapColumns(headers));\n      setStep('mapping');\n    };\n    reader.readAsText(file);\n  };\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n\n    const file = e.dataTransfer.files[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  }, []);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  }, []);\n\n  const handleDragLeave = useCallback(() => {\n    setIsDragging(false);\n  }, []);\n\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  };\n\n  const isValidMapping = () => {\n    return REQUIRED_FIELDS.every(field => columnMapping[field as keyof ColumnMapping]);\n  };\n\n  const getPreviewData = () => {\n    return csvData.slice(0, 5).map(row => {\n      const mapped: Record<string, string> = {};\n      Object.entries(columnMapping).forEach(([field, column]) => {\n        if (column) {\n          mapped[field] = row[column] || '';\n        }\n      });\n      return mapped;\n    });\n  };\n\n  const getValidationIssues = () => {\n    const issues: string[] = [];\n    const existingSkus = new Set(state.products.map(p => p.sku.toLowerCase()));\n    const newSkus = new Set<string>();\n\n    csvData.forEach((row, index) => {\n      const sku = columnMapping.sku ? row[columnMapping.sku] : '';\n      const name = columnMapping.name ? row[columnMapping.name] : '';\n\n      if (!sku) {\n        issues.push(`Row ${index + 2}: Missing SKU`);\n      } else if (existingSkus.has(sku.toLowerCase())) {\n        issues.push(`Row ${index + 2}: SKU \"${sku}\" already exists`);\n      } else if (newSkus.has(sku.toLowerCase())) {\n        issues.push(`Row ${index + 2}: Duplicate SKU \"${sku}\" in file`);\n      } else {\n        newSkus.add(sku.toLowerCase());\n      }\n\n      if (!name) {\n        issues.push(`Row ${index + 2}: Missing product name`);\n      }\n    });\n\n    return issues.slice(0, 10); // Show first 10 issues\n  };\n\n  const handleImport = async () => {\n    if (!isValidMapping()) return;\n\n    setIsImporting(true);\n\n    try {\n      const existingSkus = new Set(state.products.map(p => p.sku.toLowerCase()));\n      let imported = 0;\n      let skipped = 0;\n\n      for (const row of csvData) {\n        const sku = columnMapping.sku ? row[columnMapping.sku] : '';\n        const name = columnMapping.name ? row[columnMapping.name] : '';\n\n        if (!sku || !name || existingSkus.has(sku.toLowerCase())) {\n          skipped++;\n          continue;\n        }\n\n        const msrp = parseFloat(columnMapping.priceMSRP ? row[columnMapping.priceMSRP] : '0') || 0;\n        const shopifyPrice = parseFloat(columnMapping.priceShopify ? row[columnMapping.priceShopify] : '0') || msrp;\n        const amazonPrice = parseFloat(columnMapping.priceAmazon ? row[columnMapping.priceAmazon] : '0') || msrp;\n        const costValue = parseFloat(columnMapping.cost ? row[columnMapping.cost] : '0') || 0;\n        const weightValue = parseFloat(columnMapping.weight ? row[columnMapping.weight] : '0') || 0;\n\n        const newProduct: Product = {\n          id: crypto.randomUUID(),\n          name: name.trim(),\n          sku: sku.trim().toUpperCase(),\n          barcode: columnMapping.barcode ? row[columnMapping.barcode]?.trim() : undefined,\n          category: columnMapping.category ? row[columnMapping.category]?.trim() || 'classic_line' : 'classic_line',\n          cost: {\n            rolling: costValue,\n            fixed: costValue,\n          },\n          prices: {\n            msrp: msrp,\n            shopify: shopifyPrice,\n            amazon: amazonPrice,\n            wholesale: msrp * 0.6,\n          },\n          weight: {\n            value: weightValue,\n            unit: 'lbs',\n          },\n          dimensions: { length: 0, width: 0, height: 0 },\n          reorderPoint: 50,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n        };\n\n        dispatch({ type: 'ADD_PRODUCT', payload: newProduct });\n        existingSkus.add(sku.toLowerCase());\n        imported++;\n      }\n\n      if (imported > 0) {\n        success(`Successfully imported ${imported} products`);\n      }\n      if (skipped > 0) {\n        warning(`Skipped ${skipped} rows (missing data or duplicate SKUs)`);\n      }\n\n      resetState();\n      onClose();\n    } catch (err) {\n      error('Failed to import products');\n    } finally {\n      setIsImporting(false);\n    }\n  };\n\n  const handleClose = () => {\n    resetState();\n    onClose();\n  };\n\n  const renderUploadStep = () => (\n    <div className=\"space-y-4\">\n      <div\n        onDrop={handleDrop}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onClick={() => fileInputRef.current?.click()}\n        className={`border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors ${\n          isDragging\n            ? 'border-emerald-500 bg-emerald-500/10'\n            : 'border-slate-700 hover:border-slate-600'\n        }`}\n      >\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\".csv\"\n          onChange={handleFileInputChange}\n          className=\"hidden\"\n        />\n        <i className=\"fas fa-cloud-upload-alt text-4xl text-slate-500 mb-4\"></i>\n        <p className=\"text-white font-medium mb-1\">\n          Drag & drop CSV file here\n        </p>\n        <p className=\"text-sm text-slate-400\">\n          or click to browse\n        </p>\n      </div>\n\n      <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n        <h4 className=\"text-sm font-medium text-white mb-2\">CSV Format Requirements</h4>\n        <ul className=\"text-sm text-slate-400 space-y-1\">\n          <li><i className=\"fas fa-check text-emerald-400 mr-2\"></i>First row must contain column headers</li>\n          <li><i className=\"fas fa-check text-emerald-400 mr-2\"></i>Required columns: Name, SKU, Category, Cost, MSRP</li>\n          <li><i className=\"fas fa-check text-emerald-400 mr-2\"></i>Optional: Shopify Price, Amazon Price, Weight, Barcode</li>\n        </ul>\n      </div>\n    </div>\n  );\n\n  const renderMappingStep = () => (\n    <div className=\"space-y-4\">\n      <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n        <div className=\"flex items-center gap-2 mb-2\">\n          <i className=\"fas fa-file-csv text-emerald-400\"></i>\n          <span className=\"text-white font-medium\">{fileName}</span>\n          <span className=\"text-slate-400 text-sm\">({csvData.length} rows)</span>\n        </div>\n        <button\n          onClick={resetState}\n          className=\"text-sm text-slate-400 hover:text-white\"\n        >\n          <i className=\"fas fa-times mr-1\"></i>\n          Choose different file\n        </button>\n      </div>\n\n      <div>\n        <h4 className=\"text-sm font-medium text-white mb-3\">Map CSV Columns</h4>\n        <div className=\"grid grid-cols-2 gap-3\">\n          {Object.entries(FIELD_LABELS).map(([field, label]) => (\n            <div key={field}>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">\n                {label}\n                {REQUIRED_FIELDS.includes(field) && (\n                  <span className=\"text-red-400 ml-1\">*</span>\n                )}\n              </label>\n              <select\n                value={columnMapping[field as keyof ColumnMapping] || ''}\n                onChange={e =>\n                  setColumnMapping(prev => ({ ...prev, [field]: e.target.value }))\n                }\n                className={`w-full bg-slate-800 border ${\n                  REQUIRED_FIELDS.includes(field) && !columnMapping[field as keyof ColumnMapping]\n                    ? 'border-amber-500/50'\n                    : 'border-slate-700'\n                } rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-emerald-500/50`}\n              >\n                <option value=\"\">-- Select column --</option>\n                {csvHeaders.map(header => (\n                  <option key={header} value={header}>\n                    {header}\n                  </option>\n                ))}\n              </select>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {isValidMapping() && (\n        <Button onClick={() => setStep('preview')} className=\"w-full\">\n          Preview Import\n          <i className=\"fas fa-arrow-right ml-2\"></i>\n        </Button>\n      )}\n    </div>\n  );\n\n  const renderPreviewStep = () => {\n    const previewData = getPreviewData();\n    const issues = getValidationIssues();\n\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <button\n            onClick={() => setStep('mapping')}\n            className=\"text-sm text-slate-400 hover:text-white\"\n          >\n            <i className=\"fas fa-arrow-left mr-1\"></i>\n            Back to mapping\n          </button>\n          <span className=\"text-sm text-slate-400\">\n            Ready to import <span className=\"text-white font-medium\">{csvData.length}</span> products\n          </span>\n        </div>\n\n        {/* Preview Table */}\n        <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm\">\n              <thead className=\"bg-slate-800\">\n                <tr>\n                  {Object.entries(columnMapping)\n                    .filter(([, col]) => col)\n                    .map(([field]) => (\n                      <th key={field} className=\"px-3 py-2 text-left text-slate-400 font-medium\">\n                        {FIELD_LABELS[field] || field}\n                      </th>\n                    ))}\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-slate-700/50\">\n                {previewData.map((row, index) => (\n                  <tr key={index} className=\"bg-slate-800/30\">\n                    {Object.entries(columnMapping)\n                      .filter(([, col]) => col)\n                      .map(([field]) => (\n                        <td key={field} className=\"px-3 py-2 text-white\">\n                          {row[field] || '-'}\n                        </td>\n                      ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          {csvData.length > 5 && (\n            <div className=\"px-3 py-2 bg-slate-800/50 text-center text-sm text-slate-400\">\n              ... and {csvData.length - 5} more rows\n            </div>\n          )}\n        </div>\n\n        {/* Validation Issues */}\n        {issues.length > 0 && (\n          <div className=\"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4\">\n            <h4 className=\"text-amber-400 font-medium mb-2 flex items-center gap-2\">\n              <i className=\"fas fa-exclamation-triangle\"></i>\n              Validation Warnings\n            </h4>\n            <ul className=\"text-sm text-amber-300/80 space-y-1\">\n              {issues.map((issue, index) => (\n                <li key={index}>{issue}</li>\n              ))}\n              {issues.length === 10 && (\n                <li className=\"text-slate-400\">... and more</li>\n              )}\n            </ul>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={handleClose}\n      title=\"Import Products from CSV\"\n      subtitle={\n        step === 'upload' ? 'Upload a CSV file to import products' :\n        step === 'mapping' ? 'Map CSV columns to product fields' :\n        'Review and confirm import'\n      }\n      size=\"lg\"\n      footer={\n        step === 'preview' ? (\n          <>\n            <Button variant=\"secondary\" onClick={handleClose}>\n              Cancel\n            </Button>\n            <Button onClick={handleImport} disabled={isImporting}>\n              {isImporting ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                  Importing...\n                </>\n              ) : (\n                <>\n                  <i className=\"fas fa-file-import mr-2\"></i>\n                  Import {csvData.length} Products\n                </>\n              )}\n            </Button>\n          </>\n        ) : undefined\n      }\n    >\n      {step === 'upload' && renderUploadStep()}\n      {step === 'mapping' && renderMappingStep()}\n      {step === 'preview' && renderPreviewStep()}\n    </Modal>\n  );\n}\n\nexport default ImportCSVModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3111, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/BundleModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Bundle, BundleComponent } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatNumber } from '@/lib/formatting';\n\ninterface BundleModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editBundle?: Bundle | null;\n}\n\ntype BundleType = 'virtual' | 'physical' | 'fba_kit';\n\nexport function BundleModal({ isOpen, onClose, editBundle }: BundleModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error, warning } = useToast();\n\n  // Form state\n  const [name, setName] = useState('');\n  const [sku, setSku] = useState('');\n  const [bundleType, setBundleType] = useState<BundleType>('virtual');\n  const [description, setDescription] = useState('');\n  const [priceMSRP, setPriceMSRP] = useState('');\n  const [priceShopify, setPriceShopify] = useState('');\n  const [priceAmazon, setPriceAmazon] = useState('');\n  const [assemblyInstructions, setAssemblyInstructions] = useState('');\n  const [components, setComponents] = useState<BundleComponent[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Product search state\n  const [productSearch, setProductSearch] = useState('');\n  const [showProductDropdown, setShowProductDropdown] = useState(false);\n  const [componentQty, setComponentQty] = useState('1');\n\n  const isEditing = !!editBundle;\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editBundle) {\n        setName(editBundle.name);\n        setSku(editBundle.sku);\n        setBundleType(editBundle.type);\n        setDescription(editBundle.description || '');\n        setPriceMSRP(editBundle.prices.msrp.toString());\n        setPriceShopify(editBundle.prices.shopify.toString());\n        setPriceAmazon(editBundle.prices.amazon.toString());\n        setAssemblyInstructions(editBundle.assemblyInstructions || '');\n        setComponents([...editBundle.components]);\n      } else {\n        setName('');\n        setSku('');\n        setBundleType('virtual');\n        setDescription('');\n        setPriceMSRP('');\n        setPriceShopify('');\n        setPriceAmazon('');\n        setAssemblyInstructions('');\n        setComponents([]);\n      }\n      setProductSearch('');\n      setComponentQty('1');\n    }\n  }, [isOpen, editBundle]);\n\n  // Get total stock for a product\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Calculate bundle metrics\n  const bundleMetrics = useMemo(() => {\n    const cost = components.reduce((sum, c) => {\n      const product = state.products.find(p => p.id === c.productId);\n      return sum + (product?.cost.rolling || 0) * c.quantity;\n    }, 0);\n\n    const msrp = parseFloat(priceMSRP) || 0;\n    const margin = msrp > 0 ? ((msrp - cost) / msrp) * 100 : 0;\n\n    // Available quantity = MIN of (component stock / qty needed)\n    const availableQty = components.length > 0\n      ? Math.min(\n          ...components.map(c => {\n            const stock = getProductStock(c.productId);\n            return Math.floor(stock / c.quantity);\n          })\n        )\n      : 0;\n\n    // Find limiting component\n    let limitingComponent = '';\n    if (components.length > 0) {\n      let minAvailable = Infinity;\n      components.forEach(c => {\n        const stock = getProductStock(c.productId);\n        const canBuild = Math.floor(stock / c.quantity);\n        if (canBuild < minAvailable) {\n          minAvailable = canBuild;\n          limitingComponent = c.productName;\n        }\n      });\n    }\n\n    return { cost, margin, availableQty, limitingComponent };\n  }, [components, priceMSRP, state.products, state.inventory]);\n\n  // Filter products for search\n  const filteredProducts = useMemo(() => {\n    if (!productSearch.trim()) return [];\n    const search = productSearch.toLowerCase();\n    return state.products\n      .filter(p =>\n        (p.name.toLowerCase().includes(search) || p.sku.toLowerCase().includes(search)) &&\n        !components.some(c => c.productId === p.id)\n      )\n      .slice(0, 8);\n  }, [productSearch, state.products, components]);\n\n  // Generate SKU\n  const generateSku = () => {\n    const typePrefix = bundleType === 'virtual' ? 'VIR' : bundleType === 'physical' ? 'PHY' : 'FBA';\n    const randomNum = Math.floor(Math.random() * 900) + 100;\n    setSku(`BND-${typePrefix}-${randomNum}`);\n  };\n\n  // Add component\n  const addComponent = (productId: string) => {\n    const product = state.products.find(p => p.id === productId);\n    if (!product) return;\n\n    const qty = parseInt(componentQty) || 1;\n    setComponents(prev => [\n      ...prev,\n      {\n        productId: product.id,\n        productName: product.name,\n        quantity: qty,\n      }\n    ]);\n    setProductSearch('');\n    setComponentQty('1');\n    setShowProductDropdown(false);\n  };\n\n  // Remove component\n  const removeComponent = (productId: string) => {\n    setComponents(prev => prev.filter(c => c.productId !== productId));\n  };\n\n  // Update component quantity\n  const updateComponentQty = (productId: string, qty: number) => {\n    if (qty < 1) return;\n    setComponents(prev => prev.map(c =>\n      c.productId === productId ? { ...c, quantity: qty } : c\n    ));\n  };\n\n  // Validation\n  const isValid = useMemo(() => {\n    if (!name.trim()) return false;\n    if (!sku.trim()) return false;\n    if (!bundleType) return false;\n    if (!priceMSRP || parseFloat(priceMSRP) <= 0) return false;\n    if (components.length === 0) return false;\n\n    // Check for duplicate SKU\n    const existingSku = state.bundles.find(b =>\n      b.sku.toLowerCase() === sku.toLowerCase() && b.id !== editBundle?.id\n    );\n    if (existingSku) return false;\n\n    return true;\n  }, [name, sku, bundleType, priceMSRP, components, state.bundles, editBundle]);\n\n  // Submit handler\n  const handleSubmit = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const msrp = parseFloat(priceMSRP) || 0;\n      const bundleData: Bundle = {\n        id: editBundle?.id || crypto.randomUUID(),\n        name: name.trim(),\n        sku: sku.trim().toUpperCase(),\n        type: bundleType,\n        description: description.trim() || undefined,\n        prices: {\n          msrp,\n          shopify: parseFloat(priceShopify) || msrp,\n          amazon: parseFloat(priceAmazon) || msrp,\n          wholesale: msrp * 0.6,\n        },\n        components,\n        assemblyInstructions: bundleType !== 'virtual' ? assemblyInstructions.trim() || undefined : undefined,\n        createdAt: editBundle?.createdAt || new Date(),\n        updatedAt: new Date(),\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_BUNDLE', payload: bundleData });\n        success(`Bundle \"${name}\" updated successfully!`);\n      } else {\n        dispatch({ type: 'ADD_BUNDLE', payload: bundleData });\n        success(`Bundle \"${name}\" created successfully!`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save bundle. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Bundle' : 'Create Bundle'}\n      subtitle={isEditing ? `Editing ${editBundle?.name}` : 'Define a new product bundle'}\n      size=\"lg\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? (\n              <>\n                <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                Saving...\n              </>\n            ) : isEditing ? (\n              'Save Changes'\n            ) : (\n              <>\n                <i className=\"fas fa-plus mr-2\"></i>\n                Create Bundle\n              </>\n            )}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Basic Info Section */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Basic Information</h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Bundle Name *</label>\n              <input\n                type=\"text\"\n                value={name}\n                onChange={e => setName(e.target.value)}\n                placeholder=\"e.g., Starter Kit\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Bundle SKU *</label>\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={sku}\n                  onChange={e => setSku(e.target.value)}\n                  placeholder=\"e.g., BND-VIR-001\"\n                  className=\"flex-1 bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={generateSku}\n                  className=\"px-3 py-2.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm whitespace-nowrap\"\n                >\n                  <i className=\"fas fa-magic mr-1\"></i>\n                  Generate\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Bundle Type */}\n          <div className=\"mt-4\">\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Bundle Type *</label>\n            <div className=\"grid grid-cols-3 gap-3\">\n              <button\n                type=\"button\"\n                onClick={() => setBundleType('virtual')}\n                className={`p-3 rounded-lg border transition-colors text-left ${\n                  bundleType === 'virtual'\n                    ? 'bg-blue-500/20 border-blue-500/30 text-blue-400'\n                    : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n                }`}\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <i className=\"fas fa-cloud\"></i>\n                  <span className=\"font-medium\">Virtual</span>\n                </div>\n                <div className=\"text-xs opacity-70\">Components deducted on sale</div>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setBundleType('physical')}\n                className={`p-3 rounded-lg border transition-colors text-left ${\n                  bundleType === 'physical'\n                    ? 'bg-emerald-500/20 border-emerald-500/30 text-emerald-400'\n                    : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n                }`}\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <i className=\"fas fa-box\"></i>\n                  <span className=\"font-medium\">Physical</span>\n                </div>\n                <div className=\"text-xs opacity-70\">Pre-assembled, tracked as unit</div>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setBundleType('fba_kit')}\n                className={`p-3 rounded-lg border transition-colors text-left ${\n                  bundleType === 'fba_kit'\n                    ? 'bg-orange-500/20 border-orange-500/30 text-orange-400'\n                    : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n                }`}\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <i className=\"fab fa-amazon\"></i>\n                  <span className=\"font-medium\">FBA Kit</span>\n                </div>\n                <div className=\"text-xs opacity-70\">Pre-assembled for Amazon FBA</div>\n              </button>\n            </div>\n          </div>\n\n          {/* Description */}\n          <div className=\"mt-4\">\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Description (Optional)</label>\n            <textarea\n              value={description}\n              onChange={e => setDescription(e.target.value)}\n              rows={2}\n              placeholder=\"Brief description of the bundle...\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n            />\n          </div>\n        </div>\n\n        {/* Pricing Section */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Pricing</h3>\n          <div className=\"grid grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">MSRP Price *</label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={priceMSRP}\n                  onChange={e => setPriceMSRP(e.target.value)}\n                  placeholder=\"0.00\"\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-8 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                />\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Shopify Price</label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={priceShopify}\n                  onChange={e => setPriceShopify(e.target.value)}\n                  placeholder=\"Same as MSRP\"\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-8 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                />\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Amazon Price</label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={priceAmazon}\n                  onChange={e => setPriceAmazon(e.target.value)}\n                  placeholder=\"Same as MSRP\"\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-8 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Components Section */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Components *</h3>\n\n          {/* Add Component */}\n          <div className=\"flex gap-2 mb-4\">\n            <div className=\"flex-1 relative\">\n              <i className=\"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\"></i>\n              <input\n                type=\"text\"\n                value={productSearch}\n                onChange={e => {\n                  setProductSearch(e.target.value);\n                  setShowProductDropdown(true);\n                }}\n                onFocus={() => setShowProductDropdown(true)}\n                placeholder=\"Search products by name or SKU...\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n\n              {/* Dropdown */}\n              {showProductDropdown && filteredProducts.length > 0 && (\n                <div className=\"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-48 overflow-auto\">\n                  {filteredProducts.map(product => {\n                    const stock = getProductStock(product.id);\n                    return (\n                      <button\n                        key={product.id}\n                        type=\"button\"\n                        onClick={() => addComponent(product.id)}\n                        className=\"w-full px-4 py-2.5 flex items-center justify-between hover:bg-slate-700/50 text-left\"\n                      >\n                        <div>\n                          <div className=\"text-sm text-white\">{product.name}</div>\n                          <div className=\"text-xs text-slate-400\">SKU: {product.sku}</div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className={`text-sm ${stock > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                            {formatNumber(stock)} available\n                          </div>\n                        </div>\n                      </button>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n            <input\n              type=\"number\"\n              min=\"1\"\n              value={componentQty}\n              onChange={e => setComponentQty(e.target.value)}\n              className=\"w-20 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2.5 text-white text-center focus:outline-none focus:border-emerald-500/50\"\n              placeholder=\"Qty\"\n            />\n          </div>\n\n          {/* Components List */}\n          {components.length > 0 ? (\n            <div className=\"space-y-2 mb-4\">\n              {components.map(comp => {\n                const product = state.products.find(p => p.id === comp.productId);\n                const stock = getProductStock(comp.productId);\n                const canBuild = Math.floor(stock / comp.quantity);\n                const hasInsufficientStock = stock < comp.quantity;\n\n                return (\n                  <div\n                    key={comp.productId}\n                    className={`flex items-center gap-3 p-3 rounded-lg border ${\n                      hasInsufficientStock\n                        ? 'bg-red-500/10 border-red-500/30'\n                        : 'bg-slate-800/50 border-slate-700/50'\n                    }`}\n                  >\n                    <div className=\"w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center\">\n                      <i className=\"fas fa-flask text-emerald-400\"></i>\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"text-sm text-white truncate\">{comp.productName}</div>\n                      <div className=\"text-xs text-slate-400\">\n                        {formatNumber(stock)} available\n                        {hasInsufficientStock && (\n                          <span className=\"text-red-400 ml-2\">\n                            <i className=\"fas fa-exclamation-triangle mr-1\"></i>\n                            Insufficient stock\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => updateComponentQty(comp.productId, comp.quantity - 1)}\n                        className=\"w-8 h-8 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded\"\n                      >\n                        -\n                      </button>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={comp.quantity}\n                        onChange={e => updateComponentQty(comp.productId, parseInt(e.target.value) || 1)}\n                        className=\"w-16 bg-slate-700 border border-slate-600 rounded-lg px-2 py-1.5 text-white text-center text-sm\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => updateComponentQty(comp.productId, comp.quantity + 1)}\n                        className=\"w-8 h-8 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded\"\n                      >\n                        +\n                      </button>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => removeComponent(comp.productId)}\n                      className=\"p-2 text-slate-500 hover:text-red-400\"\n                    >\n                      <i className=\"fas fa-trash\"></i>\n                    </button>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <div className=\"p-6 border-2 border-dashed border-slate-700 rounded-lg text-center text-slate-400 mb-4\">\n              <i className=\"fas fa-cubes text-2xl mb-2\"></i>\n              <p>No components added yet</p>\n              <p className=\"text-xs text-slate-500\">Search for products above to add them</p>\n            </div>\n          )}\n\n          {/* Bundle Metrics */}\n          {components.length > 0 && (\n            <div className=\"grid grid-cols-3 gap-3\">\n              <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3 text-center\">\n                <div className=\"text-xs text-slate-400 mb-1\">Bundle Cost</div>\n                <div className=\"text-lg font-bold text-white\">{formatCurrency(bundleMetrics.cost)}</div>\n              </div>\n              <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3 text-center\">\n                <div className=\"text-xs text-slate-400 mb-1\">Margin</div>\n                <div className={`text-lg font-bold ${bundleMetrics.margin >= 50 ? 'text-emerald-400' : bundleMetrics.margin >= 30 ? 'text-amber-400' : 'text-red-400'}`}>\n                  {bundleMetrics.margin.toFixed(1)}%\n                </div>\n              </div>\n              <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3 text-center\">\n                <div className=\"text-xs text-slate-400 mb-1\">Can Build</div>\n                <div className={`text-lg font-bold ${bundleMetrics.availableQty > 10 ? 'text-emerald-400' : bundleMetrics.availableQty > 0 ? 'text-amber-400' : 'text-red-400'}`}>\n                  {formatNumber(bundleMetrics.availableQty)}\n                </div>\n                {bundleMetrics.limitingComponent && bundleMetrics.availableQty < 10 && (\n                  <div className=\"text-xs text-slate-500 truncate\">\n                    Limited by: {bundleMetrics.limitingComponent}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Assembly Instructions (for physical/fba_kit only) */}\n        {bundleType !== 'virtual' && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Assembly Instructions</h3>\n            <textarea\n              value={assemblyInstructions}\n              onChange={e => setAssemblyInstructions(e.target.value)}\n              rows={3}\n              placeholder=\"Instructions for assembling this bundle...\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default BundleModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4319, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/BundleDetailModal.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Bundle } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { useConfirm } from '@/components/ui/ConfirmDialog';\nimport { formatCurrency, formatNumber } from '@/lib/formatting';\n\ninterface BundleDetailModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  bundle: Bundle | null;\n  onEdit: () => void;\n}\n\nexport function BundleDetailModal({ isOpen, onClose, bundle, onEdit }: BundleDetailModalProps) {\n  const { state, dispatch } = useApp();\n  const { success } = useToast();\n  const confirm = useConfirm();\n\n  // Get total stock for a product\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Calculate bundle metrics\n  const bundleMetrics = useMemo(() => {\n    if (!bundle) return { cost: 0, margin: 0, availableQty: 0, limitingComponent: '' };\n\n    const cost = bundle.components.reduce((sum, c) => {\n      const product = state.products.find(p => p.id === c.productId);\n      return sum + (product?.cost.rolling || 0) * c.quantity;\n    }, 0);\n\n    const margin = bundle.prices.msrp > 0 ? ((bundle.prices.msrp - cost) / bundle.prices.msrp) * 100 : 0;\n\n    // Available quantity = MIN of (component stock / qty needed)\n    const availableQty = bundle.components.length > 0\n      ? Math.min(\n          ...bundle.components.map(c => {\n            const stock = getProductStock(c.productId);\n            return Math.floor(stock / c.quantity);\n          })\n        )\n      : 0;\n\n    // Find limiting component\n    let limitingComponent = '';\n    if (bundle.components.length > 0) {\n      let minAvailable = Infinity;\n      bundle.components.forEach(c => {\n        const stock = getProductStock(c.productId);\n        const canBuild = Math.floor(stock / c.quantity);\n        if (canBuild < minAvailable) {\n          minAvailable = canBuild;\n          limitingComponent = c.productName;\n        }\n      });\n    }\n\n    return { cost, margin, availableQty, limitingComponent };\n  }, [bundle, state.products, state.inventory]);\n\n  // Get bundle type badge\n  const getBundleTypeBadge = (type: Bundle['type']) => {\n    switch (type) {\n      case 'virtual':\n        return (\n          <span className=\"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full border border-blue-500/20\">\n            <i className=\"fas fa-cloud mr-1\"></i>Virtual\n          </span>\n        );\n      case 'physical':\n        return (\n          <span className=\"px-2 py-1 bg-emerald-500/20 text-emerald-400 text-xs rounded-full border border-emerald-500/20\">\n            <i className=\"fas fa-box mr-1\"></i>Physical\n          </span>\n        );\n      case 'fba_kit':\n        return (\n          <span className=\"px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded-full border border-orange-500/20\">\n            <i className=\"fab fa-amazon mr-1\"></i>FBA Kit\n          </span>\n        );\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!bundle) return;\n\n    const confirmed = await confirm({\n      title: 'Delete Bundle',\n      message: `Are you sure you want to delete \"${bundle.name}\"? This action cannot be undone.`,\n      confirmText: 'Delete',\n      cancelText: 'Cancel',\n      destructive: true,\n    });\n\n    if (confirmed) {\n      dispatch({ type: 'DELETE_BUNDLE', payload: bundle.id });\n      success(`Bundle \"${bundle.name}\" deleted`);\n      onClose();\n    }\n  };\n\n  if (!bundle) return null;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={bundle.name}\n      subtitle={`SKU: ${bundle.sku}`}\n      size=\"lg\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={handleDelete}>\n            <i className=\"fas fa-trash mr-2\"></i>\n            Delete\n          </Button>\n          <Button onClick={onEdit}>\n            <i className=\"fas fa-edit mr-2\"></i>\n            Edit Bundle\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Header Info */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            {getBundleTypeBadge(bundle.type)}\n            <span className={`px-2 py-1 text-xs rounded-full ${\n              bundleMetrics.availableQty > 10\n                ? 'bg-emerald-500/10 text-emerald-400'\n                : bundleMetrics.availableQty > 0\n                ? 'bg-amber-500/10 text-amber-400'\n                : 'bg-red-500/10 text-red-400'\n            }`}>\n              {bundleMetrics.availableQty > 10 ? 'In Stock' : bundleMetrics.availableQty > 0 ? 'Limited' : 'Out of Stock'}\n            </span>\n          </div>\n          <div className=\"text-right\">\n            <div className=\"text-xs text-slate-400\">Can Build</div>\n            <div className={`text-2xl font-bold ${\n              bundleMetrics.availableQty > 10 ? 'text-emerald-400' : bundleMetrics.availableQty > 0 ? 'text-amber-400' : 'text-red-400'\n            }`}>\n              {formatNumber(bundleMetrics.availableQty)}\n            </div>\n          </div>\n        </div>\n\n        {/* Description */}\n        {bundle.description && (\n          <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n            <p className=\"text-slate-300 text-sm\">{bundle.description}</p>\n          </div>\n        )}\n\n        {/* Pricing */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Pricing</h3>\n          <div className=\"grid grid-cols-4 gap-3\">\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3\">\n              <div className=\"text-xs text-slate-400 mb-1\">MSRP</div>\n              <div className=\"text-lg font-bold text-white\">{formatCurrency(bundle.prices.msrp)}</div>\n            </div>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3\">\n              <div className=\"text-xs text-slate-400 mb-1\">Shopify</div>\n              <div className=\"text-lg font-bold text-white\">{formatCurrency(bundle.prices.shopify)}</div>\n            </div>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3\">\n              <div className=\"text-xs text-slate-400 mb-1\">Amazon</div>\n              <div className=\"text-lg font-bold text-white\">{formatCurrency(bundle.prices.amazon)}</div>\n            </div>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3\">\n              <div className=\"text-xs text-slate-400 mb-1\">Wholesale</div>\n              <div className=\"text-lg font-bold text-white\">{formatCurrency(bundle.prices.wholesale)}</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Cost Breakdown */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Cost & Margin</h3>\n          <div className=\"grid grid-cols-3 gap-3\">\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4 text-center\">\n              <div className=\"text-xs text-slate-400 mb-1\">Component Cost</div>\n              <div className=\"text-xl font-bold text-white\">{formatCurrency(bundleMetrics.cost)}</div>\n            </div>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4 text-center\">\n              <div className=\"text-xs text-slate-400 mb-1\">Profit per Bundle</div>\n              <div className=\"text-xl font-bold text-emerald-400\">{formatCurrency(bundle.prices.msrp - bundleMetrics.cost)}</div>\n            </div>\n            <div className=\"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4 text-center\">\n              <div className=\"text-xs text-slate-400 mb-1\">Margin</div>\n              <div className=\"text-xl font-bold text-emerald-400\">{bundleMetrics.margin.toFixed(1)}%</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Components */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Components ({bundle.components.length})</h3>\n          <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg overflow-hidden\">\n            <table className=\"w-full\">\n              <thead className=\"bg-slate-800/50\">\n                <tr className=\"text-left text-xs text-slate-400 uppercase\">\n                  <th className=\"px-4 py-3 font-medium\">Product</th>\n                  <th className=\"px-4 py-3 font-medium text-center\">Qty per Bundle</th>\n                  <th className=\"px-4 py-3 font-medium text-right\">Available Stock</th>\n                  <th className=\"px-4 py-3 font-medium text-right\">Unit Cost</th>\n                  <th className=\"px-4 py-3 font-medium text-right\">Line Total</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-slate-700/50\">\n                {bundle.components.map(comp => {\n                  const product = state.products.find(p => p.id === comp.productId);\n                  const stock = getProductStock(comp.productId);\n                  const unitCost = product?.cost.rolling || 0;\n                  const lineTotal = unitCost * comp.quantity;\n                  const hasInsufficientStock = stock < comp.quantity;\n\n                  return (\n                    <tr key={comp.productId} className=\"hover:bg-slate-700/30\">\n                      <td className=\"px-4 py-3\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className={`w-2 h-2 rounded-full ${hasInsufficientStock ? 'bg-red-400' : 'bg-emerald-400'}`}></div>\n                          <div>\n                            <div className=\"text-sm text-white\">{comp.productName}</div>\n                            <div className=\"text-xs text-slate-400\">{product?.sku || 'Unknown SKU'}</div>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-4 py-3 text-center text-white\">\n                        x {comp.quantity}\n                      </td>\n                      <td className=\"px-4 py-3 text-right\">\n                        <span className={hasInsufficientStock ? 'text-red-400' : 'text-slate-300'}>\n                          {formatNumber(stock)}\n                          {hasInsufficientStock && (\n                            <i className=\"fas fa-exclamation-triangle ml-1 text-xs\"></i>\n                          )}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-3 text-right text-slate-400\">\n                        {formatCurrency(unitCost)}\n                      </td>\n                      <td className=\"px-4 py-3 text-right text-white\">\n                        {formatCurrency(lineTotal)}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n              <tfoot className=\"bg-slate-800/30 border-t border-slate-700\">\n                <tr>\n                  <td colSpan={4} className=\"px-4 py-3 text-right text-sm font-medium text-slate-400\">\n                    Total Component Cost:\n                  </td>\n                  <td className=\"px-4 py-3 text-right text-lg font-bold text-white\">\n                    {formatCurrency(bundleMetrics.cost)}\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>\n\n          {/* Limiting Component Warning */}\n          {bundleMetrics.availableQty < 10 && bundleMetrics.limitingComponent && (\n            <div className=\"mt-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg\">\n              <div className=\"flex items-center gap-2 text-amber-400 text-sm\">\n                <i className=\"fas fa-exclamation-triangle\"></i>\n                <span>Limiting component: <strong>{bundleMetrics.limitingComponent}</strong></span>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Assembly Instructions */}\n        {bundle.type !== 'virtual' && bundle.assemblyInstructions && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Assembly Instructions</h3>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n              <p className=\"text-slate-300 text-sm whitespace-pre-wrap\">{bundle.assemblyInstructions}</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default BundleDetailModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5171, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/CreateOrderModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Order, OrderItem } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatNumber } from '@/lib/formatting';\n\ninterface CreateOrderModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ninterface OrderItemDraft {\n  productId: string;\n  productName: string;\n  sku: string;\n  quantity: number;\n  price: number;\n  cost: number;\n}\n\nconst COUNTRIES = [\n  'USA',\n  'Canada',\n  'United Kingdom',\n  'Australia',\n  'Germany',\n  'France',\n  'Japan',\n];\n\nexport function CreateOrderModal({ isOpen, onClose }: CreateOrderModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error, warning } = useToast();\n\n  // Customer info\n  const [customerName, setCustomerName] = useState('');\n  const [customerEmail, setCustomerEmail] = useState('');\n  const [customerPhone, setCustomerPhone] = useState('');\n\n  // Address\n  const [street, setStreet] = useState('');\n  const [city, setCity] = useState('');\n  const [addressState, setAddressState] = useState('');\n  const [zip, setZip] = useState('');\n  const [country, setCountry] = useState('USA');\n\n  // Order items\n  const [items, setItems] = useState<OrderItemDraft[]>([]);\n\n  // Totals\n  const [shipping, setShipping] = useState('0');\n  const [tax, setTax] = useState('0');\n  const [discount, setDiscount] = useState('0');\n\n  // Notes\n  const [notes, setNotes] = useState('');\n\n  // Product search\n  const [productSearch, setProductSearch] = useState('');\n  const [showProductDropdown, setShowProductDropdown] = useState(false);\n  const [itemQty, setItemQty] = useState('1');\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      setCustomerName('');\n      setCustomerEmail('');\n      setCustomerPhone('');\n      setStreet('');\n      setCity('');\n      setAddressState('');\n      setZip('');\n      setCountry('USA');\n      setItems([]);\n      setShipping('0');\n      setTax('0');\n      setDiscount('0');\n      setNotes('');\n      setProductSearch('');\n      setItemQty('1');\n    }\n  }, [isOpen]);\n\n  // Get total stock for a product\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Filter products for search\n  const filteredProducts = useMemo(() => {\n    if (!productSearch.trim()) return [];\n    const search = productSearch.toLowerCase();\n    return state.products\n      .filter(p =>\n        (p.name.toLowerCase().includes(search) || p.sku.toLowerCase().includes(search)) &&\n        !items.some(i => i.productId === p.id)\n      )\n      .slice(0, 8);\n  }, [productSearch, state.products, items]);\n\n  // Calculate totals\n  const orderTotals = useMemo(() => {\n    const subtotal = items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    const cogs = items.reduce((sum, item) => sum + item.cost * item.quantity, 0);\n    const shippingVal = parseFloat(shipping) || 0;\n    const taxVal = parseFloat(tax) || 0;\n    const discountVal = parseFloat(discount) || 0;\n    const total = subtotal + shippingVal + taxVal - discountVal;\n    const profit = total - cogs - shippingVal;\n    const margin = total > 0 ? (profit / total) * 100 : 0;\n\n    return { subtotal, cogs, total, profit, margin };\n  }, [items, shipping, tax, discount]);\n\n  // Add item to order\n  const addItem = (productId: string) => {\n    const product = state.products.find(p => p.id === productId);\n    if (!product) return;\n\n    const qty = parseInt(itemQty) || 1;\n    setItems(prev => [\n      ...prev,\n      {\n        productId: product.id,\n        productName: product.name,\n        sku: product.sku,\n        quantity: qty,\n        price: product.prices.msrp,\n        cost: product.cost.rolling,\n      }\n    ]);\n    setProductSearch('');\n    setItemQty('1');\n    setShowProductDropdown(false);\n  };\n\n  // Remove item\n  const removeItem = (productId: string) => {\n    setItems(prev => prev.filter(i => i.productId !== productId));\n  };\n\n  // Update item quantity\n  const updateItemQty = (productId: string, qty: number) => {\n    if (qty < 1) return;\n    setItems(prev => prev.map(i =>\n      i.productId === productId ? { ...i, quantity: qty } : i\n    ));\n  };\n\n  // Update item price\n  const updateItemPrice = (productId: string, price: number) => {\n    if (price < 0) return;\n    setItems(prev => prev.map(i =>\n      i.productId === productId ? { ...i, price } : i\n    ));\n  };\n\n  // Generate order number\n  const generateOrderNumber = () => {\n    const manualOrders = state.orders.filter(o => o.channel === 'manual').length;\n    return `MAN-${(manualOrders + 1).toString().padStart(4, '0')}`;\n  };\n\n  // Validate email\n  const isValidEmail = (email: string) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n  };\n\n  // Validation\n  const isValid = useMemo(() => {\n    if (!customerName.trim()) return false;\n    if (!customerEmail.trim() || !isValidEmail(customerEmail)) return false;\n    if (!street.trim()) return false;\n    if (!city.trim()) return false;\n    if (!addressState.trim()) return false;\n    if (!zip.trim()) return false;\n    if (!country) return false;\n    if (items.length === 0) return false;\n    return true;\n  }, [customerName, customerEmail, street, city, addressState, zip, country, items]);\n\n  // Submit handler\n  const handleSubmit = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const orderNumber = generateOrderNumber();\n      const shippingVal = parseFloat(shipping) || 0;\n      const taxVal = parseFloat(tax) || 0;\n      const discountVal = parseFloat(discount) || 0;\n\n      const newOrder: Order = {\n        id: crypto.randomUUID(),\n        orderNumber,\n        channel: 'manual',\n        status: 'to_pick',\n        customer: {\n          name: customerName.trim(),\n          email: customerEmail.trim(),\n          phone: customerPhone.trim() || undefined,\n          address: {\n            street: street.trim(),\n            city: city.trim(),\n            state: addressState.trim(),\n            zip: zip.trim(),\n            country,\n          },\n        },\n        items: items.map(item => ({\n          productId: item.productId,\n          productName: item.productName,\n          sku: item.sku,\n          quantity: item.quantity,\n          price: item.price,\n          cost: item.cost,\n          picked: false,\n        })),\n        subtotal: orderTotals.subtotal,\n        shipping: shippingVal,\n        tax: taxVal,\n        discount: discountVal,\n        total: orderTotals.total,\n        cogs: orderTotals.cogs,\n        profit: orderTotals.profit,\n        margin: orderTotals.margin,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      };\n\n      dispatch({ type: 'ADD_ORDER', payload: newOrder });\n      success(`Order ${orderNumber} created successfully`);\n      onClose();\n    } catch (err) {\n      error('Failed to create order. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title=\"Create Manual Order\"\n      subtitle=\"Add a new order manually\"\n      size=\"lg\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? (\n              <>\n                <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                Creating...\n              </>\n            ) : (\n              <>\n                <i className=\"fas fa-plus mr-2\"></i>\n                Create Order\n              </>\n            )}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Customer Information */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Customer Information</h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Name *</label>\n              <input\n                type=\"text\"\n                value={customerName}\n                onChange={e => setCustomerName(e.target.value)}\n                placeholder=\"John Doe\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Email *</label>\n              <input\n                type=\"email\"\n                value={customerEmail}\n                onChange={e => setCustomerEmail(e.target.value)}\n                placeholder=\"john@example.com\"\n                className={`w-full bg-slate-800 border rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none ${\n                  customerEmail && !isValidEmail(customerEmail)\n                    ? 'border-red-500/50'\n                    : 'border-slate-700 focus:border-emerald-500/50'\n                }`}\n              />\n              {customerEmail && !isValidEmail(customerEmail) && (\n                <p className=\"text-xs text-red-400 mt-1\">Invalid email format</p>\n              )}\n            </div>\n            <div className=\"col-span-2\">\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Phone (Optional)</label>\n              <input\n                type=\"tel\"\n                value={customerPhone}\n                onChange={e => setCustomerPhone(e.target.value)}\n                placeholder=\"+1 (555) 123-4567\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Shipping Address */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Shipping Address</h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"col-span-2\">\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Street Address *</label>\n              <input\n                type=\"text\"\n                value={street}\n                onChange={e => setStreet(e.target.value)}\n                placeholder=\"123 Main Street\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">City *</label>\n              <input\n                type=\"text\"\n                value={city}\n                onChange={e => setCity(e.target.value)}\n                placeholder=\"New York\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">State *</label>\n              <input\n                type=\"text\"\n                value={addressState}\n                onChange={e => setAddressState(e.target.value)}\n                placeholder=\"NY\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">ZIP Code *</label>\n              <input\n                type=\"text\"\n                value={zip}\n                onChange={e => setZip(e.target.value)}\n                placeholder=\"10001\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Country *</label>\n              <select\n                value={country}\n                onChange={e => setCountry(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              >\n                {COUNTRIES.map(c => (\n                  <option key={c} value={c}>{c}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Order Items */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Order Items *</h3>\n\n          {/* Add Item */}\n          <div className=\"flex gap-2 mb-4\">\n            <div className=\"flex-1 relative\">\n              <i className=\"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\"></i>\n              <input\n                type=\"text\"\n                value={productSearch}\n                onChange={e => {\n                  setProductSearch(e.target.value);\n                  setShowProductDropdown(true);\n                }}\n                onFocus={() => setShowProductDropdown(true)}\n                placeholder=\"Search products...\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n\n              {/* Dropdown */}\n              {showProductDropdown && filteredProducts.length > 0 && (\n                <div className=\"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-48 overflow-auto\">\n                  {filteredProducts.map(product => {\n                    const stock = getProductStock(product.id);\n                    return (\n                      <button\n                        key={product.id}\n                        type=\"button\"\n                        onClick={() => addItem(product.id)}\n                        className=\"w-full px-4 py-2.5 flex items-center justify-between hover:bg-slate-700/50 text-left\"\n                      >\n                        <div>\n                          <div className=\"text-sm text-white\">{product.name}</div>\n                          <div className=\"text-xs text-slate-400\">\n                            {product.sku} - {formatCurrency(product.prices.msrp)}\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className={`text-sm ${stock > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                            {formatNumber(stock)} in stock\n                          </div>\n                        </div>\n                      </button>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n            <input\n              type=\"number\"\n              min=\"1\"\n              value={itemQty}\n              onChange={e => setItemQty(e.target.value)}\n              className=\"w-20 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2.5 text-white text-center focus:outline-none focus:border-emerald-500/50\"\n              placeholder=\"Qty\"\n            />\n          </div>\n\n          {/* Items List */}\n          {items.length > 0 ? (\n            <div className=\"space-y-2 mb-4\">\n              {items.map(item => {\n                const stock = getProductStock(item.productId);\n                const hasInsufficientStock = stock < item.quantity;\n\n                return (\n                  <div\n                    key={item.productId}\n                    className={`flex items-center gap-3 p-3 rounded-lg border ${\n                      hasInsufficientStock\n                        ? 'bg-red-500/10 border-red-500/30'\n                        : 'bg-slate-800/50 border-slate-700/50'\n                    }`}\n                  >\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"text-sm text-white truncate\">{item.productName}</div>\n                      <div className=\"text-xs text-slate-400\">\n                        {item.sku} - {formatNumber(stock)} available\n                        {hasInsufficientStock && (\n                          <span className=\"text-red-400 ml-2\">\n                            <i className=\"fas fa-exclamation-triangle mr-1\"></i>\n                            Low stock\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={item.quantity}\n                        onChange={e => updateItemQty(item.productId, parseInt(e.target.value) || 1)}\n                        className=\"w-16 bg-slate-700 border border-slate-600 rounded-lg px-2 py-1.5 text-white text-center text-sm\"\n                      />\n                      <span className=\"text-slate-400\">x</span>\n                      <div className=\"relative\">\n                        <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-sm\">$</span>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          min=\"0\"\n                          value={item.price}\n                          onChange={e => updateItemPrice(item.productId, parseFloat(e.target.value) || 0)}\n                          className=\"w-24 bg-slate-700 border border-slate-600 rounded-lg pl-6 pr-2 py-1.5 text-white text-sm\"\n                        />\n                      </div>\n                      <span className=\"text-white font-medium w-20 text-right\">\n                        {formatCurrency(item.price * item.quantity)}\n                      </span>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => removeItem(item.productId)}\n                      className=\"p-2 text-slate-500 hover:text-red-400\"\n                    >\n                      <i className=\"fas fa-trash\"></i>\n                    </button>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <div className=\"p-6 border-2 border-dashed border-slate-700 rounded-lg text-center text-slate-400 mb-4\">\n              <i className=\"fas fa-shopping-cart text-2xl mb-2\"></i>\n              <p>No items added yet</p>\n              <p className=\"text-xs text-slate-500\">Search for products above to add them</p>\n            </div>\n          )}\n        </div>\n\n        {/* Order Totals */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Order Totals</h3>\n          <div className=\"grid grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Shipping</label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={shipping}\n                  onChange={e => setShipping(e.target.value)}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-8 pr-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n                />\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Tax</label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={tax}\n                  onChange={e => setTax(e.target.value)}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-8 pr-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n                />\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Discount</label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={discount}\n                  onChange={e => setDiscount(e.target.value)}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-8 pr-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Summary */}\n          <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-slate-400\">Subtotal</span>\n                <span className=\"text-white\">{formatCurrency(orderTotals.subtotal)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-slate-400\">Shipping</span>\n                <span className=\"text-white\">{formatCurrency(parseFloat(shipping) || 0)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-slate-400\">Tax</span>\n                <span className=\"text-white\">{formatCurrency(parseFloat(tax) || 0)}</span>\n              </div>\n              {parseFloat(discount) > 0 && (\n                <div className=\"flex justify-between\">\n                  <span className=\"text-slate-400\">Discount</span>\n                  <span className=\"text-emerald-400\">-{formatCurrency(parseFloat(discount))}</span>\n                </div>\n              )}\n              <div className=\"flex justify-between pt-2 border-t border-slate-700\">\n                <span className=\"font-medium text-white\">Total</span>\n                <span className=\"font-bold text-white text-lg\">{formatCurrency(orderTotals.total)}</span>\n              </div>\n            </div>\n\n            {/* Profit Preview */}\n            {items.length > 0 && (\n              <div className=\"mt-4 pt-4 border-t border-slate-700 grid grid-cols-3 gap-3 text-center\">\n                <div>\n                  <div className=\"text-xs text-slate-400\">COGS</div>\n                  <div className=\"text-sm text-white\">{formatCurrency(orderTotals.cogs)}</div>\n                </div>\n                <div>\n                  <div className=\"text-xs text-slate-400\">Profit</div>\n                  <div className={`text-sm ${orderTotals.profit >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                    {formatCurrency(orderTotals.profit)}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-xs text-slate-400\">Margin</div>\n                  <div className={`text-sm ${orderTotals.margin >= 30 ? 'text-emerald-400' : orderTotals.margin >= 15 ? 'text-amber-400' : 'text-red-400'}`}>\n                    {orderTotals.margin.toFixed(1)}%\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Notes */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Internal Notes (Optional)</label>\n          <textarea\n            value={notes}\n            onChange={e => setNotes(e.target.value)}\n            rows={2}\n            placeholder=\"Any special instructions or notes...\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default CreateOrderModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6526, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/EditOrderModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Order, OrderItem } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency } from '@/lib/formatting';\n\ninterface EditOrderModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  order: Order;\n}\n\ninterface OrderItemDraft {\n  productId: string;\n  productName: string;\n  sku: string;\n  quantity: number;\n  price: number;\n  cost: number;\n}\n\nconst US_STATES = [\n  'AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA',\n  'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD',\n  'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ',\n  'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC',\n  'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'\n];\n\nconst COUNTRIES = ['US', 'CA', 'MX', 'UK', 'AU'];\n\nexport function EditOrderModal({ isOpen, onClose, order }: EditOrderModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Tab state\n  const [activeTab, setActiveTab] = useState<'customer' | 'shipping' | 'billing' | 'items' | 'notes'>('customer');\n\n  // Customer info\n  const [customerName, setCustomerName] = useState('');\n  const [customerEmail, setCustomerEmail] = useState('');\n  const [customerPhone, setCustomerPhone] = useState('');\n\n  // Shipping Address\n  const [shippingStreet, setShippingStreet] = useState('');\n  const [shippingCity, setShippingCity] = useState('');\n  const [shippingState, setShippingState] = useState('');\n  const [shippingZip, setShippingZip] = useState('');\n  const [shippingCountry, setShippingCountry] = useState('US');\n\n  // Billing Address\n  const [sameAsShipping, setSameAsShipping] = useState(true);\n  const [billingStreet, setBillingStreet] = useState('');\n  const [billingCity, setBillingCity] = useState('');\n  const [billingState, setBillingState] = useState('');\n  const [billingZip, setBillingZip] = useState('');\n  const [billingCountry, setBillingCountry] = useState('US');\n\n  // Order items\n  const [items, setItems] = useState<OrderItemDraft[]>([]);\n\n  // Totals\n  const [shipping, setShipping] = useState('0');\n  const [tax, setTax] = useState('0');\n  const [discount, setDiscount] = useState('0');\n\n  // Notes\n  const [notes, setNotes] = useState('');\n\n  // Initialize form with order data\n  useEffect(() => {\n    if (isOpen && order) {\n      setCustomerName(order.customer.name);\n      setCustomerEmail(order.customer.email);\n      setCustomerPhone(order.customer.phone || '');\n\n      setShippingStreet(order.customer.address.street);\n      setShippingCity(order.customer.address.city);\n      setShippingState(order.customer.address.state);\n      setShippingZip(order.customer.address.zip);\n      setShippingCountry(order.customer.address.country);\n\n      if (order.billingAddress) {\n        setSameAsShipping(false);\n        setBillingStreet(order.billingAddress.street);\n        setBillingCity(order.billingAddress.city);\n        setBillingState(order.billingAddress.state);\n        setBillingZip(order.billingAddress.zip);\n        setBillingCountry(order.billingAddress.country);\n      } else {\n        setSameAsShipping(true);\n      }\n\n      setItems(order.items.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        quantity: item.quantity,\n        price: item.price,\n        cost: item.cost,\n      })));\n\n      setShipping(order.shipping.toString());\n      setTax(order.tax.toString());\n      setDiscount(order.discount.toString());\n      setNotes(order.notes || '');\n    }\n  }, [isOpen, order]);\n\n  // Calculate totals\n  const subtotal = useMemo(() => {\n    return items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  }, [items]);\n\n  const cogs = useMemo(() => {\n    return items.reduce((sum, item) => sum + item.cost * item.quantity, 0);\n  }, [items]);\n\n  const total = useMemo(() => {\n    return subtotal + parseFloat(shipping || '0') + parseFloat(tax || '0') - parseFloat(discount || '0');\n  }, [subtotal, shipping, tax, discount]);\n\n  const profit = total - cogs;\n  const margin = total > 0 ? (profit / total) * 100 : 0;\n\n  // Update item quantity\n  const updateItemQuantity = (index: number, quantity: number) => {\n    setItems(prev => prev.map((item, i) =>\n      i === index ? { ...item, quantity: Math.max(1, quantity) } : item\n    ));\n  };\n\n  // Update item price\n  const updateItemPrice = (index: number, price: number) => {\n    setItems(prev => prev.map((item, i) =>\n      i === index ? { ...item, price: Math.max(0, price) } : item\n    ));\n  };\n\n  // Remove item\n  const removeItem = (index: number) => {\n    if (items.length <= 1) {\n      error('Order must have at least one item');\n      return;\n    }\n    setItems(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Add product to order\n  const addProduct = (productId: string) => {\n    const product = state.products.find(p => p.id === productId);\n    if (!product) return;\n\n    // Check if already in order\n    const existingIndex = items.findIndex(i => i.productId === productId);\n    if (existingIndex >= 0) {\n      updateItemQuantity(existingIndex, items[existingIndex].quantity + 1);\n      return;\n    }\n\n    setItems(prev => [...prev, {\n      productId: product.id,\n      productName: product.name,\n      sku: product.sku,\n      quantity: 1,\n      price: product.prices.shopify,\n      cost: product.cost.rolling,\n    }]);\n  };\n\n  // Handle save\n  const handleSave = () => {\n    if (!customerName.trim()) {\n      error('Customer name is required');\n      return;\n    }\n    if (!customerEmail.trim()) {\n      error('Customer email is required');\n      return;\n    }\n    if (items.length === 0) {\n      error('Order must have at least one item');\n      return;\n    }\n\n    const updatedOrder: Order = {\n      ...order,\n      customer: {\n        name: customerName,\n        email: customerEmail,\n        phone: customerPhone || undefined,\n        address: {\n          street: shippingStreet,\n          city: shippingCity,\n          state: shippingState,\n          zip: shippingZip,\n          country: shippingCountry,\n        },\n      },\n      billingAddress: sameAsShipping ? undefined : {\n        street: billingStreet,\n        city: billingCity,\n        state: billingState,\n        zip: billingZip,\n        country: billingCountry,\n      },\n      items: items.map(item => ({\n        ...item,\n        picked: order.items.find(i => i.productId === item.productId)?.picked || false,\n      })),\n      subtotal,\n      shipping: parseFloat(shipping || '0'),\n      tax: parseFloat(tax || '0'),\n      discount: parseFloat(discount || '0'),\n      total,\n      cogs,\n      profit,\n      margin,\n      notes: notes || undefined,\n      updatedAt: new Date(),\n    };\n\n    dispatch({ type: 'UPDATE_ORDER', payload: updatedOrder });\n    success('Order updated successfully');\n    onClose();\n  };\n\n  const tabs = [\n    { id: 'customer', label: 'Customer', icon: 'fa-user' },\n    { id: 'shipping', label: 'Shipping', icon: 'fa-truck' },\n    { id: 'billing', label: 'Billing', icon: 'fa-credit-card' },\n    { id: 'items', label: 'Items', icon: 'fa-box' },\n    { id: 'notes', label: 'Notes', icon: 'fa-sticky-note' },\n  ] as const;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={`Edit Order #${order.orderNumber}`}\n      size=\"xl\"\n    >\n      <div className=\"flex flex-col h-[600px]\">\n        {/* Tabs */}\n        <div className=\"flex border-b border-slate-700 mb-4\">\n          {tabs.map(tab => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`px-4 py-2 text-sm font-medium transition-colors flex items-center gap-2 ${\n                activeTab === tab.id\n                  ? 'text-emerald-400 border-b-2 border-emerald-400'\n                  : 'text-slate-400 hover:text-white'\n              }`}\n            >\n              <i className={`fas ${tab.icon}`}></i>\n              {tab.label}\n            </button>\n          ))}\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {/* Customer Tab */}\n          {activeTab === 'customer' && (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm text-slate-400 mb-1\">Customer Name *</label>\n                <input\n                  type=\"text\"\n                  value={customerName}\n                  onChange={(e) => setCustomerName(e.target.value)}\n                  className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                  placeholder=\"John Doe\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Email *</label>\n                  <input\n                    type=\"email\"\n                    value={customerEmail}\n                    onChange={(e) => setCustomerEmail(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    placeholder=\"john@example.com\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Phone</label>\n                  <input\n                    type=\"tel\"\n                    value={customerPhone}\n                    onChange={(e) => setCustomerPhone(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    placeholder=\"+1 555-0123\"\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Shipping Tab */}\n          {activeTab === 'shipping' && (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm text-slate-400 mb-1\">Street Address *</label>\n                <input\n                  type=\"text\"\n                  value={shippingStreet}\n                  onChange={(e) => setShippingStreet(e.target.value)}\n                  className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                  placeholder=\"123 Main St\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">City *</label>\n                  <input\n                    type=\"text\"\n                    value={shippingCity}\n                    onChange={(e) => setShippingCity(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    placeholder=\"Houston\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">State *</label>\n                  <select\n                    value={shippingState}\n                    onChange={(e) => setShippingState(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                  >\n                    <option value=\"\">Select state</option>\n                    {US_STATES.map(s => (\n                      <option key={s} value={s}>{s}</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">ZIP Code *</label>\n                  <input\n                    type=\"text\"\n                    value={shippingZip}\n                    onChange={(e) => setShippingZip(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    placeholder=\"77001\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Country</label>\n                  <select\n                    value={shippingCountry}\n                    onChange={(e) => setShippingCountry(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                  >\n                    {COUNTRIES.map(c => (\n                      <option key={c} value={c}>{c}</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-4 pt-4 border-t border-slate-700\">\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Shipping Cost</label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2 text-slate-400\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      value={shipping}\n                      onChange={(e) => setShipping(e.target.value)}\n                      className=\"w-full pl-7 pr-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Billing Tab */}\n          {activeTab === 'billing' && (\n            <div className=\"space-y-4\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={sameAsShipping}\n                  onChange={(e) => setSameAsShipping(e.target.checked)}\n                  className=\"rounded bg-slate-700 border-slate-600 text-emerald-500 focus:ring-emerald-500\"\n                />\n                <span className=\"text-slate-300\">Same as shipping address</span>\n              </label>\n\n              {!sameAsShipping && (\n                <>\n                  <div>\n                    <label className=\"block text-sm text-slate-400 mb-1\">Street Address</label>\n                    <input\n                      type=\"text\"\n                      value={billingStreet}\n                      onChange={(e) => setBillingStreet(e.target.value)}\n                      className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    />\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm text-slate-400 mb-1\">City</label>\n                      <input\n                        type=\"text\"\n                        value={billingCity}\n                        onChange={(e) => setBillingCity(e.target.value)}\n                        className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm text-slate-400 mb-1\">State</label>\n                      <select\n                        value={billingState}\n                        onChange={(e) => setBillingState(e.target.value)}\n                        className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                      >\n                        <option value=\"\">Select state</option>\n                        {US_STATES.map(s => (\n                          <option key={s} value={s}>{s}</option>\n                        ))}\n                      </select>\n                    </div>\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm text-slate-400 mb-1\">ZIP Code</label>\n                      <input\n                        type=\"text\"\n                        value={billingZip}\n                        onChange={(e) => setBillingZip(e.target.value)}\n                        className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm text-slate-400 mb-1\">Country</label>\n                      <select\n                        value={billingCountry}\n                        onChange={(e) => setBillingCountry(e.target.value)}\n                        className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                      >\n                        {COUNTRIES.map(c => (\n                          <option key={c} value={c}>{c}</option>\n                        ))}\n                      </select>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          )}\n\n          {/* Items Tab */}\n          {activeTab === 'items' && (\n            <div className=\"space-y-4\">\n              {/* Add Product */}\n              <div>\n                <label className=\"block text-sm text-slate-400 mb-1\">Add Product</label>\n                <select\n                  onChange={(e) => {\n                    if (e.target.value) {\n                      addProduct(e.target.value);\n                      e.target.value = '';\n                    }\n                  }}\n                  className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                >\n                  <option value=\"\">Select product to add...</option>\n                  {state.products.map(p => (\n                    <option key={p.id} value={p.id}>{p.name} ({p.sku})</option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Items List */}\n              <div className=\"space-y-2\">\n                {items.map((item, index) => (\n                  <div key={index} className=\"flex items-center gap-3 p-3 bg-slate-800/50 border border-slate-700 rounded-lg\">\n                    <div className=\"flex-1\">\n                      <div className=\"text-sm font-medium text-white\">{item.productName}</div>\n                      <div className=\"text-xs text-slate-400\">{item.sku}</div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <label className=\"text-xs text-slate-400\">Qty:</label>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={item.quantity}\n                        onChange={(e) => updateItemQuantity(index, parseInt(e.target.value) || 1)}\n                        className=\"w-16 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm text-center\"\n                      />\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <label className=\"text-xs text-slate-400\">Price:</label>\n                      <div className=\"relative\">\n                        <span className=\"absolute left-2 top-1 text-slate-400 text-sm\">$</span>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          min=\"0\"\n                          value={item.price}\n                          onChange={(e) => updateItemPrice(index, parseFloat(e.target.value) || 0)}\n                          className=\"w-20 pl-5 pr-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm text-right\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"text-sm font-medium text-white w-20 text-right\">\n                      {formatCurrency(item.price * item.quantity)}\n                    </div>\n                    <button\n                      onClick={() => removeItem(index)}\n                      className=\"p-1 text-slate-400 hover:text-red-400\"\n                    >\n                      <i className=\"fas fa-trash text-sm\"></i>\n                    </button>\n                  </div>\n                ))}\n              </div>\n\n              {/* Totals */}\n              <div className=\"pt-4 border-t border-slate-700 space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-slate-400\">Subtotal</span>\n                  <span className=\"text-white\">{formatCurrency(subtotal)}</span>\n                </div>\n                <div className=\"flex justify-between text-sm items-center\">\n                  <span className=\"text-slate-400\">Tax</span>\n                  <div className=\"relative w-24\">\n                    <span className=\"absolute left-2 top-1 text-slate-400 text-sm\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      value={tax}\n                      onChange={(e) => setTax(e.target.value)}\n                      className=\"w-full pl-5 pr-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm text-right\"\n                    />\n                  </div>\n                </div>\n                <div className=\"flex justify-between text-sm items-center\">\n                  <span className=\"text-slate-400\">Discount</span>\n                  <div className=\"relative w-24\">\n                    <span className=\"absolute left-2 top-1 text-slate-400 text-sm\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      value={discount}\n                      onChange={(e) => setDiscount(e.target.value)}\n                      className=\"w-full pl-5 pr-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm text-right\"\n                    />\n                  </div>\n                </div>\n                <div className=\"flex justify-between text-lg font-bold pt-2 border-t border-slate-600\">\n                  <span className=\"text-white\">Total</span>\n                  <span className=\"text-white\">{formatCurrency(total)}</span>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Notes Tab */}\n          {activeTab === 'notes' && (\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1\">Order Notes</label>\n              <textarea\n                value={notes}\n                onChange={(e) => setNotes(e.target.value)}\n                rows={6}\n                className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500 resize-none\"\n                placeholder=\"Internal notes about this order...\"\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex justify-end gap-3 pt-4 border-t border-slate-700 mt-4\">\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave}>\n            <i className=\"fas fa-save mr-2\"></i>\n            Save Changes\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default EditOrderModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7866, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/CreatePOModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, PurchaseOrder, PurchaseOrderItem } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatCurrencyPrecise, formatNumber } from '@/lib/formatting';\nimport { Search, Plus, Trash2, Package } from 'lucide-react';\n\ninterface CreatePOModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editPO?: PurchaseOrder | null;\n  initialItems?: PurchaseOrderItem[];\n}\n\nexport function CreatePOModal({ isOpen, onClose, editPO, initialItems }: CreatePOModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [poNumber, setPoNumber] = useState('');\n  const [supplier, setSupplier] = useState('');\n  const [currency, setCurrency] = useState<'USD' | 'CAD'>('USD');\n  const [expectedDate, setExpectedDate] = useState('');\n  const [notes, setNotes] = useState('');\n  const [shippingCost, setShippingCost] = useState('0');\n  const [lineItems, setLineItems] = useState<PurchaseOrderItem[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Product search state\n  const [productSearch, setProductSearch] = useState('');\n  const [showProductDropdown, setShowProductDropdown] = useState(false);\n  const [supplierSearch, setSupplierSearch] = useState('');\n  const [showSupplierDropdown, setShowSupplierDropdown] = useState(false);\n\n  const isEditing = !!editPO;\n\n  // Generate PO number\n  const generatePONumber = () => {\n    const count = state.purchaseOrders.length + 1;\n    return `PO-${new Date().getFullYear()}-${count.toString().padStart(4, '0')}`;\n  };\n\n  // Get unique suppliers from existing POs\n  const existingSuppliers = useMemo(() => {\n    const suppliers = new Set<string>();\n    state.purchaseOrders.forEach(po => {\n      if (po.supplier) suppliers.add(po.supplier);\n    });\n    // Add from products default vendors\n    state.products.forEach(p => {\n      if (p.supplier) suppliers.add(p.supplier);\n    });\n    return Array.from(suppliers).sort();\n  }, [state.purchaseOrders, state.products]);\n\n  // Filter suppliers for autocomplete\n  const filteredSuppliers = useMemo(() => {\n    if (!supplierSearch.trim()) return existingSuppliers.slice(0, 5);\n    const search = supplierSearch.toLowerCase();\n    return existingSuppliers.filter(s => s.toLowerCase().includes(search)).slice(0, 5);\n  }, [supplierSearch, existingSuppliers]);\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editPO) {\n        setPoNumber(editPO.poNumber);\n        setSupplier(editPO.supplier);\n        setCurrency(editPO.currency);\n        setExpectedDate(editPO.expectedDate ? new Date(editPO.expectedDate).toISOString().split('T')[0] : '');\n        setNotes(editPO.notes || '');\n        setShippingCost(editPO.shipping.toString());\n        setLineItems([...editPO.items]);\n      } else {\n        setPoNumber(generatePONumber());\n        setSupplier('');\n        setCurrency('USD');\n        setExpectedDate('');\n        setNotes('');\n        setShippingCost('0');\n        setLineItems(initialItems || []);\n      }\n      setProductSearch('');\n      setSupplierSearch('');\n    }\n  }, [isOpen, editPO, initialItems]);\n\n  // Get product stock\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Filter products for search\n  const filteredProducts = useMemo(() => {\n    if (!productSearch.trim()) return [];\n    const search = productSearch.toLowerCase();\n    return state.products\n      .filter(p =>\n        (p.name.toLowerCase().includes(search) || p.sku.toLowerCase().includes(search)) &&\n        !lineItems.some(item => item.productId === p.id)\n      )\n      .slice(0, 8);\n  }, [productSearch, state.products, lineItems]);\n\n  // Calculate totals\n  const totals = useMemo(() => {\n    const subtotal = lineItems.reduce((sum, item) => sum + (item.quantity * item.unitCost), 0);\n    const shipping = parseFloat(shippingCost) || 0;\n    return {\n      subtotal,\n      shipping,\n      total: subtotal + shipping,\n      itemCount: lineItems.length,\n      unitCount: lineItems.reduce((sum, item) => sum + item.quantity, 0),\n    };\n  }, [lineItems, shippingCost]);\n\n  // Add line item\n  const addLineItem = (productId: string) => {\n    const product = state.products.find(p => p.id === productId);\n    if (!product) return;\n\n    setLineItems(prev => [\n      ...prev,\n      {\n        productId: product.id,\n        productName: product.name,\n        sku: product.sku,\n        quantity: 1,\n        receivedQty: 0,\n        unitCost: product.cost.rolling,\n      }\n    ]);\n    setProductSearch('');\n    setShowProductDropdown(false);\n  };\n\n  // Remove line item\n  const removeLineItem = (productId: string) => {\n    setLineItems(prev => prev.filter(item => item.productId !== productId));\n  };\n\n  // Update line item\n  const updateLineItem = (productId: string, field: 'quantity' | 'unitCost', value: number) => {\n    if (value < 0) return;\n    setLineItems(prev => prev.map(item =>\n      item.productId === productId ? { ...item, [field]: value } : item\n    ));\n  };\n\n  // Validation\n  const isValid = useMemo(() => {\n    if (!poNumber.trim()) return false;\n    if (!supplier.trim()) return false;\n    if (lineItems.length === 0) return false;\n    if (lineItems.some(item => item.quantity <= 0 || item.unitCost < 0)) return false;\n    return true;\n  }, [poNumber, supplier, lineItems]);\n\n  // Save as draft\n  const handleSaveDraft = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const poData: PurchaseOrder = {\n        id: editPO?.id || crypto.randomUUID(),\n        poNumber: poNumber.trim(),\n        supplier: supplier.trim(),\n        status: 'draft',\n        currency,\n        expectedDate: expectedDate ? new Date(expectedDate) : undefined,\n        items: lineItems,\n        subtotal: totals.subtotal,\n        shipping: totals.shipping,\n        total: totals.total,\n        notes: notes.trim() || undefined,\n        createdAt: editPO?.createdAt || new Date(),\n        updatedAt: new Date(),\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_PURCHASE_ORDER', payload: poData });\n        success(`PO ${poNumber} updated successfully`);\n      } else {\n        dispatch({ type: 'ADD_PURCHASE_ORDER', payload: poData });\n        success(`PO ${poNumber} saved as draft`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save purchase order');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Save and send\n  const handleSaveAndSend = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const poData: PurchaseOrder = {\n        id: editPO?.id || crypto.randomUUID(),\n        poNumber: poNumber.trim(),\n        supplier: supplier.trim(),\n        status: 'sent',\n        currency,\n        expectedDate: expectedDate ? new Date(expectedDate) : undefined,\n        items: lineItems,\n        subtotal: totals.subtotal,\n        shipping: totals.shipping,\n        total: totals.total,\n        notes: notes.trim() || undefined,\n        createdAt: editPO?.createdAt || new Date(),\n        updatedAt: new Date(),\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_PURCHASE_ORDER', payload: poData });\n      } else {\n        dispatch({ type: 'ADD_PURCHASE_ORDER', payload: poData });\n      }\n      success(`PO ${poNumber} created and marked as sent`);\n\n      onClose();\n    } catch (err) {\n      error('Failed to create purchase order');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Purchase Order' : 'Create Purchase Order'}\n      subtitle={isEditing ? `Editing ${editPO?.poNumber}` : 'Order inventory from suppliers'}\n      size=\"xl\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button variant=\"secondary\" onClick={handleSaveDraft} disabled={isSubmitting || !isValid}>\n            Save as Draft\n          </Button>\n          <Button onClick={handleSaveAndSend} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Create & Send'}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* PO Header */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">PO Details</h3>\n          <div className=\"grid grid-cols-4 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">PO Number *</label>\n              <input\n                type=\"text\"\n                value={poNumber}\n                onChange={e => setPoNumber(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white font-mono focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div className=\"relative\">\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Supplier *</label>\n              <input\n                type=\"text\"\n                value={supplier}\n                onChange={e => {\n                  setSupplier(e.target.value);\n                  setSupplierSearch(e.target.value);\n                  setShowSupplierDropdown(true);\n                }}\n                onFocus={() => setShowSupplierDropdown(true)}\n                onBlur={() => setTimeout(() => setShowSupplierDropdown(false), 200)}\n                placeholder=\"Enter supplier name\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n              {showSupplierDropdown && filteredSuppliers.length > 0 && (\n                <div className=\"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-40 overflow-auto\">\n                  {filteredSuppliers.map(s => (\n                    <button\n                      key={s}\n                      type=\"button\"\n                      onClick={() => {\n                        setSupplier(s);\n                        setShowSupplierDropdown(false);\n                      }}\n                      className=\"w-full px-4 py-2 text-left text-sm text-white hover:bg-slate-700/50\"\n                    >\n                      {s}\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Currency</label>\n              <select\n                value={currency}\n                onChange={e => setCurrency(e.target.value as 'USD' | 'CAD')}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              >\n                <option value=\"USD\">USD ($)</option>\n                <option value=\"CAD\">CAD (C$)</option>\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Expected Date</label>\n              <input\n                type=\"date\"\n                value={expectedDate}\n                onChange={e => setExpectedDate(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Line Items */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Line Items *</h3>\n\n          {/* Add Product */}\n          <div className=\"relative mb-4\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n            <input\n              type=\"text\"\n              value={productSearch}\n              onChange={e => {\n                setProductSearch(e.target.value);\n                setShowProductDropdown(true);\n              }}\n              onFocus={() => setShowProductDropdown(true)}\n              placeholder=\"Search products by name or SKU...\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n            />\n\n            {showProductDropdown && filteredProducts.length > 0 && (\n              <div className=\"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-48 overflow-auto\">\n                {filteredProducts.map(product => {\n                  const stock = getProductStock(product.id);\n                  return (\n                    <button\n                      key={product.id}\n                      type=\"button\"\n                      onClick={() => addLineItem(product.id)}\n                      className=\"w-full px-4 py-2.5 flex items-center justify-between hover:bg-slate-700/50 text-left\"\n                    >\n                      <div>\n                        <div className=\"text-sm text-white\">{product.name}</div>\n                        <div className=\"text-xs text-slate-400\">SKU: {product.sku}</div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-sm text-slate-300\">{formatCurrencyPrecise(product.cost.rolling)}</div>\n                        <div className={`text-xs ${stock <= product.reorderPoint ? 'text-amber-400' : 'text-slate-400'}`}>\n                          {formatNumber(stock)} in stock\n                        </div>\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n\n          {/* Line Items Table */}\n          {lineItems.length > 0 ? (\n            <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-slate-800/50\">\n                  <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                    <th className=\"px-4 py-3 text-left\">Product</th>\n                    <th className=\"px-4 py-3 text-left\">SKU</th>\n                    <th className=\"px-4 py-3 text-center\">Qty</th>\n                    <th className=\"px-4 py-3 text-right\">Unit Cost</th>\n                    <th className=\"px-4 py-3 text-right\">Line Total</th>\n                    <th className=\"px-4 py-3 text-center w-12\"></th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/50\">\n                  {lineItems.map(item => (\n                    <tr key={item.productId} className=\"hover:bg-slate-800/30\">\n                      <td className=\"px-4 py-3 text-sm text-white\">{item.productName}</td>\n                      <td className=\"px-4 py-3 text-sm text-slate-400 font-mono\">{item.sku}</td>\n                      <td className=\"px-4 py-3\">\n                        <input\n                          type=\"number\"\n                          min=\"1\"\n                          value={item.quantity}\n                          onChange={e => updateLineItem(item.productId, 'quantity', parseInt(e.target.value) || 0)}\n                          className=\"w-20 mx-auto block bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-center text-sm\"\n                        />\n                      </td>\n                      <td className=\"px-4 py-3\">\n                        <div className=\"flex items-center justify-end gap-1\">\n                          <span className=\"text-slate-400 text-sm\">$</span>\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            min=\"0\"\n                            value={item.unitCost}\n                            onChange={e => updateLineItem(item.productId, 'unitCost', parseFloat(e.target.value) || 0)}\n                            className=\"w-24 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-right text-sm\"\n                          />\n                        </div>\n                      </td>\n                      <td className=\"px-4 py-3 text-sm text-white text-right font-medium\">\n                        {formatCurrencyPrecise(item.quantity * item.unitCost)}\n                      </td>\n                      <td className=\"px-4 py-3 text-center\">\n                        <button\n                          onClick={() => removeLineItem(item.productId)}\n                          className=\"p-1.5 text-slate-400 hover:text-red-400 hover:bg-slate-700 rounded\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"p-8 border-2 border-dashed border-slate-700 rounded-lg text-center text-slate-400\">\n              <Package className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n              <p>No items added yet</p>\n              <p className=\"text-xs text-slate-500\">Search for products above to add them</p>\n            </div>\n          )}\n        </div>\n\n        {/* Totals */}\n        {lineItems.length > 0 && (\n          <div className=\"flex justify-end\">\n            <div className=\"w-72 space-y-2 bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-slate-400\">Items:</span>\n                <span className=\"text-white\">{totals.itemCount} ({formatNumber(totals.unitCount)} units)</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-slate-400\">Subtotal:</span>\n                <span className=\"text-white\">{formatCurrencyPrecise(totals.subtotal)}</span>\n              </div>\n              <div className=\"flex justify-between items-center text-sm\">\n                <span className=\"text-slate-400\">Shipping:</span>\n                <div className=\"flex items-center gap-1\">\n                  <span className=\"text-slate-400\">$</span>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    value={shippingCost}\n                    onChange={e => setShippingCost(e.target.value)}\n                    className=\"w-24 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-right text-sm\"\n                  />\n                </div>\n              </div>\n              <div className=\"pt-2 border-t border-slate-700 flex justify-between\">\n                <span className=\"text-white font-medium\">Total:</span>\n                <span className=\"text-white font-bold text-lg\">{formatCurrencyPrecise(totals.total)}</span>\n              </div>\n              {currency === 'CAD' && (\n                <div className=\"text-xs text-slate-500 text-right\">\n                  CAD values will be converted at current exchange rate\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Notes */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Notes (Optional)</label>\n          <textarea\n            value={notes}\n            onChange={e => setNotes(e.target.value)}\n            rows={2}\n            placeholder=\"Optional notes for this PO...\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default CreatePOModal;\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;AARA;;;;;;;;AAiBO,SAAS,cAAc,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,YAAY,EAAsB;;IACzF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,mIAAM;IAClC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,IAAA,yIAAQ;IAEnC,aAAa;IACb,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgB;IACxD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAsB,EAAE;IAClE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,uBAAuB;IACvB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC/D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IACrD,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,yKAAQ,EAAC;IAEjE,MAAM,YAAY,CAAC,CAAC;IAEpB,qBAAqB;IACrB,MAAM,mBAAmB;QACvB,MAAM,QAAQ,MAAM,cAAc,CAAC,MAAM,GAAG;QAC5C,OAAO,CAAC,GAAG,EAAE,IAAI,OAAO,WAAW,GAAG,CAAC,EAAE,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IAC9E;IAEA,yCAAyC;IACzC,MAAM,oBAAoB,IAAA,wKAAO;oDAAC;YAChC,MAAM,YAAY,IAAI;YACtB,MAAM,cAAc,CAAC,OAAO;4DAAC,CAAA;oBAC3B,IAAI,GAAG,QAAQ,EAAE,UAAU,GAAG,CAAC,GAAG,QAAQ;gBAC5C;;YACA,oCAAoC;YACpC,MAAM,QAAQ,CAAC,OAAO;4DAAC,CAAA;oBACrB,IAAI,EAAE,QAAQ,EAAE,UAAU,GAAG,CAAC,EAAE,QAAQ;gBAC1C;;YACA,OAAO,MAAM,IAAI,CAAC,WAAW,IAAI;QACnC;mDAAG;QAAC,MAAM,cAAc;QAAE,MAAM,QAAQ;KAAC;IAEzC,oCAAoC;IACpC,MAAM,oBAAoB,IAAA,wKAAO;oDAAC;YAChC,IAAI,CAAC,eAAe,IAAI,IAAI,OAAO,kBAAkB,KAAK,CAAC,GAAG;YAC9D,MAAM,SAAS,eAAe,WAAW;YACzC,OAAO,kBAAkB,MAAM;4DAAC,CAAA,IAAK,EAAE,WAAW,GAAG,QAAQ,CAAC;2DAAS,KAAK,CAAC,GAAG;QAClF;mDAAG;QAAC;QAAgB;KAAkB;IAEtC,8BAA8B;IAC9B,IAAA,0KAAS;mCAAC;YACR,IAAI,QAAQ;gBACV,IAAI,QAAQ;oBACV,YAAY,OAAO,QAAQ;oBAC3B,YAAY,OAAO,QAAQ;oBAC3B,YAAY,OAAO,QAAQ;oBAC3B,gBAAgB,OAAO,YAAY,GAAG,IAAI,KAAK,OAAO,YAAY,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG;oBAClG,SAAS,OAAO,KAAK,IAAI;oBACzB,gBAAgB,OAAO,QAAQ,CAAC,QAAQ;oBACxC,aAAa;2BAAI,OAAO,KAAK;qBAAC;gBAChC,OAAO;oBACL,YAAY;oBACZ,YAAY;oBACZ,YAAY;oBACZ,gBAAgB;oBAChB,SAAS;oBACT,gBAAgB;oBAChB,aAAa,gBAAgB,EAAE;gBACjC;gBACA,iBAAiB;gBACjB,kBAAkB;YACpB;QACF;kCAAG;QAAC;QAAQ;QAAQ;KAAa;IAEjC,oBAAoB;IACpB,MAAM,kBAAkB,CAAC;QACvB,OAAO,MAAM,SAAS,CACnB,MAAM,CAAC,CAAA,IAAK,EAAE,SAAS,KAAK,WAC5B,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE;IAC1C;IAEA,6BAA6B;IAC7B,MAAM,mBAAmB,IAAA,wKAAO;mDAAC;YAC/B,IAAI,CAAC,cAAc,IAAI,IAAI,OAAO,EAAE;YACpC,MAAM,SAAS,cAAc,WAAW;YACxC,OAAO,MAAM,QAAQ,CAClB,MAAM;2DAAC,CAAA,IACN,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,EAAE,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,KAC9E,CAAC,UAAU,IAAI;mEAAC,CAAA,OAAQ,KAAK,SAAS,KAAK,EAAE,EAAE;;0DAEhD,KAAK,CAAC,GAAG;QACd;kDAAG;QAAC;QAAe,MAAM,QAAQ;QAAE;KAAU;IAE7C,mBAAmB;IACnB,MAAM,SAAS,IAAA,wKAAO;yCAAC;YACrB,MAAM,WAAW,UAAU,MAAM;0DAAC,CAAC,KAAK,OAAS,MAAO,KAAK,QAAQ,GAAG,KAAK,QAAQ;yDAAG;YACxF,MAAM,WAAW,WAAW,iBAAiB;YAC7C,OAAO;gBACL;gBACA;gBACA,OAAO,WAAW;gBAClB,WAAW,UAAU,MAAM;gBAC3B,WAAW,UAAU,MAAM;qDAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ;oDAAE;YAClE;QACF;wCAAG;QAAC;QAAW;KAAa;IAE5B,gBAAgB;IAChB,MAAM,cAAc,CAAC;QACnB,MAAM,UAAU,MAAM,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAClD,IAAI,CAAC,SAAS;QAEd,aAAa,CAAA,OAAQ;mBAChB;gBACH;oBACE,WAAW,QAAQ,EAAE;oBACrB,aAAa,QAAQ,IAAI;oBACzB,KAAK,QAAQ,GAAG;oBAChB,UAAU;oBACV,aAAa;oBACb,UAAU,QAAQ,IAAI,CAAC,OAAO;gBAChC;aACD;QACD,iBAAiB;QACjB,uBAAuB;IACzB;IAEA,mBAAmB;IACnB,MAAM,iBAAiB,CAAC;QACtB,aAAa,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,OAAQ,KAAK,SAAS,KAAK;IAC9D;IAEA,mBAAmB;IACnB,MAAM,iBAAiB,CAAC,WAAmB,OAAgC;QACzE,IAAI,QAAQ,GAAG;QACf,aAAa,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,OAC5B,KAAK,SAAS,KAAK,YAAY;oBAAE,GAAG,IAAI;oBAAE,CAAC,MAAM,EAAE;gBAAM,IAAI;IAEjE;IAEA,aAAa;IACb,MAAM,UAAU,IAAA,wKAAO;0CAAC;YACtB,IAAI,CAAC,SAAS,IAAI,IAAI,OAAO;YAC7B,IAAI,CAAC,SAAS,IAAI,IAAI,OAAO;YAC7B,IAAI,UAAU,MAAM,KAAK,GAAG,OAAO;YACnC,IAAI,UAAU,IAAI;kDAAC,CAAA,OAAQ,KAAK,QAAQ,IAAI,KAAK,KAAK,QAAQ,GAAG;kDAAI,OAAO;YAC5E,OAAO;QACT;yCAAG;QAAC;QAAU;QAAU;KAAU;IAElC,gBAAgB;IAChB,MAAM,kBAAkB;QACtB,IAAI,CAAC,SAAS;QAEd,gBAAgB;QAEhB,IAAI;YACF,MAAM,SAAwB;gBAC5B,IAAI,QAAQ,MAAM,OAAO,UAAU;gBACnC,UAAU,SAAS,IAAI;gBACvB,UAAU,SAAS,IAAI;gBACvB,QAAQ;gBACR;gBACA,cAAc,eAAe,IAAI,KAAK,gBAAgB;gBACtD,OAAO;gBACP,UAAU,OAAO,QAAQ;gBACzB,UAAU,OAAO,QAAQ;gBACzB,OAAO,OAAO,KAAK;gBACnB,OAAO,MAAM,IAAI,MAAM;gBACvB,WAAW,QAAQ,aAAa,IAAI;gBACpC,WAAW,IAAI;YACjB;YAEA,IAAI,WAAW;gBACb,SAAS;oBAAE,MAAM;oBAAyB,SAAS;gBAAO;gBAC1D,QAAQ,CAAC,GAAG,EAAE,SAAS,qBAAqB,CAAC;YAC/C,OAAO;gBACL,SAAS;oBAAE,MAAM;oBAAsB,SAAS;gBAAO;gBACvD,QAAQ,CAAC,GAAG,EAAE,SAAS,eAAe,CAAC;YACzC;YAEA;QACF,EAAE,OAAO,KAAK;YACZ,MAAM;QACR,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,gBAAgB;IAChB,MAAM,oBAAoB;QACxB,IAAI,CAAC,SAAS;QAEd,gBAAgB;QAEhB,IAAI;YACF,MAAM,SAAwB;gBAC5B,IAAI,QAAQ,MAAM,OAAO,UAAU;gBACnC,UAAU,SAAS,IAAI;gBACvB,UAAU,SAAS,IAAI;gBACvB,QAAQ;gBACR;gBACA,cAAc,eAAe,IAAI,KAAK,gBAAgB;gBACtD,OAAO;gBACP,UAAU,OAAO,QAAQ;gBACzB,UAAU,OAAO,QAAQ;gBACzB,OAAO,OAAO,KAAK;gBACnB,OAAO,MAAM,IAAI,MAAM;gBACvB,WAAW,QAAQ,aAAa,IAAI;gBACpC,WAAW,IAAI;YACjB;YAEA,IAAI,WAAW;gBACb,SAAS;oBAAE,MAAM;oBAAyB,SAAS;gBAAO;YAC5D,OAAO;gBACL,SAAS;oBAAE,MAAM;oBAAsB,SAAS;gBAAO;YACzD;YACA,QAAQ,CAAC,GAAG,EAAE,SAAS,2BAA2B,CAAC;YAEnD;QACF,EAAE,OAAO,KAAK;YACZ,MAAM;QACR,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,6LAAC,sIAAK;QACJ,MAAM;QACN,SAAS;QACT,OAAO,YAAY,wBAAwB;QAC3C,UAAU,YAAY,CAAC,QAAQ,EAAE,QAAQ,UAAU,GAAG;QACtD,MAAK;QACL,sBACE;;8BACE,6LAAC,wIAAM;oBAAC,SAAQ;oBAAY,SAAS;8BAAS;;;;;;8BAG9C,6LAAC,wIAAM;oBAAC,SAAQ;oBAAY,SAAS;oBAAiB,UAAU,gBAAgB,CAAC;8BAAS;;;;;;8BAG1F,6LAAC,wIAAM;oBAAC,SAAS;oBAAmB,UAAU,gBAAgB,CAAC;8BAC5D,eAAe,cAAc,YAAY,iBAAiB;;;;;;;;kBAKjE,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;;sCACC,6LAAC;4BAAG,WAAU;sCAAsC;;;;;;sCACpD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAsC;;;;;;sDACvD,6LAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAA,IAAK,YAAY,EAAE,MAAM,CAAC,KAAK;4CACzC,WAAU;;;;;;;;;;;;8CAGd,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAM,WAAU;sDAAsC;;;;;;sDACvD,6LAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAA;gDACR,YAAY,EAAE,MAAM,CAAC,KAAK;gDAC1B,kBAAkB,EAAE,MAAM,CAAC,KAAK;gDAChC,wBAAwB;4CAC1B;4CACA,SAAS,IAAM,wBAAwB;4CACvC,QAAQ,IAAM,WAAW,IAAM,wBAAwB,QAAQ;4CAC/D,aAAY;4CACZ,WAAU;;;;;;wCAEX,wBAAwB,kBAAkB,MAAM,GAAG,mBAClD,6LAAC;4CAAI,WAAU;sDACZ,kBAAkB,GAAG,CAAC,CAAA,kBACrB,6LAAC;oDAEC,MAAK;oDACL,SAAS;wDACP,YAAY;wDACZ,wBAAwB;oDAC1B;oDACA,WAAU;8DAET;mDARI;;;;;;;;;;;;;;;;8CAcf,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAsC;;;;;;sDACvD,6LAAC;4CACC,OAAO;4CACP,UAAU,CAAA,IAAK,YAAY,EAAE,MAAM,CAAC,KAAK;4CACzC,WAAU;;8DAEV,6LAAC;oDAAO,OAAM;8DAAM;;;;;;8DACpB,6LAAC;oDAAO,OAAM;8DAAM;;;;;;;;;;;;;;;;;;8CAGxB,6LAAC;;sDACC,6LAAC;4CAAM,WAAU;sDAAsC;;;;;;sDACvD,6LAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAA,IAAK,gBAAgB,EAAE,MAAM,CAAC,KAAK;4CAC7C,WAAU;;;;;;;;;;;;;;;;;;;;;;;;8BAOlB,6LAAC;;sCACC,6LAAC;4BAAG,WAAU;sCAAsC;;;;;;sCAGpD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,mNAAM;oCAAC,WAAU;;;;;;8CAClB,6LAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAA;wCACR,iBAAiB,EAAE,MAAM,CAAC,KAAK;wCAC/B,uBAAuB;oCACzB;oCACA,SAAS,IAAM,uBAAuB;oCACtC,aAAY;oCACZ,WAAU;;;;;;gCAGX,uBAAuB,iBAAiB,MAAM,GAAG,mBAChD,6LAAC;oCAAI,WAAU;8CACZ,iBAAiB,GAAG,CAAC,CAAA;wCACpB,MAAM,QAAQ,gBAAgB,QAAQ,EAAE;wCACxC,qBACE,6LAAC;4CAEC,MAAK;4CACL,SAAS,IAAM,YAAY,QAAQ,EAAE;4CACrC,WAAU;;8DAEV,6LAAC;;sEACC,6LAAC;4DAAI,WAAU;sEAAsB,QAAQ,IAAI;;;;;;sEACjD,6LAAC;4DAAI,WAAU;;gEAAyB;gEAAM,QAAQ,GAAG;;;;;;;;;;;;;8DAE3D,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAI,WAAU;sEAA0B,IAAA,6IAAqB,EAAC,QAAQ,IAAI,CAAC,OAAO;;;;;;sEACnF,6LAAC;4DAAI,WAAW,CAAC,QAAQ,EAAE,SAAS,QAAQ,YAAY,GAAG,mBAAmB,kBAAkB;;gEAC7F,IAAA,oIAAY,EAAC;gEAAO;;;;;;;;;;;;;;2CAZpB,QAAQ,EAAE;;;;;oCAiBrB;;;;;;;;;;;;wBAML,UAAU,MAAM,GAAG,kBAClB,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAM,WAAU;;kDACf,6LAAC;wCAAM,WAAU;kDACf,cAAA,6LAAC;4CAAG,WAAU;;8DACZ,6LAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,6LAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,6LAAC;oDAAG,WAAU;8DAAwB;;;;;;8DACtC,6LAAC;oDAAG,WAAU;8DAAuB;;;;;;8DACrC,6LAAC;oDAAG,WAAU;8DAAuB;;;;;;8DACrC,6LAAC;oDAAG,WAAU;;;;;;;;;;;;;;;;;kDAGlB,6LAAC;wCAAM,WAAU;kDACd,UAAU,GAAG,CAAC,CAAA,qBACb,6LAAC;gDAAwB,WAAU;;kEACjC,6LAAC;wDAAG,WAAU;kEAAgC,KAAK,WAAW;;;;;;kEAC9D,6LAAC;wDAAG,WAAU;kEAA8C,KAAK,GAAG;;;;;;kEACpE,6LAAC;wDAAG,WAAU;kEACZ,cAAA,6LAAC;4DACC,MAAK;4DACL,KAAI;4DACJ,OAAO,KAAK,QAAQ;4DACpB,UAAU,CAAA,IAAK,eAAe,KAAK,SAAS,EAAE,YAAY,SAAS,EAAE,MAAM,CAAC,KAAK,KAAK;4DACtF,WAAU;;;;;;;;;;;kEAGd,6LAAC;wDAAG,WAAU;kEACZ,cAAA,6LAAC;4DAAI,WAAU;;8EACb,6LAAC;oEAAK,WAAU;8EAAyB;;;;;;8EACzC,6LAAC;oEACC,MAAK;oEACL,MAAK;oEACL,KAAI;oEACJ,OAAO,KAAK,QAAQ;oEACpB,UAAU,CAAA,IAAK,eAAe,KAAK,SAAS,EAAE,YAAY,WAAW,EAAE,MAAM,CAAC,KAAK,KAAK;oEACxF,WAAU;;;;;;;;;;;;;;;;;kEAIhB,6LAAC;wDAAG,WAAU;kEACX,IAAA,6IAAqB,EAAC,KAAK,QAAQ,GAAG,KAAK,QAAQ;;;;;;kEAEtD,6LAAC;wDAAG,WAAU;kEACZ,cAAA,6LAAC;4DACC,SAAS,IAAM,eAAe,KAAK,SAAS;4DAC5C,WAAU;sEAEV,cAAA,6LAAC,uNAAM;gEAAC,WAAU;;;;;;;;;;;;;;;;;+CAjCf,KAAK,SAAS;;;;;;;;;;;;;;;;;;;;iDA0C/B,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,sNAAO;oCAAC,WAAU;;;;;;8CACnB,6LAAC;8CAAE;;;;;;8CACH,6LAAC;oCAAE,WAAU;8CAAyB;;;;;;;;;;;;;;;;;;gBAM3C,UAAU,MAAM,GAAG,mBAClB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAiB;;;;;;kDACjC,6LAAC;wCAAK,WAAU;;4CAAc,OAAO,SAAS;4CAAC;4CAAG,IAAA,oIAAY,EAAC,OAAO,SAAS;4CAAE;;;;;;;;;;;;;0CAEnF,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAiB;;;;;;kDACjC,6LAAC;wCAAK,WAAU;kDAAc,IAAA,6IAAqB,EAAC,OAAO,QAAQ;;;;;;;;;;;;0CAErE,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAiB;;;;;;kDACjC,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAK,WAAU;0DAAiB;;;;;;0DACjC,6LAAC;gDACC,MAAK;gDACL,MAAK;gDACL,KAAI;gDACJ,OAAO;gDACP,UAAU,CAAA,IAAK,gBAAgB,EAAE,MAAM,CAAC,KAAK;gDAC7C,WAAU;;;;;;;;;;;;;;;;;;0CAIhB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAyB;;;;;;kDACzC,6LAAC;wCAAK,WAAU;kDAAgC,IAAA,6IAAqB,EAAC,OAAO,KAAK;;;;;;;;;;;;4BAEnF,aAAa,uBACZ,6LAAC;gCAAI,WAAU;0CAAoC;;;;;;;;;;;;;;;;;8BAS3D,6LAAC;;sCACC,6LAAC;4BAAM,WAAU;sCAAsC;;;;;;sCACvD,6LAAC;4BACC,OAAO;4BACP,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;4BACtC,MAAM;4BACN,aAAY;4BACZ,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAMtB;GAjegB;;QACc,mIAAM;QACP,yIAAQ;;;KAFrB;uCAmeD"}},
    {"offset": {"line": 8917, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/ReceivePOModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, PurchaseOrder, PurchaseOrderItem } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatCurrencyPrecise, formatNumber, formatDate } from '@/lib/formatting';\nimport { Package, Check, AlertTriangle } from 'lucide-react';\n\ninterface ReceivePOModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  po: PurchaseOrder | null;\n}\n\ntype ItemCondition = 'good' | 'damaged' | 'wrong_item' | 'short';\n\ninterface ReceivingItem {\n  productId: string;\n  productName: string;\n  sku: string;\n  ordered: number;\n  previouslyReceived: number;\n  receivingNow: number;\n  condition: ItemCondition;\n}\n\nexport function ReceivePOModal({ isOpen, onClose, po }: ReceivePOModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error, warning } = useToast();\n\n  // Form state\n  const [receivingItems, setReceivingItems] = useState<ReceivingItem[]>([]);\n  const [receivingNotes, setReceivingNotes] = useState('');\n  const [receiveLocation, setReceiveLocation] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Initialize receiving items when modal opens\n  useEffect(() => {\n    if (isOpen && po) {\n      setReceivingItems(po.items.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        ordered: item.quantity,\n        previouslyReceived: item.receivedQty,\n        receivingNow: item.quantity - item.receivedQty, // Default to remaining\n        condition: 'good' as ItemCondition,\n      })));\n      setReceivingNotes('');\n      // Set default location\n      const defaultLoc = state.locations.find(l => l.isDefault);\n      setReceiveLocation(defaultLoc?.id || state.locations[0]?.id || '');\n    }\n  }, [isOpen, po, state.locations]);\n\n  // Update receiving quantity\n  const updateReceivingQty = (productId: string, qty: number) => {\n    setReceivingItems(prev => prev.map(item => {\n      if (item.productId === productId) {\n        const maxReceivable = item.ordered - item.previouslyReceived;\n        const clampedQty = Math.max(0, Math.min(qty, maxReceivable));\n        return { ...item, receivingNow: clampedQty };\n      }\n      return item;\n    }));\n  };\n\n  // Update condition\n  const updateCondition = (productId: string, condition: ItemCondition) => {\n    setReceivingItems(prev => prev.map(item =>\n      item.productId === productId ? { ...item, condition } : item\n    ));\n  };\n\n  // Receive all remaining\n  const receiveAllRemaining = () => {\n    setReceivingItems(prev => prev.map(item => ({\n      ...item,\n      receivingNow: item.ordered - item.previouslyReceived,\n      condition: 'good',\n    })));\n  };\n\n  // Calculate totals\n  const totals = useMemo(() => {\n    const totalOrdered = receivingItems.reduce((sum, i) => sum + i.ordered, 0);\n    const totalPreviouslyReceived = receivingItems.reduce((sum, i) => sum + i.previouslyReceived, 0);\n    const totalReceivingNow = receivingItems.reduce((sum, i) => sum + i.receivingNow, 0);\n    const totalAfter = totalPreviouslyReceived + totalReceivingNow;\n\n    return {\n      totalOrdered,\n      totalPreviouslyReceived,\n      totalReceivingNow,\n      totalAfter,\n      percentComplete: totalOrdered > 0 ? (totalAfter / totalOrdered) * 100 : 0,\n      willBeFullyReceived: totalAfter >= totalOrdered,\n    };\n  }, [receivingItems]);\n\n  // Check if any items have issues\n  const hasIssues = useMemo(() => {\n    return receivingItems.some(item => item.condition !== 'good' && item.receivingNow > 0);\n  }, [receivingItems]);\n\n  // Submit receive\n  const handleReceive = () => {\n    if (!po || totals.totalReceivingNow <= 0) return;\n\n    setIsSubmitting(true);\n\n    try {\n      // Update PO items with new received quantities\n      const updatedItems: PurchaseOrderItem[] = po.items.map(item => {\n        const receiving = receivingItems.find(r => r.productId === item.productId);\n        return {\n          ...item,\n          receivedQty: item.receivedQty + (receiving?.receivingNow || 0),\n        };\n      });\n\n      // Check if fully received\n      const fullyReceived = updatedItems.every(item => item.receivedQty >= item.quantity);\n\n      // Determine new status\n      let newStatus: PurchaseOrder['status'] = po.status;\n      if (fullyReceived) {\n        newStatus = 'received';\n      } else if (updatedItems.some(item => item.receivedQty > 0)) {\n        newStatus = 'partial';\n      }\n\n      // Update PO\n      const updatedPO: PurchaseOrder = {\n        ...po,\n        items: updatedItems,\n        status: newStatus,\n        updatedAt: new Date(),\n      };\n\n      dispatch({ type: 'UPDATE_PURCHASE_ORDER', payload: updatedPO });\n\n      // Update inventory for each received item\n      receivingItems.forEach(item => {\n        if (item.receivingNow > 0 && item.condition === 'good') {\n          dispatch({\n            type: 'ADJUST_STOCK',\n            payload: {\n              productId: item.productId,\n              locationId: receiveLocation,\n              adjustment: item.receivingNow,\n            }\n          });\n        }\n      });\n\n      // Show appropriate message\n      if (hasIssues) {\n        warning(`Received ${formatNumber(totals.totalReceivingNow)} units with some issues noted`);\n      } else if (fullyReceived) {\n        success(`PO ${po.poNumber} fully received! ${formatNumber(totals.totalReceivingNow)} units added to inventory`);\n      } else {\n        success(`Received ${formatNumber(totals.totalReceivingNow)} units on PO ${po.poNumber}`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to receive items');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!po) return null;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title=\"Receive Items\"\n      subtitle={`${po.poNumber} from ${po.supplier}`}\n      size=\"xl\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleReceive}\n            disabled={isSubmitting || totals.totalReceivingNow <= 0}\n          >\n            {isSubmitting ? (\n              'Processing...'\n            ) : (\n              <>\n                <Check className=\"w-4 h-4\" />\n                Receive {formatNumber(totals.totalReceivingNow)} Units\n              </>\n            )}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* PO Summary */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <div className=\"grid grid-cols-4 gap-4 text-sm\">\n            <div>\n              <span className=\"text-slate-400\">PO Number:</span>\n              <span className=\"ml-2 text-white font-mono\">{po.poNumber}</span>\n            </div>\n            <div>\n              <span className=\"text-slate-400\">Supplier:</span>\n              <span className=\"ml-2 text-white\">{po.supplier}</span>\n            </div>\n            <div>\n              <span className=\"text-slate-400\">Expected:</span>\n              <span className=\"ml-2 text-white\">\n                {po.expectedDate ? formatDate(po.expectedDate) : 'Not set'}\n              </span>\n            </div>\n            <div>\n              <span className=\"text-slate-400\">Total Value:</span>\n              <span className=\"ml-2 text-white font-medium\">{formatCurrencyPrecise(po.total)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Progress */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm text-slate-400\">Receiving Progress</span>\n            <span className=\"text-sm text-white\">\n              {formatNumber(totals.totalAfter)} / {formatNumber(totals.totalOrdered)} units\n              ({totals.percentComplete.toFixed(0)}%)\n            </span>\n          </div>\n          <div className=\"w-full bg-slate-700 rounded-full h-2\">\n            <div\n              className={`h-2 rounded-full transition-all ${\n                totals.willBeFullyReceived ? 'bg-emerald-500' : 'bg-blue-500'\n              }`}\n              style={{ width: `${Math.min(totals.percentComplete, 100)}%` }}\n            />\n          </div>\n          {totals.willBeFullyReceived && (\n            <p className=\"text-xs text-emerald-400 mt-2\">\n              <Check className=\"w-3 h-3 inline mr-1\" />\n              This will complete the PO\n            </p>\n          )}\n        </div>\n\n        {/* Receive Location */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Receive to Location</label>\n          <select\n            value={receiveLocation}\n            onChange={e => setReceiveLocation(e.target.value)}\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n          >\n            {state.locations.map(loc => (\n              <option key={loc.id} value={loc.id}>{loc.name}</option>\n            ))}\n          </select>\n        </div>\n\n        {/* Line Items */}\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-sm font-medium text-white\">Items to Receive</h3>\n            <button\n              onClick={receiveAllRemaining}\n              className=\"text-sm text-emerald-400 hover:text-emerald-300\"\n            >\n              Receive All Remaining\n            </button>\n          </div>\n\n          <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n            <table className=\"w-full\">\n              <thead className=\"bg-slate-800/50\">\n                <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                  <th className=\"px-4 py-3 text-left\">Product</th>\n                  <th className=\"px-4 py-3 text-center\">Ordered</th>\n                  <th className=\"px-4 py-3 text-center\">Previously Received</th>\n                  <th className=\"px-4 py-3 text-center\">Receiving Now</th>\n                  <th className=\"px-4 py-3 text-center\">Condition</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-slate-700/50\">\n                {receivingItems.map(item => {\n                  const remaining = item.ordered - item.previouslyReceived;\n                  const isComplete = remaining <= 0;\n\n                  return (\n                    <tr\n                      key={item.productId}\n                      className={`${isComplete ? 'bg-emerald-500/5' : 'hover:bg-slate-800/30'}`}\n                    >\n                      <td className=\"px-4 py-3\">\n                        <div className=\"text-sm text-white\">{item.productName}</div>\n                        <div className=\"text-xs text-slate-400 font-mono\">{item.sku}</div>\n                      </td>\n                      <td className=\"px-4 py-3 text-center text-sm text-white\">\n                        {formatNumber(item.ordered)}\n                      </td>\n                      <td className=\"px-4 py-3 text-center text-sm\">\n                        <span className={item.previouslyReceived > 0 ? 'text-emerald-400' : 'text-slate-400'}>\n                          {formatNumber(item.previouslyReceived)}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-3\">\n                        {isComplete ? (\n                          <div className=\"text-center text-sm text-emerald-400\">\n                            <Check className=\"w-4 h-4 inline mr-1\" />\n                            Complete\n                          </div>\n                        ) : (\n                          <input\n                            type=\"number\"\n                            min=\"0\"\n                            max={remaining}\n                            value={item.receivingNow}\n                            onChange={e => updateReceivingQty(item.productId, parseInt(e.target.value) || 0)}\n                            className=\"w-20 mx-auto block bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-white text-center text-sm\"\n                          />\n                        )}\n                      </td>\n                      <td className=\"px-4 py-3\">\n                        {!isComplete && item.receivingNow > 0 && (\n                          <select\n                            value={item.condition}\n                            onChange={e => updateCondition(item.productId, e.target.value as ItemCondition)}\n                            className={`w-full bg-slate-700 border rounded px-2 py-1.5 text-sm ${\n                              item.condition === 'good'\n                                ? 'border-slate-600 text-white'\n                                : 'border-amber-500/50 text-amber-400'\n                            }`}\n                          >\n                            <option value=\"good\">Good</option>\n                            <option value=\"damaged\">Damaged</option>\n                            <option value=\"wrong_item\">Wrong Item</option>\n                            <option value=\"short\">Short</option>\n                          </select>\n                        )}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        {/* Issues Warning */}\n        {hasIssues && (\n          <div className=\"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-start gap-3\">\n            <AlertTriangle className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" />\n            <div>\n              <div className=\"text-sm font-medium text-amber-400\">Issues Noted</div>\n              <div className=\"text-sm text-slate-300 mt-1\">\n                Some items are marked with condition issues. Items marked as damaged, wrong item, or short\n                will still be received but the issues will be logged.\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Receiving Notes */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Receiving Notes (Optional)</label>\n          <textarea\n            value={receivingNotes}\n            onChange={e => setReceivingNotes(e.target.value)}\n            rows={2}\n            placeholder=\"Note any issues, discrepancies, or special handling...\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default ReceivePOModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9724, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/CreateWorkOrderModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, WorkOrder, WorkOrderComponent, Product, Bundle } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatNumber } from '@/lib/formatting';\nimport { Package, AlertTriangle, Check, ChevronDown } from 'lucide-react';\n\ninterface CreateWorkOrderModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editWO?: WorkOrder | null;\n}\n\nexport function CreateWorkOrderModal({ isOpen, onClose, editWO }: CreateWorkOrderModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [woNumber, setWoNumber] = useState('');\n  const [outputProductId, setOutputProductId] = useState('');\n  const [outputType, setOutputType] = useState<'product' | 'bundle'>('bundle');\n  const [quantityToProduce, setQuantityToProduce] = useState('1');\n  const [priority, setPriority] = useState<'normal' | 'high' | 'urgent'>('normal');\n  const [dueDate, setDueDate] = useState('');\n  const [notes, setNotes] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const isEditing = !!editWO;\n\n  // Generate WO number\n  const generateWONumber = () => {\n    const count = state.workOrders.length + 1;\n    return `WO-${count.toString().padStart(4, '0')}`;\n  };\n\n  // Get product stock\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Get output product/bundle details\n  const outputItem = useMemo(() => {\n    if (outputType === 'bundle') {\n      return state.bundles.find(b => b.id === outputProductId);\n    }\n    return state.products.find(p => p.id === outputProductId);\n  }, [outputProductId, outputType, state.bundles, state.products]);\n\n  // Calculate components needed based on output selection\n  const components = useMemo(() => {\n    const qty = parseInt(quantityToProduce) || 0;\n    if (!outputProductId || qty <= 0) return [];\n\n    if (outputType === 'bundle') {\n      const bundle = state.bundles.find(b => b.id === outputProductId);\n      if (!bundle) return [];\n\n      return bundle.components.map(c => {\n        const product = state.products.find(p => p.id === c.productId);\n        const available = getProductStock(c.productId);\n        const required = c.quantity * qty;\n\n        return {\n          productId: c.productId,\n          productName: c.productName || product?.name || 'Unknown',\n          sku: product?.sku || '',\n          quantityRequired: required,\n          quantityAvailable: available,\n          isShort: available < required,\n          shortBy: Math.max(0, required - available),\n        };\n      });\n    }\n\n    // For regular products, check if they have components (BOM)\n    const product = state.products.find(p => p.id === outputProductId);\n    if (!product?.components || product.components.length === 0) {\n      return [];\n    }\n\n    // Use product's manufacturing components\n    return product.components.map(c => {\n      const componentProduct = state.products.find(p => p.id === c.productId);\n      const available = getProductStock(c.productId);\n      const required = c.quantity * qty;\n\n      return {\n        productId: c.productId,\n        productName: c.productName || componentProduct?.name || 'Unknown',\n        sku: componentProduct?.sku || '',\n        quantityRequired: required,\n        quantityAvailable: available,\n        isShort: available < required,\n        shortBy: Math.max(0, required - available),\n      };\n    });\n  }, [outputProductId, outputType, quantityToProduce, state.bundles, state.products, state.inventory]);\n\n  // Check if we can produce\n  const productionStatus = useMemo(() => {\n    if (components.length === 0) {\n      return { canProduce: true, maxProducible: parseInt(quantityToProduce) || 0, shortComponents: [] };\n    }\n\n    const shortComponents = components.filter(c => c.isShort);\n    const canProduce = shortComponents.length === 0;\n\n    // Calculate max producible\n    let maxProducible = Infinity;\n    components.forEach(c => {\n      const perUnit = c.quantityRequired / (parseInt(quantityToProduce) || 1);\n      const possible = Math.floor(c.quantityAvailable / perUnit);\n      maxProducible = Math.min(maxProducible, possible);\n    });\n\n    if (maxProducible === Infinity) maxProducible = parseInt(quantityToProduce) || 0;\n\n    return { canProduce, maxProducible, shortComponents };\n  }, [components, quantityToProduce]);\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editWO) {\n        setWoNumber(editWO.woNumber);\n        setOutputProductId(editWO.outputProductId);\n        setQuantityToProduce(editWO.quantityToProduce.toString());\n        setPriority(editWO.priority);\n        setDueDate(editWO.dueDate ? new Date(editWO.dueDate).toISOString().split('T')[0] : '');\n        setNotes(editWO.notes || '');\n        // Determine if it's a bundle or product\n        const isBundle = state.bundles.some(b => b.id === editWO.outputProductId);\n        setOutputType(isBundle ? 'bundle' : 'product');\n      } else {\n        setWoNumber(generateWONumber());\n        setOutputProductId('');\n        setOutputType('bundle');\n        setQuantityToProduce('1');\n        setPriority('normal');\n        setDueDate('');\n        setNotes('');\n      }\n    }\n  }, [isOpen, editWO, state.bundles]);\n\n  // Validation\n  const isValid = useMemo(() => {\n    if (!woNumber.trim()) return false;\n    if (!outputProductId) return false;\n    if (!quantityToProduce || parseInt(quantityToProduce) <= 0) return false;\n    return true;\n  }, [woNumber, outputProductId, quantityToProduce]);\n\n  // Handle create\n  const handleCreate = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const qty = parseInt(quantityToProduce) || 0;\n      const outputName = outputType === 'bundle'\n        ? state.bundles.find(b => b.id === outputProductId)?.name\n        : state.products.find(p => p.id === outputProductId)?.name;\n\n      const woComponents: WorkOrderComponent[] = components.map(c => ({\n        productId: c.productId,\n        productName: c.productName,\n        quantityRequired: c.quantityRequired,\n        quantityUsed: 0,\n      }));\n\n      const newWO: WorkOrder = {\n        id: editWO?.id || crypto.randomUUID(),\n        woNumber: woNumber.trim(),\n        status: editWO?.status || 'pending',\n        outputProductId,\n        outputProductName: outputName || '',\n        quantityToProduce: qty,\n        quantityProduced: editWO?.quantityProduced || 0,\n        priority,\n        dueDate: dueDate ? new Date(dueDate) : undefined,\n        components: woComponents,\n        notes: notes.trim() || undefined,\n        startedAt: editWO?.startedAt,\n        completedAt: editWO?.completedAt,\n        createdAt: editWO?.createdAt || new Date(),\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_WORK_ORDER', payload: newWO });\n        success(`Work Order ${woNumber} updated`);\n      } else {\n        dispatch({ type: 'ADD_WORK_ORDER', payload: newWO });\n        success(`Work Order ${woNumber} created`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save work order');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Work Order' : 'Create Work Order'}\n      subtitle={isEditing ? `Editing ${editWO?.woNumber}` : 'Schedule a production or assembly task'}\n      size=\"lg\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleCreate} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Create Work Order'}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* WO Header */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Work Order Details</h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">WO Number</label>\n              <input\n                type=\"text\"\n                value={woNumber}\n                onChange={e => setWoNumber(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white font-mono focus:outline-none focus:border-emerald-500/50\"\n                readOnly={isEditing}\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Priority</label>\n              <select\n                value={priority}\n                onChange={e => setPriority(e.target.value as 'normal' | 'high' | 'urgent')}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              >\n                <option value=\"normal\">Normal</option>\n                <option value=\"high\">High</option>\n                <option value=\"urgent\">Urgent</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Output Selection */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Output Product</h3>\n\n          {/* Type Selector */}\n          <div className=\"flex gap-2 mb-4\">\n            <button\n              type=\"button\"\n              onClick={() => {\n                setOutputType('bundle');\n                setOutputProductId('');\n              }}\n              className={`flex-1 py-2 px-4 rounded-lg border transition-colors ${\n                outputType === 'bundle'\n                  ? 'bg-emerald-500/20 border-emerald-500/30 text-emerald-400'\n                  : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n              }`}\n            >\n              Bundle Assembly\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setOutputType('product');\n                setOutputProductId('');\n              }}\n              className={`flex-1 py-2 px-4 rounded-lg border transition-colors ${\n                outputType === 'product'\n                  ? 'bg-emerald-500/20 border-emerald-500/30 text-emerald-400'\n                  : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n              }`}\n            >\n              Product Manufacturing\n            </button>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">\n                {outputType === 'bundle' ? 'Select Bundle' : 'Select Product'} *\n              </label>\n              <select\n                value={outputProductId}\n                onChange={e => setOutputProductId(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              >\n                <option value=\"\">Select {outputType}...</option>\n                {outputType === 'bundle' ? (\n                  state.bundles.map(bundle => (\n                    <option key={bundle.id} value={bundle.id}>\n                      {bundle.name} ({bundle.sku})\n                    </option>\n                  ))\n                ) : (\n                  state.products.map(product => (\n                    <option key={product.id} value={product.id}>\n                      {product.name} ({product.sku})\n                    </option>\n                  ))\n                )}\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Quantity to Produce *</label>\n              <input\n                type=\"number\"\n                min=\"1\"\n                value={quantityToProduce}\n                onChange={e => setQuantityToProduce(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Bill of Materials */}\n        {outputProductId && outputType === 'bundle' && components.length > 0 && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Bill of Materials</h3>\n\n            {/* Stock Check Status */}\n            <div className={`mb-4 p-3 rounded-lg border ${\n              productionStatus.canProduce\n                ? 'bg-emerald-500/10 border-emerald-500/30'\n                : 'bg-amber-500/10 border-amber-500/30'\n            }`}>\n              {productionStatus.canProduce ? (\n                <div className=\"flex items-center gap-2 text-emerald-400\">\n                  <Check className=\"w-5 h-5\" />\n                  <span className=\"text-sm\">\n                    Sufficient stock for {formatNumber(parseInt(quantityToProduce) || 0)} units\n                  </span>\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-2 text-amber-400\">\n                  <AlertTriangle className=\"w-5 h-5\" />\n                  <span className=\"text-sm\">\n                    Can only produce {formatNumber(productionStatus.maxProducible)} units with current stock\n                  </span>\n                </div>\n              )}\n            </div>\n\n            {/* Components Table */}\n            <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-slate-800/50\">\n                  <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                    <th className=\"px-4 py-3 text-left\">Component</th>\n                    <th className=\"px-4 py-3 text-left\">SKU</th>\n                    <th className=\"px-4 py-3 text-center\">Needed</th>\n                    <th className=\"px-4 py-3 text-center\">Available</th>\n                    <th className=\"px-4 py-3 text-center\">Status</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/50\">\n                  {components.map(comp => (\n                    <tr\n                      key={comp.productId}\n                      className={comp.isShort ? 'bg-amber-500/5' : ''}\n                    >\n                      <td className=\"px-4 py-3 text-sm text-white\">{comp.productName}</td>\n                      <td className=\"px-4 py-3 text-sm text-slate-400 font-mono\">{comp.sku}</td>\n                      <td className=\"px-4 py-3 text-sm text-white text-center\">\n                        {formatNumber(comp.quantityRequired)}\n                      </td>\n                      <td className=\"px-4 py-3 text-sm text-center\">\n                        <span className={comp.isShort ? 'text-amber-400' : 'text-emerald-400'}>\n                          {formatNumber(comp.quantityAvailable)}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-3 text-center\">\n                        {comp.isShort ? (\n                          <span className=\"text-xs text-amber-400\">\n                            Short {formatNumber(comp.shortBy)}\n                          </span>\n                        ) : (\n                          <span className=\"text-xs text-emerald-400\">\n                            <Check className=\"w-4 h-4 inline\" /> OK\n                          </span>\n                        )}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Product manufacturing note - only show if product has no components */}\n        {outputProductId && outputType === 'product' && components.length === 0 && (\n          <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n            <p className=\"text-sm text-slate-400\">\n              This product does not have predefined components (BOM).\n              To add components, edit the product and add manufacturing components.\n            </p>\n          </div>\n        )}\n\n        {/* Show BOM for products with components */}\n        {outputProductId && outputType === 'product' && components.length > 0 && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Bill of Materials</h3>\n\n            {/* Stock Check Status */}\n            <div className={`mb-4 p-3 rounded-lg border ${\n              productionStatus.canProduce\n                ? 'bg-emerald-500/10 border-emerald-500/30'\n                : 'bg-amber-500/10 border-amber-500/30'\n            }`}>\n              {productionStatus.canProduce ? (\n                <div className=\"flex items-center gap-2 text-emerald-400\">\n                  <Check className=\"w-5 h-5\" />\n                  <span className=\"text-sm\">\n                    Sufficient stock for {formatNumber(parseInt(quantityToProduce) || 0)} units\n                  </span>\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-2 text-amber-400\">\n                  <AlertTriangle className=\"w-5 h-5\" />\n                  <span className=\"text-sm\">\n                    Can only produce {formatNumber(productionStatus.maxProducible)} units with current stock\n                  </span>\n                </div>\n              )}\n            </div>\n\n            {/* Components Table */}\n            <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-slate-800/50\">\n                  <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                    <th className=\"px-4 py-3 text-left\">Component</th>\n                    <th className=\"px-4 py-3 text-left\">SKU</th>\n                    <th className=\"px-4 py-3 text-center\">Needed</th>\n                    <th className=\"px-4 py-3 text-center\">Available</th>\n                    <th className=\"px-4 py-3 text-center\">Status</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/50\">\n                  {components.map(comp => (\n                    <tr\n                      key={comp.productId}\n                      className={comp.isShort ? 'bg-amber-500/5' : ''}\n                    >\n                      <td className=\"px-4 py-3 text-sm text-white\">{comp.productName}</td>\n                      <td className=\"px-4 py-3 text-sm text-slate-400 font-mono\">{comp.sku}</td>\n                      <td className=\"px-4 py-3 text-sm text-white text-center\">\n                        {formatNumber(comp.quantityRequired)}\n                      </td>\n                      <td className=\"px-4 py-3 text-sm text-center\">\n                        <span className={comp.isShort ? 'text-amber-400' : 'text-emerald-400'}>\n                          {formatNumber(comp.quantityAvailable)}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-3 text-center\">\n                        {comp.isShort ? (\n                          <span className=\"text-xs text-amber-400\">\n                            Short {formatNumber(comp.shortBy)}\n                          </span>\n                        ) : (\n                          <span className=\"text-xs text-emerald-400\">\n                            <Check className=\"w-4 h-4 inline\" /> OK\n                          </span>\n                        )}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Schedule */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Due Date (Optional)</label>\n          <input\n            type=\"date\"\n            value={dueDate}\n            onChange={e => setDueDate(e.target.value)}\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n          />\n        </div>\n\n        {/* Notes */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Notes (Optional)</label>\n          <textarea\n            value={notes}\n            onChange={e => setNotes(e.target.value)}\n            rows={2}\n            placeholder=\"Optional notes for this work order...\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default CreateWorkOrderModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10845, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/WorkOrderDetailModal.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, WorkOrder } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { useConfirm } from '@/components/ui/ConfirmDialog';\nimport { formatNumber, formatDate, formatDateTime } from '@/lib/formatting';\nimport {\n  Package,\n  Play,\n  Check,\n  X,\n  AlertTriangle,\n  Clock,\n  Calendar,\n  FileText,\n  ArrowUp,\n  Flame,\n} from 'lucide-react';\n\ninterface WorkOrderDetailModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  workOrder: WorkOrder | null;\n  onEdit?: (wo: WorkOrder) => void;\n}\n\nexport function WorkOrderDetailModal({ isOpen, onClose, workOrder, onEdit }: WorkOrderDetailModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error, warning } = useToast();\n  const confirm = useConfirm();\n\n  // Get product stock\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Check stock availability for starting\n  const stockCheck = useMemo(() => {\n    if (!workOrder) return { canStart: true, shortComponents: [] };\n\n    const shortComponents = workOrder.components.filter(c => {\n      const available = getProductStock(c.productId);\n      return available < c.quantityRequired;\n    });\n\n    return {\n      canStart: shortComponents.length === 0,\n      shortComponents,\n    };\n  }, [workOrder, state.inventory]);\n\n  // Get status badge\n  const getStatusBadge = (status: WorkOrder['status']) => {\n    const styles = {\n      pending: 'bg-slate-500/20 text-slate-400 border-slate-500/30',\n      in_progress: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\n      completed: 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30',\n      cancelled: 'bg-red-500/20 text-red-400 border-red-500/30',\n    };\n\n    const labels = {\n      pending: 'Pending',\n      in_progress: 'In Progress',\n      completed: 'Completed',\n      cancelled: 'Cancelled',\n    };\n\n    return (\n      <span className={`px-3 py-1 text-sm rounded-full border ${styles[status]}`}>\n        {labels[status]}\n      </span>\n    );\n  };\n\n  // Get priority badge\n  const getPriorityBadge = (priority: WorkOrder['priority']) => {\n    if (priority === 'normal') return null;\n\n    const styles = {\n      high: 'text-amber-400',\n      urgent: 'text-red-400',\n    };\n\n    const icons = {\n      high: ArrowUp,\n      urgent: Flame,\n    };\n\n    const Icon = icons[priority];\n\n    return (\n      <span className={`flex items-center gap-1 ${styles[priority]}`}>\n        <Icon className=\"w-4 h-4\" />\n        {priority.charAt(0).toUpperCase() + priority.slice(1)}\n      </span>\n    );\n  };\n\n  // Handle start production\n  const handleStartProduction = async () => {\n    if (!workOrder) return;\n\n    if (!stockCheck.canStart) {\n      error('Insufficient stock to start production');\n      return;\n    }\n\n    const confirmed = await confirm({\n      title: 'Start Production',\n      message: `Start production on ${workOrder.woNumber}? This will deduct components from inventory.`,\n      confirmText: 'Start Production',\n    });\n\n    if (confirmed) {\n      // Deduct components from inventory\n      workOrder.components.forEach(c => {\n        // Find the default location\n        const defaultLoc = state.locations.find(l => l.isDefault);\n        const locationId = defaultLoc?.id || state.locations[0]?.id || 'loc-1';\n\n        dispatch({\n          type: 'ADJUST_STOCK',\n          payload: {\n            productId: c.productId,\n            locationId,\n            adjustment: -c.quantityRequired,\n          }\n        });\n      });\n\n      // Update work order status\n      const updatedWO: WorkOrder = {\n        ...workOrder,\n        status: 'in_progress',\n        startedAt: new Date(),\n        components: workOrder.components.map(c => ({\n          ...c,\n          quantityUsed: c.quantityRequired,\n        })),\n      };\n\n      dispatch({ type: 'UPDATE_WORK_ORDER', payload: updatedWO });\n      success(`Started production on ${workOrder.woNumber}`);\n      onClose();\n    }\n  };\n\n  // Handle complete\n  const handleComplete = async () => {\n    if (!workOrder) return;\n\n    const confirmed = await confirm({\n      title: 'Complete Work Order',\n      message: `Complete ${workOrder.woNumber}? This will add ${workOrder.quantityToProduce} ${workOrder.outputProductName} to inventory.`,\n      confirmText: 'Complete',\n    });\n\n    if (confirmed) {\n      // Add finished goods to inventory\n      const defaultLoc = state.locations.find(l => l.isDefault);\n      const locationId = defaultLoc?.id || state.locations[0]?.id || 'loc-1';\n\n      dispatch({\n        type: 'ADJUST_STOCK',\n        payload: {\n          productId: workOrder.outputProductId,\n          locationId,\n          adjustment: workOrder.quantityToProduce,\n        }\n      });\n\n      // Update work order\n      const updatedWO: WorkOrder = {\n        ...workOrder,\n        status: 'completed',\n        quantityProduced: workOrder.quantityToProduce,\n        completedAt: new Date(),\n      };\n\n      dispatch({ type: 'UPDATE_WORK_ORDER', payload: updatedWO });\n      success(`${workOrder.woNumber} completed! ${formatNumber(workOrder.quantityToProduce)} ${workOrder.outputProductName} added to inventory`);\n      onClose();\n    }\n  };\n\n  // Handle cancel\n  const handleCancel = async () => {\n    if (!workOrder) return;\n\n    const message = workOrder.status === 'in_progress'\n      ? `Cancel ${workOrder.woNumber}? Components have already been deducted and will NOT be returned.`\n      : `Cancel ${workOrder.woNumber}?`;\n\n    const confirmed = await confirm({\n      title: 'Cancel Work Order',\n      message,\n      confirmText: 'Cancel Work Order',\n      destructive: true,\n    });\n\n    if (confirmed) {\n      const updatedWO: WorkOrder = {\n        ...workOrder,\n        status: 'cancelled',\n      };\n\n      dispatch({ type: 'UPDATE_WORK_ORDER', payload: updatedWO });\n      success(`${workOrder.woNumber} cancelled`);\n      onClose();\n    }\n  };\n\n  if (!workOrder) return null;\n\n  // Calculate progress\n  const progress = workOrder.status === 'completed' ? 100 :\n    workOrder.status === 'in_progress' ? 50 : 0;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={workOrder.woNumber}\n      subtitle={workOrder.outputProductName}\n      size=\"lg\"\n      footer={\n        <>\n          {/* Actions based on status */}\n          {workOrder.status === 'pending' && (\n            <>\n              <Button variant=\"secondary\" onClick={() => onEdit?.(workOrder)}>\n                Edit\n              </Button>\n              <Button variant=\"secondary\" onClick={handleCancel}>\n                Cancel\n              </Button>\n              <Button onClick={handleStartProduction} disabled={!stockCheck.canStart}>\n                <Play className=\"w-4 h-4\" />\n                Start Production\n              </Button>\n            </>\n          )}\n          {workOrder.status === 'in_progress' && (\n            <>\n              <Button variant=\"secondary\" onClick={handleCancel}>\n                Cancel\n              </Button>\n              <Button onClick={handleComplete}>\n                <Check className=\"w-4 h-4\" />\n                Complete\n              </Button>\n            </>\n          )}\n          {(workOrder.status === 'completed' || workOrder.status === 'cancelled') && (\n            <Button variant=\"secondary\" onClick={onClose}>\n              Close\n            </Button>\n          )}\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Status & Priority */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            {getStatusBadge(workOrder.status)}\n            {getPriorityBadge(workOrder.priority)}\n          </div>\n        </div>\n\n        {/* Progress (for in_progress) */}\n        {workOrder.status === 'in_progress' && (\n          <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-sm text-slate-400\">Production Progress</span>\n              <span className=\"text-sm text-white\">{progress}%</span>\n            </div>\n            <div className=\"w-full bg-slate-700 rounded-full h-2\">\n              <div\n                className=\"h-2 rounded-full bg-blue-500 transition-all\"\n                style={{ width: `${progress}%` }}\n              />\n            </div>\n          </div>\n        )}\n\n        {/* Stock Check Warning (for pending) */}\n        {workOrder.status === 'pending' && !stockCheck.canStart && (\n          <div className=\"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-start gap-3\">\n            <AlertTriangle className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" />\n            <div>\n              <div className=\"text-sm font-medium text-amber-400\">Insufficient Stock</div>\n              <div className=\"text-sm text-slate-300 mt-1\">\n                Cannot start production. The following components are short:\n              </div>\n              <ul className=\"mt-2 space-y-1\">\n                {stockCheck.shortComponents.map(c => (\n                  <li key={c.productId} className=\"text-sm text-slate-400\">\n                    {c.productName}: need {formatNumber(c.quantityRequired)}, have {formatNumber(getProductStock(c.productId))}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        )}\n\n        {/* Output Product */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-white mb-3\">Output</h3>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 bg-emerald-500/20 rounded-lg flex items-center justify-center\">\n              <Package className=\"w-7 h-7 text-emerald-400\" />\n            </div>\n            <div>\n              <div className=\"text-lg font-medium text-white\">{workOrder.outputProductName}</div>\n              <div className=\"text-sm text-slate-400\">\n                {workOrder.status === 'completed' ? (\n                  <span className=\"text-emerald-400\">\n                    {formatNumber(workOrder.quantityProduced)} / {formatNumber(workOrder.quantityToProduce)} produced\n                  </span>\n                ) : (\n                  <span>{formatNumber(workOrder.quantityToProduce)} to produce</span>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Components */}\n        {workOrder.components.length > 0 && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Components</h3>\n            <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-slate-800/50\">\n                  <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                    <th className=\"px-4 py-3 text-left\">Component</th>\n                    <th className=\"px-4 py-3 text-center\">Required</th>\n                    <th className=\"px-4 py-3 text-center\">Used</th>\n                    <th className=\"px-4 py-3 text-center\">Available</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/50\">\n                  {workOrder.components.map(comp => {\n                    const available = getProductStock(comp.productId);\n                    const isShort = available < comp.quantityRequired && workOrder.status === 'pending';\n\n                    return (\n                      <tr key={comp.productId} className={isShort ? 'bg-amber-500/5' : ''}>\n                        <td className=\"px-4 py-3 text-sm text-white\">{comp.productName}</td>\n                        <td className=\"px-4 py-3 text-sm text-white text-center\">\n                          {formatNumber(comp.quantityRequired)}\n                        </td>\n                        <td className=\"px-4 py-3 text-sm text-center\">\n                          {workOrder.status === 'pending' ? (\n                            <span className=\"text-slate-400\">-</span>\n                          ) : (\n                            <span className=\"text-emerald-400\">{formatNumber(comp.quantityUsed)}</span>\n                          )}\n                        </td>\n                        <td className=\"px-4 py-3 text-sm text-center\">\n                          <span className={isShort ? 'text-amber-400' : 'text-slate-400'}>\n                            {formatNumber(available)}\n                          </span>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Details */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-white mb-3\">Details</h3>\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <Calendar className=\"w-4 h-4 text-slate-400\" />\n              <span className=\"text-slate-400\">Due Date:</span>\n              <span className=\"text-white\">\n                {workOrder.dueDate ? formatDate(workOrder.dueDate) : 'Not set'}\n              </span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Clock className=\"w-4 h-4 text-slate-400\" />\n              <span className=\"text-slate-400\">Created:</span>\n              <span className=\"text-white\">{formatDate(workOrder.createdAt)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Notes */}\n        {workOrder.notes && (\n          <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n            <h3 className=\"text-sm font-medium text-white mb-2\">Notes</h3>\n            <p className=\"text-sm text-slate-300\">{workOrder.notes}</p>\n          </div>\n        )}\n\n        {/* Timeline */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-white mb-3\">Timeline</h3>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-2 h-2 rounded-full bg-emerald-500\"></div>\n              <div className=\"text-sm\">\n                <span className=\"text-white\">Created</span>\n                <span className=\"text-slate-400 ml-2\">{formatDateTime(workOrder.createdAt)}</span>\n              </div>\n            </div>\n            {workOrder.startedAt && (\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\n                <div className=\"text-sm\">\n                  <span className=\"text-white\">Production Started</span>\n                  <span className=\"text-slate-400 ml-2\">{formatDateTime(workOrder.startedAt)}</span>\n                </div>\n              </div>\n            )}\n            {workOrder.completedAt && (\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-emerald-500\"></div>\n                <div className=\"text-sm\">\n                  <span className=\"text-white\">Completed</span>\n                  <span className=\"text-slate-400 ml-2\">{formatDateTime(workOrder.completedAt)}</span>\n                </div>\n              </div>\n            )}\n            {workOrder.status === 'cancelled' && (\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-red-500\"></div>\n                <div className=\"text-sm\">\n                  <span className=\"text-white\">Cancelled</span>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default WorkOrderDetailModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11856, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/ui/Toggle.tsx"],"sourcesContent":["'use client';\n\nimport { forwardRef } from 'react';\n\ninterface ToggleProps {\n  checked: boolean;\n  onChange: (checked: boolean) => void;\n  disabled?: boolean;\n  size?: 'sm' | 'md';\n  label?: string;\n  description?: string;\n}\n\nexport const Toggle = forwardRef<HTMLButtonElement, ToggleProps>(\n  ({ checked, onChange, disabled = false, size = 'md', label, description }, ref) => {\n    const sizes = {\n      sm: {\n        track: 'w-9 h-5',\n        thumb: 'w-4 h-4',\n        translate: 'translate-x-4',\n      },\n      md: {\n        track: 'w-11 h-6',\n        thumb: 'w-5 h-5',\n        translate: 'translate-x-5',\n      },\n    };\n\n    const sizeStyles = sizes[size];\n\n    const handleClick = () => {\n      if (!disabled) {\n        onChange(!checked);\n      }\n    };\n\n    const handleKeyDown = (e: React.KeyboardEvent) => {\n      if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        handleClick();\n      }\n    };\n\n    const toggle = (\n      <button\n        ref={ref}\n        type=\"button\"\n        role=\"switch\"\n        aria-checked={checked}\n        disabled={disabled}\n        onClick={handleClick}\n        onKeyDown={handleKeyDown}\n        className={`\n          relative inline-flex flex-shrink-0 cursor-pointer rounded-full\n          transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2\n          focus:ring-emerald-500 focus:ring-offset-2 focus:ring-offset-slate-900\n          ${sizeStyles.track}\n          ${checked ? 'bg-emerald-500' : 'bg-slate-600'}\n          ${disabled ? 'opacity-50 cursor-not-allowed' : ''}\n        `}\n      >\n        <span\n          aria-hidden=\"true\"\n          className={`\n            pointer-events-none inline-block rounded-full bg-white shadow-lg\n            ring-0 transition duration-200 ease-in-out\n            ${sizeStyles.thumb}\n            ${checked ? sizeStyles.translate : 'translate-x-0.5'}\n            ${size === 'md' ? 'mt-0.5' : 'mt-0.5'}\n          `}\n        />\n      </button>\n    );\n\n    if (label || description) {\n      return (\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex-1\">\n            {label && (\n              <div className={`text-white ${size === 'sm' ? 'text-sm' : 'text-base'}`}>\n                {label}\n              </div>\n            )}\n            {description && (\n              <div className=\"text-sm text-slate-400 mt-0.5\">{description}</div>\n            )}\n          </div>\n          {toggle}\n        </div>\n      );\n    }\n\n    return toggle;\n  }\n);\n\nToggle.displayName = 'Toggle';\n\nexport default Toggle;\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAaO,MAAM,uBAAS,IAAA,2KAAU,OAC9B,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,KAAK,EAAE,OAAO,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE;IACzE,MAAM,QAAQ;QACZ,IAAI;YACF,OAAO;YACP,OAAO;YACP,WAAW;QACb;QACA,IAAI;YACF,OAAO;YACP,OAAO;YACP,WAAW;QACb;IACF;IAEA,MAAM,aAAa,KAAK,CAAC,KAAK;IAE9B,MAAM,cAAc;QAClB,IAAI,CAAC,UAAU;YACb,SAAS,CAAC;QACZ;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;YACtC,EAAE,cAAc;YAChB;QACF;IACF;IAEA,MAAM,uBACJ,6LAAC;QACC,KAAK;QACL,MAAK;QACL,MAAK;QACL,gBAAc;QACd,UAAU;QACV,SAAS;QACT,WAAW;QACX,WAAW,CAAC;;;;UAIV,EAAE,WAAW,KAAK,CAAC;UACnB,EAAE,UAAU,mBAAmB,eAAe;UAC9C,EAAE,WAAW,kCAAkC,GAAG;QACpD,CAAC;kBAED,cAAA,6LAAC;YACC,eAAY;YACZ,WAAW,CAAC;;;YAGV,EAAE,WAAW,KAAK,CAAC;YACnB,EAAE,UAAU,WAAW,SAAS,GAAG,kBAAkB;YACrD,EAAE,SAAS,OAAO,WAAW,SAAS;UACxC,CAAC;;;;;;;;;;;IAKP,IAAI,SAAS,aAAa;QACxB,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;wBACZ,uBACC,6LAAC;4BAAI,WAAW,CAAC,WAAW,EAAE,SAAS,OAAO,YAAY,aAAa;sCACpE;;;;;;wBAGJ,6BACC,6LAAC;4BAAI,WAAU;sCAAiC;;;;;;;;;;;;gBAGnD;;;;;;;IAGP;IAEA,OAAO;AACT;;AAGF,OAAO,WAAW,GAAG;uCAEN"}},
    {"offset": {"line": 11979, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/LocationModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Toggle } from '@/components/ui/Toggle';\nimport { useApp, Location } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { MapPin, Warehouse, Package, Truck } from 'lucide-react';\n\ninterface LocationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editLocation?: Location | null;\n}\n\nconst LOCATION_TYPES: { value: Location['type']; label: string; icon: typeof Warehouse; description: string }[] = [\n  { value: 'warehouse', label: 'Warehouse', icon: Warehouse, description: 'Main storage facility' },\n  { value: 'fba', label: 'FBA', icon: Package, description: 'Amazon fulfillment center' },\n  { value: 'fbm', label: 'FBM', icon: Truck, description: 'Fulfilled by merchant' },\n];\n\nexport function LocationModal({ isOpen, onClose, editLocation }: LocationModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [name, setName] = useState('');\n  const [type, setType] = useState<Location['type']>('warehouse');\n  const [address, setAddress] = useState('');\n  const [isDefault, setIsDefault] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const isEditing = !!editLocation;\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editLocation) {\n        setName(editLocation.name);\n        setType(editLocation.type);\n        setAddress(editLocation.address || '');\n        setIsDefault(editLocation.isDefault);\n      } else {\n        setName('');\n        setType('warehouse');\n        setAddress('');\n        setIsDefault(state.locations.length === 0);\n      }\n    }\n  }, [isOpen, editLocation, state.locations.length]);\n\n  // Validation\n  const isValid = name.trim().length > 0;\n\n  // Handle save\n  const handleSave = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      // If setting as default, unset other defaults first\n      if (isDefault && !editLocation?.isDefault) {\n        state.locations.forEach(loc => {\n          if (loc.isDefault) {\n            dispatch({\n              type: 'UPDATE_LOCATION',\n              payload: { ...loc, isDefault: false },\n            });\n          }\n        });\n      }\n\n      const locationData: Location = {\n        id: editLocation?.id || crypto.randomUUID(),\n        name: name.trim(),\n        type,\n        address: address.trim() || undefined,\n        isDefault,\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_LOCATION', payload: locationData });\n        success(`Location \"${name}\" updated`);\n      } else {\n        dispatch({ type: 'ADD_LOCATION', payload: locationData });\n        success(`Location \"${name}\" added`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save location');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Location' : 'Add Location'}\n      subtitle={isEditing ? `Editing ${editLocation?.name}` : 'Create a new warehouse or fulfillment location'}\n      size=\"md\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Add Location'}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Location Name */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Location Name *</label>\n          <input\n            type=\"text\"\n            value={name}\n            onChange={e => setName(e.target.value)}\n            placeholder=\"e.g., Main Warehouse, FBA - Phoenix\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n            autoFocus\n          />\n        </div>\n\n        {/* Location Type */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-3\">Location Type *</label>\n          <div className=\"grid grid-cols-3 gap-3\">\n            {LOCATION_TYPES.map(locType => {\n              const Icon = locType.icon;\n              const isSelected = type === locType.value;\n\n              return (\n                <button\n                  key={locType.value}\n                  type=\"button\"\n                  onClick={() => setType(locType.value)}\n                  className={`\n                    flex flex-col items-center gap-2 p-4 rounded-lg border transition-all\n                    ${isSelected\n                      ? 'bg-emerald-500/20 border-emerald-500/50 text-emerald-400'\n                      : 'bg-slate-800/50 border-slate-700 text-slate-400 hover:border-slate-600'\n                    }\n                  `}\n                >\n                  <Icon className=\"w-6 h-6\" />\n                  <span className=\"text-sm font-medium\">{locType.label}</span>\n                  <span className=\"text-xs text-slate-500\">{locType.description}</span>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Address */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Address (Optional)</label>\n          <textarea\n            value={address}\n            onChange={e => setAddress(e.target.value)}\n            placeholder=\"Full address or location details...\"\n            rows={2}\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n\n        {/* Default Location Toggle */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <Toggle\n            checked={isDefault}\n            onChange={setIsDefault}\n            label=\"Default Location\"\n            description=\"New inventory and received items will be added to this location by default\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default LocationModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 12302, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/BoxModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Toggle } from '@/components/ui/Toggle';\nimport { useApp, ShippingBox } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatNumber, formatCurrency } from '@/lib/formatting';\nimport { Box, Ruler, Scale, Zap } from 'lucide-react';\n\ninterface BoxModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editBox?: ShippingBox | null;\n}\n\nexport function BoxModal({ isOpen, onClose, editBox }: BoxModalProps) {\n  const { dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [name, setName] = useState('');\n  const [sku, setSku] = useState('');\n  const [innerLength, setInnerLength] = useState('');\n  const [innerWidth, setInnerWidth] = useState('');\n  const [innerHeight, setInnerHeight] = useState('');\n  const [maxWeight, setMaxWeight] = useState('');\n  const [cost, setCost] = useState('');\n  const [smartBoxEligible, setSmartBoxEligible] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const isEditing = !!editBox;\n\n  // Calculate volume\n  const volume = useMemo(() => {\n    const l = parseFloat(innerLength) || 0;\n    const w = parseFloat(innerWidth) || 0;\n    const h = parseFloat(innerHeight) || 0;\n    return l * w * h;\n  }, [innerLength, innerWidth, innerHeight]);\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editBox) {\n        setName(editBox.name);\n        setSku(editBox.sku || '');\n        setInnerLength(editBox.innerLength.toString());\n        setInnerWidth(editBox.innerWidth.toString());\n        setInnerHeight(editBox.innerHeight.toString());\n        setMaxWeight(editBox.maxWeight.toString());\n        setCost(editBox.cost?.toString() || '');\n        setSmartBoxEligible(editBox.smartBoxEligible);\n      } else {\n        setName('');\n        setSku('');\n        setInnerLength('');\n        setInnerWidth('');\n        setInnerHeight('');\n        setMaxWeight('');\n        setCost('');\n        setSmartBoxEligible(true);\n      }\n    }\n  }, [isOpen, editBox]);\n\n  // Validation\n  const isValid = useMemo(() => {\n    if (!name.trim()) return false;\n    if (!innerLength || parseFloat(innerLength) <= 0) return false;\n    if (!innerWidth || parseFloat(innerWidth) <= 0) return false;\n    if (!innerHeight || parseFloat(innerHeight) <= 0) return false;\n    if (!maxWeight || parseFloat(maxWeight) <= 0) return false;\n    return true;\n  }, [name, innerLength, innerWidth, innerHeight, maxWeight]);\n\n  // Handle save\n  const handleSave = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const boxData: ShippingBox = {\n        id: editBox?.id || crypto.randomUUID(),\n        name: name.trim(),\n        sku: sku.trim() || undefined,\n        innerLength: parseFloat(innerLength),\n        innerWidth: parseFloat(innerWidth),\n        innerHeight: parseFloat(innerHeight),\n        maxWeight: parseFloat(maxWeight),\n        cost: cost ? parseFloat(cost) : undefined,\n        smartBoxEligible,\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_BOX', payload: boxData });\n        success(`Box \"${name}\" updated`);\n      } else {\n        dispatch({ type: 'ADD_BOX', payload: boxData });\n        success(`Box \"${name}\" added`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save box');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Shipping Box' : 'Add Shipping Box'}\n      subtitle={isEditing ? `Editing ${editBox?.name}` : 'Define a new box size for fulfillment'}\n      size=\"md\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Add Box'}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Box Name & SKU */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Box Name *</label>\n            <input\n              type=\"text\"\n              value={name}\n              onChange={e => setName(e.target.value)}\n              placeholder=\"e.g., Small Flat, Large Cube\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              autoFocus\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">SKU (Optional)</label>\n            <input\n              type=\"text\"\n              value={sku}\n              onChange={e => setSku(e.target.value)}\n              placeholder=\"e.g., BOX-SM-01\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono\"\n            />\n          </div>\n        </div>\n\n        {/* Inner Dimensions */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-3\">\n            <span className=\"flex items-center gap-2\">\n              <Ruler className=\"w-4 h-4\" />\n              Inner Dimensions (inches) *\n            </span>\n          </label>\n          <div className=\"grid grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-xs text-slate-500 mb-1\">Length</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                value={innerLength}\n                onChange={e => setInnerLength(e.target.value)}\n                placeholder=\"0\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs text-slate-500 mb-1\">Width</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                value={innerWidth}\n                onChange={e => setInnerWidth(e.target.value)}\n                placeholder=\"0\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs text-slate-500 mb-1\">Height</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                value={innerHeight}\n                onChange={e => setInnerHeight(e.target.value)}\n                placeholder=\"0\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n          {volume > 0 && (\n            <div className=\"mt-2 text-sm text-slate-400\">\n              Volume: <span className=\"text-white\">{formatNumber(volume)} cubic inches</span>\n            </div>\n          )}\n        </div>\n\n        {/* Max Weight */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">\n              <span className=\"flex items-center gap-2\">\n                <Scale className=\"w-4 h-4\" />\n                Max Weight (oz) *\n              </span>\n            </label>\n            <input\n              type=\"number\"\n              step=\"1\"\n              min=\"0\"\n              value={maxWeight}\n              onChange={e => setMaxWeight(e.target.value)}\n              placeholder=\"0\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n            />\n            {maxWeight && parseFloat(maxWeight) > 0 && (\n              <div className=\"mt-1 text-xs text-slate-500\">\n                {formatNumber(parseFloat(maxWeight) / 16)} lbs\n              </div>\n            )}\n          </div>\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Cost per Box (Optional)</label>\n            <div className=\"relative\">\n              <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0\"\n                value={cost}\n                onChange={e => setCost(e.target.value)}\n                placeholder=\"0.00\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-8 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Smart Box Toggle */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <Toggle\n            checked={smartBoxEligible}\n            onChange={setSmartBoxEligible}\n            label=\"Smart Box Eligible\"\n            description=\"Include this box in automatic box size selection based on item dimensions\"\n          />\n        </div>\n\n        {/* Preview */}\n        {isValid && (\n          <div className=\"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-12 h-12 bg-emerald-500/20 rounded-lg flex items-center justify-center\">\n                <Box className=\"w-6 h-6 text-emerald-400\" />\n              </div>\n              <div>\n                <div className=\"text-white font-medium\">{name || 'New Box'}</div>\n                <div className=\"text-sm text-slate-400\">\n                  {innerLength}\" x {innerWidth}\" x {innerHeight}\" ({formatNumber(volume)} cu in) | Max {formatNumber(parseFloat(maxWeight) || 0)} oz\n                  {cost && ` | ${formatCurrency(parseFloat(cost))}`}\n                </div>\n              </div>\n              {smartBoxEligible && (\n                <div className=\"ml-auto flex items-center gap-1 text-xs text-emerald-400\">\n                  <Zap className=\"w-3 h-3\" />\n                  Smart\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default BoxModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 12925, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/CreateReturnModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useApp, Order, ReturnReason, Return, ReturnItem } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency } from '@/lib/formatting';\n\ninterface CreateReturnModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  preselectedOrder?: Order | null;\n}\n\nconst reasonLabels: Record<ReturnReason, string> = {\n  damaged_in_transit: 'Damaged in Transit',\n  defective: 'Defective Product',\n  wrong_item_sent: 'Wrong Item Sent',\n  not_as_described: 'Not as Described',\n  changed_mind: 'Changed Mind',\n  ordered_wrong: 'Ordered Wrong',\n  arrived_late: 'Arrived Late',\n  better_price_found: 'Better Price Found',\n  other: 'Other',\n};\n\ninterface ReturnItemData {\n  productId: string;\n  productName: string;\n  sku: string;\n  price: number;\n  maxQuantity: number;\n  quantity: number;\n  reason: ReturnReason;\n  selected: boolean;\n}\n\nexport function CreateReturnModal({ isOpen, onClose, preselectedOrder }: CreateReturnModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // State\n  const [step, setStep] = useState<'order' | 'items' | 'details'>('order');\n  const [selectedOrder, setSelectedOrder] = useState<Order | null>(null);\n  const [orderSearch, setOrderSearch] = useState('');\n  const [returnItems, setReturnItems] = useState<ReturnItemData[]>([]);\n  const [refundShipping, setRefundShipping] = useState(false);\n  const [restockingFeePercent, setRestockingFeePercent] = useState(0);\n  const [notes, setNotes] = useState('');\n\n  // Initialize with preselected order\n  useEffect(() => {\n    if (preselectedOrder) {\n      setSelectedOrder(preselectedOrder);\n      setStep('items');\n      initializeItems(preselectedOrder);\n    }\n  }, [preselectedOrder]);\n\n  // Reset when modal closes\n  useEffect(() => {\n    if (!isOpen) {\n      setStep('order');\n      setSelectedOrder(null);\n      setOrderSearch('');\n      setReturnItems([]);\n      setRefundShipping(false);\n      setRestockingFeePercent(0);\n      setNotes('');\n    }\n  }, [isOpen]);\n\n  const initializeItems = (order: Order) => {\n    setReturnItems(\n      order.items.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        price: item.price,\n        maxQuantity: item.quantity,\n        quantity: item.quantity,\n        reason: 'damaged_in_transit',\n        selected: false,\n      }))\n    );\n  };\n\n  // Filter eligible orders (shipped or delivered)\n  const eligibleOrders = state.orders.filter(\n    o => (o.status === 'shipped' || o.status === 'delivered') &&\n    (orderSearch === '' ||\n      o.orderNumber.toLowerCase().includes(orderSearch.toLowerCase()) ||\n      o.customer.name.toLowerCase().includes(orderSearch.toLowerCase()))\n  );\n\n  const handleSelectOrder = (order: Order) => {\n    setSelectedOrder(order);\n    initializeItems(order);\n    setStep('items');\n  };\n\n  const toggleItem = (productId: string) => {\n    setReturnItems(prev =>\n      prev.map(item =>\n        item.productId === productId\n          ? { ...item, selected: !item.selected }\n          : item\n      )\n    );\n  };\n\n  const updateItemQuantity = (productId: string, quantity: number) => {\n    setReturnItems(prev =>\n      prev.map(item =>\n        item.productId === productId\n          ? { ...item, quantity: Math.min(Math.max(1, quantity), item.maxQuantity) }\n          : item\n      )\n    );\n  };\n\n  const updateItemReason = (productId: string, reason: ReturnReason) => {\n    setReturnItems(prev =>\n      prev.map(item =>\n        item.productId === productId\n          ? { ...item, reason }\n          : item\n      )\n    );\n  };\n\n  const selectedItems = returnItems.filter(item => item.selected);\n\n  const calculateRefund = () => {\n    const subtotal = selectedItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    const shipping = refundShipping && selectedOrder ? selectedOrder.shipping : 0;\n    const restockingFee = subtotal * (restockingFeePercent / 100);\n    return {\n      subtotal,\n      shipping,\n      restockingFee,\n      total: subtotal + shipping - restockingFee,\n    };\n  };\n\n  const handleSubmit = () => {\n    if (!selectedOrder || selectedItems.length === 0) {\n      error('Please select at least one item to return');\n      return;\n    }\n\n    const refund = calculateRefund();\n    const returnNumber = `RET-${String(state.returns.length + 1).padStart(4, '0')}`;\n\n    const newReturn: Return = {\n      id: `return-${Date.now()}`,\n      returnNumber,\n      orderId: selectedOrder.id,\n      orderNumber: selectedOrder.orderNumber,\n      channel: selectedOrder.channel,\n      status: 'requested',\n      customer: {\n        name: selectedOrder.customer.name,\n        email: selectedOrder.customer.email,\n      },\n      items: selectedItems.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        quantity: item.quantity,\n        quantityReceived: 0,\n        reason: item.reason,\n        refundAmount: item.price * item.quantity,\n      })),\n      returnShipping: {},\n      refund: {\n        subtotal: refund.subtotal,\n        shipping: refund.shipping,\n        restockingFee: refund.restockingFee,\n        total: refund.total,\n      },\n      notes: notes || undefined,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    dispatch({ type: 'ADD_RETURN', payload: newReturn });\n    success(`Return ${returnNumber} created successfully`);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  const refund = calculateRefund();\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-center justify-center p-4\">\n        {/* Backdrop */}\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\" onClick={onClose}></div>\n\n        {/* Modal */}\n        <div className=\"relative bg-slate-900 border border-slate-700/50 rounded-2xl shadow-2xl w-full max-w-3xl\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-slate-700/50\">\n            <div>\n              <h2 className=\"text-xl font-bold text-white\">Create Return</h2>\n              <p className=\"text-sm text-slate-400\">\n                {step === 'order' && 'Select an order to create a return for'}\n                {step === 'items' && 'Select items to return'}\n                {step === 'details' && 'Review and confirm return details'}\n              </p>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n            >\n              <i className=\"fas fa-times\"></i>\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6 max-h-[60vh] overflow-y-auto\">\n            {/* Step 1: Select Order */}\n            {step === 'order' && (\n              <div className=\"space-y-4\">\n                {/* Search */}\n                <div className=\"relative\">\n                  <i className=\"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-500\"></i>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search orders by number or customer...\"\n                    value={orderSearch}\n                    onChange={(e) => setOrderSearch(e.target.value)}\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500\"\n                  />\n                </div>\n\n                {/* Orders List */}\n                <div className=\"space-y-2\">\n                  {eligibleOrders.length === 0 ? (\n                    <div className=\"text-center py-8 text-slate-500\">\n                      <i className=\"fas fa-box-open text-4xl mb-3\"></i>\n                      <p>No eligible orders found</p>\n                      <p className=\"text-sm\">Only shipped or delivered orders can be returned</p>\n                    </div>\n                  ) : (\n                    eligibleOrders.map(order => (\n                      <button\n                        key={order.id}\n                        onClick={() => handleSelectOrder(order)}\n                        className=\"w-full p-4 bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700/50 rounded-lg text-left transition-colors\"\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <div className=\"font-medium text-white\">{order.orderNumber}</div>\n                            <div className=\"text-sm text-slate-400\">{order.customer.name}</div>\n                          </div>\n                          <div className=\"text-right\">\n                            <div className=\"text-white\">{formatCurrency(order.total)}</div>\n                            <div className=\"text-sm text-slate-400\">\n                              {order.items.reduce((sum, i) => sum + i.quantity, 0)} items\n                            </div>\n                          </div>\n                        </div>\n                      </button>\n                    ))\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Step 2: Select Items */}\n            {step === 'items' && selectedOrder && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-slate-800/30 rounded-lg p-4 mb-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"text-white font-medium\">{selectedOrder.orderNumber}</div>\n                      <div className=\"text-sm text-slate-400\">{selectedOrder.customer.name}</div>\n                    </div>\n                    <button\n                      onClick={() => { setStep('order'); setSelectedOrder(null); }}\n                      className=\"text-sm text-emerald-400 hover:underline\"\n                    >\n                      Change Order\n                    </button>\n                  </div>\n                </div>\n\n                <p className=\"text-sm text-slate-400\">Select the items to return:</p>\n\n                <div className=\"space-y-3\">\n                  {returnItems.map(item => (\n                    <div\n                      key={item.productId}\n                      className={`p-4 border rounded-lg transition-colors ${\n                        item.selected\n                          ? 'border-emerald-500/50 bg-emerald-500/10'\n                          : 'border-slate-700/50 bg-slate-800/30'\n                      }`}\n                    >\n                      <div className=\"flex items-start gap-4\">\n                        <button\n                          onClick={() => toggleItem(item.productId)}\n                          className={`mt-1 w-5 h-5 rounded border flex items-center justify-center ${\n                            item.selected\n                              ? 'bg-emerald-500 border-emerald-500 text-white'\n                              : 'border-slate-600 text-transparent'\n                          }`}\n                        >\n                          <i className=\"fas fa-check text-xs\"></i>\n                        </button>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <div className=\"text-white font-medium\">{item.productName}</div>\n                              <div className=\"text-sm text-slate-400\">SKU: {item.sku}</div>\n                            </div>\n                            <div className=\"text-right\">\n                              <div className=\"text-white\">{formatCurrency(item.price)}</div>\n                              <div className=\"text-sm text-slate-400\">Max qty: {item.maxQuantity}</div>\n                            </div>\n                          </div>\n\n                          {item.selected && (\n                            <div className=\"mt-4 grid grid-cols-2 gap-4\">\n                              <div>\n                                <label className=\"block text-sm text-slate-400 mb-1\">Quantity</label>\n                                <input\n                                  type=\"number\"\n                                  min=\"1\"\n                                  max={item.maxQuantity}\n                                  value={item.quantity}\n                                  onChange={(e) => updateItemQuantity(item.productId, parseInt(e.target.value) || 1)}\n                                  className=\"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white\"\n                                />\n                              </div>\n                              <div>\n                                <label className=\"block text-sm text-slate-400 mb-1\">Reason</label>\n                                <select\n                                  value={item.reason}\n                                  onChange={(e) => updateItemReason(item.productId, e.target.value as ReturnReason)}\n                                  className=\"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white\"\n                                >\n                                  {Object.entries(reasonLabels).map(([key, label]) => (\n                                    <option key={key} value={key}>{label}</option>\n                                  ))}\n                                </select>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Step 3: Details */}\n            {step === 'details' && selectedOrder && (\n              <div className=\"space-y-6\">\n                {/* Selected Items Summary */}\n                <div>\n                  <h3 className=\"text-white font-medium mb-3\">Return Items</h3>\n                  <div className=\"bg-slate-800/30 rounded-lg overflow-hidden\">\n                    <table className=\"w-full\">\n                      <thead className=\"bg-slate-800/50\">\n                        <tr className=\"text-left text-xs text-slate-400 uppercase\">\n                          <th className=\"px-4 py-2\">Product</th>\n                          <th className=\"px-4 py-2 text-center\">Qty</th>\n                          <th className=\"px-4 py-2\">Reason</th>\n                          <th className=\"px-4 py-2 text-right\">Refund</th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"divide-y divide-slate-700/50\">\n                        {selectedItems.map(item => (\n                          <tr key={item.productId}>\n                            <td className=\"px-4 py-3\">\n                              <div className=\"text-white\">{item.productName}</div>\n                              <div className=\"text-xs text-slate-400\">{item.sku}</div>\n                            </td>\n                            <td className=\"px-4 py-3 text-center text-white\">{item.quantity}</td>\n                            <td className=\"px-4 py-3 text-slate-300 text-sm\">{reasonLabels[item.reason]}</td>\n                            <td className=\"px-4 py-3 text-right text-white\">{formatCurrency(item.price * item.quantity)}</td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n\n                {/* Refund Options */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"flex items-center gap-2 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={refundShipping}\n                        onChange={(e) => setRefundShipping(e.target.checked)}\n                        className=\"w-4 h-4 rounded border-slate-600 bg-slate-700 text-emerald-500 focus:ring-emerald-500\"\n                      />\n                      <span className=\"text-slate-300\">Refund shipping ({formatCurrency(selectedOrder.shipping)})</span>\n                    </label>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm text-slate-400 mb-1\">Restocking Fee %</label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      max=\"100\"\n                      value={restockingFeePercent}\n                      onChange={(e) => setRestockingFeePercent(parseInt(e.target.value) || 0)}\n                      className=\"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white\"\n                    />\n                  </div>\n                </div>\n\n                {/* Refund Summary */}\n                <div className=\"bg-slate-800/30 rounded-lg p-4\">\n                  <h3 className=\"text-white font-medium mb-3\">Refund Summary</h3>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-slate-300\">\n                      <span>Items Subtotal</span>\n                      <span>{formatCurrency(refund.subtotal)}</span>\n                    </div>\n                    <div className=\"flex justify-between text-slate-300\">\n                      <span>Shipping Refund</span>\n                      <span>{formatCurrency(refund.shipping)}</span>\n                    </div>\n                    {refund.restockingFee > 0 && (\n                      <div className=\"flex justify-between text-red-400\">\n                        <span>Restocking Fee</span>\n                        <span>-{formatCurrency(refund.restockingFee)}</span>\n                      </div>\n                    )}\n                    <div className=\"pt-2 border-t border-slate-700 flex justify-between text-lg\">\n                      <span className=\"text-white font-semibold\">Total Refund</span>\n                      <span className=\"text-emerald-400 font-bold\">{formatCurrency(refund.total)}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Notes */}\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Notes (optional)</label>\n                  <textarea\n                    value={notes}\n                    onChange={(e) => setNotes(e.target.value)}\n                    rows={3}\n                    placeholder=\"Add any notes about this return...\"\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500 resize-none\"\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-between p-6 border-t border-slate-700/50\">\n            <div>\n              {step !== 'order' && (\n                <button\n                  onClick={() => setStep(step === 'details' ? 'items' : 'order')}\n                  className=\"px-4 py-2 text-slate-400 hover:text-white transition-colors flex items-center gap-2\"\n                >\n                  <i className=\"fas fa-arrow-left\"></i>\n                  Back\n                </button>\n              )}\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              {step === 'items' && (\n                <button\n                  onClick={() => setStep('details')}\n                  disabled={selectedItems.length === 0}\n                  className=\"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg transition-colors flex items-center gap-2\"\n                >\n                  Continue\n                  <i className=\"fas fa-arrow-right\"></i>\n                </button>\n              )}\n              {step === 'details' && (\n                <button\n                  onClick={handleSubmit}\n                  className=\"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2\"\n                >\n                  <i className=\"fas fa-check\"></i>\n                  Create Return\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 14056, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/1TB%20SSD/inventory-app/components/modals/index.ts"],"sourcesContent":["/**\n * Modal component exports\n */\n\nexport { AddProductModal } from './AddProductModal';\nexport { AdjustStockModal } from './AdjustStockModal';\nexport { ImportCSVModal } from './ImportCSVModal';\nexport { BundleModal } from './BundleModal';\nexport { BundleDetailModal } from './BundleDetailModal';\nexport { CreateOrderModal } from './CreateOrderModal';\nexport { EditOrderModal } from './EditOrderModal';\nexport { CreatePOModal } from './CreatePOModal';\nexport { ReceivePOModal } from './ReceivePOModal';\nexport { CreateWorkOrderModal } from './CreateWorkOrderModal';\nexport { WorkOrderDetailModal } from './WorkOrderDetailModal';\nexport { LocationModal } from './LocationModal';\nexport { BoxModal } from './BoxModal';\nexport { CreateReturnModal } from './CreateReturnModal';\n"],"names":[],"mappings":";AAAA;;CAEC,GAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}}]
}