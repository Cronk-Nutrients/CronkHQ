(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77524,31129,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(36180);var r=e.i(98925),o=e.i(76009),i=e.i(97815);let n={free:{users:1,products:50,ordersPerMonth:100,locations:1},starter:{users:3,products:500,ordersPerMonth:1e3,locations:2},professional:{users:10,products:5e3,ordersPerMonth:1e4,locations:5},enterprise:{users:-1,products:-1,ordersPerMonth:-1,locations:-1}},s={timezone:"America/Chicago",currency:"USD",dateFormat:"MM/DD/YYYY",autoJoinDomain:!1,requireApproval:!1,defaultMemberRole:"staff"},d={owner:{canManageOrganization:!0,canManageMembers:!0,canManageIntegrations:!0,canManageProducts:!0,canManageOrders:!0,canManageInventory:!0,canViewReports:!0,canExportData:!0},admin:{canManageOrganization:!0,canManageMembers:!0,canManageIntegrations:!0,canManageProducts:!0,canManageOrders:!0,canManageInventory:!0,canViewReports:!0,canExportData:!0},manager:{canManageOrganization:!1,canManageMembers:!1,canManageIntegrations:!1,canManageProducts:!0,canManageOrders:!0,canManageInventory:!0,canViewReports:!0,canExportData:!0},staff:{canManageOrganization:!1,canManageMembers:!1,canManageIntegrations:!1,canManageProducts:!1,canManageOrders:!0,canManageInventory:!0,canViewReports:!1,canExportData:!1},viewer:{canManageOrganization:!1,canManageMembers:!1,canManageIntegrations:!1,canManageProducts:!1,canManageOrders:!1,canManageInventory:!1,canViewReports:!0,canExportData:!1}};function l(e,t){return d[e]?.[t]??!1}function c(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,50)}function u(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="";for(let a=0;a<32;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}e.s(["DEFAULT_ORG_SETTINGS",0,s,"PLAN_LIMITS",0,n,"ROLE_PERMISSIONS",0,d,"generateInviteToken",()=>u,"generateSlug",()=>c,"hasPermission",()=>l],31129);let p={id:"demo-org-id",name:"Cronk Nutrients (Demo)",slug:"cronk-demo",plan:"enterprise",planLimits:n.enterprise,settings:{...s,timezone:"America/Chicago",currency:"USD"},createdAt:new Date,updatedAt:new Date,ownerId:"demo-user-id"},m={id:"demo-member-id",organizationId:"demo-org-id",userId:"demo-user-id",email:"demo@cronknutrients.com",displayName:"Demo User",role:"owner",joinedAt:new Date},y=(0,a.createContext)(void 0);function g({children:e}){let{user:g,userProfile:D,isDemo:w,loading:h}=(0,i.useAuth)(),[E,b]=(0,a.useState)(null),[T,f]=(0,a.useState)(null),[A,I]=(0,a.useState)([]),[_,S]=(0,a.useState)([]),[v,N]=(0,a.useState)(!0),[C,R]=(0,a.useState)(null),L=T?.role==="owner",O=T?.role==="admin"||T?.role==="owner",k=T?d[T.role]:null,P=!!E,M=!h&&!w&&!!g&&!E&&!v,x=(0,a.useCallback)(()=>R(null),[]),U=(0,a.useCallback)(async e=>{try{let t=await (0,r.getDoc)((0,r.doc)(o.db,"organizations",e));if(t.exists()){let e=t.data();return{...e,id:t.id,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}}return null}catch(e){return console.error("Error fetching organization:",e),null}},[]),z=(0,a.useCallback)(async e=>{try{let t=(0,r.query)((0,r.collection)(o.db,"organization_members"),(0,r.where)("userId","==",e)),a=await (0,r.getDocs)(t);if(!a.empty){let e=a.docs[0],t=e.data();return{...t,id:e.id,joinedAt:t.joinedAt?.toDate()||new Date,lastActiveAt:t.lastActiveAt?.toDate()}}return null}catch(e){return console.error("Error fetching membership:",e),null}},[]),B=(0,a.useCallback)(async e=>{try{let t=(0,r.query)((0,r.collection)(o.db,"organization_members"),(0,r.where)("organizationId","==",e));return(await (0,r.getDocs)(t)).docs.map(e=>{let t=e.data();return{...t,id:e.id,joinedAt:t.joinedAt?.toDate()||new Date,lastActiveAt:t.lastActiveAt?.toDate()}})}catch(e){return console.error("Error fetching members:",e),[]}},[]),q=(0,a.useCallback)(async e=>{try{let t=(0,r.query)((0,r.collection)(o.db,"organization_invites"),(0,r.where)("organizationId","==",e),(0,r.where)("status","==","pending"));return(await (0,r.getDocs)(t)).docs.map(e=>{let t=e.data();return{...t,id:e.id,createdAt:t.createdAt?.toDate()||new Date,expiresAt:t.expiresAt?.toDate()||new Date,acceptedAt:t.acceptedAt?.toDate()}})}catch(e){return console.error("Error fetching invites:",e),[]}},[]);(0,a.useEffect)(()=>{if(!h){if(w){b(p),f(m),I([m]),S([]),N(!1);return}if(!g){b(null),f(null),I([]),S([]),N(!1);return}(async()=>{N(!0);try{let e=await z(g.uid);if(e){f(e);let t=await U(e.organizationId);if(t)if(b(t),l(e.role,"canManageMembers")){let t=await B(e.organizationId);I(t);let a=await q(e.organizationId);S(a)}else I([e]),S([])}else b(null),f(null),I([]),S([])}catch(e){console.error("Error initializing organization:",e),R("Failed to load organization data")}finally{N(!1)}})()}},[g,w,h,z,U,B,q]);let j=(0,a.useCallback)(async(e,t="free")=>{if(!g)throw Error("Must be logged in to create an organization");if(w)throw Error("Cannot create organization in demo mode");try{R(null);let a=c(e),i=!0,d=0;for(;i&&d<10;){let t=(0,r.query)((0,r.collection)(o.db,"organizations"),(0,r.where)("slug","==",a));(i=!(await (0,r.getDocs)(t)).empty)&&(a=`${c(e)}-${Math.random().toString(36).substring(2,6)}`,d++)}let l={name:e,slug:a,plan:t,planLimits:n[t],settings:s,ownerId:g.uid,createdAt:(0,r.serverTimestamp)(),updatedAt:(0,r.serverTimestamp)()},u=await (0,r.addDoc)((0,r.collection)(o.db,"organizations"),l),p=D?.displayName||g.displayName||null,m={organizationId:u.id,userId:g.uid,email:g.email||"",...p&&{displayName:p},role:"owner",joinedAt:(0,r.serverTimestamp)()};await (0,r.addDoc)((0,r.collection)(o.db,"organization_members"),m),await (0,r.setDoc)((0,r.doc)(o.db,"users",g.uid),{organizationId:u.id},{merge:!0});let y={...l,id:u.id,createdAt:new Date,updatedAt:new Date},w={...m,id:"temp-id",displayName:p||"",joinedAt:new Date};return b(y),f(w),I([w]),y}catch(e){throw console.error("Error creating organization:",e),R("Failed to create organization"),e}},[g,D,w]),F=(0,a.useCallback)(async e=>{if(!E||!T)throw Error("No organization");if(!l(T.role,"canManageOrganization"))throw Error("Insufficient permissions");if(w)throw Error("Cannot update organization in demo mode");try{R(null),await (0,r.updateDoc)((0,r.doc)(o.db,"organizations",E.id),{...e,updatedAt:(0,r.serverTimestamp)()}),b(t=>t?{...t,...e,updatedAt:new Date}:null)}catch(e){throw console.error("Error updating organization:",e),R("Failed to update organization"),e}},[E,T,w]),Q=(0,a.useCallback)(async e=>{if(!g)throw Error("Must be logged in");if(w)throw Error("Cannot switch organization in demo mode");try{N(!0),R(null);let t=(0,r.query)((0,r.collection)(o.db,"organization_members"),(0,r.where)("organizationId","==",e),(0,r.where)("userId","==",g.uid)),a=await (0,r.getDocs)(t);if(a.empty)throw Error("You are not a member of this organization");let i=await U(e);if(!i)throw Error("Organization not found");let n=a.docs[0],s=n.data(),d={...s,id:n.id,joinedAt:s.joinedAt?.toDate()||new Date};if(await (0,r.setDoc)((0,r.doc)(o.db,"users",g.uid),{organizationId:e},{merge:!0}),b(i),f(d),l(d.role,"canManageMembers")){let t=await B(e);I(t);let a=await q(e);S(a)}else I([d]),S([])}catch(e){throw console.error("Error switching organization:",e),R("Failed to switch organization"),e}finally{N(!1)}},[g,w,U,B,q]),G=(0,a.useCallback)(async(e,t)=>{if(!E||!T||!g)throw Error("No organization");if(!l(T.role,"canManageMembers"))throw Error("Insufficient permissions");if(w)throw Error("Cannot invite members in demo mode");try{R(null);let a=(0,r.query)((0,r.collection)(o.db,"organization_members"),(0,r.where)("organizationId","==",E.id),(0,r.where)("email","==",e.toLowerCase()));if(!(await (0,r.getDocs)(a)).empty)throw Error("User is already a member");let i=(0,r.query)((0,r.collection)(o.db,"organization_invites"),(0,r.where)("organizationId","==",E.id),(0,r.where)("email","==",e.toLowerCase()),(0,r.where)("status","==","pending"));if(!(await (0,r.getDocs)(i)).empty)throw Error("An invitation is already pending for this email");let n=D?.displayName||g.displayName||null,s={organizationId:E.id,email:e.toLowerCase(),role:t,invitedBy:g.uid,...n&&{invitedByName:n},organizationName:E.name,status:"pending",token:u(),createdAt:(0,r.serverTimestamp)(),expiresAt:r.Timestamp.fromDate(new Date(Date.now()+6048e5))},d=await (0,r.addDoc)((0,r.collection)(o.db,"organization_invites"),s),l={...s,id:d.id,createdAt:new Date,expiresAt:new Date(Date.now()+6048e5)};return S(e=>[...e,l]),l}catch(e){throw console.error("Error inviting member:",e),R(e instanceof Error?e.message:"Failed to send invitation"),e}},[E,T,g,D,w]),H=(0,a.useCallback)(async(e,t)=>{if(!E||!T)throw Error("No organization");if(!l(T.role,"canManageMembers"))throw Error("Insufficient permissions");if(w)throw Error("Cannot update members in demo mode");try{R(null),await (0,r.updateDoc)((0,r.doc)(o.db,"organization_members",e),{role:t}),I(a=>a.map(a=>a.id===e?{...a,role:t}:a))}catch(e){throw console.error("Error updating member role:",e),R("Failed to update member role"),e}},[E,T,w]),K=(0,a.useCallback)(async e=>{if(!E||!T)throw Error("No organization");if(!l(T.role,"canManageMembers"))throw Error("Insufficient permissions");if(w)throw Error("Cannot remove members in demo mode");try{R(null);let t=A.find(t=>t.id===e);if(t?.role==="owner")throw Error("Cannot remove the organization owner");await (0,r.deleteDoc)((0,r.doc)(o.db,"organization_members",e)),I(t=>t.filter(t=>t.id!==e))}catch(e){throw console.error("Error removing member:",e),R(e instanceof Error?e.message:"Failed to remove member"),e}},[E,T,A,w]),W=(0,a.useCallback)(async e=>{if(!E||!T)throw Error("No organization");if(!l(T.role,"canManageMembers"))throw Error("Insufficient permissions");if(w)throw Error("Cannot revoke invites in demo mode");try{R(null),await (0,r.updateDoc)((0,r.doc)(o.db,"organization_invites",e),{status:"revoked"}),S(t=>t.filter(t=>t.id!==e))}catch(e){throw console.error("Error revoking invite:",e),R("Failed to revoke invitation"),e}},[E,T,w]),V=(0,a.useCallback)(async e=>{try{let t=(0,r.query)((0,r.collection)(o.db,"organization_invites"),(0,r.where)("email","==",e.toLowerCase()),(0,r.where)("status","==","pending"));return(await (0,r.getDocs)(t)).docs.map(e=>{let t=e.data();return{...t,id:e.id,createdAt:t.createdAt?.toDate()||new Date,expiresAt:t.expiresAt?.toDate()||new Date}}).filter(e=>e.expiresAt>new Date)}catch(e){return console.error("Error checking invites:",e),[]}},[]),$=(0,a.useCallback)(async e=>{if(!g)throw Error("Must be logged in");if(w)throw Error("Cannot accept invites in demo mode");try{N(!0),R(null);let t=await (0,r.getDoc)((0,r.doc)(o.db,"organization_invites",e));if(!t.exists())throw Error("Invite not found");let a=t.data();if("pending"!==a.status)throw Error("Invite is no longer valid");if(a.email!==g.email?.toLowerCase())throw Error("This invite is for a different email");if(a.expiresAt.toDate()<new Date)throw Error("Invite has expired");let i=D?.displayName||g.displayName||null,n={organizationId:a.organizationId,userId:g.uid,email:g.email,...i&&{displayName:i},role:a.role,invitedBy:a.invitedBy,joinedAt:(0,r.serverTimestamp)()};await (0,r.addDoc)((0,r.collection)(o.db,"organization_members"),n),await (0,r.updateDoc)((0,r.doc)(o.db,"organization_invites",e),{status:"accepted",acceptedAt:(0,r.serverTimestamp)()}),await (0,r.setDoc)((0,r.doc)(o.db,"users",g.uid),{organizationId:a.organizationId},{merge:!0});let s=await U(a.organizationId);s&&(b(s),f({...n,id:"new-member",displayName:i||"",joinedAt:new Date}))}catch(e){throw console.error("Error accepting invite:",e),R(e instanceof Error?e.message:"Failed to accept invitation"),e}finally{N(!1)}},[g,D,w,U]),Y=(0,a.useCallback)(async e=>{if(w)throw Error("Cannot decline invites in demo mode");try{R(null),await (0,r.updateDoc)((0,r.doc)(o.db,"organization_invites",e),{status:"revoked"})}catch(e){throw console.error("Error declining invite:",e),R("Failed to decline invitation"),e}},[w]),J=(0,a.useCallback)(async()=>{if(E&&!w)try{N(!0);let e=await U(E.id);if(e&&b(e),T&&l(T.role,"canManageMembers")){let e=await B(E.id);I(e);let t=await q(E.id);S(t)}}catch(e){console.error("Error refreshing organization:",e)}finally{N(!1)}},[E,T,w,U,B,q]);return(0,t.jsx)(y.Provider,{value:{organization:E,membership:T,members:A,invites:_,loading:v,error:C,isOwner:L,isAdmin:O,permissions:k,hasOrganization:P,needsSetup:M,createOrganization:j,updateOrganization:F,switchOrganization:Q,inviteMember:G,updateMemberRole:H,removeMember:K,revokeInvite:W,checkPendingInvites:V,acceptInvite:$,declineInvite:Y,clearError:x,refreshOrganization:J},children:e})}function D(){let e=(0,a.useContext)(y);if(void 0===e)throw Error("useOrganization must be used within an OrganizationProvider");return e}e.s(["OrganizationProvider",()=>g,"useOrganization",()=>D],77524)},80809,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let r=(0,a.createContext)(void 0);function o({children:e}){let[o,i]=(0,a.useState)([]),n=(0,a.useCallback)((e,t,a=4e3)=>{let r=Math.random().toString(36).substring(7);i(o=>[...o,{id:r,type:e,message:t,duration:a}]),a>0&&setTimeout(()=>{i(e=>e.filter(e=>e.id!==r))},a)},[]),s=(0,a.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e))},[]),l=(0,a.useCallback)((e,t)=>{n("success",e,t)},[n]),c=(0,a.useCallback)((e,t)=>{n("error",e,t)},[n]),u=(0,a.useCallback)((e,t)=>{n("info",e,t)},[n]),p=(0,a.useCallback)((e,t)=>{n("warning",e,t)},[n]);return(0,t.jsxs)(r.Provider,{value:{toasts:o,addToast:n,removeToast:s,success:l,error:c,info:u,warning:p},children:[e,(0,t.jsx)(d,{toasts:o,removeToast:s})]})}function i(){let e=(0,a.useContext)(r);if(!e)throw Error("useToast must be used within ToastProvider");return e}let n={success:"fa-check-circle",error:"fa-exclamation-circle",info:"fa-info-circle",warning:"fa-exclamation-triangle"},s={success:{bg:"bg-emerald-500/20",border:"border-emerald-500/30",text:"text-emerald-400"},error:{bg:"bg-red-500/20",border:"border-red-500/30",text:"text-red-400"},info:{bg:"bg-blue-500/20",border:"border-blue-500/30",text:"text-blue-400"},warning:{bg:"bg-amber-500/20",border:"border-amber-500/30",text:"text-amber-400"}};function d({toasts:e,removeToast:a}){return 0===e.length?null:(0,t.jsx)("div",{className:"fixed bottom-4 right-4 z-50 space-y-2 max-w-md",children:e.map(e=>{let r=s[e.type],o=n[e.type];return(0,t.jsxs)("div",{className:`
              flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg border backdrop-blur-sm
              animate-in slide-in-from-right-full duration-300
              ${r.bg} ${r.border} ${r.text}
            `,role:"alert",children:[(0,t.jsx)("i",{className:`fas ${o} flex-shrink-0`}),(0,t.jsx)("span",{className:"text-sm flex-1",children:e.message}),(0,t.jsx)("button",{onClick:()=>a(e.id),className:"ml-2 text-slate-400 hover:text-white transition-colors flex-shrink-0","aria-label":"Dismiss",children:(0,t.jsx)("i",{className:"fas fa-times text-xs"})})]},e.id)})})}e.s(["ToastProvider",()=>o,"useToast",()=>i])},73146,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(97815);function o(e,t){switch(t.type){case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_INITIALIZED":return{...e,isInitialized:t.payload};case"RESET_STATE":return{...i,isLoading:!1,isInitialized:!0};case"SET_PRODUCTS":return{...e,products:t.payload};case"ADD_PRODUCT":return{...e,products:[...e.products,t.payload]};case"UPDATE_PRODUCT":return{...e,products:e.products.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_PRODUCT":return{...e,products:e.products.filter(e=>e.id!==t.payload)};case"SET_INVENTORY":return{...e,inventory:t.payload};case"UPDATE_INVENTORY":return{...e,inventory:e.inventory.map(e=>e.productId===t.payload.productId&&e.locationId===t.payload.locationId?t.payload:e)};case"ADJUST_STOCK":return{...e,inventory:e.inventory.map(e=>e.productId===t.payload.productId&&e.locationId===t.payload.locationId?{...e,quantity:e.quantity+t.payload.adjustment,updatedAt:new Date}:e)};case"SET_LOCATIONS":return{...e,locations:t.payload};case"ADD_LOCATION":return{...e,locations:[...e.locations,t.payload]};case"UPDATE_LOCATION":return{...e,locations:e.locations.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_LOCATION":return{...e,locations:e.locations.filter(e=>e.id!==t.payload)};case"SET_ORDERS":return{...e,orders:t.payload};case"ADD_ORDER":return{...e,orders:[...e.orders,t.payload]};case"UPDATE_ORDER":return{...e,orders:e.orders.map(e=>e.id===t.payload.id?t.payload:e)};case"UPDATE_ORDER_STATUS":return{...e,orders:e.orders.map(e=>e.id===t.payload.orderId?{...e,status:t.payload.status,updatedAt:new Date}:e)};case"DELETE_ORDER":return{...e,orders:e.orders.filter(e=>e.id!==t.payload)};case"SET_PURCHASE_ORDERS":return{...e,purchaseOrders:t.payload};case"ADD_PURCHASE_ORDER":return{...e,purchaseOrders:[...e.purchaseOrders,t.payload]};case"UPDATE_PURCHASE_ORDER":return{...e,purchaseOrders:e.purchaseOrders.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_PURCHASE_ORDER":return{...e,purchaseOrders:e.purchaseOrders.filter(e=>e.id!==t.payload)};case"SET_WORK_ORDERS":return{...e,workOrders:t.payload};case"ADD_WORK_ORDER":return{...e,workOrders:[...e.workOrders,t.payload]};case"UPDATE_WORK_ORDER":return{...e,workOrders:e.workOrders.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_WORK_ORDER":return{...e,workOrders:e.workOrders.filter(e=>e.id!==t.payload)};case"SET_BUNDLES":return{...e,bundles:t.payload};case"ADD_BUNDLE":return{...e,bundles:[...e.bundles,t.payload]};case"UPDATE_BUNDLE":return{...e,bundles:e.bundles.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_BUNDLE":return{...e,bundles:e.bundles.filter(e=>e.id!==t.payload)};case"SET_SHIPMENTS":return{...e,shipments:t.payload};case"ADD_SHIPMENT":return{...e,shipments:[...e.shipments,t.payload]};case"UPDATE_SHIPMENT":return{...e,shipments:e.shipments.map(e=>e.id===t.payload.id?t.payload:e)};case"SET_BOXES":return{...e,boxes:t.payload};case"ADD_BOX":return{...e,boxes:[...e.boxes,t.payload]};case"UPDATE_BOX":return{...e,boxes:e.boxes.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_BOX":return{...e,boxes:e.boxes.filter(e=>e.id!==t.payload)};case"SET_SUPPLIERS":return{...e,suppliers:t.payload};case"ADD_SUPPLIER":return{...e,suppliers:[...e.suppliers,t.payload]};case"UPDATE_SUPPLIER":return{...e,suppliers:e.suppliers.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_SUPPLIER":return{...e,suppliers:e.suppliers.filter(e=>e.id!==t.payload),productSuppliers:e.productSuppliers.filter(e=>e.supplierId!==t.payload)};case"SET_PRODUCT_SUPPLIERS":return{...e,productSuppliers:t.payload};case"ADD_PRODUCT_SUPPLIER":return{...e,productSuppliers:[...e.productSuppliers,t.payload]};case"UPDATE_PRODUCT_SUPPLIER":return{...e,productSuppliers:e.productSuppliers.map(e=>e.productId===t.payload.productId&&e.supplierId===t.payload.supplierId?t.payload:e)};case"REMOVE_PRODUCT_SUPPLIER":return{...e,productSuppliers:e.productSuppliers.filter(e=>e.productId!==t.payload.productId||e.supplierId!==t.payload.supplierId)};case"UPDATE_SETTINGS":return{...e,settings:{...e.settings,...t.payload}};case"SET_PICKING_BATCHES":return{...e,pickingBatches:t.payload};case"ADD_PICKING_BATCH":return{...e,pickingBatches:[...e.pickingBatches,t.payload]};case"UPDATE_PICKING_BATCH":return{...e,pickingBatches:e.pickingBatches.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_PICKING_BATCH":return{...e,pickingBatches:e.pickingBatches.filter(e=>e.id!==t.payload),orders:e.orders.map(e=>e.pickingBatchId===t.payload?{...e,pickingBatchId:void 0}:e)};case"ASSIGN_ORDER_TO_BATCH":{let{orderId:a,batchId:r}=t.payload,o=e.orders.map(e=>e.id===a?{...e,pickingBatchId:r||void 0}:e),i=e.pickingBatches;return i=r?e.pickingBatches.map(e=>e.id!==r||e.orderIds.includes(a)?e.id!==r&&e.orderIds.includes(a)?{...e,orderIds:e.orderIds.filter(e=>e!==a)}:e:{...e,orderIds:[...e.orderIds,a]}):e.pickingBatches.map(e=>({...e,orderIds:e.orderIds.filter(e=>e!==a)})),{...e,orders:o,pickingBatches:i}}case"SET_RETURNS":return{...e,returns:t.payload};case"ADD_RETURN":return{...e,returns:[...e.returns,t.payload]};case"UPDATE_RETURN":return{...e,returns:e.returns.map(e=>e.id===t.payload.id?t.payload:e)};case"SET_STOCK_COUNTS":return{...e,stockCounts:t.payload};case"ADD_STOCK_COUNT":return{...e,stockCounts:[...e.stockCounts,t.payload]};case"UPDATE_STOCK_COUNT":return{...e,stockCounts:e.stockCounts.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_STOCK_COUNT":return{...e,stockCounts:e.stockCounts.filter(e=>e.id!==t.payload)};case"SET_TRANSFERS":return{...e,transfers:t.payload};case"ADD_TRANSFER":return{...e,transfers:[...e.transfers,t.payload]};case"UPDATE_TRANSFER":return{...e,transfers:e.transfers.map(e=>e.id===t.payload.id?t.payload:e)};case"SET_AUTOMATION_RULES":return{...e,automationRules:t.payload};case"ADD_AUTOMATION_RULE":return{...e,automationRules:[...e.automationRules,t.payload]};case"UPDATE_AUTOMATION_RULE":return{...e,automationRules:e.automationRules.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_AUTOMATION_RULE":return{...e,automationRules:e.automationRules.filter(e=>e.id!==t.payload)};case"TOGGLE_RULE":return{...e,automationRules:e.automationRules.map(e=>e.id===t.payload?{...e,enabled:!e.enabled,updatedAt:new Date}:e)};case"SET_SERIAL_NUMBERS":return{...e,serialNumbers:t.payload};case"ADD_SERIAL_NUMBERS":return{...e,serialNumbers:[...e.serialNumbers,...t.payload]};case"UPDATE_SERIAL_NUMBER":return{...e,serialNumbers:e.serialNumbers.map(e=>e.id===t.payload.id?t.payload:e)};case"RESERVE_SERIALS":return{...e,serialNumbers:e.serialNumbers.map(e=>t.payload.serials.includes(e.serial)?{...e,status:"reserved",salesOrderId:t.payload.orderId}:e)};case"SELL_SERIALS":return{...e,serialNumbers:e.serialNumbers.map(e=>t.payload.serials.includes(e.serial)?{...e,status:"sold",salesOrderId:t.payload.orderId,soldAt:new Date}:e)};case"RETURN_SERIAL":return{...e,serialNumbers:e.serialNumbers.map(e=>e.serial===t.payload.serial?{...e,status:t.payload.condition,salesOrderId:void 0,soldAt:void 0}:e)};case"ADD_SERIAL_MOVEMENT":return{...e,serialMovements:[...e.serialMovements,t.payload]};case"SET_LOTS":return{...e,lots:t.payload};case"ADD_LOT":return{...e,lots:[...e.lots,t.payload]};case"ADD_LOTS":return{...e,lots:[...e.lots,...t.payload]};case"UPDATE_LOT":return{...e,lots:e.lots.map(e=>e.id===t.payload.id?t.payload:e)};case"PICK_FROM_LOT":return{...e,lots:e.lots.map(e=>e.id===t.payload.lotId?{...e,quantity:e.quantity-t.payload.quantity,reservedQty:Math.max(0,e.reservedQty-t.payload.quantity)}:e)};case"RESERVE_LOT_QTY":return{...e,lots:e.lots.map(e=>e.id===t.payload.lotId?{...e,reservedQty:e.reservedQty+t.payload.quantity}:e)};case"RELEASE_LOT_QTY":return{...e,lots:e.lots.map(e=>e.id===t.payload.lotId?{...e,reservedQty:Math.max(0,e.reservedQty-t.payload.quantity)}:e)};case"RECALL_LOT":return{...e,lots:e.lots.map(e=>e.id===t.payload.lotId?{...e,status:"recalled",notes:t.payload.notes}:e)};case"QUARANTINE_LOT":return{...e,lots:e.lots.map(e=>e.id===t.payload.lotId?{...e,status:"quarantine",notes:t.payload.notes}:e)};case"ADD_LOT_MOVEMENT":return{...e,lotMovements:[...e.lotMovements,t.payload]};case"SET_PICKING_TOTES":return{...e,pickingTotes:t.payload};case"ADD_PICKING_TOTE":return{...e,pickingTotes:[...e.pickingTotes,t.payload]};case"UPDATE_PICKING_TOTE":return{...e,pickingTotes:e.pickingTotes.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_PICKING_TOTE":return{...e,pickingTotes:e.pickingTotes.filter(e=>e.id!==t.payload)};case"SET_FULFILLMENT_RULES":return{...e,fulfillmentRules:t.payload};case"ADD_FULFILLMENT_RULE":return{...e,fulfillmentRules:[...e.fulfillmentRules,t.payload]};case"UPDATE_FULFILLMENT_RULE":return{...e,fulfillmentRules:e.fulfillmentRules.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_FULFILLMENT_RULE":return{...e,fulfillmentRules:e.fulfillmentRules.filter(e=>e.id!==t.payload)};default:return e}}let i={products:[],inventory:[],locations:[],orders:[],purchaseOrders:[],workOrders:[],bundles:[],shipments:[],boxes:[],pickingBatches:[],pickingTotes:[],fulfillmentRules:[],returns:[],stockCounts:[],transfers:[],automationRules:[],serialNumbers:[],serialMovements:[],lots:[],lotMovements:[],suppliers:[],productSuppliers:[],settings:{companyName:"Cronk Nutrients",defaultLocation:"loc-1",gripperStickerEnabled:!0,gripperStickerSku:"LAB010R",smartBoxEnabled:!0,lowStockThreshold:50,pickingMode:"multi_tote",maxOrdersPerBatch:20,maxItemsPerBatch:100,autoReallocateIncomplete:!0},isLoading:!0,isInitialized:!1},n=(0,a.createContext)(void 0);function s({children:s}){let[d,l]=(0,a.useReducer)(o,i),{isDemo:c,loading:u,user:p}=(0,r.useAuth)();return(0,a.useEffect)(()=>{u||(async()=>{try{if(!c)return void l({type:"RESET_STATE"});let{products:t,locations:a,inventory:r,orders:o,purchaseOrders:i,workOrders:n,bundles:s,shippingBoxes:d}=await e.A(62377),u=a.map(e=>({id:e.id,name:e.name,type:e.type,address:void 0,isDefault:"loc-1"===e.id})),p=t.map(e=>({id:e.id,name:e.name,sku:e.sku,barcode:e.barcode,category:e.category,description:void 0,cost:{rolling:e.costs.base,fixed:e.costs.base},prices:{msrp:e.prices.msrp,shopify:e.prices.shopify,amazon:e.prices.amazon,wholesale:e.prices.wholesale},weight:{value:e.weight||0,unit:"lbs"},dimensions:e.dimensions||{length:0,width:0,height:0},reorderPoint:e.reorderPoint,supplier:e.defaultVendor,skus:{shopify:`SHOP-${e.sku}`,amazon:`AMZ-${e.sku}`},createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)})),m=r.map(e=>({productId:e.productId,locationId:e.locationId,quantity:e.quantity,binLocation:e.binLocation,updatedAt:new Date})),y=o.map(e=>{var t;return{id:e.id,orderNumber:e.orderNumber,veeqoId:e.externalId,channel:e.channel,status:({ready_to_ship:"ready",in_progress:"picking"})[t=e.status]||t,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,address:{street:e.shippingAddress.line1,city:e.shippingAddress.city,state:e.shippingAddress.state,zip:e.shippingAddress.postalCode,country:e.shippingAddress.country}},items:e.items.map(e=>({productId:e.productId||e.bundleId||"",productName:e.name,sku:e.sku,quantity:e.quantity,price:e.price,cost:e.cost,picked:!1})),subtotal:e.subtotal,shipping:e.shipping,tax:e.tax,discount:0,total:e.total,cogs:e.cogs,profit:e.profit,margin:e.marginPercent,trackingNumber:e.shipments?.[0]?.trackingNumber,carrier:e.shipments?.[0]?.carrier,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}}),g=i.map(e=>({id:e.id,poNumber:e.poNumber,supplier:e.supplier.name,status:e.status,currency:e.currency,expectedDate:e.expectedDate?new Date(e.expectedDate):void 0,items:e.items.map(e=>({productId:e.productId,productName:e.product?.name||"",sku:e.product?.sku||"",quantity:e.quantity,receivedQty:e.quantityReceived,unitCost:e.unitCost})),subtotal:e.subtotal,shipping:0,total:e.subtotalUSD,notes:e.notes,createdAt:new Date(e.createdAt),updatedAt:new Date(e.createdAt)})),D=n.map(e=>({id:e.id,woNumber:e.woNumber,status:e.status,outputProductId:e.outputProductId,outputProductName:e.outputProduct?.name||"",quantityToProduce:e.outputQuantity,quantityProduced:"completed"===e.status?e.outputQuantity:0,priority:"normal",components:e.inputs.map(e=>({productId:e.productId,productName:e.product?.name||"",quantityRequired:e.quantityRequired,quantityUsed:e.quantityUsed})),notes:e.notes,createdAt:new Date(e.createdAt),completedAt:e.completedAt?new Date(e.completedAt):void 0})),w=s.map(e=>({id:e.id,name:e.name,sku:e.sku,type:"virtual",description:e.description,prices:{msrp:e.prices.msrp,shopify:e.prices.shopify,amazon:e.prices.amazon,wholesale:e.prices.wholesale||.6*e.prices.msrp},compareAtPrices:e.compareAtPrices||{msrp:1.2*e.prices.msrp,shopify:1.2*(e.prices.shopify||e.prices.msrp),amazon:1.2*(e.prices.amazon||e.prices.msrp)},components:(e.components||[]).map(e=>({productId:e.productId,productName:e.product?.name||"",quantity:e.quantity})),createdAt:new Date,updatedAt:new Date})),h=d.map(e=>({id:e.id,name:e.name,sku:e.sku,innerLength:e.dimensions.length,innerWidth:e.dimensions.width,innerHeight:e.dimensions.height,maxWeight:e.maxWeight,cost:e.cost,smartBoxEligible:e.isSmartBoxEligible})),E=y.filter(e=>"shipped"===e.status||"delivered"===e.status).map(e=>({id:`ship-${e.id}`,orderId:e.id,orderNumber:e.orderNumber,carrier:e.carrier||"usps",service:e.service||"Priority Mail",trackingNumber:e.trackingNumber||`TRK${Math.random().toString(36).substr(2,12).toUpperCase()}`,customerPaid:e.shipping,actualCost:.7*e.shipping,profit:.3*e.shipping,weight:2.5,status:"delivered"===e.status?"delivered":"in_transit",customerName:e.customer.name,customerCity:e.customer.address.city,customerState:e.customer.address.state,shippedAt:new Date(e.updatedAt),deliveredAt:"delivered"===e.status?new Date:void 0})),b=[{id:"batch-1",batchNumber:"PB-001",status:"open",orderIds:[],createdAt:new Date},{id:"batch-2",batchNumber:"PB-002",status:"in_progress",orderIds:[],assignedTo:"John",createdAt:new Date(Date.now()-864e5)}],T=[{id:"return-1",returnNumber:"RET-0001",orderId:"order-5",orderNumber:"SH-4518",channel:"shopify",status:"requested",customer:{name:"James Wilson",email:"jwilson@email.com"},items:[{productId:"prod-mic-1l",productName:"1L Micro 5-0-1",sku:"CNMIC1L",quantity:1,quantityReceived:0,reason:"damaged_in_transit",refundAmount:12.99}],returnShipping:{},refund:{subtotal:12.99,shipping:0,restockingFee:0,total:12.99},createdAt:new Date(Date.now()-864e5),updatedAt:new Date(Date.now()-864e5)},{id:"return-2",returnNumber:"RET-0002",orderId:"order-6",orderNumber:"AZ-8833",channel:"amazon_fbm",status:"in_transit",customer:{name:"Lisa Chen",email:"lchen@email.com"},items:[{productId:"prod-bb-500",productName:"500mL Bud Booster 0-1-3",sku:"CNBB500ML",quantity:2,quantityReceived:0,reason:"changed_mind",refundAmount:45.76}],returnShipping:{trackingNumber:"RET123456789",carrier:"usps"},refund:{subtotal:45.76,shipping:0,restockingFee:4.58,total:41.18},createdAt:new Date(Date.now()-1728e5),updatedAt:new Date(Date.now()-864e5)},{id:"return-3",returnNumber:"RET-0003",orderId:"order-7",orderNumber:"SH-4517",channel:"shopify",status:"received",customer:{name:"Tom Brady",email:"tbrady@email.com"},items:[{productId:"prod-gro-1l",productName:"1L Grow 2-1-6",sku:"CNGRO1L",quantity:1,quantityReceived:1,reason:"defective",refundAmount:12.99}],returnShipping:{trackingNumber:"RET987654321",carrier:"ups"},refund:{subtotal:12.99,shipping:6.99,restockingFee:0,total:19.98},createdAt:new Date(Date.now()-2592e5),updatedAt:new Date}],f=[{id:"sc-1",countNumber:"SC-0001",name:"Weekly Cycle Count - Zone A",type:"cycle",status:"in_progress",location:"loc-warehouse",locationName:"Texas Warehouse",assignedTo:"John",items:[{productId:"prod-mic-500",productName:"500mL Micro 5-0-1",sku:"CNMIC500ML",binLocation:"A1-01",systemQty:150,countedQty:148,variance:-2,varianceValue:-10.5,status:"counted",countedAt:new Date(Date.now()-36e5)},{productId:"prod-mic-1l",productName:"1L Micro 5-0-1",sku:"CNMIC1L",binLocation:"A1-02",systemQty:75,countedQty:null,variance:0,varianceValue:0,status:"pending"}],summary:{totalItems:15,countedItems:8,matchedItems:6,discrepancyItems:2,totalVariance:-24.5},startedAt:new Date(Date.now()-864e5),createdAt:new Date(Date.now()-864e5),updatedAt:new Date},{id:"sc-2",countNumber:"SC-0002",name:"Monthly Full Count - December",type:"full",status:"completed",location:"loc-warehouse",locationName:"Texas Warehouse",items:[],summary:{totalItems:45,countedItems:45,matchedItems:42,discrepancyItems:3,totalVariance:-156.75},startedAt:new Date(Date.now()-6048e5),completedAt:new Date(Date.now()-5184e5),createdAt:new Date(Date.now()-6048e5),updatedAt:new Date(Date.now()-5184e5)}],A=[{id:"trf-1",transferNumber:"TRF-0001",status:"in_transit",fromLocation:"loc-warehouse",fromLocationName:"Texas Warehouse",toLocation:"loc-fba",toLocationName:"FBA Inbound",items:[{productId:"prod-mic-500",productName:"500mL Micro 5-0-1",sku:"CNMIC500ML",requestedQty:50,shippedQty:50,receivedQty:0,status:"shipped"},{productId:"prod-bb-500",productName:"500mL Bud Booster 0-1-3",sku:"CNBB500ML",requestedQty:30,shippedQty:30,receivedQty:0,status:"shipped"}],notes:"FBA replenishment shipment",shippedAt:new Date(Date.now()-1728e5),createdAt:new Date(Date.now()-2592e5),updatedAt:new Date(Date.now()-1728e5)},{id:"trf-2",transferNumber:"TRF-0002",status:"received",fromLocation:"loc-warehouse",fromLocationName:"Texas Warehouse",toLocation:"loc-fba",toLocationName:"FBA Inbound",items:[{productId:"prod-gro-1l",productName:"1L Grow 2-1-6",sku:"CNGRO1L",requestedQty:100,shippedQty:100,receivedQty:98,status:"short"}],notes:"Weekly FBA restock",shippedAt:new Date(Date.now()-6048e5),receivedAt:new Date(Date.now()-5184e5),createdAt:new Date(Date.now()-6912e5),updatedAt:new Date(Date.now()-5184e5)}],I=[{id:"rule-1",name:"Tag Amazon Prime orders",description:"Automatically add PRIME tag to Amazon Prime orders for priority handling",enabled:!0,trigger:{type:"order_created"},conditions:[{id:"cond-1",field:"channel",operator:"equals",value:"amazon_fbm"}],actions:[{id:"act-1",type:"set_order_tag",config:{tag:"PRIME"}},{id:"act-2",type:"set_priority",config:{priority:"high"}}],priority:1,createdAt:new Date(Date.now()-6048e5),updatedAt:new Date(Date.now()-6048e5)},{id:"rule-2",name:"Auto-assign USPS for small orders",description:"Orders under $50 and less than 1lb ship USPS First Class",enabled:!0,trigger:{type:"order_created"},conditions:[{id:"cond-2",field:"total",operator:"less_than",value:50}],actions:[{id:"act-3",type:"assign_carrier",config:{carrier:"usps"}},{id:"act-4",type:"assign_service",config:{service:"first_class"}}],priority:2,createdAt:new Date(Date.now()-2592e5),updatedAt:new Date(Date.now()-2592e5)},{id:"rule-3",name:"Low stock notification",description:"Send email when stock falls below 50 units",enabled:!1,trigger:{type:"low_stock",threshold:50},conditions:[],actions:[{id:"act-5",type:"send_notification",config:{message:"Stock is running low!"}},{id:"act-6",type:"create_po_draft",config:{quantity:100}}],priority:3,createdAt:new Date(Date.now()-1728e5),updatedAt:new Date(Date.now()-1728e5)}],_=[{id:"lot-1",lotNumber:"LOT-20241215-001",productId:"prod-mic-500",productName:"500mL Micro 5-0-1",sku:"CNMIC500ML",quantity:100,reservedQty:5,expirationDate:new Date(Date.now()+2592e6),manufacturedDate:new Date(Date.now()-5184e6),receivedDate:new Date(Date.now()-2592e6),status:"active",locationId:"loc-warehouse",locationName:"Texas Warehouse",supplierLotNumber:"HG-2024-1234"},{id:"lot-2",lotNumber:"LOT-20241201-001",productId:"prod-mic-500",productName:"500mL Micro 5-0-1",sku:"CNMIC500ML",quantity:50,reservedQty:0,expirationDate:new Date(Date.now()+864e6),manufacturedDate:new Date(Date.now()-7776e6),receivedDate:new Date(Date.now()-3888e6),status:"active",locationId:"loc-warehouse",locationName:"Texas Warehouse",supplierLotNumber:"HG-2024-1198"},{id:"lot-3",lotNumber:"LOT-20241220-001",productId:"prod-gro-1l",productName:"1L Grow 2-1-6",sku:"CNGRO1L",quantity:75,reservedQty:10,expirationDate:new Date(Date.now()+15552e6),manufacturedDate:new Date(Date.now()-2592e6),receivedDate:new Date(Date.now()-1296e6),status:"active",locationId:"loc-warehouse",locationName:"Texas Warehouse"},{id:"lot-4",lotNumber:"LOT-20241101-001",productId:"prod-bb-500",productName:"500mL Bud Booster 0-1-3",sku:"CNBB500ML",quantity:25,reservedQty:0,expirationDate:new Date(Date.now()-432e6),manufacturedDate:new Date(Date.now()-10368e6),receivedDate:new Date(Date.now()-5184e6),status:"expired",locationId:"loc-warehouse",locationName:"Texas Warehouse",notes:"Expired - pending disposal"},{id:"lot-5",lotNumber:"LOT-20241210-001",productId:"prod-mic-1l",productName:"1L Micro 5-0-1",sku:"CNMIC1L",quantity:40,reservedQty:0,receivedDate:new Date(Date.now()-1728e6),status:"quarantine",locationId:"loc-warehouse",locationName:"Texas Warehouse",notes:"Quality check pending - suspected contamination"}];l({type:"SET_LOCATIONS",payload:u}),l({type:"SET_PRODUCTS",payload:p}),l({type:"SET_INVENTORY",payload:m}),l({type:"SET_ORDERS",payload:y}),l({type:"SET_PURCHASE_ORDERS",payload:g}),l({type:"SET_WORK_ORDERS",payload:D}),l({type:"SET_BUNDLES",payload:w}),l({type:"SET_BOXES",payload:h}),l({type:"SET_SHIPMENTS",payload:E}),l({type:"SET_PICKING_BATCHES",payload:b}),l({type:"SET_RETURNS",payload:T}),l({type:"SET_STOCK_COUNTS",payload:f}),l({type:"SET_TRANSFERS",payload:A}),l({type:"SET_AUTOMATION_RULES",payload:I}),l({type:"SET_LOTS",payload:_});let S=[{id:"sup-hgc",name:"HIGROCORP INC.",code:"HGC",contactName:"John Martinez",email:"john@higrocorp.com",phone:"(555) 123-4567",website:"https://higrocorp.com",address:{street:"123 Industrial Blvd",city:"Houston",state:"TX",zip:"77001",country:"US"},currency:"USD",paymentTerms:"Net 30",leadTimeDays:14,minimumOrderValue:500,notes:"Primary nutrient supplier",isActive:!0,createdAt:new Date(Date.now()-31536e6),updatedAt:new Date(Date.now()-2592e6)},{id:"sup-btl",name:"Bottle Supply Co",code:"BTL",contactName:"Sarah Chen",email:"sarah@bottlesupply.com",phone:"(555) 987-6543",currency:"USD",paymentTerms:"Net 15",leadTimeDays:7,minimumOrderValue:250,isActive:!0,createdAt:new Date(Date.now()-15552e6),updatedAt:new Date(Date.now()-1296e6)},{id:"sup-lbl",name:"Label Pros International",code:"LBL",contactName:"Mike Wilson",email:"mike@labelpros.com",phone:"(555) 456-7890",currency:"USD",paymentTerms:"COD",leadTimeDays:10,isActive:!0,createdAt:new Date(Date.now()-7776e6),updatedAt:new Date(Date.now()-6048e5)}],v=[{productId:"prod-mic-500",supplierId:"sup-hgc",supplierSku:"HGC-MIC-500",unitCost:3.5,currency:"USD",minimumOrderQty:100,leadTimeDays:14,isPrimary:!0,lastOrderedAt:new Date(Date.now()-2592e6)},{productId:"prod-mic-1l",supplierId:"sup-hgc",supplierSku:"HGC-MIC-1L",unitCost:5.75,currency:"USD",minimumOrderQty:50,leadTimeDays:14,isPrimary:!0},{productId:"prod-gro-1l",supplierId:"sup-hgc",supplierSku:"HGC-GRO-1L",unitCost:5.5,currency:"USD",minimumOrderQty:50,isPrimary:!0},{productId:"prod-bb-500",supplierId:"sup-hgc",supplierSku:"HGC-BB-500",unitCost:4.25,currency:"USD",minimumOrderQty:100,isPrimary:!0}];l({type:"SET_SUPPLIERS",payload:S}),l({type:"SET_PRODUCT_SUPPLIERS",payload:v}),l({type:"SET_LOADING",payload:!1}),l({type:"SET_INITIALIZED",payload:!0})}catch(e){console.error("Failed to initialize app data:",e),l({type:"SET_LOADING",payload:!1})}})()},[c,u]),(0,t.jsx)(n.Provider,{value:{state:d,dispatch:l},children:s})}function d(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useApp must be used within an AppProvider");return e}e.s(["AppProvider",()=>s,"conditionFields",0,{order:[{value:"channel",label:"Sales Channel"},{value:"total",label:"Order Total"},{value:"item_count",label:"Item Count"},{value:"shipping_country",label:"Ship To Country"},{value:"shipping_state",label:"Ship To State"},{value:"customer_email",label:"Customer Email"},{value:"contains_sku",label:"Contains SKU"},{value:"weight",label:"Total Weight"},{value:"is_prime",label:"Is Amazon Prime"},{value:"requires_signature",label:"Requires Signature"}],inventory:[{value:"sku",label:"Product SKU"},{value:"category",label:"Category"},{value:"quantity",label:"Quantity"},{value:"location",label:"Location"},{value:"cost",label:"Product Cost"}]},"useApp",()=>d])},29618,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let r=(0,a.createContext)(void 0);function o({children:e}){let[o,i]=(0,a.useState)(!1),[n,s]=(0,a.useState)(null),[d,l]=(0,a.useState)(null),c=(0,a.useCallback)(e=>(s(e),i(!0),new Promise(e=>{l(()=>e)})),[]),u=(0,a.useCallback)(()=>{d?.(!0),i(!1),s(null)},[d]),p=(0,a.useCallback)(()=>{d?.(!1),i(!1),s(null)},[d]);return(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&o&&p()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,p]),(0,a.useEffect)(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[o]),(0,t.jsxs)(r.Provider,{value:{confirm:c},children:[e,o&&n&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:p,children:(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-700 rounded-xl p-6 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[n.icon&&(0,t.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${n.destructive?"bg-red-500/20":"bg-blue-500/20"}`,children:(0,t.jsx)("i",{className:`fas ${n.icon} text-xl ${n.destructive?"text-red-400":"text-blue-400"}`})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:n.title}),(0,t.jsx)("p",{className:"text-slate-400 mb-6",children:n.message}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)("button",{onClick:p,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors",children:n.cancelText||"Cancel"}),(0,t.jsx)("button",{onClick:u,className:`px-4 py-2 rounded-lg transition-colors font-medium ${n.destructive?"bg-red-600 hover:bg-red-500 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:n.confirmText||"Confirm"})]})]})})]})}function i(){let e=(0,a.useContext)(r);if(!e)throw Error("useConfirm must be used within ConfirmProvider");return e.confirm}e.s(["ConfirmProvider",()=>o,"useConfirm",()=>i])}]);