module.exports=[14035,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(98263),f=a.i(89697),g=a.i(63820),h=a.i(57236),i=a.i(11840),j=a.i(88860),k=a.i(62202),l=a.i(17031),m=a.i(89648);function n(){let a=(0,d.useSearchParams)(),n=(0,d.useRouter)(),{state:o,dispatch:p}=(0,e.useApp)(),{success:q}=(0,f.useToast)(),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)("all"),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(new Set),[H,I]=(0,c.useState)(1),[J,K]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!D){let b=a.get("status"),c=a.get("channel"),d=a.get("search");b&&y(b),c&&A("amazon"===c?"amazon_fba":c),d&&w(d),E(!0)}},[a,D]);let L=(0,c.useCallback)(a=>{let b=new URLSearchParams,c=a.status??x,d=a.channel??z,e=a.search??v;c&&b.set("status",c),d&&b.set("channel",d),e&&b.set("search",e),n.replace(b.toString()?`/orders?${b.toString()}`:"/orders",{scroll:!1})},[n,x,z,v]),M=(0,c.useMemo)(()=>{let a=[];if(x){let b=l.orderStatusOptions.find(a=>a.value===x);a.push({key:"status",label:"Status",value:b?.label||x})}if(z){let b=l.channelOptions.find(a=>a.value===z);a.push({key:"channel",label:"Channel",value:b?.label||z})}if(v&&a.push({key:"search",label:"Search",value:v}),"all"!==B){let b=l.dateFilterOptions.find(a=>a.value===B);a.push({key:"date",label:"Date",value:b?.label||B})}return a},[x,z,v,B]),N=(0,c.useMemo)(()=>o.orders.filter(a=>{let b=a.orderNumber.toLowerCase().includes(v.toLowerCase())||a.customer.name.toLowerCase().includes(v.toLowerCase())||a.customer.email.toLowerCase().includes(v.toLowerCase()),c=!x||a.status===x,d=!z||a.channel===z,e=(0,l.filterByDate)(a.createdAt,B);return b&&c&&d&&e}),[o.orders,v,x,z,B]),O=Math.ceil(N.length/10),P=N.slice((H-1)*10,10*H),Q=(0,c.useMemo)(()=>{let a=new Date;a.setHours(0,0,0,0);let b=o.orders.filter(b=>new Date(b.createdAt)>=a);return{toPick:o.orders.filter(a=>"to_pick"===a.status).length,toPack:o.orders.filter(a=>"to_pack"===a.status).length,ready:o.orders.filter(a=>"ready"===a.status).length,shippedToday:b.filter(a=>"shipped"===a.status).length,todayRevenue:b.reduce((a,b)=>a+b.total,0),todayProfit:b.reduce((a,b)=>a+b.profit,0)}},[o.orders]),R=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),S=a=>{let b=x===a?"":a;y(b),I(1),D&&L({status:b})},T=async()=>{K(!0),await new Promise(a=>setTimeout(a,2e3)),K(!1),q("Orders synced successfully!")},U=a=>{let b=a?o.orders.filter(b=>a.includes(b.id)):N,c=new Blob([[["Order #","Date","Customer","Email","Channel","Items","Total","COGS","Profit","Status"],...b.map(a=>[a.orderNumber,R(a.createdAt),a.customer.name,a.customer.email,a.channel,a.items.reduce((a,b)=>a+b.quantity,0),a.total.toFixed(2),a.cogs.toFixed(2),a.profit.toFixed(2),a.status])].map(a=>a.join(",")).join("\n")],{type:"text/csv"}),d=URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=`orders-export-${new Date().toISOString().split("T")[0]}.csv`,e.click(),URL.revokeObjectURL(d),q(`Exported ${b.length} orders`)};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Orders"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Manage and fulfill customer orders"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:()=>U(),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-download text-sm"}),"Export"]}),(0,b.jsxs)("button",{onClick:T,disabled:J,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:[(0,b.jsx)("i",{className:`fas ${J?"fa-spinner fa-spin":"fa-sync-alt"} text-sm`}),J?"Syncing...":"Sync Orders"]}),(0,b.jsxs)("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-plus text-sm"}),"Manual Order"]})]})]}),(0,b.jsxs)(l.OrderStatsGrid,{columns:6,children:[(0,b.jsx)(l.OrderStatCard,{icon:"fa-hand-pointer",iconColor:"amber",value:Q.toPick,label:"To Pick",onClick:()=>S("to_pick"),isActive:"to_pick"===x}),(0,b.jsx)(l.OrderStatCard,{icon:"fa-box",iconColor:"purple",value:Q.toPack,label:"To Pack",onClick:()=>S("to_pack"),isActive:"to_pack"===x}),(0,b.jsx)(l.OrderStatCard,{icon:"fa-tag",iconColor:"cyan",value:Q.ready,label:"Ready to Ship",onClick:()=>S("ready"),isActive:"ready"===x}),(0,b.jsx)(l.OrderStatCard,{icon:"fa-truck",iconColor:"emerald",value:Q.shippedToday,label:"Shipped Today",onClick:()=>S("shipped"),isActive:"shipped"===x}),(0,b.jsx)(l.OrderStatCard,{icon:"fa-dollar-sign",iconColor:"slate",value:Q.todayRevenue,format:"currency",label:"Today's Revenue"}),(0,b.jsx)(l.OrderStatCard,{icon:"fa-chart-line",iconColor:"emerald",value:Q.todayProfit,format:"currency",label:"Today's Profit"})]}),M.length>0&&(0,b.jsx)(g.ActiveFilters,{filters:M,onRemove:a=>{"status"===a?(y(""),L({status:""})):"channel"===a?(A(""),L({channel:""})):"search"===a?(w(""),L({search:""})):"date"===a&&C("all")},onClearAll:()=>{y(""),A(""),w(""),C("all"),n.replace("/orders",{scroll:!1})}}),(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by order #, customer name, email...",value:v,onChange:a=>{w(a.target.value),I(1)},className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-400 focus:outline-none focus:border-emerald-500/50"})]}),(0,b.jsx)("select",{value:x,onChange:a=>{y(a.target.value),I(1)},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:l.orderStatusOptions.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))}),(0,b.jsx)("select",{value:z,onChange:a=>{A(a.target.value),I(1)},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:l.channelOptions.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))}),(0,b.jsx)("select",{value:B,onChange:a=>{C(a.target.value),I(1)},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:l.dateFilterOptions.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))}),F.size>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"text-sm text-slate-400",children:[F.size," selected"]}),(0,b.jsxs)("select",{onChange:a=>{if(a.target.value){var b;b=a.target.value,0!==F.size&&("mark_picked"===b?(F.forEach(a=>p({type:"UPDATE_ORDER_STATUS",payload:{orderId:a,status:"to_pack"}})),q(`${F.size} orders marked as picked`),G(new Set)):"create_pick_batch"===b?u(!0):"export"===b&&(U(Array.from(F)),G(new Set))),a.target.value=""}},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:[(0,b.jsx)("option",{value:"",children:"Bulk Actions"}),(0,b.jsx)("option",{value:"create_pick_batch",children:"Create Pick Batch"}),(0,b.jsx)("option",{value:"mark_picked",children:"Mark as Picked"}),(0,b.jsx)("option",{value:"export",children:"Export Selected"})]}),(0,b.jsxs)("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-clipboard-list text-sm"}),"Create Batch"]})]})]})}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-slate-800/50 border-b border-slate-700/50",children:(0,b.jsxs)("tr",{className:"text-left text-xs text-slate-400 uppercase tracking-wider",children:[(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:(0,b.jsx)("input",{type:"checkbox",checked:F.size===P.length&&P.length>0,onChange:()=>{G(F.size===P.length?new Set:new Set(P.map(a=>a.id)))},className:"rounded bg-slate-700 border-slate-600"})}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Order"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Date"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Customer"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Channel"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Items"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-right",children:"Total"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-right",children:"Profit"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Margin"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Status"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:P.map(a=>(0,b.jsxs)("tr",{className:`transition-colors cursor-pointer hover:bg-slate-800/30 ${F.has(a.id)?"bg-emerald-500/5":""}`,onClick:()=>n.push(`/orders/${a.id}`),children:[(0,b.jsx)("td",{className:"px-4 py-4",onClick:b=>{var c;let d;return c=a.id,b.stopPropagation(),void((d=new Set(F)).has(c)?d.delete(c):d.add(c),G(d))},children:(0,b.jsx)("input",{type:"checkbox",checked:F.has(a.id),onChange:()=>{},className:"rounded bg-slate-700 border-slate-600"})}),(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsxs)("div",{className:"font-mono text-sm font-medium text-white",children:["#",a.orderNumber]}),a.veeqoId&&(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:["Veeqo: ",a.veeqoId]})]}),(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsx)("div",{className:"text-sm text-white",children:R(a.createdAt)}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:new Date(a.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-white",children:a.customer.name}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:a.customer.email}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:[a.customer.address.city,", ",a.customer.address.state]})]}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)(k.ChannelBadge,{channel:a.channel})}),(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsxs)("div",{className:"text-sm text-white",children:[a.items.reduce((a,b)=>a+b.quantity,0)," items"]}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:[a.items.length," SKUs"]})]}),(0,b.jsx)("td",{className:"px-4 py-4 text-right",children:(0,b.jsx)("div",{className:"text-sm font-medium text-white",children:(0,j.formatCurrency)(a.total)})}),(0,b.jsx)("td",{className:"px-4 py-4 text-right",children:(0,b.jsx)("div",{className:`text-sm font-medium ${a.profit>=0?"text-emerald-400":"text-red-400"}`,children:(0,j.formatCurrency)(a.profit)})}),(0,b.jsx)("td",{className:"px-4 py-4 text-center",children:(0,b.jsx)(k.MarginBadge,{margin:a.margin})}),(0,b.jsx)("td",{className:"px-4 py-4 text-center",children:(0,b.jsx)(k.OrderStatusBadge,{status:a.status})})]},a.id))})]})}),0===N.length&&(0,b.jsxs)("div",{className:"py-12 text-center",children:[(0,b.jsx)("i",{className:"fas fa-inbox text-4xl text-slate-600 mb-4"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"No orders found"}),v&&(0,b.jsx)("button",{onClick:()=>w(""),className:"mt-2 text-emerald-400 hover:text-emerald-300 text-sm",children:"Clear search"})]}),(0,b.jsx)(m.Pagination,{currentPage:H,totalPages:O,totalItems:N.length,itemsPerPage:10,itemLabel:"orders",onPageChange:I})]}),(0,b.jsx)(h.CreateOrderModal,{isOpen:r,onClose:()=>s(!1)}),(0,b.jsx)(i.CreatePickBatchModal,{isOpen:t,onClose:()=>{u(!1),G(new Set)},selectedOrderIds:Array.from(F)})]})}function o(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"p-6 text-slate-400",children:"Loading orders..."}),children:(0,b.jsx)(n,{})})}a.s(["default",()=>o])}];

//# sourceMappingURL=app_%28dashboard%29_orders_page_tsx_8c3f91bc._.js.map