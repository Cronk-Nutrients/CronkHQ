module.exports=[95805,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(18740);a.i(69387);var e=a.i(60574),f=a.i(90761),g=a.i(89697),h=a.i(12466),i=a.i(38246);let j=[{value:"ecommerce",label:"E-Commerce",icon:"fa-shopping-cart"},{value:"marketplace",label:"Marketplace",icon:"fa-store"},{value:"wholesale",label:"Wholesale",icon:"fa-building"},{value:"retail",label:"Retail",icon:"fa-cash-register"},{value:"manual",label:"Manual",icon:"fa-edit"}],k=[{name:"Slate",value:"#64748b"},{name:"Red",value:"#ef4444"},{name:"Orange",value:"#f97316"},{name:"Amber",value:"#f59e0b"},{name:"Yellow",value:"#eab308"},{name:"Lime",value:"#84cc16"},{name:"Green",value:"#22c55e"},{name:"Emerald",value:"#10b981"},{name:"Teal",value:"#14b8a6"},{name:"Cyan",value:"#06b6d4"},{name:"Blue",value:"#3b82f6"},{name:"Indigo",value:"#6366f1"},{name:"Violet",value:"#8b5cf6"},{name:"Purple",value:"#a855f7"},{name:"Pink",value:"#ec4899"},{name:"Shopify",value:"#96bf48"},{name:"Amazon",value:"#ff9900"}],l=["fab fa-shopify","fab fa-amazon","fab fa-ebay","fab fa-etsy","fas fa-store","fas fa-building","fas fa-shopping-cart","fas fa-cash-register","fas fa-phone","fas fa-envelope","fas fa-globe","fas fa-truck","fas fa-edit","fas fa-warehouse"],m=[{name:"Shopify",code:"shopify",type:"ecommerce",color:"#96bf48",icon:"fab fa-shopify",integration:{platform:"shopify",isConnected:!1,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:1,autoProcess:!0,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:1},{name:"Amazon FBA",code:"amazon_fba",type:"marketplace",color:"#ff9900",icon:"fab fa-amazon",integration:{platform:"amazon",isConnected:!1,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:2,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:2},{name:"Amazon FBM",code:"amazon_fbm",type:"marketplace",color:"#ff9900",icon:"fab fa-amazon",integration:{platform:"amazon",isConnected:!1,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:3,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:3},{name:"Wholesale",code:"wholesale",type:"wholesale",color:"#6366f1",icon:"fas fa-building",integration:{platform:"manual",isConnected:!0,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:4,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!0},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:4},{name:"Phone Order",code:"phone",type:"manual",color:"#8b5cf6",icon:"fas fa-phone",integration:{platform:"manual",isConnected:!0,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:5,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!1,sortOrder:5},{name:"Manual",code:"manual",type:"manual",color:"#64748b",icon:"fas fa-edit",integration:{platform:"manual",isConnected:!0,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:10,autoProcess:!1,packingSlipTemplate:null,requiresApproval:!1},stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isActive:!0,isDefault:!0,sortOrder:99}];function n(){let{organization:a}=(0,f.useOrganization)(),{success:n,error:o}=(0,g.useToast)(),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)({name:"",code:"",type:"ecommerce",color:"#64748b",icon:"fas fa-shopping-cart",isActive:!0,priority:5,autoProcess:!1});(0,c.useEffect)(()=>{if(!a?.id)return;let b=(0,e.collection)(d.db,"organizations",a.id,"salesChannels"),c=(0,e.query)(b,(0,e.orderBy)("sortOrder","asc")),f=(0,e.onSnapshot)(c,a=>{q(a.docs.map(a=>({id:a.id,...a.data()}))),s(!1)});return()=>f()},[a?.id]),(0,c.useEffect)(()=>{!a?.id||r||p.length>0||(async()=>{let b=(0,e.writeBatch)(d.db),c=(0,e.collection)(d.db,"organizations",a.id,"salesChannels");m.forEach(a=>{let d=(0,e.doc)(c);b.set(d,{...a,createdAt:(0,e.serverTimestamp)(),updatedAt:(0,e.serverTimestamp)()})}),await b.commit()})()},[a?.id,r,p.length]);let B=a=>a.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,""),C=()=>{w(null),A({name:"",code:"",type:"ecommerce",color:"#64748b",icon:"fas fa-shopping-cart",isActive:!0,priority:5,autoProcess:!1}),u(!0)},D=async()=>{if(a?.id){if(!z.name.trim())return void o("Please enter a channel name");y(!0);try{let b=(0,e.collection)(d.db,"organizations",a.id,"salesChannels"),c=z.code||B(z.name),f={name:z.name.trim(),code:c,type:z.type,color:z.color,icon:z.icon,integration:{platform:"manual"===z.type?"manual":null,isConnected:"manual"===z.type,lastSyncAt:null,settings:{}},fulfillment:{defaultLocation:null,priority:z.priority,autoProcess:z.autoProcess,packingSlipTemplate:null,requiresApproval:"wholesale"===z.type},isActive:z.isActive,updatedAt:(0,e.serverTimestamp)()};v?(await (0,e.updateDoc)((0,e.doc)(b,v.id),f),n("Channel updated")):(await (0,e.addDoc)(b,{...f,stats:{totalOrders:0,pendingOrders:0,totalRevenue:0,averageOrderValue:0,lastOrderAt:null},isDefault:!1,sortOrder:p.length+1,createdAt:(0,e.serverTimestamp)()}),n("Channel created")),u(!1)}catch(a){console.error("Error saving channel:",a),o("Failed to save channel")}finally{y(!1)}}},E=async b=>{if(a?.id){if(b.isDefault)return void o("Cannot delete the default channel");if(b.stats?.totalOrders>0)return void o("Cannot delete channel with existing orders");if(confirm(`Delete "${b.name}" channel?`))try{await (0,e.deleteDoc)((0,e.doc)(d.db,"organizations",a.id,"salesChannels",b.id)),n("Channel deleted")}catch(a){console.error("Error deleting channel:",a),o("Failed to delete channel")}}},F=async b=>{if(a?.id&&!b.isDefault)try{let c=(0,e.writeBatch)(d.db),f=(0,e.collection)(d.db,"organizations",a.id,"salesChannels"),g=p.find(a=>a.isDefault);g&&c.update((0,e.doc)(f,g.id),{isDefault:!1}),c.update((0,e.doc)(f,b.id),{isDefault:!0}),await c.commit(),n(`${b.name} is now the default channel`)}catch(a){console.error("Error setting default:",a),o("Failed to set default channel")}};return r?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):(0,b.jsxs)("div",{className:"p-6 max-w-5xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-400 mb-6",children:[(0,b.jsx)(i.default,{href:"/settings",className:"hover:text-white transition-colors",children:"Settings"}),(0,b.jsx)("i",{className:"fas fa-chevron-right text-xs"}),(0,b.jsx)("span",{className:"text-white",children:"Sales Channels"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Sales Channels"}),(0,b.jsx)("p",{className:"text-slate-400 mt-1",children:"Manage where your orders come from"})]}),(0,b.jsxs)(h.Button,{onClick:C,children:[(0,b.jsx)("i",{className:"fas fa-plus mr-2"}),"Add Channel"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(a=>(0,b.jsxs)("div",{className:`bg-slate-800/50 border rounded-xl p-5 transition-all ${a.isActive?"border-slate-700":"border-slate-800 opacity-60"}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${a.color}20`},children:(0,b.jsx)("i",{className:`${a.icon} text-xl`,style:{color:a.color}})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"text-white font-semibold",children:a.name}),a.isDefault&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-emerald-500/20 text-emerald-400 text-xs rounded-full",children:"Default"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)("span",{className:"text-xs text-slate-500 font-mono",children:a.code}),(0,b.jsx)("span",{className:"text-slate-600",children:"â€¢"}),(0,b.jsx)("span",{className:"text-xs text-slate-400 capitalize",children:a.type})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:()=>{w(a),A({name:a.name,code:a.code,type:a.type,color:a.color,icon:a.icon,isActive:a.isActive,priority:a.fulfillment?.priority||5,autoProcess:a.fulfillment?.autoProcess||!1}),u(!0)},className:"p-2 text-slate-400 hover:text-white rounded-lg hover:bg-slate-700/50",children:(0,b.jsx)("i",{className:"fas fa-pencil"})}),(0,b.jsx)("button",{onClick:()=>E(a),className:`p-2 rounded-lg hover:bg-slate-700/50 ${a.isDefault||a.stats?.totalOrders>0?"text-slate-600 cursor-not-allowed":"text-slate-400 hover:text-red-400"}`,disabled:a.isDefault||a.stats?.totalOrders>0,children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,b.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-lg font-bold text-white",children:a.stats?.totalOrders||0}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Total Orders"})]}),(0,b.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-lg font-bold text-amber-400",children:a.stats?.pendingOrders||0}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Pending"})]}),(0,b.jsxs)("div",{className:"bg-slate-900/50 rounded-lg p-3 text-center",children:[(0,b.jsxs)("div",{className:"text-lg font-bold text-emerald-400",children:["$",((a.stats?.totalRevenue||0)/1e3).toFixed(1),"k"]}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Revenue"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-slate-700",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:a.integration?.isConnected?(0,b.jsxs)("span",{className:"flex items-center gap-1.5 text-sm text-emerald-400",children:[(0,b.jsx)("i",{className:"fas fa-check-circle"}),"Connected"]}):(0,b.jsxs)("span",{className:"flex items-center gap-1.5 text-sm text-slate-500",children:[(0,b.jsx)("i",{className:"fas fa-unlink"}),"Not Connected"]})}),!a.isDefault&&(0,b.jsx)("button",{onClick:()=>F(a),className:"text-sm text-slate-400 hover:text-emerald-400",children:"Set as Default"})]})]},a.id))}),0===p.length&&(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-12 text-center",children:[(0,b.jsx)("i",{className:"fas fa-store text-4xl text-slate-600 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Sales Channels"}),(0,b.jsx)("p",{className:"text-slate-400 mb-4",children:"Add channels to organize your orders by source"}),(0,b.jsxs)(h.Button,{onClick:C,children:[(0,b.jsx)("i",{className:"fas fa-plus mr-2"}),"Add First Channel"]})]}),t&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-slate-900 border border-slate-700 rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-700 sticky top-0 bg-slate-900",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:v?"Edit Channel":"Add Sales Channel"}),(0,b.jsx)("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-white",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Channel Name *"}),(0,b.jsx)("input",{type:"text",value:z.name,onChange:a=>{A({...z,name:a.target.value,code:v?z.code:B(a.target.value)})},placeholder:"e.g., Amazon FBA, Wholesale",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Channel Code"}),(0,b.jsx)("input",{type:"text",value:z.code,onChange:a=>A({...z,code:B(a.target.value)}),placeholder:"auto-generated",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-3 text-white font-mono focus:outline-none focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Channel Type"}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-2",children:j.map(a=>(0,b.jsxs)("button",{onClick:()=>A({...z,type:a.value}),className:`p-3 rounded-lg border text-center transition-all ${z.type===a.value?"border-emerald-500 bg-emerald-500/10":"border-slate-700 hover:border-slate-600"}`,children:[(0,b.jsx)("i",{className:`fas ${a.icon} text-lg mb-1 ${z.type===a.value?"text-emerald-400":"text-slate-400"}`}),(0,b.jsx)("div",{className:"text-xs text-slate-300",children:a.label})]},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Color"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:k.map(a=>(0,b.jsx)("button",{onClick:()=>A({...z,color:a.value}),className:`w-8 h-8 rounded-lg transition-all ${z.color===a.value?"ring-2 ring-white ring-offset-2 ring-offset-slate-900":""}`,style:{backgroundColor:a.value},title:a.name},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Icon"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:l.map(a=>(0,b.jsx)("button",{onClick:()=>A({...z,icon:a}),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${z.icon===a?"bg-emerald-500/20 text-emerald-400":"bg-slate-800 text-slate-400 hover:text-white"}`,children:(0,b.jsx)("i",{className:a})},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Fulfillment Priority (1 = highest)"}),(0,b.jsx)("input",{type:"number",min:1,max:99,value:z.priority,onChange:a=>A({...z,priority:parseInt(a.target.value)||5}),className:"w-24 bg-slate-800 border border-slate-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-white font-medium",children:"Auto-Process Orders"}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:"Automatically start fulfillment"})]}),(0,b.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:z.autoProcess,onChange:a=>A({...z,autoProcess:a.target.checked}),className:"sr-only peer"}),(0,b.jsx)("div",{className:"w-11 h-6 bg-slate-700 peer-checked:bg-emerald-500 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-700 sticky bottom-0 bg-slate-900",children:[(0,b.jsx)(h.Button,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:D,disabled:x,children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-save mr-2"}),v?"Update":"Create"," Channel"]})})]})]})})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=app_%28dashboard%29_settings_sales-channels_page_tsx_d929e0ca._.js.map