module.exports=[49025,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(98263),f=a.i(34904),g=a.i(12466),h=a.i(89697),i=a.i(88860),j=a.i(91828),k=a.i(63820);a.i(42390);var l=a.i(77877),m=a.i(4019),n=a.i(73736),o=a.i(8838),p=a.i(83497),q=a.i(33441),r=a.i(24987),s=a.i(33508),t=a.i(87532);let u=(0,a.i(70106).default)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);var v=a.i(92e3),w=a.i(32860);function x(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"h-8 w-64 bg-slate-700/50 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-32 bg-slate-800/50 rounded-xl animate-pulse"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"h-96 bg-slate-800/50 rounded-xl animate-pulse"}),(0,b.jsx)("div",{className:"col-span-2 h-96 bg-slate-800/50 rounded-xl animate-pulse"})]})]})}function y(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(x,{}),children:(0,b.jsx)(A,{})})}let z=[{value:"all",label:"All"},{value:"to_pick",label:"To Pick"},{value:"picking",label:"Picking"}];function A(){let{state:a,dispatch:x}=(0,e.useApp)(),{success:y,error:A,warning:B}=(0,h.useToast)(),C=(0,d.useSearchParams)(),D=(0,d.useRouter)(),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)("all"),[M,N]=(0,c.useState)(!1),O=(0,c.useRef)(null),P=(0,c.useMemo)(()=>{let b=a.orders.filter(a=>"to_pick"===a.status||"picking"===a.status);return"all"===K?b:b.filter(a=>a.status===K)},[a.orders,K]);(0,c.useEffect)(()=>{if(!M){let b=C.get("order"),c=C.get("status");if(("to_pick"===c||"picking"===c)&&L(c),b){let c=a.orders.find(a=>a.orderNumber===b||a.id===b);c&&("to_pick"===c.status||"picking"===c.status)&&T(c)}N(!0)}},[C,M,a.orders]);let Q=(0,c.useCallback)(a=>{let b=new URLSearchParams;"all"!==a&&b.set("status",a);let c=b.toString()?`/fulfillment/pick?${b.toString()}`:"/fulfillment/pick";D.replace(c,{scroll:!1})},[D]),R=(0,c.useMemo)(()=>{let a=[];return"all"!==K&&a.push({key:"status",label:"Status",value:"to_pick"===K?"To Pick":"Picking"}),a},[K]);(0,c.useEffect)(()=>{G?J(G.items.map(b=>{var c;let d;return{productId:b.productId,productName:b.productName,sku:b.sku,quantity:b.quantity,picked:b.picked||!1,binLocation:(c=b.productId,d=a.inventory.find(a=>a.productId===c),d?.binLocation||"Unknown")}})):J([])},[G]),(0,c.useEffect)(()=>{let a=a=>{if(/^[a-zA-Z0-9]$/.test(a.key)&&!a.ctrlKey&&!a.metaKey){let a=document.activeElement;a?.tagName!=="INPUT"&&a?.tagName!=="TEXTAREA"&&O.current?.focus()}"Escape"===a.key&&H(null)};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]);let S=b=>{if("Enter"===b.key&&E.trim()){let b=E.toLowerCase().trim(),c=a.orders.find(a=>a.orderNumber.toLowerCase()===b||a.id===b||a.orderNumber.toLowerCase().includes(b));if(c){if("to_pick"!==c.status&&"picking"!==c.status){B(`Order ${c.orderNumber} is not ready for picking (status: ${c.status})`),F("");return}T(c),F("")}else A("Order not found")}},T=a=>{H(a),"to_pick"===a.status&&x({type:"UPDATE_ORDER_STATUS",payload:{orderId:a.id,status:"picking"}})},U=I.filter(a=>a.picked).length,V=I.length,W=I.every(a=>a.picked);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(j.Breadcrumb,{items:[{label:"Fulfillment",href:"/fulfillment"},{label:"Pick Station"}]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Pick Station"}),(0,b.jsxs)("p",{className:"text-slate-400",children:[P.length," orders ready to pick"]})]}),(0,b.jsx)(m.StatusFilterTabs,{options:z,value:K,onChange:a=>{L(a),Q(a)},accentColor:"blue"})]}),R.length>0&&(0,b.jsx)(k.ActiveFilters,{filters:R,onRemove:a=>{"status"===a&&(L("all"),Q("all"))},onClearAll:()=>{L("all"),D.replace("/fulfillment/pick",{scroll:!1})}}),(0,b.jsx)(f.Card,{children:(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-blue-500/20",children:(0,b.jsx)(o.ScanLine,{className:"h-6 w-6 text-blue-400"})}),(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(t.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,b.jsx)("input",{ref:O,type:"text",value:E,onChange:a=>F(a.target.value),onKeyDown:S,placeholder:"Scan order barcode or enter order number...",className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-lg pl-12 pr-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50",autoFocus:!0})]}),(0,b.jsx)(g.Button,{onClick:()=>E.trim()&&S({key:"Enter"}),children:"Load Order"})]})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h2",{className:"text-sm font-medium text-slate-400 uppercase tracking-wider",children:["Orders to Pick (",P.length,")"]}),0===P.length?(0,b.jsx)(f.Card,{children:(0,b.jsxs)("div",{className:"p-6 text-center",children:[(0,b.jsx)(u,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-slate-400",children:"No orders waiting to pick"})]})}):(0,b.jsx)("div",{className:"space-y-2",children:P.map(a=>(0,b.jsxs)("button",{onClick:()=>T(a),className:`w-full rounded-xl p-4 text-left transition-colors ${G?.id===a.id?"bg-blue-500/20 border border-blue-500/50":"bg-slate-800/50 border border-slate-700/50 hover:bg-slate-700/30"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-white",children:["#",a.orderNumber]}),"picking"===a.status?(0,b.jsx)(l.PickStatusBadge,{status:"picking"}):(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-slate-700/50 text-slate-400",children:"Queued"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[(0,b.jsxs)("span",{children:[a.items.length," items"]}),(0,b.jsx)(l.ChannelBadge,{channel:a.channel})]}),(0,b.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:a.customer.name})]},a.id))})]}),(0,b.jsx)("div",{className:"lg:col-span-2 space-y-6",children:G?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Card,{children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-white",children:["Order #",G.orderNumber]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:G.customer.name}),(0,b.jsx)(l.ChannelBadge,{channel:G.channel})]})]}),(0,b.jsx)("button",{onClick:()=>{G&&("picking"===G.status&&x({type:"UPDATE_ORDER_STATUS",payload:{orderId:G.id,status:"to_pick"}}),H(null),J([]))},className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Cancel and return to queue",children:(0,b.jsx)(s.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Progress"}),(0,b.jsxs)("span",{className:"text-white",children:[U," / ",V]})]}),(0,b.jsx)(n.ProgressBar,{current:U,total:V,colorClass:W?"bg-emerald-500":"bg-blue-500"})]}),(0,b.jsx)("div",{className:"bg-slate-700/30 rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 text-slate-400 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{className:"text-white",children:G.customer.name}),(0,b.jsxs)("div",{className:"text-slate-400",children:[G.customer.address.city,", ",G.customer.address.state]})]})]})})]})}),(0,b.jsx)(f.Card,{children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-md font-semibold text-white",children:"Pick List"}),(0,b.jsxs)(g.Button,{variant:"secondary",size:"sm",onClick:()=>{J(a=>a.map(a=>({...a,picked:!0})))},children:[(0,b.jsx)(q.Check,{className:"w-4 h-4"}),"Pick All"]})]}),(0,b.jsx)("div",{className:"space-y-2",children:I.map((c,d)=>{let e,f=(e=c.productId,a.inventory.filter(a=>a.productId===e).reduce((a,b)=>a+b.quantity,0)),g=f>=c.quantity;return(0,b.jsxs)("div",{className:`flex items-center gap-4 p-4 rounded-lg border transition-all cursor-pointer ${c.picked?"bg-emerald-500/10 border-emerald-500/30":g?"bg-slate-800/50 border-slate-700 hover:border-slate-600":"bg-red-500/10 border-red-500/30"}`,onClick:()=>{J(a=>a.map((a,b)=>b===d?{...a,picked:!a.picked}:a))},children:[(0,b.jsx)("button",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-colors ${c.picked?"bg-emerald-500 border-emerald-500 text-white":"border-slate-600 hover:border-slate-500"}`,children:c.picked&&(0,b.jsx)(q.Check,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:`font-medium ${c.picked?"text-emerald-400 line-through":"text-white"}`,children:c.productName}),(0,b.jsxs)("div",{className:"text-sm text-slate-400",children:["SKU: ",c.sku]}),c.binLocation&&(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,b.jsx)(r.MapPin,{className:"w-3 h-3 text-blue-400"}),(0,b.jsxs)("span",{className:"text-sm text-blue-400 font-mono",children:["Bin: ",c.binLocation]})]}),!g&&!c.picked&&(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-red-400",children:[(0,b.jsx)(v.AlertCircle,{className:"w-3 h-3"}),(0,b.jsxs)("span",{className:"text-xs",children:["Only ",(0,i.formatNumber)(f)," in stock"]})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("div",{className:`text-2xl font-bold ${c.picked?"text-emerald-400":"text-white"}`,children:["x ",c.quantity]})})]},d)})}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsxs)(g.Button,{onClick:()=>{G&&(I.every(a=>a.picked)?(x({type:"UPDATE_ORDER",payload:{...G,status:"to_pack",items:G.items.map(a=>({...a,picked:!0})),updatedAt:new Date}}),y(`Order ${G.orderNumber} ready for packing`),H(null),J([])):A("Please pick all items before completing"))},disabled:!W,className:"w-full",children:[(0,b.jsx)(q.Check,{className:"w-4 h-4"}),W?"Complete Pick":`Pick remaining ${V-U} items`,(0,b.jsx)(w.ArrowRight,{className:"w-4 h-4 ml-auto"})]}),W&&(0,b.jsx)("p",{className:"text-center text-xs text-emerald-400 mt-2",children:"All items picked - Ready to send to pack station"})]})]})})]}):(0,b.jsx)(f.Card,{children:(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)(p.Package,{className:"mx-auto h-16 w-16 text-slate-600"}),(0,b.jsx)("h3",{className:"mt-4 text-lg font-medium text-white",children:"Select an Order"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-slate-400",children:"Scan an order barcode or select from the queue to start picking"}),P.length>0&&(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"Quick select:"}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:P.slice(0,5).map(a=>(0,b.jsxs)("button",{onClick:()=>T(a),className:"rounded-lg bg-slate-700/50 px-4 py-2 text-sm text-white hover:bg-slate-700 transition-colors",children:["#",a.orderNumber]},a.id))})]})]})})})]})]})}a.s(["default",()=>y],49025)}];

//# sourceMappingURL=app_%28dashboard%29_fulfillment_pick_page_tsx_c389f6e9._.js.map