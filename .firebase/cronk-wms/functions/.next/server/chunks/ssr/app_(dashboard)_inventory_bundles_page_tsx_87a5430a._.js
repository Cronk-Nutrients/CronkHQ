module.exports=[72043,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(98263),f=a.i(89697),g=a.i(57581);a.i(94660);var h=a.i(58660),i=a.i(9095),j=a.i(88860);function k({bundle:a,onClick:d,onEdit:f,onDelete:g}){let{state:h}=(0,e.useApp)(),i=a=>h.inventory.filter(b=>b.productId===a).reduce((a,b)=>a+b.quantity,0),k=(0,c.useMemo)(()=>{let b=a.components.reduce((a,b)=>{let c=h.products.find(a=>a.id===b.productId);return a+(c?.cost.rolling||0)*b.quantity},0),c=a.prices.msrp>0?(a.prices.msrp-b)/a.prices.msrp*100:0,d=a.components.length>0?Math.min(...a.components.map(a=>Math.floor(i(a.productId)/a.quantity))):0,e="";if(a.components.length>0){let b=1/0;a.components.forEach(a=>{let c=Math.floor(i(a.productId)/a.quantity);c<b&&(b=c,e=a.productName)})}return{cost:b,margin:c,availableQty:d,limitingComponent:e}},[a,h.products,h.inventory]),l=0===k.availableQty?{text:"Out of Stock",color:"red"}:k.availableQty<=10?{text:"Limited",color:"amber"}:{text:"In Stock",color:"emerald"};return(0,b.jsxs)("div",{onClick:d,className:`bg-slate-800/50 backdrop-blur border rounded-xl overflow-hidden cursor-pointer transition-all hover:border-slate-600 group ${"emerald"===l.color?"border-emerald-500/30":"amber"===l.color?"border-amber-500/30":"border-red-500/30"} ${"red"===l.color?"opacity-80":""}`,children:[(0,b.jsx)("div",{className:`px-5 py-4 border-b border-slate-700/50 ${"emerald"===l.color?"bg-emerald-500/5":"amber"===l.color?"bg-amber-500/5":"bg-red-500/5"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-amber-500/20 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-layer-group text-amber-400 text-xl"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-white",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-slate-400",children:["SKU: ",a.sku]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(()=>{switch(a.type){case"virtual":return(0,b.jsxs)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full border border-blue-500/20",children:[(0,b.jsx)("i",{className:"fas fa-cloud mr-1"}),"Virtual"]});case"physical":return(0,b.jsxs)("span",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-400 text-xs rounded-full border border-emerald-500/20",children:[(0,b.jsx)("i",{className:"fas fa-box mr-1"}),"Physical"]});case"fba_kit":return(0,b.jsxs)("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded-full border border-orange-500/20",children:[(0,b.jsx)("i",{className:"fab fa-amazon mr-1"}),"FBA Kit"]})}})(),(0,b.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${"emerald"===l.color?"bg-emerald-500/10 text-emerald-400":"amber"===l.color?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"}`,children:l.text})]})]})}),(0,b.jsxs)("div",{className:"p-5 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-slate-400",children:[(0,b.jsx)("i",{className:"fas fa-cubes mr-2"}),a.components.length," component",1!==a.components.length?"s":""]}),(0,b.jsxs)("span",{className:`font-medium ${k.availableQty>10?"text-emerald-400":k.availableQty>0?"text-amber-400":"text-red-400"}`,children:["Can build: ",(0,j.formatNumber)(k.availableQty)]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[a.components.slice(0,2).map((a,c)=>{let d=i(a.productId)>=a.quantity;return(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${d?"bg-emerald-400":"bg-red-400"}`}),(0,b.jsx)("span",{className:"text-slate-300 truncate",children:a.productName})]}),(0,b.jsxs)("span",{className:"text-slate-400 flex-shrink-0 ml-2",children:["x",a.quantity]})]},c)}),a.components.length>2&&(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:["+",a.components.length-2," more"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-slate-700/50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Price"}),(0,b.jsx)("div",{className:"text-lg font-bold text-white",children:(0,j.formatCurrency)(a.prices.msrp)})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Margin"}),(0,b.jsxs)("div",{className:`text-lg font-bold ${k.margin>=50?"text-emerald-400":k.margin>=30?"text-amber-400":"text-red-400"}`,children:[k.margin.toFixed(1),"%"]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsxs)("button",{onClick:f,className:"flex-1 px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm transition-colors",children:[(0,b.jsx)("i",{className:"fas fa-edit mr-1"}),"Edit"]}),(0,b.jsx)("button",{onClick:g,className:"px-3 py-2 bg-slate-700 hover:bg-red-500/20 text-slate-300 hover:text-red-400 rounded-lg text-sm transition-colors",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})]})]})}var l=a.i(91828);function m(){let a=(0,d.useRouter)(),{state:m,dispatch:n}=(0,e.useApp)(),{success:o}=(0,f.useToast)(),p=(0,g.useConfirm)(),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),C=a=>m.inventory.filter(b=>b.productId===a).reduce((a,b)=>a+b.quantity,0),D=a=>{if(!a.components||0===a.components.length)return{available:0,limitingItem:""};let b=1/0,c="";return a.components.forEach(a=>{let d=Math.floor(C(a.productId)/a.quantity);d<b&&(b=d,c=a.productName)}),{available:b===1/0?0:b,limitingItem:c}},E=(0,c.useMemo)(()=>m.bundles.filter(a=>{let b=a.name.toLowerCase().includes(y.toLowerCase())||a.sku.toLowerCase().includes(y.toLowerCase()),c=!A||a.type===A;return b&&c}),[m.bundles,y,A]),F=(0,c.useMemo)(()=>{let a=m.bundles.length,b=m.bundles.filter(a=>D(a).available>10).length,c=m.bundles.filter(a=>{let b=D(a);return b.available>0&&b.available<=10}).length;return{totalBundles:a,fullyAvailable:b,limitedStock:c,outOfStock:m.bundles.filter(a=>0===D(a).available).length,potentialValue:m.bundles.reduce((a,b)=>a+D(b).available*b.prices.msrp,0)}},[m.bundles,m.inventory]),G=(0,c.useMemo)(()=>{let a={};return m.bundles.forEach(b=>{(b.components||[]).forEach(c=>{if(!a[c.productId]){let b=m.products.find(a=>a.id===c.productId);a[c.productId]={productId:c.productId,productName:c.productName,sku:b?.sku||"Unknown",bundles:[],totalQty:0,availableStock:C(c.productId)}}a[c.productId].bundles.push({name:b.name,qty:c.quantity}),a[c.productId].totalQty+=c.quantity})}),Object.values(a)},[m.bundles,m.products,m.inventory]),H=async(a,b)=>{b&&b.stopPropagation(),await p({title:"Delete Bundle",message:`Are you sure you want to delete "${a.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",destructive:!0})&&(n({type:"DELETE_BUNDLE",payload:a.id}),o(`Bundle "${a.name}" deleted`))},I=(a,b)=>{b&&b.stopPropagation(),v(a),r(!0),t(!1)};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(l.Breadcrumb,{items:[{label:"Inventory",href:"/inventory"},{label:"Bundles"}]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Bundles"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Product bundles and kits with component tracking"})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-plus text-sm"}),"Create Bundle"]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-amber-500/30 rounded-xl p-4",style:{boxShadow:"0 0 20px rgba(251, 191, 36, 0.15)"},children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-layer-group text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:F.totalBundles}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Total Bundles"})]})]})}),(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-emerald-500/30 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-check-circle text-emerald-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-emerald-400",children:F.fullyAvailable}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Fully Available"})]})]})}),(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-amber-500/30 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-exclamation-triangle text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:F.limitedStock}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Limited Stock"})]})]})}),(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-red-500/30 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-times-circle text-red-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-400",children:F.outOfStock}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Out of Stock"})]})]})}),(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-700/50 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-dollar-sign text-slate-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:(0,j.formatCurrency)(F.potentialValue)}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Potential Value"})]})]})})]}),(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-cloud text-blue-400 text-sm"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-white",children:"Virtual Bundle"}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Pick components separately, assemble at pack"})]})]}),(0,b.jsx)("div",{className:"h-8 w-px bg-slate-700"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-box text-emerald-400 text-sm"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-white",children:"Physical Bundle"}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Pre-assembled, has own SKU and inventory"})]})]}),(0,b.jsx)("div",{className:"h-8 w-px bg-slate-700"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fab fa-amazon text-orange-400 text-sm"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-white",children:"FBA Kit"}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Pre-kitted and shipped to Amazon FBA"})]})]})]})}),(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search bundles by name or SKU...",value:y,onChange:a=>z(a.target.value),className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-400 focus:outline-none focus:border-emerald-500/50"})]}),(0,b.jsxs)("select",{value:A,onChange:a=>B(a.target.value),className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:[(0,b.jsx)("option",{value:"",children:"All Types"}),(0,b.jsx)("option",{value:"virtual",children:"Virtual"}),(0,b.jsx)("option",{value:"physical",children:"Physical"}),(0,b.jsx)("option",{value:"fba_kit",children:"FBA Kit"})]})]})}),E.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(a=>(0,b.jsx)(k,{bundle:a,onClick:()=>{x(a),t(!0)},onEdit:b=>I(a,b),onDelete:b=>H(a,b)},a.id))}):(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-12 text-center",children:[(0,b.jsx)("i",{className:"fas fa-layer-group text-4xl text-slate-600 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No bundles found"}),(0,b.jsx)("p",{className:"text-slate-400 mb-4",children:y||A?"Try adjusting your search or filters":"Create your first bundle to get started"}),!y&&!A&&(0,b.jsxs)("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg transition-colors",children:[(0,b.jsx)("i",{className:"fas fa-plus mr-2"}),"Create Bundle"]})]}),G.length>0&&(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"px-5 py-4 border-b border-slate-700/50 flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-semibold text-white",children:"Component Usage Across Bundles"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"Which products are used in which bundles"})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-slate-800/50 border-b border-slate-700/50",children:(0,b.jsxs)("tr",{className:"text-left text-xs text-slate-400 uppercase tracking-wider",children:[(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Component"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Used In"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Total Needed"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-right",children:"Available Stock"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-right",children:"Can Build"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:G.slice(0,10).map(c=>{let d=Math.min(...c.bundles.map(a=>Math.floor(c.availableStock/a.qty)));return(0,b.jsxs)("tr",{className:"hover:bg-slate-700/30 transition-colors cursor-pointer",onClick:()=>a.push(`/inventory/${c.productId}`),children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-emerald-500/20 rounded flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-flask text-emerald-400 text-xs"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-white",children:c.productName}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:c.sku})]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[c.bundles.slice(0,3).map((a,c)=>(0,b.jsxs)("span",{className:"px-2 py-0.5 bg-slate-700/50 text-slate-300 text-xs rounded",children:[a.name," (x",a.qty,")"]},c)),c.bundles.length>3&&(0,b.jsxs)("span",{className:"px-2 py-0.5 text-slate-500 text-xs",children:["+",c.bundles.length-3," more"]})]})}),(0,b.jsxs)("td",{className:"px-4 py-3 text-center text-sm text-slate-400",children:[c.totalQty," per set"]}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:(0,b.jsx)("span",{className:`text-sm ${c.availableStock>0?"text-white":"text-red-400"}`,children:(0,j.formatNumber)(c.availableStock)})}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:(0,b.jsx)("span",{className:`text-sm font-medium ${d>10?"text-emerald-400":d>0?"text-amber-400":"text-red-400"}`,children:(0,j.formatNumber)(d)})})]},c.productId)})})]})}),G.length>10&&(0,b.jsx)("div",{className:"px-4 py-3 border-t border-slate-700/50 text-center",children:(0,b.jsxs)("span",{className:"text-sm text-slate-400",children:["Showing 10 of ",G.length," components"]})})]}),(0,b.jsx)(h.BundleModal,{isOpen:q,onClose:()=>{r(!1),v(null)},editBundle:u}),(0,b.jsx)(i.BundleDetailModal,{isOpen:s,onClose:()=>{t(!1),x(null)},bundle:w,onEdit:()=>{w&&I(w)}})]})}a.s(["default",()=>m],72043)}];

//# sourceMappingURL=app_%28dashboard%29_inventory_bundles_page_tsx_87a5430a._.js.map