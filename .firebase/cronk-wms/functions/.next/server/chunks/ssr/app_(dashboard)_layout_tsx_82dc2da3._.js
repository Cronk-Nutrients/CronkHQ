module.exports=[23415,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(53131),f=a.i(90761);function g({children:a,allowedRoles:g,requireOrganization:h=!0}){let{user:i,userProfile:j,loading:k,isDemo:l}=(0,e.useAuth)(),{organization:m,loading:n,needsSetup:o}=(0,f.useOrganization)(),p=(0,d.useRouter)(),q=(0,d.usePathname)(),r=k||n;return((0,c.useEffect)(()=>{if(!r){if(!i)return void p.push(`/login?redirect=${encodeURIComponent(q)}`);if(g&&j&&!g.includes(j.role))return void p.push("/unauthorized");if(h&&!l&&o)return void p.push("/setup")}},[i,j,r,p,q,g,m,l,o,h]),r)?(0,b.jsx)("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-400",children:"Loading..."})]})}):!i||g&&j&&!g.includes(j.role)||h&&!l&&o?null:(0,b.jsx)(b.Fragment,{children:a})}var h=a.i(38246),i=a.i(98263),j=a.i(39634),k=a.i(79731);function l(){let a=(0,d.usePathname)(),{state:f}=(0,i.useApp)(),{userProfile:g,logout:l}=(0,e.useAuth)(),{can:m,canAny:n,role:o}=(0,j.usePermissions)(),[p,q]=(0,c.useState)([]),r=f.orders.filter(a=>"to_pick"===a.status||"picking"===a.status).length,s=f.orders.filter(a=>"to_pack"===a.status||"packing"===a.status).length,t=f.orders.filter(a=>!["shipped","delivered","cancelled","draft"].includes(a.status)).length,u=f.orders.filter(a=>"draft"===a.status).length,v=f.returns?.filter(a=>!["refunded","rejected"].includes(a.status)).length||0,w=f.transfers?.filter(a=>"in_transit"===a.status).length||0,x=f.purchaseOrders?.filter(a=>!["received","cancelled"].includes(a.status)).length||0,y=f.workOrders?.filter(a=>!["completed","cancelled"].includes(a.status)).length||0,z=a=>a.filter(a=>(!a.permission||!!m(a.permission))&&(!a.permissions||!!n(a.permissions))).map(a=>a.children?{...a,children:z(a.children)}:a).filter(a=>!a.children||0!==a.children.length),A=z([{href:"/",icon:"fa-chart-line",label:"Dashboard",permission:"dashboard.view"},{id:"inventory",icon:"fa-boxes-stacked",label:"Inventory",permission:"inventory.view",children:[{href:"/inventory",icon:"fa-box",label:"Products",permission:"inventory.view"},{href:"/locations",icon:"fa-warehouse",label:"Locations",permission:"inventory.view"},{href:"/inventory/counts",icon:"fa-clipboard-check",label:"Stock Counts",permission:"stock.cycle_count"},{href:"/inventory/transfers",icon:"fa-exchange-alt",label:"Transfers",badge:w,permission:"stock.transfer"},{href:"/inventory/suppliers",icon:"fa-truck-loading",label:"Suppliers",permission:"suppliers.view"},{href:"/inventory/bundles",icon:"fa-layer-group",label:"Bundles & Kits",permission:"inventory.view"}]},{id:"orders",icon:"fa-shopping-cart",label:"Orders",badge:t,permission:"orders.view",children:[{href:"/orders",icon:"fa-list",label:"All Orders",badge:t,permission:"orders.view"},{href:"/orders/drafts",icon:"fa-file-alt",label:"Draft Orders",badge:u,permission:"orders.create"},{href:"/orders/returns",icon:"fa-undo",label:"Returns",badge:v,permission:"returns.view"}]},{id:"fulfillment",icon:"fa-shipping-fast",label:"Fulfillment",badge:r+s,permission:"fulfillment.view",children:[{href:"/fulfillment",icon:"fa-clipboard-list",label:"Overview",permission:"fulfillment.view"},{href:"/fulfillment/pick",icon:"fa-hand-pointer",label:"Pick Station",badge:r,permission:"fulfillment.pick"},{href:"/fulfillment/pack",icon:"fa-box-open",label:"Pack Station",badge:s,permission:"fulfillment.pack"},{href:"/fulfillment/fba",icon:"fa-amazon",label:"FBA Prep",isBrand:!0,permission:"fba.view"},{href:"/fulfillment/shipping",icon:"fa-truck",label:"Shipping",permission:"fulfillment.ship"}]},{id:"operations",icon:"fa-cogs",label:"Operations",badge:x+y,permissions:["purchase_orders.view","work_orders.view"],children:[{href:"/operations/purchase-orders",icon:"fa-file-invoice",label:"Purchase Orders",badge:x,permission:"purchase_orders.view"},{href:"/operations/work-orders",icon:"fa-industry",label:"Work Orders",badge:y,permission:"work_orders.view"}]},{id:"marketing",icon:"fa-bullhorn",label:"Marketing",permission:"marketing.view",children:[{href:"/marketing",icon:"fa-chart-line",label:"Dashboard",permission:"marketing.view"},{href:"/marketing/google-ads",icon:"fa-google",label:"Google Ads",isBrand:!0,permission:"marketing.view_spend"},{href:"/marketing/meta-ads",icon:"fa-meta",label:"Meta Ads",isBrand:!0,permission:"marketing.view_spend"},{href:"/marketing/amazon-ads",icon:"fa-amazon",label:"Amazon Ads",isBrand:!0,permission:"marketing.view_spend"},{href:"/marketing/tiktok-ads",icon:"fa-tiktok",label:"TikTok Ads",isBrand:!0,permission:"marketing.view_spend"},{href:"/marketing/email",icon:"fa-envelope",label:"Email Marketing",permission:"marketing.view"}]}]),B=z([{id:"reports",icon:"fa-chart-pie",label:"Reports",permission:"reports.view",children:[{href:"/reports",icon:"fa-chart-line",label:"Overview",permission:"reports.view"},{href:"/reports/sales",icon:"fa-dollar-sign",label:"Sales",permission:"reports.view_financial"},{href:"/reports/inventory",icon:"fa-boxes-stacked",label:"Inventory",permission:"reports.view"},{href:"/reports/shipping",icon:"fa-truck-fast",label:"Shipping",permission:"reports.view"},{href:"/reports/returns",icon:"fa-rotate-left",label:"Returns",permission:"reports.view"},{href:"/reports/marketing",icon:"fa-bullhorn",label:"Marketing",permission:"marketing.view"},{href:"/reports/financial",icon:"fa-file-invoice-dollar",label:"Financial",permission:"reports.view_financial"},{href:"/reports/custom",icon:"fa-wand-magic-sparkles",label:"Custom Builder",permission:"reports.export"},{href:"/reports/scheduled",icon:"fa-clock",label:"Scheduled",permission:"reports.export"}]},{href:"/settings",icon:"fa-cog",label:"Settings",permission:"settings.view"}]);(0,c.useEffect)(()=>{[...A,...B].forEach(b=>{b.children&&b.id&&b.children.some(b=>b.href===a||a.startsWith(b.href+"/"))&&!p.includes(b.id)&&q(a=>[...a,b.id])})},[a,A,B]);let C=b=>"/"===b?"/"===a:a===b||a.startsWith(b+"/"),D=a=>{if(a.children)return(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>{var b;return b=a.id,void q(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${a.children&&a.children.some(a=>a.href&&C(a.href))?"bg-emerald-500/10 text-emerald-400":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[(0,b.jsx)("i",{className:`fas ${a.icon} w-5`}),(0,b.jsx)("span",{className:"font-medium",children:a.label}),(a.badge??0)>0&&(0,b.jsx)("span",{className:"ml-auto mr-2 bg-amber-500/20 text-amber-400 text-xs px-2 py-0.5 rounded-full",children:a.badge}),(0,b.jsx)("i",{className:`fas fa-chevron-${p.includes(a.id)?"down":"right"} text-xs text-slate-500 ${(a.badge??0)>0?"":"ml-auto"}`})]}),p.includes(a.id)&&(0,b.jsx)("div",{className:"ml-4 mt-1 space-y-1 border-l border-slate-700/50 pl-3",children:a.children.map(a=>(0,b.jsxs)(h.default,{href:a.href,className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all text-sm ${C(a.href)?"bg-emerald-500/10 text-emerald-400":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[(0,b.jsx)("i",{className:`${a.isBrand?"fab":"fas"} ${a.icon} w-4 text-xs`}),(0,b.jsx)("span",{children:a.label}),(a.badge??0)>0&&(0,b.jsx)("span",{className:`ml-auto text-xs px-2 py-0.5 rounded-full ${a.label.includes("Pick")?"bg-amber-500/20 text-amber-400":a.label.includes("Pack")?"bg-blue-500/20 text-blue-400":a.label.includes("Return")?"bg-purple-500/20 text-purple-400":(a.label.includes("Draft"),"bg-slate-500/20 text-slate-400")}`,children:a.badge})]},a.href))})]},a.id||a.href);return(0,b.jsxs)(h.default,{href:a.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${C(a.href)?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[(0,b.jsx)("i",{className:`fas ${a.icon} w-5`}),(0,b.jsx)("span",{className:"font-medium",children:a.label}),(a.badge??0)>0&&(0,b.jsx)("span",{className:"ml-auto bg-amber-500/20 text-amber-400 text-xs px-2 py-0.5 rounded-full",children:a.badge})]},a.href)};return(0,b.jsxs)("aside",{className:"fixed left-0 top-0 z-40 h-screen w-64 bg-slate-900/80 border-r border-slate-700/50 flex flex-col",children:[(0,b.jsx)(h.default,{href:"/",className:"block p-5 border-b border-slate-700/50 hover:bg-slate-800/30 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-leaf text-white text-lg"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"font-bold text-white text-lg",children:"Cronk HQ"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"Operations & Fulfillment"})]})]})}),(0,b.jsxs)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[A.map(D),(0,b.jsx)("div",{className:"my-4 border-t border-slate-700/50"}),B.map(D)]}),(0,b.jsx)("div",{className:"p-4 border-t border-slate-700/50",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white font-medium text-sm",children:g?.displayName?g.displayName.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2):g?.email?.slice(0,2).toUpperCase()||"U"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-white truncate",children:g?.displayName||g?.email||"User"}),(0,b.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs border ${(0,k.getRoleBadgeColor)(o)}`,children:(0,k.getRoleDisplayName)(o)})]}),(0,b.jsx)("button",{onClick:()=>l(),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",title:"Sign out",children:(0,b.jsx)("i",{className:"fas fa-sign-out-alt"})})]})})]})}var m=a.i(23312);let n=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=a.i(41675),p=a.i(5784),q=a.i(33441),r=a.i(73570),s=a.i(83497),t=a.i(38784),u=a.i(33508),v=a.i(89300);let w=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"wtd",label:"Week to Date"},{value:"mtd",label:"Month to Date"},{value:"ytd",label:"Year to Date"},{value:"last7",label:"Last 7 Days",divider:!0},{value:"last30",label:"Last 30 Days"},{value:"last90",label:"Last 90 Days"},{value:"custom",label:"Custom Range",divider:!0}],x=[{id:1,type:"warning",title:"Low Stock Alert",message:"Big Bud 1L is below reorder point (12 units)",time:"5 min ago"},{id:2,type:"order",title:"New Order",message:"Order #10492 received from Shopify",time:"12 min ago"},{id:3,type:"success",title:"Shipment Delivered",message:"Order #10485 delivered to customer",time:"1 hour ago"}];function y(){let{dateRange:a,preset:d,setPreset:f,setCustomRange:g}=(0,v.useDateRange)(),{isDemo:h}=(0,e.useAuth)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)("2 min ago"),I=h?x:[];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("header",{className:"fixed top-0 left-64 right-0 z-30 h-16 bg-slate-900/80 backdrop-blur border-b border-slate-700/50",children:(0,b.jsxs)("div",{className:"flex h-full items-center justify-between px-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-4"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>j(!i),className:"flex items-center gap-2 rounded-lg bg-slate-800/50 px-4 py-2 text-sm font-medium text-white border border-slate-700/50 hover:bg-slate-700/50 transition-colors",children:[(0,b.jsx)(o.Calendar,{className:"h-4 w-4 text-slate-400"}),(0,b.jsx)("span",{children:"custom"===d?a.label:w.find(a=>a.value===d)?.label||"Select Range"}),(0,b.jsx)(p.ChevronDown,{className:"h-4 w-4 text-slate-400"})]}),i&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1)}),(0,b.jsx)("div",{className:"absolute right-0 top-full mt-2 z-20 w-48 rounded-xl bg-slate-800 border border-slate-700/50 shadow-xl overflow-hidden",children:w.map((a,c)=>(0,b.jsxs)("div",{children:[a.divider&&c>0&&(0,b.jsx)("div",{className:"border-t border-slate-700/50 my-1"}),(0,b.jsx)("button",{onClick:()=>(a=>{if("custom"===a){let a=new Date,b=new Date(a);b.setDate(a.getDate()-30),z(b.toISOString().split("T")[0]),B(a.toISOString().split("T")[0]),l(!0),j(!1)}else f(a),j(!1)})(a.value),className:`w-full px-4 py-2.5 text-left text-sm transition-colors ${d===a.value?"bg-emerald-500/20 text-emerald-400":"text-slate-300 hover:bg-slate-700/50"}`,children:a.label})]},a.value))})]})]}),(0,b.jsxs)("button",{onClick:()=>{F(!0),setTimeout(()=>{F(!1),H("Just now")},2e3)},disabled:E,className:"flex items-center gap-2 rounded-lg bg-slate-800/50 px-4 py-2 text-sm font-medium border border-slate-700/50 hover:bg-slate-700/50 transition-colors disabled:opacity-50",children:[(0,b.jsx)(n,{className:`h-4 w-4 text-emerald-400 ${E?"animate-spin":""}`}),(0,b.jsx)("span",{className:"text-slate-300",children:E?"Syncing...":`Synced ${G}`})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>D(!C),className:"relative flex h-10 w-10 items-center justify-center rounded-lg bg-slate-800/50 border border-slate-700/50 hover:bg-slate-700/50 transition-colors",children:[(0,b.jsx)(m.Bell,{className:"h-5 w-5 text-slate-400"}),I.length>0&&(0,b.jsx)("span",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500 text-xs font-bold text-white",children:I.length})]}),C&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>D(!1)}),(0,b.jsxs)("div",{className:"absolute right-0 top-full mt-2 z-20 w-80 rounded-xl bg-slate-800 border border-slate-700/50 shadow-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"border-b border-slate-700/50 px-4 py-3",children:(0,b.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Notifications"})}),(0,b.jsx)("div",{className:"max-h-80 overflow-y-auto",children:0===I.length?(0,b.jsxs)("div",{className:"px-4 py-8 text-center text-slate-400",children:[(0,b.jsx)(m.Bell,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"No notifications"})]}):I.map(a=>(0,b.jsxs)("div",{className:"flex gap-3 px-4 py-3 hover:bg-slate-700/30 transition-colors border-b border-slate-700/30 last:border-0",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-slate-700/50",children:(a=>{switch(a){case"warning":return(0,b.jsx)(r.AlertTriangle,{className:"h-4 w-4 text-amber-400"});case"order":return(0,b.jsx)(t.ShoppingCart,{className:"h-4 w-4 text-blue-400"});case"success":return(0,b.jsx)(q.Check,{className:"h-4 w-4 text-emerald-400"});default:return(0,b.jsx)(s.Package,{className:"h-4 w-4 text-slate-400"})}})(a.type)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-slate-400 truncate",children:a.message}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:a.time})]})]},a.id))}),(0,b.jsx)("div",{className:"border-t border-slate-700/50 px-4 py-2",children:(0,b.jsx)("button",{className:"w-full text-center text-sm text-emerald-400 hover:text-emerald-300 transition-colors",children:"View all notifications"})})]})]})]})]})]})}),k&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>l(!1)}),(0,b.jsxs)("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Custom Date Range"}),(0,b.jsx)("button",{onClick:()=>l(!1),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",children:(0,b.jsx)(u.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:y,onChange:a=>z(a.target.value),max:A||void 0,className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"End Date"}),(0,b.jsx)("input",{type:"date",value:A,onChange:a=>B(a.target.value),min:y||void 0,max:new Date().toISOString().split("T")[0],className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500"})]}),y&&A&&(0,b.jsxs)("p",{className:"text-sm text-slate-400",children:["Selected: ",new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-slate-700",children:[(0,b.jsx)("button",{onClick:()=>l(!1),className:"px-4 py-2 text-slate-300 hover:text-white transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{if(y&&A){let a=new Date(y),b=new Date(A);a<=b&&(g(a,b),l(!1))}},disabled:!y||!A,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 disabled:text-slate-500 text-white font-medium rounded-lg transition-colors",children:"Apply Range"})]})]})]})]})}function z({children:a}){return(0,b.jsxs)(g,{children:[(0,b.jsx)(l,{}),(0,b.jsx)(y,{}),(0,b.jsx)("main",{className:"ml-64 pt-16 min-h-screen bg-slate-900",children:(0,b.jsx)("div",{className:"p-6",children:a})})]})}a.s(["default",()=>z],23415)}];

//# sourceMappingURL=app_%28dashboard%29_layout_tsx_82dc2da3._.js.map