{"version":3,"sources":["../../../../components/PermissionGate.tsx","../../../../node_modules/lucide-react/src/icons/lock.ts"],"sourcesContent":["'use client'\n\nimport { ReactNode } from 'react'\nimport { Lock } from 'lucide-react'\nimport { usePermissions } from '@/hooks/usePermissions'\nimport { Permission } from '@/lib/permissions'\n\ninterface PermissionGateProps {\n  children: ReactNode\n  /** Single permission to check */\n  permission?: Permission\n  /** Multiple permissions to check */\n  permissions?: Permission[]\n  /** If true, require ALL permissions. If false (default), require ANY permission */\n  requireAll?: boolean\n  /** Content to show if permission is denied */\n  fallback?: ReactNode\n  /** Show a lock icon/message when access is denied */\n  showLock?: boolean\n  /** Custom message to show when locked */\n  lockMessage?: string\n}\n\n/**\n * Gate component that conditionally renders children based on user permissions\n *\n * Usage:\n * ```tsx\n * <PermissionGate permission=\"products.edit\">\n *   <EditButton />\n * </PermissionGate>\n *\n * <PermissionGate permissions={['orders.edit', 'orders.delete']} requireAll>\n *   <OrderActions />\n * </PermissionGate>\n * ```\n */\nexport function PermissionGate({\n  children,\n  permission,\n  permissions,\n  requireAll = false,\n  fallback = null,\n  showLock = false,\n  lockMessage = \"You don't have permission to view this\",\n}: PermissionGateProps) {\n  const { can, canAny, canAll } = usePermissions()\n\n  let hasAccess = false\n\n  if (permission) {\n    hasAccess = can(permission)\n  } else if (permissions) {\n    hasAccess = requireAll ? canAll(permissions) : canAny(permissions)\n  } else {\n    // No permission specified, allow access\n    hasAccess = true\n  }\n\n  if (hasAccess) {\n    return <>{children}</>\n  }\n\n  if (showLock) {\n    return (\n      <div className=\"flex items-center justify-center p-8 bg-slate-800/30 rounded-xl border border-slate-700/50\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-3\">\n            <Lock className=\"h-5 w-5 text-slate-500\" />\n          </div>\n          <p className=\"text-slate-400 text-sm\">{lockMessage}</p>\n        </div>\n      </div>\n    )\n  }\n\n  return <>{fallback}</>\n}\n\n/**\n * Higher-order component version of PermissionGate\n */\nexport function withPermission<P extends object>(\n  Component: React.ComponentType<P>,\n  permission: Permission,\n  fallback?: ReactNode\n) {\n  return function PermissionWrappedComponent(props: P) {\n    return (\n      <PermissionGate permission={permission} fallback={fallback}>\n        <Component {...props} />\n      </PermissionGate>\n    )\n  }\n}\n\n/**\n * Hook to check if current user can access a route/feature\n * Returns true if access is allowed\n */\nexport function useCanAccess(permission: Permission): boolean {\n  const { can } = usePermissions()\n  return can(permission)\n}\n\n/**\n * Component that only renders for admin users\n */\nexport function AdminOnly({ children, fallback }: { children: ReactNode; fallback?: ReactNode }) {\n  const { isAdmin } = usePermissions()\n  return isAdmin ? <>{children}</> : <>{fallback}</>\n}\n\n/**\n * Component that hides content from viewer role\n */\nexport function HideFromViewer({ children }: { children: ReactNode }) {\n  const { isViewer } = usePermissions()\n  return isViewer ? null : <>{children}</>\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '11', x: '3', y: '11', rx: '2', ry: '2', key: '1w4ew1' }],\n  ['path', { d: 'M7 11V7a5 5 0 0 1 10 0v4', key: 'fwvmzm' }],\n];\n\n/**\n * @component @name Lock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTEiIHg9IjMiIHk9IjExIiByeD0iMiIgcnk9IjIiIC8+CiAgPHBhdGggZD0iTTcgMTFWN2E1IDUgMCAwIDEgMTAgMHY0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/lock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Lock = createLucideIcon('lock', __iconNode);\n\nexport default Lock;\n"],"names":[],"mappings":"wDCmBA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAN,CAAa,CAAA,CAAP,AAAO,CAAP,AAAO,CAAP,AAAO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAhBM,CAClC,AAeoC,CAfnC,AAemC,CAfnC,AAemC,CAfnC,AAemC,CAfnC,AAemC,CAfnC,AAemC,CAfnC,AAemC,CAfnC,AAemC,CAf3B,AAAR,AAemC,CAf3B,AAAE,AAeyB,CAAU,CAAA,GAfnC,CAAA,AAAO,CAAA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAA,CAAA,CAAA,CAAA,CAAA,EAAQ,CAAA,CAAA,CAAA,CAAA,CAAM,AAAN,CAAM,CAAG,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,AAAG,CAAA,CAAA,CAAA,EAAM,CAAA,CAAA,CAAA,AAAI,GAAA,CAAA,AAAK,CAAA,EAAI,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CACxF,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAA4B,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAC3D,EDFA,IAAA,EAAA,EAAA,CAAA,CAAA,OAiCO,SAAS,EAAe,UAC7B,CAAQ,YACR,CAAU,aACV,CAAW,YACX,GAAa,CAAK,UAClB,EAAW,IAAI,UACf,GAAW,CAAK,CAChB,cAAc,wCAAwC,CAClC,EACpB,GAAM,KAAE,CAAG,QAAE,CAAM,QAAE,CAAM,CAAE,CAAG,CAAA,EAAA,EAAA,cAAA,AAAc,UAa9C,CATI,EACU,CAQV,CARc,IACP,IACG,AAHE,EAGW,AAMZ,EANmB,GAAe,EADzB,AACgC,EAAA,GAO/C,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,QAAA,CAAA,UAAG,IAGR,EAEA,CAAA,EAAA,EAAA,GAAA,AAFU,EAET,MAAA,CAAI,UAAU,sGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gGACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,UAAU,6BAElB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAA0B,SAMxC,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,QAAA,CAAA,UAAG,GACZ,CA+BO,SAAS,EAAU,UAAE,CAAQ,UAAE,CAAQ,CAAiD,EAC7F,GAAM,SAAE,CAAO,CAAE,CAAG,CAAA,EAAA,EAAA,cAAA,AAAc,IAClC,OAAO,EAAU,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,QAAA,CAAA,UAAG,IAAe,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,QAAA,CAAA,UAAG,GACxC","ignoreList":[1]}