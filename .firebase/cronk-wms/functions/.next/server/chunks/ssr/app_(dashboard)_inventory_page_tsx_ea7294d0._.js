module.exports=[18054,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(98263),g=a.i(89697),h=a.i(57581),i=a.i(88736),j=a.i(63820),k=a.i(68726),l=a.i(49611),m=a.i(82840),n=a.i(12466),o=a.i(79497);let p={name:"name","item name":"name","product name":"name",barcode:"barcode",upc:"barcode",sku:"sku","item #":"sku","item number":"sku",category:"category",type:"category",description:"description","sale price":"salePrice","selling price":"salePrice",price:"salePrice","purchase cost":"cost",cost:"cost","unit cost":"cost",cogs:"cost","quantity on hand":"quantity","qty on hand":"quantity",quantity:"quantity",qty:"quantity",stock:"quantity",available:"quantity",location:"location",warehouse:"location",bin:"binLocation","bin location":"binLocation","reorder point":"reorderPoint","reorder level":"reorderPoint","minimum stock":"reorderPoint",vendor:"vendor","vendor name":"vendor",supplier:"vendor","supplier name":"vendor","default vendor":"vendor","vendor sku":"vendorSku","supplier sku":"vendorSku","vendor part #":"vendorSku",manufacturer:"manufacturer","manufacturer sku":"manufacturerSku",weight:"weight","weight (lbs)":"weight","weight (oz)":"weight","item weight":"weight",notes:"notes"};function q({isOpen:a,onClose:d}){let e,f,h,j,k,{locations:l}=(0,o.useLocations)(),{suppliers:m,service:q,isDemo:r}=(0,o.useSuppliers)(),{products:s,service:t}=(0,o.useProducts)(),{service:u}=(0,o.useInventory)(),{success:v,error:w,warning:x}=(0,g.useToast)(),y=(0,c.useRef)(null),[z,A]=(0,c.useState)("upload"),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(!0),[J,K]=(0,c.useState)(!0),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(0),P=l.find(a=>"warehouse"===a.type)||l[0];!F&&P&&G(P.id);let Q=()=>{A("upload"),C(""),E([]);let a=l.find(a=>"warehouse"===a.type)||l[0];G(a?.id||""),I(!0),K(!0),O(0),y.current&&(y.current.value="")},R=a=>{if(!a.name.endsWith(".csv"))return void w("Please select a CSV file");C(a.name);let b=new FileReader;b.onload=a=>{let b=(a=>{let b=a.split(/\r?\n/).filter(a=>a.trim());if(0===b.length)return[];let c=b[0].split(",").map(a=>a.trim().replace(/^"|"$/g,"").toLowerCase()),d=[];for(let a=1;a<b.length;a++){let e=[],f="",g=!1;for(let c of b[a])'"'===c?g=!g:","!==c||g?f+=c:(e.push(f.trim().replace(/^"|"$/g,"")),f="");e.push(f.trim().replace(/^"|"$/g,""));let h={};c.forEach((a,b)=>{h[a]=e[b]||""}),d.push(h)}return d})(a.target?.result);if(0===b.length)return void w("Could not parse CSV file or file is empty");let c=b.map(a=>{let b,c,d;return c=(b=b=>{for(let[c,d]of Object.entries(p))if(d===b&&a[c])return a[c];return""})("name"),((d=b("sku"))||!c||(d=b("barcode")||c.substring(0,20).replace(/\s+/g,"-").toUpperCase()),c)?{name:c,sku:d,barcode:b("barcode")||void 0,category:b("category")||"supply",description:b("description")||void 0,salePrice:parseFloat(b("salePrice"))||void 0,cost:parseFloat(b("cost"))||void 0,quantity:parseInt(b("quantity"))||0,location:b("location")||void 0,binLocation:b("binLocation")||void 0,reorderPoint:parseInt(b("reorderPoint"))||void 0,vendor:b("vendor")||void 0,vendorSku:b("vendorSku")||void 0,weight:parseFloat(b("weight"))||void 0,notes:b("notes")||void 0}:null}).filter(a=>null!==a);0===c.length?w("No valid products found. Make sure your CSV has Name and SKU columns."):(E(c),A("preview"))},b.readAsText(a)},S=(0,c.useCallback)(a=>{a.preventDefault(),M(!1);let b=a.dataTransfer.files[0];b&&R(b)},[]),T=(0,c.useCallback)(a=>{a.preventDefault(),M(!0)},[]),U=(0,c.useCallback)(()=>{M(!1)},[]),V=async()=>{if(t){if(r)return void w("Import is not available in demo mode");A("importing"),O(0);try{let a=new Set(s.map(a=>a.sku.toLowerCase())),b=new Map(m.map(a=>[a.name.toLowerCase(),a])),c=new Map,e=0,f=0,g=0,h=0,i=[],j=[],k=[],l=D.length;for(let d=0;d<D.length;d++){let m=D[d];if(O(Math.round((d+1)/l*50)),a.has(m.sku.toLowerCase())){f++;continue}let n=(m.category||"supply").toLowerCase(),o="supply";n.includes("nutrient")||n.includes("supplement")?o="nutrient":n.includes("packaging")||n.includes("box")||n.includes("bottle")?o="packaging":n.includes("label")&&(o="label");let p=m.salePrice||0,r={name:m.name,sku:m.sku.toUpperCase(),barcode:m.barcode,category:o,weight:m.weight,prices:{msrp:p,shopify:p,amazon:p,wholesale:.6*p,distributor:.45*p},costs:{base:m.cost||0,amazonPrep:0,shopify:0},reorderPoint:m.reorderPoint||50,isActive:!0};i.push(r),a.add(m.sku.toLowerCase()),e++,H&&F&&void 0!==m.quantity&&(k.push({productIndex:i.length-1,quantity:m.quantity,binLocation:m.binLocation}),g++),J&&m.vendor&&q&&!b.get(m.vendor.toLowerCase())&&!c.has(m.vendor.toLowerCase())&&(j.push({name:m.vendor,currency:"USD"}),c.set(m.vendor.toLowerCase(),`pending-${j.length-1}`),h++)}O(60),j.length>0&&q&&await q.batchCreate(j),O(70);let n=await t.batchCreate(i);if(O(85),k.length>0&&u){let a=[];for(let b of k){let c=n[b.productIndex];a.push({productId:c,locationId:F,quantity:b.quantity,binLocation:b.binLocation||""})}await u.batchCreate(a)}O(100);let o=[];e>0&&o.push(`${e} products`),g>0&&o.push(`${g} inventory records`),h>0&&o.push(`${h} new vendors`),o.length>0&&v(`Successfully imported ${o.join(", ")}`),f>0&&x(`Skipped ${f} products (duplicate SKUs)`),Q(),d()}catch(a){console.error("Import error:",a),w("Failed to import products"),A("preview")}}},W=()=>{Q(),d()},X=D.filter(a=>!s.some(b=>b.sku.toLowerCase()===a.sku.toLowerCase())).length;return(0,b.jsxs)(i.Modal,{open:a,onClose:"importing"===z?()=>{}:W,title:"Import from inFlow",subtitle:"Import products, inventory, and vendors from inFlow Inventory",size:"lg",footer:"preview"===z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(n.Button,{variant:"secondary",onClick:()=>A("upload"),children:[(0,b.jsx)("i",{className:"fas fa-arrow-left mr-2"}),"Back"]}),(0,b.jsxs)(n.Button,{onClick:V,disabled:r||0===X,children:[(0,b.jsx)("i",{className:"fas fa-file-import mr-2"}),"Import ",X," Products"]})]}):"upload"===z?(0,b.jsx)(n.Button,{variant:"secondary",onClick:W,children:"Cancel"}):void 0,children:["upload"===z&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-exchange-alt text-blue-400 text-xl"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-white font-semibold",children:"inFlow Import Tool"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Directly import product data exported from inFlow Inventory"})]})]})}),(0,b.jsxs)("div",{onDrop:S,onDragOver:T,onDragLeave:U,onClick:()=>y.current?.click(),className:`border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors ${L?"border-blue-500 bg-blue-500/10":"border-slate-700 hover:border-slate-600"}`,children:[(0,b.jsx)("input",{ref:y,type:"file",accept:".csv",onChange:a=>{let b=a.target.files?.[0];b&&R(b)},className:"hidden"}),(0,b.jsx)("i",{className:"fas fa-file-csv text-4xl text-slate-500 mb-4"}),(0,b.jsx)("p",{className:"text-white font-medium mb-1",children:"Drop your inFlow CSV export here"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"or click to browse"})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:"How to Export from inFlow"}),(0,b.jsxs)("ol",{className:"text-sm text-slate-400 space-y-1 list-decimal list-inside",children:[(0,b.jsxs)("li",{children:["In inFlow, go to ",(0,b.jsx)("span",{className:"text-slate-300",children:"Main Menu → Products"})]}),(0,b.jsxs)("li",{children:["Click ",(0,b.jsx)("span",{className:"text-slate-300",children:"Export"})," button"]}),(0,b.jsxs)("li",{children:["Choose ",(0,b.jsx)("span",{className:"text-slate-300",children:"CSV format"})]}),(0,b.jsx)("li",{children:"Include: Name, Barcode, Category, Price, Cost, Quantity, Vendor"})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:"Supported inFlow Columns"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5",children:["Name","Barcode","Category","Sale Price","Purchase Cost","Quantity on Hand","Location","Vendor","Vendor SKU","Reorder Point"].map(a=>(0,b.jsx)("span",{className:"px-2 py-0.5 bg-slate-700 text-slate-300 text-xs rounded",children:a},a))})]}),r&&(0,b.jsx)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-amber-400 text-sm",children:[(0,b.jsx)("i",{className:"fas fa-info-circle"}),(0,b.jsx)("span",{children:"Import is disabled in demo mode. Sign in to import products."})]})})]}),"preview"===z&&(e=new Set(s.map(a=>a.sku.toLowerCase())),f=D.filter(a=>e.has(a.sku.toLowerCase())),h=D.filter(a=>!e.has(a.sku.toLowerCase())),j=D.filter(a=>a.quantity&&a.quantity>0),k=D.filter(a=>a.vendor),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,b.jsxs)("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-emerald-400",children:h.length}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"New Products"})]}),(0,b.jsxs)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:f.length}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Duplicates"})]}),(0,b.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:j.length}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"With Stock"})]}),(0,b.jsxs)("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:k.length}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"With Vendors"})]})]}),(0,b.jsxs)("div",{className:"border border-slate-700 rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"max-h-48 overflow-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-slate-800 sticky top-0",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-3 py-2 text-left text-slate-400 font-medium",children:"SKU"}),(0,b.jsx)("th",{className:"px-3 py-2 text-left text-slate-400 font-medium",children:"Name"}),(0,b.jsx)("th",{className:"px-3 py-2 text-right text-slate-400 font-medium",children:"Qty"}),(0,b.jsx)("th",{className:"px-3 py-2 text-right text-slate-400 font-medium",children:"Cost"}),(0,b.jsx)("th",{className:"px-3 py-2 text-left text-slate-400 font-medium",children:"Vendor"}),(0,b.jsx)("th",{className:"px-3 py-2 text-center text-slate-400 font-medium",children:"Status"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:D.slice(0,50).map((a,c)=>{let d=e.has(a.sku.toLowerCase());return(0,b.jsxs)("tr",{className:`${d?"bg-amber-500/5":"bg-slate-800/30"}`,children:[(0,b.jsx)("td",{className:"px-3 py-2 text-white font-mono text-xs",children:a.sku}),(0,b.jsx)("td",{className:"px-3 py-2 text-white truncate max-w-[200px]",children:a.name}),(0,b.jsx)("td",{className:"px-3 py-2 text-right text-slate-300",children:a.quantity||"-"}),(0,b.jsx)("td",{className:"px-3 py-2 text-right text-slate-300",children:a.cost?`$${a.cost.toFixed(2)}`:"-"}),(0,b.jsx)("td",{className:"px-3 py-2 text-slate-300 truncate max-w-[120px]",children:a.vendor||"-"}),(0,b.jsx)("td",{className:"px-3 py-2 text-center",children:d?(0,b.jsx)("span",{className:"px-2 py-0.5 bg-amber-500/20 text-amber-400 text-xs rounded",children:"Skip"}):(0,b.jsx)("span",{className:"px-2 py-0.5 bg-emerald-500/20 text-emerald-400 text-xs rounded",children:"Import"})})]},c)})})]})}),D.length>50&&(0,b.jsxs)("div",{className:"px-3 py-2 bg-slate-800/50 text-center text-sm text-slate-400",children:["... and ",D.length-50," more products"]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:[(0,b.jsx)("h5",{className:"text-sm font-medium text-white mb-3",children:"Import Settings"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-slate-400 mb-1",children:"Import Inventory To"}),(0,b.jsxs)("select",{value:F,onChange:a=>G(a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-white text-sm",children:[(0,b.jsx)("option",{value:"",children:"-- Don't import inventory --"}),l.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," (",a.type,")"]},a.id))]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:H,onChange:a=>I(a.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-emerald-500"}),(0,b.jsx)("span",{className:"text-sm text-slate-300",children:"Create inventory records"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:J,onChange:a=>K(a.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-emerald-500"}),(0,b.jsx)("span",{className:"text-sm text-slate-300",children:"Auto-create vendors"})]})]})]})]})]})),"importing"===z&&(0,b.jsxs)("div",{className:"py-8 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-500/20 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-spinner fa-spin text-emerald-400 text-2xl"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Importing Products..."}),(0,b.jsx)("p",{className:"text-slate-400 mb-4",children:"Please wait while we import your data"}),(0,b.jsx)("div",{className:"w-full bg-slate-800 rounded-full h-3 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-blue-500 transition-all duration-300",style:{width:`${N}%`}})}),(0,b.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:[N,"% complete"]})]})]})}var r=a.i(34904),s=a.i(88860),t=a.i(87532),u=a.i(2835),v=a.i(83497),w=a.i(24987),x=a.i(41675),y=a.i(38784),z=a.i(4720),A=a.i(33508),B=a.i(32860),C=a.i(16201),D=a.i(41710),E=a.i(73570);let F=(0,a.i(70106).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function G({onClose:a,embedded:d=!1}){let{state:g}=(0,f.useApp)(),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!1),o=()=>{if(!h.trim())return;let a=h.trim().toLowerCase(),b=g.serialNumbers.find(b=>b.serial.toLowerCase()===a||b.serial.toLowerCase().includes(a));b?(k(b),m(!1)):(k(null),m(!0))},p=a=>{let c={in_stock:{bg:"bg-emerald-500/20",text:"text-emerald-400",icon:C.CheckCircle,label:"In Stock"},reserved:{bg:"bg-amber-500/20",text:"text-amber-400",icon:D.Clock,label:"Reserved"},sold:{bg:"bg-blue-500/20",text:"text-blue-400",icon:y.ShoppingCart,label:"Sold"},returned:{bg:"bg-purple-500/20",text:"text-purple-400",icon:F,label:"Returned"},damaged:{bg:"bg-red-500/20",text:"text-red-400",icon:E.AlertTriangle,label:"Damaged"}}[a],d=c.icon;return(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${c.bg} ${c.text}`,children:[(0,b.jsx)(d,{className:"w-3 h-3"}),c.label]})},q=(0,c.useMemo)(()=>j?g.serialNumbers.filter(a=>a.productId===j.productId&&a.id!==j.id).slice(0,5):[],[j,g.serialNumbers]),G=(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(t.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,b.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),onKeyDown:a=>"Enter"===a.key&&o(),placeholder:"Enter or scan serial number...",className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-10 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono",autoFocus:!0}),h&&(0,b.jsx)("button",{onClick:()=>{i(""),k(null),m(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white",children:(0,b.jsx)(A.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)(n.Button,{onClick:o,children:[(0,b.jsx)(t.Search,{className:"w-4 h-4"}),"Search"]})]}),l&&(0,b.jsxs)("div",{className:"p-6 bg-slate-800/50 border border-slate-700 rounded-lg text-center",children:[(0,b.jsx)(u.Hash,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),(0,b.jsx)("h3",{className:"text-white font-medium mb-1",children:"Serial Not Found"}),(0,b.jsxs)("p",{className:"text-sm text-slate-400",children:['No serial number matching "',h,'" was found in the system.']})]}),j&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(r.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg bg-purple-500/20 flex items-center justify-center",children:(0,b.jsx)(u.Hash,{className:"w-6 h-6 text-purple-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-mono font-medium text-white",children:j.serial}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:j.productName})]})]}),p(j.status)]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Package,{className:"w-4 h-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-slate-400",children:"SKU:"}),(0,b.jsx)("span",{className:"font-mono text-white",children:j.sku})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(w.MapPin,{className:"w-4 h-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-slate-400",children:"Location:"}),(0,b.jsx)("span",{className:"text-white",children:j.locationName})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x.Calendar,{className:"w-4 h-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-slate-400",children:"Received:"}),(0,b.jsx)("span",{className:"text-white",children:(0,s.formatDate)(j.receivedAt)})]}),j.soldAt&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(y.ShoppingCart,{className:"w-4 h-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-slate-400",children:"Sold:"}),(0,b.jsx)("span",{className:"text-white",children:(0,s.formatDate)(j.soldAt)})]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700/50 flex flex-wrap gap-2",children:[(0,b.jsxs)(e.default,{href:`/inventory/${j.productId}`,className:"inline-flex items-center gap-1 text-sm text-emerald-400 hover:text-emerald-300",children:[(0,b.jsx)(v.Package,{className:"w-4 h-4"}),"View Product",(0,b.jsx)(B.ArrowRight,{className:"w-3 h-3"})]}),j.purchaseOrderId&&(0,b.jsxs)(e.default,{href:"/purchase-orders",className:"inline-flex items-center gap-1 text-sm text-blue-400 hover:text-blue-300 ml-4",children:[(0,b.jsx)(z.FileText,{className:"w-4 h-4"}),"View PO",(0,b.jsx)(B.ArrowRight,{className:"w-3 h-3"})]}),j.salesOrderId&&(0,b.jsxs)(e.default,{href:`/orders/${j.salesOrderId}`,className:"inline-flex items-center gap-1 text-sm text-purple-400 hover:text-purple-300 ml-4",children:[(0,b.jsx)(y.ShoppingCart,{className:"w-4 h-4"}),"View Order",(0,b.jsx)(B.ArrowRight,{className:"w-3 h-3"})]})]}),j.notes&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-slate-800/50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-xs text-slate-400 uppercase",children:"Notes"}),(0,b.jsx)("p",{className:"text-sm text-white mt-1",children:j.notes})]})]}),q.length>0&&(0,b.jsxs)(r.Card,{className:"p-4",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium text-white mb-3",children:["Other Serials for this Product (",g.serialNumbers.filter(a=>a.productId===j.productId).length," total)"]}),(0,b.jsx)("div",{className:"space-y-2",children:q.map(a=>(0,b.jsxs)("button",{onClick:()=>{i(a.serial),k(a)},className:"w-full flex items-center justify-between p-2 bg-slate-800/50 hover:bg-slate-700/50 rounded-lg transition-colors",children:[(0,b.jsx)("span",{className:"font-mono text-sm text-white",children:a.serial}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-slate-400",children:a.locationName}),p(a.status)]})]},a.id))})]})]}),!j&&!l&&(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)(u.Hash,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Serial Number Lookup"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 max-w-md mx-auto",children:"Enter a serial number above to look up its status, location, and history. You can also scan a barcode with the serial number."})]})]});return d?G:(0,b.jsxs)(r.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"text-lg font-medium text-white flex items-center gap-2",children:[(0,b.jsx)(u.Hash,{className:"w-5 h-5 text-purple-400"}),"Serial Number Lookup"]}),a&&(0,b.jsx)("button",{onClick:a,className:"text-slate-400 hover:text-white",children:(0,b.jsx)(A.X,{className:"w-5 h-5"})})]}),G]})}var H=a.i(17545),I=a.i(96221);a.i(56298);var J=a.i(11954),K=a.i(89648);function L(){return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)(I.Loader2,{className:"w-8 h-8 text-emerald-500 animate-spin"})})}function M(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(L,{}),children:(0,b.jsx)(N,{})})}function N(){let a=(0,d.useRouter)(),n=(0,d.useSearchParams)(),{state:o,dispatch:p}=(0,f.useApp)(),{success:r,error:t,warning:v}=(0,g.useToast)(),w=(0,h.useConfirm)(),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)("all"),[D,E]=(0,c.useState)("all"),[F,I]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!F){let a=n.get("location"),b=n.get("status"),c=n.get("category"),d=n.get("search");a&&E(a),b&&["in_stock","low_stock","out_of_stock"].includes(b)&&C(b),c&&["nutrients","supplements","ph_adjusters","bundles"].includes(c)&&A(c),d&&y(d),I(!0)}},[n,F]);let L=(0,c.useCallback)(b=>{let c=new URLSearchParams,d=b.location??D,e=b.status??B,f=b.category??z,g=b.search??x;"all"!==d&&c.set("location",d),"all"!==e&&c.set("status",e),"all"!==f&&c.set("category",f),g&&c.set("search",g);let h=c.toString()?`/inventory?${c.toString()}`:"/inventory";a.replace(h,{scroll:!1})},[a,D,B,z,x]),M=(0,c.useMemo)(()=>{let a,b=[];return"all"!==D&&b.push({key:"location",label:"Location",value:(a=o.locations.find(a=>a.id===D),a?.name||D)}),"all"!==B&&b.push({key:"status",label:"Status",value:{in_stock:"In Stock",low_stock:"Low Stock",out_of_stock:"Out of Stock"}[B]}),"all"!==z&&b.push({key:"category",label:"Category",value:{nutrients:"Nutrients",supplements:"Supplements",ph_adjusters:"pH Adjusters",bundles:"Bundles"}[z]}),x&&b.push({key:"search",label:"Search",value:x}),b},[D,B,z,x,o.locations]),[N,O]=(0,c.useState)(new Set),[P,Q]=(0,c.useState)(1),[R,S]=(0,c.useState)("list"),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(!1),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(null),[af,ag]=(0,c.useState)(null),ah=a=>{let b=o.inventory.filter(b=>b.productId===a),c=b.reduce((a,b)=>a+b.quantity,0),d={};return b.forEach(a=>{d[a.locationId]=a.quantity}),{total:c,byLocation:d}},ai=a=>{let b=ah(a.id);return 0===b.total?"out_of_stock":b.total<=a.reorderPoint?"low_stock":"in_stock"},aj=(a,b)=>0===a?0:(a-b)/a*100,ak=a=>{let b=[aj(a.prices.msrp,a.cost.rolling),aj(a.prices.shopify,a.cost.rolling),aj(a.prices.amazon,a.cost.rolling),aj(a.prices.wholesale,a.cost.rolling)];return b.reduce((a,b)=>a+b,0)/b.length},al=(0,c.useMemo)(()=>o.products.filter(a=>{if(x){let b=x.toLowerCase();if(!a.name.toLowerCase().includes(b)&&!a.sku.toLowerCase().includes(b)&&!a.skus?.shopify?.toLowerCase().includes(b)&&!a.skus?.amazon?.toLowerCase().includes(b))return!1}if("all"!==z&&a.category!==z)return!1;let b=ai(a);if("all"!==B&&b!==B)return!1;if("all"!==D){let b=ah(a.id);if(!b.byLocation[D]||0===b.byLocation[D])return!1}return!0}),[o.products,o.inventory,x,z,B,D]),am=Math.ceil(al.length/10),an=al.slice((P-1)*10,10*P),ao=(0,c.useMemo)(()=>{let a=o.products.length,b=o.inventory.reduce((a,b)=>a+b.quantity,0),c=0,d=0;o.products.forEach(a=>{let b=ah(a.id);c+=b.total*a.prices.msrp,d+=b.total*a.cost.rolling});let e=c>0?(c-d)/c*100:0,f=o.products.filter(a=>"low_stock"===ai(a)).length,g=o.products.filter(a=>"out_of_stock"===ai(a)).length;return{totalProducts:a,totalUnits:b,inventoryValue:c,costOnHand:d,overallMargin:e,lowStockCount:f,outOfStockCount:g}},[o.products,o.inventory]),ap=b=>{a.push(`/inventory/${b}`)},aq=(a,b)=>{b.stopPropagation();let c=new Set(N);c.has(a)?c.delete(a):c.add(a),O(c)},ar=(a,b)=>{b.stopPropagation(),ae(a),U(!0)},as=(a,b)=>{b.stopPropagation(),ag(a),W(!0)},at=async(a,b)=>{b.stopPropagation(),await w({title:"Delete Product",message:`Are you sure you want to delete "${a.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",destructive:!0})&&(p({type:"DELETE_PRODUCT",payload:a.id}),r(`Product "${a.name}" deleted successfully`))},au=async()=>{0===N.size||await w({title:"Delete Products",message:`Are you sure you want to delete ${N.size} product(s)? This action cannot be undone.`,confirmText:"Delete All",cancelText:"Cancel",destructive:!0})&&(N.forEach(a=>{p({type:"DELETE_PRODUCT",payload:a})}),r(`${N.size} product(s) deleted successfully`),O(new Set))},av=()=>{let a=N.size>0?o.products.filter(a=>N.has(a.id)):al,b=new Blob([["SKU,Name,Category,Weight,Total Stock,MSRP,Shopify Price,Amazon Price,Wholesale Price,Rolling Cost,Fixed Cost",...a.map(a=>{let b=ah(a.id);return[a.sku,`"${a.name}"`,a.category,a.weight.value+" "+a.weight.unit,b.total,a.prices.msrp,a.prices.shopify,a.prices.amazon,a.prices.wholesale,a.cost.rolling,a.cost.fixed].join(",")})].join("\n")],{type:"text/csv"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`inventory-export-${new Date().toISOString().split("T")[0]}.csv`,d.click(),URL.revokeObjectURL(c),r(`Exported ${a.length} product(s) to CSV`)};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Inventory"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Manage products, pricing, and stock levels"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:()=>aa(!0),className:"px-4 py-2 bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/30 text-purple-400 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)(u.Hash,{className:"w-4 h-4"}),"Serial Lookup"]}),(0,b.jsxs)(e.default,{href:"/inventory/lots",className:"px-4 py-2 bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/30 text-purple-400 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)(H.Layers,{className:"w-4 h-4"}),"Lot Inventory"]}),(0,b.jsxs)("button",{onClick:av,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-download text-sm"}),"Export"]}),(0,b.jsxs)(e.default,{href:"/inventory/counts",className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-clipboard-check text-sm"}),"Count Stock"]}),(0,b.jsxs)(e.default,{href:"/inventory/transfers",className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-exchange-alt text-sm"}),"Transfers"]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>ac(!ab),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-upload text-sm"}),"Import",(0,b.jsx)("i",{className:"fas fa-chevron-down text-xs"})]}),ab&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>ac(!1)}),(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[(0,b.jsxs)("button",{onClick:()=>{Y(!0),ac(!1)},className:"w-full px-4 py-3 text-left text-slate-300 hover:bg-slate-700 transition-colors flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-file-csv text-emerald-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-white",children:"Import CSV"}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"Generic CSV format"})]})]}),(0,b.jsxs)("button",{onClick:()=>{$(!0),ac(!1)},className:"w-full px-4 py-3 text-left text-slate-300 hover:bg-slate-700 transition-colors flex items-center gap-3 border-t border-slate-700",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-exchange-alt text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-white",children:"Import from inFlow"}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:"inFlow Inventory export"})]})]})]})]})]}),(0,b.jsxs)("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-plus text-sm"}),"Add Product"]})]})]}),M.length>0&&(0,b.jsx)(j.ActiveFilters,{filters:M,onRemove:a=>{"location"===a?(E("all"),L({location:"all"})):"status"===a?(C("all"),L({status:"all"})):"category"===a?(A("all"),L({category:"all"})):"search"===a&&(y(""),L({search:""}))},onClearAll:()=>{E("all"),C("all"),A("all"),y(""),a.replace("/inventory",{scroll:!1})}}),(0,b.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Total Products"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:ao.totalProducts}),(0,b.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Active SKUs"})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Total Units"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:(0,s.formatNumber)(ao.totalUnits)}),(0,b.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Across all locations"})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Inventory Value"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:(0,s.formatCurrency)(ao.inventoryValue)}),(0,b.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"At MSRP"})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Cost on Hand"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-emerald-400",children:(0,s.formatCurrency)(ao.costOnHand)}),(0,b.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[ao.overallMargin.toFixed(1),"% margin"]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Low Stock Items"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:ao.lowStockCount}),(0,b.jsxs)("div",{className:"text-xs text-red-400 mt-1",children:[ao.outOfStockCount," out of stock"]})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by SKU, name, or barcode...",value:x,onChange:a=>{y(a.target.value),Q(1)},onBlur:()=>{F&&L({search:x})},onKeyDown:a=>{"Enter"===a.key&&F&&L({search:x})},className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-400 focus:outline-none focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/50"})]}),(0,b.jsxs)("select",{value:z,onChange:a=>{let b=a.target.value;A(b),Q(1),F&&L({category:b})},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:[(0,b.jsx)("option",{value:"all",children:"All Categories"}),(0,b.jsx)("option",{value:"nutrients",children:"Nutrients"}),(0,b.jsx)("option",{value:"supplements",children:"Supplements"}),(0,b.jsx)("option",{value:"ph_adjusters",children:"pH Adjusters"}),(0,b.jsx)("option",{value:"bundles",children:"Bundles"})]}),(0,b.jsxs)("select",{value:D,onChange:a=>{let b=a.target.value;E(b),Q(1),F&&L({location:b})},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:[(0,b.jsx)("option",{value:"all",children:"All Locations"}),o.locations.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,b.jsxs)("select",{value:B,onChange:a=>{let b=a.target.value;C(b),Q(1),F&&L({status:b})},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2.5 text-slate-300 focus:outline-none focus:border-emerald-500/50",children:[(0,b.jsx)("option",{value:"all",children:"All Stock Levels"}),(0,b.jsx)("option",{value:"in_stock",children:"In Stock"}),(0,b.jsx)("option",{value:"low_stock",children:"Low Stock"}),(0,b.jsx)("option",{value:"out_of_stock",children:"Out of Stock"})]}),(0,b.jsxs)("div",{className:"flex items-center bg-slate-800/50 border border-slate-700 rounded-lg p-1",children:[(0,b.jsx)("button",{onClick:()=>S("list"),className:`px-3 py-1.5 rounded-md text-sm ${"list"===R?"bg-emerald-500/20 text-emerald-400":"text-slate-400 hover:text-white"}`,children:(0,b.jsx)("i",{className:"fas fa-list"})}),(0,b.jsx)("button",{onClick:()=>S("grid"),className:`px-3 py-1.5 rounded-md text-sm ${"grid"===R?"bg-emerald-500/20 text-emerald-400":"text-slate-400 hover:text-white"}`,children:(0,b.jsx)("i",{className:"fas fa-grip"})})]})]}),N.size>0&&(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-4 pt-4 border-t border-slate-700/50",children:[(0,b.jsxs)("span",{className:"text-sm text-slate-400",children:[N.size," selected"]}),(0,b.jsxs)("button",{onClick:av,className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm transition-colors",children:[(0,b.jsx)("i",{className:"fas fa-download mr-2"}),"Export Selected"]}),(0,b.jsxs)("button",{onClick:au,className:"px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm transition-colors",children:[(0,b.jsx)("i",{className:"fas fa-trash mr-2"}),"Delete Selected"]}),(0,b.jsx)("button",{onClick:()=>O(new Set),className:"px-3 py-1.5 text-slate-400 hover:text-white text-sm transition-colors",children:"Clear Selection"})]})]}),"grid"===R&&(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:an.map(a=>{let c=ah(a.id),d=ai(a),e=ak(a);return(0,b.jsxs)("div",{onClick:()=>ap(a.id),className:`bg-slate-800/50 backdrop-blur border rounded-xl p-4 cursor-pointer transition-all hover:border-slate-600 ${N.has(a.id)?"border-emerald-500/50 bg-emerald-500/5":"border-slate-700/50"}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,b.jsx)(J.CategoryIcon,{category:a.category}),(0,b.jsx)("input",{type:"checkbox",checked:N.has(a.id),onChange:()=>{},onClick:b=>aq(a.id,b),className:"rounded bg-slate-700 border-slate-600"})]}),(0,b.jsx)("h3",{className:"font-medium text-white mb-1 line-clamp-1",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mb-3",children:a.sku}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:`text-lg font-bold ${"in_stock"===d?"text-emerald-400":"low_stock"===d?"text-amber-400":"text-red-400"}`,children:[(0,s.formatNumber)(c.total)," units"]}),(0,b.jsx)(J.StockStatus,{status:d})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-slate-400",children:(0,s.formatCurrency)(a.prices.msrp)}),(0,b.jsxs)("span",{className:"text-emerald-400",children:[e.toFixed(1),"% margin"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-700/50",children:[(0,b.jsxs)("button",{onClick:b=>ar(a,b),className:"flex-1 px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm transition-colors",children:[(0,b.jsx)("i",{className:"fas fa-edit mr-1"}),"Edit"]}),(0,b.jsxs)("button",{onClick:b=>as(a,b),className:"flex-1 px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm transition-colors",children:[(0,b.jsx)("i",{className:"fas fa-boxes-stacked mr-1"}),"Stock"]})]})]},a.id)})}),"list"===R&&(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-slate-800/50 border-b border-slate-700/50",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:(0,b.jsx)("input",{type:"checkbox",checked:N.size===an.length&&an.length>0,onChange:()=>{N.size===an.length?O(new Set):O(new Set(an.map(a=>a.id)))},className:"rounded bg-slate-700 border-slate-600"})}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-400",children:"Product"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-400",children:"SKUs"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-400",children:"Stock"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"Cost"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"MSRP"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"Shopify"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"Amazon"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-400",children:"Wholesale"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-400",children:"Avg Margin"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-400",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:an.map(a=>{let c,d=ah(a.id),e=ai(a),f=ak(a);return(0,b.jsxs)("tr",{onClick:()=>ap(a.id),className:`transition-colors cursor-pointer border-b border-slate-700/30 hover:bg-slate-800/30 ${N.has(a.id)?"bg-emerald-500/5":""}`,children:[(0,b.jsx)("td",{className:"px-4 py-4",onClick:b=>aq(a.id,b),children:(0,b.jsx)("input",{type:"checkbox",checked:N.has(a.id),onChange:()=>{},className:"rounded bg-slate-700 border-slate-600"})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(J.CategoryIcon,{category:a.category}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-white",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-slate-400",children:[(c=a.category,J.categoryStyles[c]?.label||c)," • ",a.weight.value," ",a.weight.unit]})]})]})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-slate-500 w-16",children:"Internal:"}),(0,b.jsx)("code",{className:"text-xs bg-slate-800 px-2 py-0.5 rounded text-slate-300",children:a.sku})]}),a.skus?.shopify&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-green-400 w-16",children:(0,b.jsx)("i",{className:"fab fa-shopify"})}),(0,b.jsx)("code",{className:"text-xs bg-slate-800 px-2 py-0.5 rounded text-slate-300",children:a.skus.shopify})]}),a.skus?.amazon&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-orange-400 w-16",children:(0,b.jsx)("i",{className:"fab fa-amazon"})}),(0,b.jsx)("code",{className:"text-xs bg-slate-800 px-2 py-0.5 rounded text-slate-300",children:a.skus.amazon})]})]})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:`text-lg font-bold ${"in_stock"===e?"text-emerald-400":"low_stock"===e?"text-amber-400":"text-red-400"}`,children:(0,s.formatNumber)(d.total)}),(0,b.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:o.locations.slice(0,2).map((a,c)=>(0,b.jsxs)("span",{children:[c>0&&" • ",(0,b.jsx)("span",{className:0===c?"text-blue-400":"text-orange-400",children:d.byLocation[a.id]||0})," ",a.name.split(" ")[0]]},a.id))}),(0,b.jsx)(J.StockStatus,{status:e,compact:!0})]})}),(0,b.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,b.jsx)("div",{className:"text-sm text-white",children:(0,s.formatCurrency)(a.cost.rolling)}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Rolling Avg"}),(0,b.jsxs)("div",{className:"text-xs text-slate-400",children:["Fixed: ",(0,s.formatCurrency)(a.cost.fixed)]})]}),(0,b.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-white",children:(0,s.formatCurrency)(a.prices.msrp)}),(0,b.jsxs)("div",{className:"text-xs text-emerald-400",children:[aj(a.prices.msrp,a.cost.rolling).toFixed(1),"%"]})]}),(0,b.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,b.jsx)("div",{className:"text-sm text-white",children:(0,s.formatCurrency)(a.prices.shopify)}),(0,b.jsxs)("div",{className:"text-xs text-emerald-400",children:[aj(a.prices.shopify,a.cost.rolling).toFixed(1),"%"]})]}),(0,b.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,b.jsx)("div",{className:"text-sm text-white",children:(0,s.formatCurrency)(a.prices.amazon)}),(0,b.jsxs)("div",{className:"text-xs text-emerald-400",children:[aj(a.prices.amazon,a.cost.rolling).toFixed(1),"%"]})]}),(0,b.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,b.jsx)("div",{className:"text-sm text-white",children:(0,s.formatCurrency)(a.prices.wholesale)}),(0,b.jsxs)("div",{className:"text-xs text-emerald-400",children:[aj(a.prices.wholesale,a.cost.rolling).toFixed(1),"%"]})]}),(0,b.jsx)("td",{className:"px-4 py-4 text-center",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-emerald-500/10 text-emerald-400 rounded-full text-sm font-medium",children:[f.toFixed(1),"%"]})}),(0,b.jsx)("td",{className:"px-4 py-4",onClick:a=>a.stopPropagation(),children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,b.jsx)("button",{onClick:b=>ar(a,b),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:(0,b.jsx)("i",{className:"fas fa-edit text-sm"})}),(0,b.jsx)("button",{onClick:b=>as(a,b),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Adjust Stock",children:(0,b.jsx)("i",{className:"fas fa-boxes-stacked text-sm"})}),(0,b.jsx)("button",{onClick:b=>at(a,b),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-slate-700 rounded-lg transition-colors",title:"Delete",children:(0,b.jsx)("i",{className:"fas fa-trash text-sm"})})]})})]},a.id)})})]})}),0===al.length&&(0,b.jsxs)("div",{className:"py-12 text-center",children:[(0,b.jsx)("i",{className:"fas fa-box-open text-4xl text-slate-600 mb-4"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"No products found"}),x&&(0,b.jsx)("button",{onClick:()=>y(""),className:"mt-2 text-emerald-400 hover:text-emerald-300 text-sm",children:"Clear search"})]}),(0,b.jsx)(K.Pagination,{currentPage:P,totalPages:am,totalItems:al.length,itemsPerPage:10,itemLabel:"products",onPageChange:Q})]}),(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Stock Locations:"}),o.locations.slice(0,3).map((a,c)=>(0,b.jsxs)("span",{children:[c>0&&(0,b.jsx)("span",{className:"text-slate-500 mx-1",children:"•"}),(0,b.jsx)("span",{className:0===c?"text-blue-400":1===c?"text-orange-400":"text-purple-400",children:a.name})]},a.id))]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:"text-slate-400",children:"Margin = Profit Margin (not markup)"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded bg-emerald-500/20 border border-emerald-500/30"}),(0,b.jsx)("span",{className:"text-slate-400",children:"In Stock"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded bg-amber-500/20 border border-amber-500/30"}),(0,b.jsx)("span",{className:"text-slate-400",children:"Low Stock"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded bg-red-500/20 border border-red-500/30"}),(0,b.jsx)("span",{className:"text-slate-400",children:"Out of Stock"})]})]})]})}),(0,b.jsx)(k.AddProductModal,{isOpen:T,onClose:()=>{U(!1),ae(null)},editProduct:ad}),(0,b.jsx)(l.AdjustStockModal,{isOpen:V,onClose:()=>{W(!1),ag(null)},product:af}),(0,b.jsx)(m.ImportCSVModal,{isOpen:X,onClose:()=>Y(!1)}),(0,b.jsx)(q,{isOpen:Z,onClose:()=>$(!1)}),(0,b.jsx)(i.Modal,{open:_,onClose:()=>aa(!1),title:"Serial Number Lookup",subtitle:"Look up serial number status and history",size:"lg",children:(0,b.jsx)(G,{embedded:!0,onClose:()=>aa(!1)})})]})}a.s(["default",()=>M],18054)}];

//# sourceMappingURL=app_%28dashboard%29_inventory_page_tsx_ea7294d0._.js.map