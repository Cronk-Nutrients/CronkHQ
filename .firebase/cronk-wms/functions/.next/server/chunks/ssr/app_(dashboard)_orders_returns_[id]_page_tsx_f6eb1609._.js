module.exports=[67346,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(98263),g=a.i(89697),h=a.i(88860),i=a.i(91828);a.i(20090);var j=a.i(52683),k=a.i(88629);function l(){let a=(0,d.useParams)(),l=(0,d.useRouter)(),{state:m,dispatch:n}=(0,f.useApp)(),{success:o,warning:p}=(0,g.useToast)(),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({}),u=(0,c.useMemo)(()=>m.returns.find(b=>b.id===a.id),[m.returns,a.id]);if(m.isLoading)return(0,b.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,b.jsx)("div",{className:"h-8 bg-slate-800/50 rounded w-48"}),(0,b.jsx)("div",{className:"h-64 bg-slate-800/50 rounded-xl"})]});if(!u)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[(0,b.jsx)("i",{className:"fas fa-undo-alt text-6xl text-slate-600 mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Return Not Found"}),(0,b.jsx)("p",{className:"text-slate-400 mb-6",children:"The return you're looking for doesn't exist or has been removed."}),(0,b.jsx)(e.default,{href:"/orders/returns",className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors",children:"Back to Returns"})]});let v="rejected"===u.status?-1:k.returnStatusFlow.indexOf(u.status);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(i.Breadcrumb,{items:[{label:"Orders",href:"/orders"},{label:"Returns",href:"/orders/returns"},{label:u.returnNumber}]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>l.push("/orders/returns"),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:(0,b.jsx)("i",{className:"fas fa-arrow-left"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:u.returnNumber}),(0,b.jsx)(j.ReturnStatusBadge,{status:u.status,size:"md"}),(0,b.jsx)(j.ReturnChannelBadge,{channel:u.channel})]}),(0,b.jsxs)("p",{className:"text-sm text-slate-400 mt-1",children:["Original Order: ",(0,b.jsx)(e.default,{href:`/orders/${u.orderId}`,className:"text-emerald-400 hover:underline",children:u.orderNumber})," ","â€¢ Created ",(0,k.formatReturnDateTime)(u.createdAt)]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:["requested"===u.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>{n({type:"UPDATE_RETURN",payload:{...u,status:"approved",updatedAt:new Date}}),o(`Return ${u.returnNumber} approved`)},className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-check"}),"Approve Return"]}),(0,b.jsxs)("button",{onClick:()=>{n({type:"UPDATE_RETURN",payload:{...u,status:"rejected",updatedAt:new Date}}),p(`Return ${u.returnNumber} rejected`)},className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-times"}),"Reject"]})]}),"approved"===u.status&&(0,b.jsxs)("button",{onClick:()=>{n({type:"UPDATE_RETURN",payload:{...u,status:"in_transit",updatedAt:new Date}}),o(`Return ${u.returnNumber} marked as in transit`)},className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-truck"}),"Mark In Transit"]}),"in_transit"===u.status&&(0,b.jsxs)("button",{onClick:()=>{n({type:"UPDATE_RETURN",payload:{...u,status:"received",updatedAt:new Date}}),o(`Return ${u.returnNumber} marked as received`)},className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-box"}),"Mark Received"]}),"received"===u.status&&!q&&(0,b.jsxs)("button",{onClick:()=>{let a={};u.items.forEach(b=>{a[b.productId]={received:b.quantity,condition:"like_new"}}),t(a),r(!0)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-search"}),"Start Inspection"]}),"inspected"===u.status&&(0,b.jsxs)("button",{onClick:()=>{n({type:"UPDATE_RETURN",payload:{...u,status:"refunded",refund:{...u.refund,refundedAt:new Date,refundMethod:"original_payment"},updatedAt:new Date}}),o(`Refund of ${(0,h.formatCurrency)(u.refund.total)} processed for ${u.returnNumber}`)},className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-dollar-sign"}),"Process Refund"]})]})]}),"rejected"!==u.status&&(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Return Progress"}),(0,b.jsx)("div",{className:"flex items-center justify-between",children:k.returnStatusFlow.map((a,c)=>{let d=k.returnStatusConfig[a],e=c<=v,f=c===v;return(0,b.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center w-full",children:[c>0&&(0,b.jsx)("div",{className:`h-1 flex-1 ${e?"bg-emerald-500":"bg-slate-700"}`}),(0,b.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?f?`bg-${d.color}-500 text-white`:"bg-emerald-500 text-white":"bg-slate-700 text-slate-500"}`,children:(0,b.jsx)("i",{className:`fas ${e&&!f?"fa-check":d.icon}`})}),c<k.returnStatusFlow.length-1&&(0,b.jsx)("div",{className:`h-1 flex-1 ${c<v?"bg-emerald-500":"bg-slate-700"}`})]}),(0,b.jsx)("span",{className:`text-xs mt-2 ${e?"text-white":"text-slate-500"}`,children:d.label})]},a)})})]}),"rejected"===u.status&&(0,b.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 text-red-400",children:[(0,b.jsx)("i",{className:"fas fa-times-circle text-2xl"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Return Rejected"}),(0,b.jsx)("p",{className:"text-sm text-red-400/80",children:"This return request has been rejected."})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Customer Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Name"}),(0,b.jsx)("p",{className:"text-white",children:u.customer.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Email"}),(0,b.jsx)("p",{className:"text-white",children:u.customer.email})]})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Return Items"}),q&&(0,b.jsxs)("div",{className:"bg-indigo-500/10 border border-indigo-500/30 rounded-lg p-4 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-indigo-400 mb-2",children:[(0,b.jsx)("i",{className:"fas fa-search"}),(0,b.jsx)("span",{className:"font-medium",children:"Inspection Mode"})]}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Verify quantities received and item conditions below, then click Complete Inspection."})]}),(0,b.jsx)("div",{className:"space-y-4",children:u.items.map((a,c)=>(0,b.jsxs)("div",{className:"border border-slate-700/50 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-slate-700/50 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-box text-slate-500 text-2xl"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-white font-medium",children:a.productName}),(0,b.jsxs)("p",{className:"text-sm text-slate-400",children:["SKU: ",a.sku]}),(0,b.jsxs)("p",{className:"text-sm text-slate-400",children:["Qty: ",a.quantity]}),(0,b.jsxs)("p",{className:"text-sm text-amber-400 mt-1",children:[(0,b.jsx)("i",{className:"fas fa-exclamation-triangle mr-1"}),k.returnReasonLabels[a.reason]]}),a.condition&&!q&&(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Condition: "}),(0,b.jsx)(j.ConditionBadge,{condition:a.condition})]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-white font-medium",children:(0,h.formatCurrency)(a.refundAmount)}),a.quantityReceived>0&&!q&&(0,b.jsxs)("p",{className:"text-sm text-slate-400",children:[a.quantityReceived," of ",a.quantity," received"]})]})]}),q&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700/50 grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Qty Received"}),(0,b.jsx)("input",{type:"number",min:"0",max:a.quantity,value:s[a.productId]?.received||0,onChange:b=>t({...s,[a.productId]:{...s[a.productId],received:parseInt(b.target.value)||0}}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Condition"}),(0,b.jsx)("select",{value:s[a.productId]?.condition||"like_new",onChange:b=>t({...s,[a.productId]:{...s[a.productId],condition:b.target.value}}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white",children:Object.entries(k.conditionLabels).map(([a,{label:c}])=>(0,b.jsx)("option",{value:a,children:c},a))})]})]})]},c))}),q&&(0,b.jsxs)("div",{className:"mt-4 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Cancel"}),(0,b.jsxs)("button",{onClick:()=>{let a=u.items.map(a=>({...a,quantityReceived:s[a.productId]?.received||a.quantityReceived,condition:s[a.productId]?.condition||a.condition}));n({type:"UPDATE_RETURN",payload:{...u,items:a,status:"inspected",updatedAt:new Date}}),a.forEach(a=>{let b=a.condition;b&&["new_sealed","new_opened","like_new","good"].includes(b)&&n({type:"ADJUST_STOCK",payload:{productId:a.productId,locationId:"loc-warehouse",adjustment:a.quantityReceived}})}),r(!1),o(`Inspection completed for ${u.returnNumber}`)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-check"}),"Complete Inspection"]})]})]}),u.notes&&(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Notes"}),(0,b.jsx)("p",{className:"text-slate-300",children:u.notes})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Refund Summary"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Items Subtotal"}),(0,b.jsx)("span",{className:"text-white",children:(0,h.formatCurrency)(u.refund.subtotal)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Shipping Refund"}),(0,b.jsx)("span",{className:"text-white",children:(0,h.formatCurrency)(u.refund.shipping)})]}),u.refund.restockingFee>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Restocking Fee"}),(0,b.jsxs)("span",{className:"text-red-400",children:["-",(0,h.formatCurrency)(u.refund.restockingFee)]})]}),(0,b.jsx)("div",{className:"pt-3 border-t border-slate-700",children:(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-white font-semibold",children:"Total Refund"}),(0,b.jsx)("span",{className:"text-emerald-400 font-bold text-lg",children:(0,h.formatCurrency)(u.refund.total)})]})}),u.refund.refundedAt&&(0,b.jsxs)("div",{className:"pt-3 border-t border-slate-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400",children:[(0,b.jsx)("i",{className:"fas fa-check-circle"}),(0,b.jsxs)("span",{className:"text-sm",children:["Refunded on ",(0,k.formatReturnDate)(u.refund.refundedAt)]})]}),u.refund.refundMethod&&(0,b.jsxs)("p",{className:"text-sm text-slate-400 mt-1",children:["Method: ","original_payment"===u.refund.refundMethod?"Original Payment":"store_credit"===u.refund.refundMethod?"Store Credit":"Manual"]})]})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Return Shipping"}),u.returnShipping.trackingNumber?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Carrier"}),(0,b.jsx)("p",{className:"text-white capitalize",children:u.returnShipping.carrier||"Unknown"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Tracking Number"}),(0,b.jsx)("p",{className:"text-emerald-400 font-mono",children:u.returnShipping.trackingNumber})]}),u.returnShipping.labelUrl&&(0,b.jsxs)("button",{className:"w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-download"}),"Download Label"]})]}):(0,b.jsxs)("div",{className:"text-center py-4 text-slate-500",children:[(0,b.jsx)("i",{className:"fas fa-shipping-fast text-2xl mb-2"}),(0,b.jsx)("p",{className:"text-sm",children:"No shipping info yet"})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Activity"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-clock text-slate-400 text-sm"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-white",children:"Return created"}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:(0,k.formatReturnDateTime)(u.createdAt)})]})]}),u.updatedAt!==u.createdAt&&(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-edit text-slate-400 text-sm"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-white",children:"Return updated"}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:(0,k.formatReturnDateTime)(u.updatedAt)})]})]})]})]})]})]})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=app_%28dashboard%29_orders_returns_%5Bid%5D_page_tsx_f6eb1609._.js.map