module.exports=[28985,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(98263),g=a.i(89697),h=a.i(91828),i=a.i(63820);a.i(42390);var j=a.i(73736),k=a.i(4019),l=a.i(77877);function m(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"h-8 w-64 bg-slate-700/50 rounded animate-pulse"}),(0,b.jsx)("div",{className:"grid grid-cols-6 gap-4",children:[...Array(6)].map((a,c)=>(0,b.jsx)("div",{className:"h-32 bg-slate-800/50 rounded-xl animate-pulse"},c))}),(0,b.jsx)("div",{className:"h-96 bg-slate-800/50 rounded-xl animate-pulse"})]})}function n(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(m,{}),children:(0,b.jsx)(p,{})})}let o=["from-blue-500 to-blue-400","from-amber-600 to-amber-500","from-purple-500 to-purple-400","from-emerald-500 to-emerald-400","from-cyan-500 to-cyan-400","from-slate-500 to-slate-400"];function p(){let{state:a}=(0,f.useApp)(),{addToast:m}=(0,g.useToast)(),n=(0,d.useSearchParams)(),p=(0,d.useRouter)(),[q,r]=(0,c.useState)("wtd"),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)("all"),[y,z]=(0,c.useState)("all"),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!C){let a=n.get("carrier"),b=n.get("status"),c=n.get("search");a&&x(a),b&&z(b),c&&B(c),D(!0)}},[n,C]);let E=(0,c.useCallback)((a,b)=>{let c=new URLSearchParams;"all"!==a&&c.set("carrier",a),"all"!==b&&c.set("status",b);let d=c.toString()?`/fulfillment/shipping?${c.toString()}`:"/fulfillment/shipping";p.replace(d,{scroll:!1})},[p]),F=(0,c.useMemo)(()=>{let a=[];return"all"!==w&&a.push({key:"carrier",label:"Carrier",value:w.toUpperCase()}),"all"!==y&&a.push({key:"status",label:"Status",value:{label_created:"Label Created",in_transit:"In Transit",delivered:"Delivered",exception:"Exception"}[y]||y}),a},[w,y]),G=(0,c.useMemo)(()=>{let{start:b,end:c}=(()=>{let a,b=new Date,c=new Date(b);switch(c.setHours(23,59,59,999),q){case"today":(a=new Date(b)).setHours(0,0,0,0);break;case"wtd":(a=new Date(b)).setDate(b.getDate()-b.getDay()),a.setHours(0,0,0,0);break;case"mtd":a=new Date(b.getFullYear(),b.getMonth(),1);break;case"ytd":a=new Date(b.getFullYear(),0,1);break;case"custom":a=new Date(s||b),(c=new Date(u||b)).setHours(23,59,59,999);break;default:a=new Date(b)}return{start:a,end:c}})();return a.shipments.filter(a=>{let d=new Date(a.shippedAt),e="all"===w||a.carrier===w,f="all"===y||a.status===y,g=!A||a.trackingNumber.toLowerCase().includes(A.toLowerCase())||a.orderNumber.toLowerCase().includes(A.toLowerCase())||a.customerName.toLowerCase().includes(A.toLowerCase());return d>=b&&d<=c&&e&&f&&g})},[a.shipments,q,w,y,A,s,u]),H=(0,c.useMemo)(()=>{let a=G.length,b=G.reduce((a,b)=>a+b.customerPaid,0),c=G.reduce((a,b)=>a+b.actualCost,0),d=G.reduce((a,b)=>a+b.profit,0),e=G.reduce((a,b)=>a+b.weight,0);return{totalShipments:a,shippingRevenue:b,shippingCost:c,shippingProfit:d,profitMargin:b>0?d/b*100:0,totalWeight:e,avgCostPerShipment:a>0?c/a:0,avgRevenuePerShipment:a>0?b/a:0,avgWeightPerShipment:a>0?e/a:0}},[G]),I=(0,c.useMemo)(()=>{let a={};return G.forEach(b=>{if(a[b.carrier]||(a[b.carrier]={shipments:0,revenue:0,cost:0,profit:0,totalTime:0,deliveredCount:0}),a[b.carrier].shipments++,a[b.carrier].revenue+=b.customerPaid,a[b.carrier].cost+=b.actualCost,a[b.carrier].profit+=b.profit,"delivered"===b.status&&b.deliveredAt){let c=Math.ceil((new Date(b.deliveredAt).getTime()-new Date(b.shippedAt).getTime())/864e5);a[b.carrier].totalTime+=c,a[b.carrier].deliveredCount++}}),Object.entries(a).map(([a,b])=>({carrier:a,...b,margin:b.revenue>0?b.profit/b.revenue*100:0,avgTime:b.deliveredCount>0?(b.totalTime/b.deliveredCount).toFixed(1):"N/A"})).sort((a,b)=>b.shipments-a.shipments)},[G]),J=(0,c.useMemo)(()=>{let a={};G.forEach(b=>{let c=`${b.carrier.toUpperCase()} ${b.service}`;a[c]=(a[c]||0)+1});let b=G.length||1;return Object.entries(a).map(([a,c])=>({name:a,count:c,percentage:Math.round(c/b*100)})).sort((a,b)=>b.count-a.count).slice(0,6)},[G]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(h.Breadcrumb,{items:[{label:"Fulfillment",href:"/fulfillment"},{label:"Shipping"}]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Shipping"}),(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Track shipments, costs, and carrier performance"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(k.DateRangeTabs,{value:q,onChange:r}),(0,b.jsxs)("button",{onClick:()=>{if(0===G.length)return void m("warning","No shipments to export");let a=new Blob([[["Date","Order #","Customer","City","State","Carrier","Service","Tracking","Customer Paid","Actual Cost","Profit","Weight","Status"],...G.map(a=>[new Date(a.shippedAt).toLocaleDateString(),a.orderNumber,a.customerName,a.customerCity,a.customerState,a.carrier.toUpperCase(),a.service,a.trackingNumber,a.customerPaid.toFixed(2),a.actualCost.toFixed(2),a.profit.toFixed(2),a.weight.toFixed(2),a.status])].map(a=>a.join(",")).join("\n")],{type:"text/csv"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`shipments-${q}-${new Date().toISOString().split("T")[0]}.csv`,c.click(),URL.revokeObjectURL(b),m("success",`Exported ${G.length} shipments`)},className:"flex items-center gap-2 px-4 py-2 bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-lg text-slate-300 hover:text-white hover:bg-slate-700/50 transition-all",children:[(0,b.jsx)("i",{className:"fas fa-download"}),"Export"]})]})]}),"custom"===q&&(0,b.jsx)(k.CustomDateRange,{startDate:s,endDate:u,onStartDateChange:t,onEndDateChange:v}),F.length>0&&(0,b.jsx)(i.ActiveFilters,{filters:F,onRemove:a=>{"carrier"===a?(x("all"),E("all",y)):"status"===a&&(z("all"),E(w,"all"))},onClearAll:()=>{x("all"),z("all"),B(""),p.replace("/fulfillment/shipping",{scroll:!1})}}),(0,b.jsxs)(j.FulfillmentStatsGrid,{columns:6,children:[(0,b.jsx)(j.FAStatCard,{icon:"fa-truck",iconColor:"purple",value:H.totalShipments,label:"Total Shipments",subLabel:"In selected period",highlight:!0}),(0,b.jsx)(j.FAStatCard,{icon:"fa-dollar-sign",iconColor:"emerald",value:H.shippingRevenue,label:"Shipping Revenue",subLabel:"What customers paid",format:"currency"}),(0,b.jsx)(j.FAStatCard,{icon:"fa-receipt",iconColor:"red",value:H.shippingCost,label:"Shipping Cost",subLabel:"Paid to carriers",format:"currency"}),(0,b.jsx)(j.FAStatCard,{icon:"fa-chart-line",iconColor:"emerald",value:H.shippingProfit,label:"Shipping Profit",subLabel:`${H.profitMargin.toFixed(1)}% margin`,format:"currency",valueColor:"text-emerald-400"}),(0,b.jsx)(j.FAStatCard,{icon:"fa-calculator",iconColor:"blue",value:`$${H.avgCostPerShipment.toFixed(2)}`,label:"Avg Cost/Shipment",subLabel:`Avg revenue: $${H.avgRevenuePerShipment.toFixed(2)}`,format:"raw"}),(0,b.jsx)(j.FAStatCard,{icon:"fa-weight-hanging",iconColor:"amber",value:`${H.avgWeightPerShipment.toFixed(2)}`,label:"Avg Weight/Shipment",subLabel:`Total: ${H.totalWeight.toLocaleString()} lbs`,format:"raw"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"col-span-2 bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Carrier Performance"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[(0,b.jsx)("span",{className:"w-2 h-2 bg-emerald-400 rounded-full"}),"Profitable",(0,b.jsx)("span",{className:"w-2 h-2 bg-amber-400 rounded-full ml-2"}),"Break-even",(0,b.jsx)("span",{className:"w-2 h-2 bg-red-400 rounded-full ml-2"}),"Loss"]})]}),I.length>0?(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"text-left text-slate-400 text-sm border-b border-slate-700/50",children:[(0,b.jsx)("th",{className:"pb-4 font-medium",children:"Carrier"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right",children:"Shipments"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right",children:"Revenue"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right",children:"Cost"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right",children:"Profit"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right",children:"Margin"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right",children:"Avg Time"})]})}),(0,b.jsx)("tbody",{className:"text-sm",children:I.map((a,c)=>(0,b.jsxs)("tr",{className:`${c<I.length-1?"border-b border-slate-700/30":""} hover:bg-slate-700/30 transition-colors`,children:[(0,b.jsx)("td",{className:"py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(l.CarrierBadge,{carrier:a.carrier,variant:"icon"}),(0,b.jsx)("p",{className:"font-medium text-white",children:a.carrier.toUpperCase()})]})}),(0,b.jsx)("td",{className:"py-4 text-right text-white",children:a.shipments}),(0,b.jsxs)("td",{className:"py-4 text-right text-white",children:["$",a.revenue.toFixed(2)]}),(0,b.jsxs)("td",{className:"py-4 text-right text-slate-300",children:["$",a.cost.toFixed(2)]}),(0,b.jsxs)("td",{className:"py-4 text-right text-emerald-400 font-medium",children:["$",a.profit.toFixed(2)]}),(0,b.jsx)("td",{className:"py-4 text-right",children:(0,b.jsx)(l.MarginBadge,{margin:a.margin})}),(0,b.jsxs)("td",{className:"py-4 text-right text-slate-300",children:[a.avgTime," days"]})]},a.carrier))})]}):(0,b.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,b.jsx)("i",{className:"fas fa-truck text-4xl mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No shipments in selected period"})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white mb-6",children:"By Service Type"}),J.length>0?(0,b.jsx)("div",{className:"space-y-4",children:J.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm text-slate-300",children:a.name}),(0,b.jsx)("span",{className:"text-sm text-white font-medium",children:a.count})]}),(0,b.jsx)("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full bg-gradient-to-r ${o[c%o.length]} rounded-full`,style:{width:`${a.percentage}%`}})})]},a.name))}):(0,b.jsx)("div",{className:"text-center py-8 text-slate-400",children:(0,b.jsx)("p",{children:"No data available"})}),I.length>0&&(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t border-slate-700/50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Most Used"}),(0,b.jsx)("span",{className:"text-sm text-emerald-400 font-medium",children:I[0]?.carrier.toUpperCase()||"N/A"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Best Margin"}),(0,b.jsx)("span",{className:"text-sm text-blue-400 font-medium",children:[...I].sort((a,b)=>b.margin-a.margin)[0]?.carrier.toUpperCase()||"N/A"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Shipments"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search tracking, order #...",value:A,onChange:a=>B(a.target.value),className:"bg-slate-800/50 border border-slate-600/50 rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-slate-400 focus:outline-none focus:border-purple-500/50 w-64"}),(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),(0,b.jsxs)("select",{value:w,onChange:a=>{x(a.target.value),E(a.target.value,y)},className:"bg-slate-800/50 border border-slate-600/50 rounded-lg px-4 py-2 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[(0,b.jsx)("option",{value:"all",children:"All Carriers"}),(0,b.jsx)("option",{value:"usps",children:"USPS"}),(0,b.jsx)("option",{value:"ups",children:"UPS"}),(0,b.jsx)("option",{value:"fedex",children:"FedEx"}),(0,b.jsx)("option",{value:"dhl",children:"DHL"})]}),(0,b.jsxs)("select",{value:y,onChange:a=>{z(a.target.value),E(w,a.target.value)},className:"bg-slate-800/50 border border-slate-600/50 rounded-lg px-4 py-2 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[(0,b.jsx)("option",{value:"all",children:"All Statuses"}),(0,b.jsx)("option",{value:"label_created",children:"Label Created"}),(0,b.jsx)("option",{value:"in_transit",children:"In Transit"}),(0,b.jsx)("option",{value:"delivered",children:"Delivered"}),(0,b.jsx)("option",{value:"exception",children:"Exception"})]})]})]}),G.length>0?(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"text-left text-slate-400 text-sm border-b border-slate-700/50",children:[(0,b.jsx)("th",{className:"pb-4 font-medium",children:"Date/Time"}),(0,b.jsx)("th",{className:"pb-4 font-medium",children:"Order #"}),(0,b.jsx)("th",{className:"pb-4 font-medium",children:"Customer"}),(0,b.jsx)("th",{className:"pb-4 font-medium",children:"Carrier"}),(0,b.jsx)("th",{className:"pb-4 font-medium",children:"Service"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right",children:"Weight"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right",children:"Customer Paid"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right",children:"Actual Cost"}),(0,b.jsx)("th",{className:"pb-4 font-medium text-right pr-10",children:"Profit"}),(0,b.jsx)("th",{className:"pb-4 font-medium pl-6",children:"Status"})]})}),(0,b.jsx)("tbody",{className:"text-sm",children:G.slice(0,10).map((a,c)=>{var d,f;return(0,b.jsxs)("tr",{className:`${c<Math.min(G.length,10)-1?"border-b border-slate-700/30":""} hover:bg-slate-700/30 transition-colors`,children:[(0,b.jsxs)("td",{className:"py-4",children:[(0,b.jsx)("p",{className:"text-white",children:new Date(a.shippedAt).toLocaleDateString()}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:new Date(a.shippedAt).toLocaleTimeString()})]}),(0,b.jsx)("td",{className:"py-4",children:(0,b.jsx)(e.default,{href:`/orders?search=${a.orderNumber}`,className:"text-purple-400 hover:text-purple-300 transition-colors",children:a.orderNumber})}),(0,b.jsxs)("td",{className:"py-4",children:[(0,b.jsx)("p",{className:"text-white",children:a.customerName}),(0,b.jsxs)("p",{className:"text-xs text-slate-400",children:[a.customerCity,", ",a.customerState]}),(0,b.jsxs)("a",{href:(d=a.carrier,f=a.trackingNumber,({usps:`https://tools.usps.com/go/TrackConfirmAction?tLabels=${f}`,ups:`https://www.ups.com/track?tracknum=${f}`,fedex:`https://www.fedex.com/fedextrack/?trknbr=${f}`,dhl:`https://www.dhl.com/en/express/tracking.html?AWB=${f}`})[d]||"#"),target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-purple-400 hover:text-purple-300 font-mono mt-1 inline-flex items-center gap-1",children:[(0,b.jsx)("i",{className:"fas fa-external-link-alt text-[8px]"}),a.trackingNumber.slice(0,16),"..."]})]}),(0,b.jsx)("td",{className:"py-4",children:(0,b.jsx)(l.CarrierBadge,{carrier:a.carrier})}),(0,b.jsx)("td",{className:"py-4 text-slate-300",children:a.service}),(0,b.jsxs)("td",{className:"py-4 text-right text-slate-300",children:[a.weight.toFixed(1)," lbs"]}),(0,b.jsxs)("td",{className:"py-4 text-right text-white",children:["$",a.customerPaid.toFixed(2)]}),(0,b.jsxs)("td",{className:"py-4 text-right text-slate-300",children:["$",a.actualCost.toFixed(2)]}),(0,b.jsxs)("td",{className:"py-4 text-right text-emerald-400 font-medium pr-10",children:["$",a.profit.toFixed(2)]}),(0,b.jsx)("td",{className:"py-4 pl-6",children:(0,b.jsx)(l.ShippingStatusBadge,{status:a.status})})]},a.id)})})]}):(0,b.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,b.jsx)("i",{className:"fas fa-shipping-fast text-4xl mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No shipments found"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Ship orders from the Pack station to see them here"})]}),G.length>0&&(0,b.jsx)("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-slate-700/50",children:(0,b.jsxs)("p",{className:"text-sm text-slate-400",children:["Showing 1-",Math.min(10,G.length)," of ",G.length," shipments"]})})]})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=app_%28dashboard%29_fulfillment_shipping_page_tsx_3da579e7._.js.map