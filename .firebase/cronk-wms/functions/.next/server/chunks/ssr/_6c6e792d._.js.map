{"version":3,"sources":["../../../../lib/formatting.ts","../../../../app/%28dashboard%29/marketing/email/page.tsx"],"sourcesContent":["/**\n * Shared formatting utilities\n */\n\nexport function formatCurrency(amount: number): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(amount);\n}\n\nexport function formatCurrencyPrecise(amount: number): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(amount);\n}\n\nexport function formatNumber(num: number): string {\n  return new Intl.NumberFormat('en-US').format(num);\n}\n\nexport function formatPercent(num: number, showSign: boolean = true): string {\n  if (showSign) {\n    return `${num >= 0 ? '+' : ''}${num.toFixed(1)}%`;\n  }\n  return `${num.toFixed(1)}%`;\n}\n\nexport function formatWeight(oz: number): string {\n  if (oz >= 16) {\n    return `${(oz / 16).toFixed(1)} lbs`;\n  }\n  return `${oz.toFixed(1)} oz`;\n}\n\nexport function formatDate(date: string | Date): string {\n  return new Date(date).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nexport function formatDateTime(date: string | Date): string {\n  return new Date(date).toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n  });\n}\n\nexport function formatRelativeTime(date: string | Date): string {\n  const now = new Date();\n  const then = new Date(date);\n  const diffMs = now.getTime() - then.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMs / 3600000);\n  const diffDays = Math.floor(diffMs / 86400000);\n\n  if (diffMins < 1) return 'Just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n  return formatDate(date);\n}\n","'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport { MetricsGrid, CampaignTable, CurrencyCell, InsightCard, BreakdownCard, TipBox } from '@/components/marketing';\nimport { emailAccount, emailMetrics, emailRecentCampaigns, emailAutomatedFlows, emailListHealth } from '@/data/marketing';\nimport { formatCurrency } from '@/lib/formatting';\n\nexport default function EmailMarketingPage() {\n  const [dateRange, setDateRange] = useState('30d');\n\n  const primaryMetrics = [\n    { label: 'Subscribers', value: emailMetrics.subscribers, format: 'number' as const, trend: `+${emailMetrics.listGrowth} this month` },\n    { label: 'Email Revenue', value: emailMetrics.revenue, format: 'currency' as const, highlight: true, highlightColor: 'emerald' as const },\n    { label: 'Open Rate', value: emailMetrics.openRate, format: 'percent' as const },\n    { label: 'Click Rate', value: emailMetrics.clickRate, format: 'percent' as const },\n    { label: 'Rev/Recipient', value: emailMetrics.revenuePerRecipient, format: 'currency' as const },\n    { label: 'Unsubscribe', value: emailMetrics.unsubscribeRate, format: 'percent' as const },\n  ];\n\n  const campaignColumns = [\n    { key: 'name', header: 'Campaign', render: (v: unknown) => (\n      <div className=\"flex items-center gap-3\">\n        <div className=\"w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center\">\n          <i className=\"fas fa-envelope text-emerald-400 text-sm\"></i>\n        </div>\n        <span className=\"text-white\">{v as string}</span>\n      </div>\n    )},\n    { key: 'sentDate', header: 'Sent', render: (v: unknown) => <span className=\"text-slate-400\">{v as string}</span> },\n    { key: 'recipients', header: 'Recipients', align: 'right' as const, render: (v: unknown) => <span className=\"text-white\">{(v as number).toLocaleString()}</span> },\n    { key: 'openRate', header: 'Open Rate', align: 'right' as const, render: (v: unknown) => <span className={(v as number) >= 40 ? 'text-emerald-400' : 'text-white'}>{v as number}%</span> },\n    { key: 'clickRate', header: 'Click Rate', align: 'right' as const, render: (v: unknown) => <span className={(v as number) >= 4 ? 'text-emerald-400' : 'text-white'}>{v as number}%</span> },\n    { key: 'revenue', header: 'Revenue', align: 'right' as const, render: (v: unknown) => <CurrencyCell value={v as number} variant=\"success\" /> },\n  ];\n\n  const flowItems = emailAutomatedFlows.map(flow => ({\n    label: flow.name,\n    sublabel: flow.active ? `${flow.sent} sent • ${flow.openRate}% open rate` : 'Inactive',\n    value: flow.revenue,\n    valueFormat: 'currency' as const,\n  }));\n\n  const listHealthItems = emailListHealth.map(segment => ({\n    label: segment.segment,\n    value: `${segment.count.toLocaleString()} (${segment.percentage}%)`,\n    percentage: segment.percentage,\n    color: segment.color,\n  }));\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div>\n        <div className=\"flex items-center gap-2 text-sm text-slate-400 mb-2\">\n          <Link href=\"/marketing\" className=\"hover:text-white\">Marketing</Link>\n          <i className=\"fas fa-chevron-right text-xs\"></i>\n          <span className=\"text-white\">Email Marketing</span>\n        </div>\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 bg-[#12b789] rounded-xl flex items-center justify-center\">\n              <span className=\"text-white font-bold text-xl\">K</span>\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold text-white\">Email Marketing</h1>\n              <p className=\"text-sm text-slate-400\">Powered by {emailAccount.platform}</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex items-center gap-2 px-3 py-1.5 bg-emerald-500/10 rounded-lg\">\n              <div className=\"w-2 h-2 bg-emerald-400 rounded-full animate-pulse\"></div>\n              <span className=\"text-emerald-400 text-sm\">Connected</span>\n            </div>\n            <select\n              value={dateRange}\n              onChange={(e) => setDateRange(e.target.value)}\n              className=\"bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white text-sm\"\n            >\n              <option value=\"7d\">Last 7 Days</option>\n              <option value=\"30d\">Last 30 Days</option>\n              <option value=\"90d\">Last 90 Days</option>\n            </select>\n            <button className=\"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg text-sm\">\n              <i className=\"fas fa-external-link-alt mr-2\"></i>\n              Open Klaviyo\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <MetricsGrid metrics={primaryMetrics} columns={6} />\n\n      <CampaignTable\n        title=\"Recent Campaigns\"\n        subtitle={`${emailRecentCampaigns.length} campaigns this month`}\n        columns={campaignColumns}\n        data={emailRecentCampaigns}\n        getRowKey={(row) => row.id}\n        headerAction={{ label: 'Create Campaign', icon: 'fas fa-plus', onClick: () => {} }}\n      />\n\n      <div className=\"grid grid-cols-2 gap-6\">\n        <div className=\"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-hidden\">\n          <div className=\"p-4 border-b border-slate-700\">\n            <h2 className=\"text-lg font-semibold text-white\">Automated Flows</h2>\n            <p className=\"text-sm text-slate-400\">Always-on email sequences</p>\n          </div>\n          <div className=\"divide-y divide-slate-700/50\">\n            {emailAutomatedFlows.map(flow => (\n              <div key={flow.name} className=\"p-4 hover:bg-slate-800/30 flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className={`w-2 h-2 rounded-full ${flow.active ? 'bg-emerald-400' : 'bg-slate-500'}`}></div>\n                  <div>\n                    <div className=\"text-white\">{flow.name}</div>\n                    <div className=\"text-xs text-slate-400\">\n                      {flow.active ? `${flow.sent} sent • ${flow.openRate}% open rate` : 'Inactive'}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"text-emerald-400 font-medium\">{formatCurrency(flow.revenue)}</div>\n              </div>\n            ))}\n          </div>\n          <div className=\"p-4 border-t border-slate-700 bg-slate-800/30\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-slate-400\">Total Flow Revenue</span>\n              <span className=\"text-lg font-bold text-emerald-400\">\n                {formatCurrency(emailAutomatedFlows.reduce((sum, f) => sum + f.revenue, 0))}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <BreakdownCard\n          title=\"List Health\"\n          subtitle=\"Subscriber engagement breakdown\"\n          items={listHealthItems}\n        />\n      </div>\n\n      <TipBox\n        title=\"Email Marketing Best Practices\"\n        content={`Industry benchmark open rates are 15-25%. Your ${emailMetrics.openRate}% open rate is excellent! Continue segmenting your list and personalizing content to maintain high engagement.`}\n        icon=\"fas fa-lightbulb\"\n        variant=\"emerald\"\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}