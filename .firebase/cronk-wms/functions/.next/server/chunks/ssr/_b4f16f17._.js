module.exports=[47084,a=>{"use strict";var b=a.i(87924);let c=(0,a.i(72131).forwardRef)(({checked:a,onChange:c,disabled:d=!1,size:e="md",label:f,description:g},h)=>{let i={sm:{track:"w-9 h-5",thumb:"w-4 h-4",translate:"translate-x-4"},md:{track:"w-11 h-6",thumb:"w-5 h-5",translate:"translate-x-5"}}[e],j=()=>{d||c(!a)},k=(0,b.jsx)("button",{ref:h,type:"button",role:"switch","aria-checked":a,disabled:d,onClick:j,onKeyDown:a=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),j())},className:`
          relative inline-flex flex-shrink-0 cursor-pointer rounded-full
          transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2
          focus:ring-emerald-500 focus:ring-offset-2 focus:ring-offset-slate-900
          ${i.track}
          ${a?"bg-emerald-500":"bg-slate-600"}
          ${d?"opacity-50 cursor-not-allowed":""}
        `,children:(0,b.jsx)("span",{"aria-hidden":"true",className:`
            pointer-events-none inline-block rounded-full bg-white shadow-lg
            ring-0 transition duration-200 ease-in-out
            ${i.thumb}
            ${a?i.translate:"translate-x-0.5"}
            mt-0.5
          `})});return f||g?(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[f&&(0,b.jsx)("div",{className:`text-white ${"sm"===e?"text-sm":"text-base"}`,children:f}),g&&(0,b.jsx)("div",{className:"text-sm text-slate-400 mt-0.5",children:g})]}),k]}):k});c.displayName="Toggle",a.s(["Toggle",0,c])},2835,a=>{"use strict";let b=(0,a.i(70106).default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);a.s(["Hash",()=>b],2835)},68726,49611,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(88736),e=a.i(12466),f=a.i(98263),g=a.i(89697),h=a.i(88860),i=a.i(33508),j=a.i(83497),k=a.i(87532),l=a.i(2835),m=a.i(41675),n=a.i(17545),o=a.i(47084);let p=[{value:"classic_line",label:"Classic Line"},{value:"additives",label:"Additives"},{value:"autoflower_line",label:"Autoflower Line"},{value:"puur_organics",label:"PuurOrganics"},{value:"shipping_supplies",label:"Shipping Supplies"},{value:"merch",label:"Merch"},{value:"labels",label:"Labels"}],q={name:"",sku:"",barcode:"",category:"classic_line",description:"",cost:"",priceMSRP:"",priceShopify:"",priceAmazon:"",priceWholesale:"",weight:"",length:"",width:"",height:"",reorderPoint:"50",supplier:""};function r({isOpen:a,onClose:r,editProduct:s}){let{state:t,dispatch:u}=(0,f.useApp)(),{success:v,error:w}=(0,g.useToast)(),[x,y]=(0,c.useState)(q),[z,A]=(0,c.useState)({}),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(1001),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(30),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(1),_=!!s,aa=(0,c.useMemo)(()=>{if(!F.trim())return[];let a=F.toLowerCase();return t.products.filter(b=>(b.name.toLowerCase().includes(a)||b.sku.toLowerCase().includes(a))&&b.id!==s?.id&&!D.some(a=>a.productId===b.id)).slice(0,6)},[F,t.products,D,s?.id]),ab=a=>t.inventory.filter(b=>b.productId===a).reduce((a,b)=>a+b.quantity,0);(0,c.useEffect)(()=>{a&&(s?(y({name:s.name,sku:s.sku,barcode:s.barcode||"",category:s.category,description:s.description||"",cost:s.cost.rolling.toString(),priceMSRP:s.prices.msrp.toString(),priceShopify:s.prices.shopify?.toString()||"",priceAmazon:s.prices.amazon?.toString()||"",priceWholesale:s.prices.wholesale?.toString()||"",weight:s.weight.value.toString(),length:s.dimensions?.length?.toString()||"",width:s.dimensions?.width?.toString()||"",height:s.dimensions?.height?.toString()||"",reorderPoint:s.reorderPoint.toString(),supplier:s.supplier||""}),E(s.components||[]),K(s.trackSerials||!1),M(s.serialPrefix||""),O(s.serialNextNumber||1001),Q(s.serialSuffix||""),S(s.trackLots||!1),U(s.expirationTracking||!1),W(s.expirationWarningDays||30),Y(s.lotPrefix||""),$(s.lotNextNumber||1)):(y(q),E([]),K(!1),M(""),O(1001),Q(""),S(!1),U(!1),W(30),Y(""),$(1)),A({}),G(""),I(!1))},[a,s]);let ac=(a,b)=>{y(c=>({...c,[a]:b})),z[a]&&A(b=>({...b,[a]:void 0}))},ad=async()=>{let a,b,c,d;if(a={},x.name.trim()||(a.name="Product name is required"),x.sku.trim()?(!_||x.sku!==s?.sku)&&t.products.find(a=>a.sku.toLowerCase()===x.sku.toLowerCase()&&a.id!==s?.id)&&(a.sku="SKU already exists"):a.sku="SKU is required",x.category||(a.category="Category is required"),(isNaN(b=parseFloat(x.cost))||b<0)&&(a.cost="Valid cost is required"),(isNaN(c=parseFloat(x.priceMSRP))||c<0)&&(a.priceMSRP="Valid MSRP is required"),(isNaN(d=parseFloat(x.weight))||d<0)&&(a.weight="Valid weight is required"),A(a),0===Object.keys(a).length){C(!0);try{let a={id:s?.id||crypto.randomUUID(),name:x.name.trim(),sku:x.sku.trim(),barcode:x.barcode.trim()||void 0,category:x.category,description:x.description.trim()||void 0,cost:{rolling:parseFloat(x.cost),fixed:parseFloat(x.cost)},prices:{msrp:parseFloat(x.priceMSRP),shopify:x.priceShopify?parseFloat(x.priceShopify):parseFloat(x.priceMSRP),amazon:x.priceAmazon?parseFloat(x.priceAmazon):parseFloat(x.priceMSRP),wholesale:x.priceWholesale?parseFloat(x.priceWholesale):.6*parseFloat(x.priceMSRP)},weight:{value:parseFloat(x.weight),unit:"lbs"},dimensions:{length:parseFloat(x.length)||0,width:parseFloat(x.width)||0,height:parseFloat(x.height)||0},reorderPoint:parseInt(x.reorderPoint)||50,supplier:x.supplier.trim()||void 0,skus:s?.skus,components:D.length>0?D:void 0,trackSerials:J,serialPrefix:J?L:void 0,serialNextNumber:J?N:void 0,serialSuffix:J?P:void 0,trackLots:R,expirationTracking:R?T:void 0,expirationWarningDays:R&&T?V:void 0,lotPrefix:R?X:void 0,lotNextNumber:R?Z:void 0,createdAt:s?.createdAt||new Date,updatedAt:new Date};_?(u({type:"UPDATE_PRODUCT",payload:a}),v("Product updated successfully!")):(u({type:"ADD_PRODUCT",payload:a}),t.locations.forEach(b=>{t.inventory.find(c=>c.productId===a.id&&c.locationId===b.id)||u({type:"UPDATE_INVENTORY",payload:{productId:a.id,locationId:b.id,quantity:0,updatedAt:new Date}})}),v("Product created successfully!")),r()}catch(a){w("Failed to save product. Please try again.")}finally{C(!1)}}};return(0,b.jsx)(d.Modal,{open:a,onClose:r,title:_?"Edit Product":"Add Product",subtitle:_?`Editing ${s?.name}`:"Create a new product in your inventory",size:"lg",footer:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Button,{variant:"secondary",onClick:r,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:ad,disabled:B,children:B?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):_?"Save Changes":"Create Product"})]}),children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Basic Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["Product Name ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:x.name,onChange:a=>ac("name",a.target.value),className:`w-full bg-slate-800 border ${z.name?"border-red-500":"border-slate-700"} rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"e.g., 1L Micro Classic"}),z.name&&(0,b.jsx)("p",{className:"text-red-400 text-xs mt-1",children:z.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["SKU ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:x.sku,onChange:a=>ac("sku",a.target.value.toUpperCase()),className:`flex-1 bg-slate-800 border ${z.sku?"border-red-500":"border-slate-700"} rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"e.g., CLM1L"}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a=x.category.substring(0,3).toUpperCase(),b=Math.floor(900*Math.random())+100;ac("sku",`CN${a}${b}`)},className:"px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg transition-colors text-sm",title:"Auto-generate SKU",children:(0,b.jsx)("i",{className:"fas fa-magic"})})]}),z.sku&&(0,b.jsx)("p",{className:"text-red-400 text-xs mt-1",children:z.sku})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Barcode"}),(0,b.jsx)("input",{type:"text",value:x.barcode,onChange:a=>ac("barcode",a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"UPC or EAN"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["Category ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)("select",{value:x.category,onChange:a=>ac("category",a.target.value),className:`w-full bg-slate-800 border ${z.category?"border-red-500":"border-slate-700"} rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50`,children:p.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))}),z.category&&(0,b.jsx)("p",{className:"text-red-400 text-xs mt-1",children:z.category})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Supplier"}),(0,b.jsx)("input",{type:"text",value:x.supplier,onChange:a=>ac("supplier",a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"e.g., HIGROCORP"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Description"}),(0,b.jsx)("textarea",{value:x.description,onChange:a=>ac("description",a.target.value),rows:2,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none",placeholder:"Product description..."})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Pricing"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["Cost (COGS) ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,b.jsx)("input",{type:"number",step:"0.01",min:"0",value:x.cost,onChange:a=>ac("cost",a.target.value),className:`w-full bg-slate-800 border ${z.cost?"border-red-500":"border-slate-700"} rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"0.00"})]}),z.cost&&(0,b.jsx)("p",{className:"text-red-400 text-xs mt-1",children:z.cost})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["MSRP ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,b.jsx)("input",{type:"number",step:"0.01",min:"0",value:x.priceMSRP,onChange:a=>ac("priceMSRP",a.target.value),className:`w-full bg-slate-800 border ${z.priceMSRP?"border-red-500":"border-slate-700"} rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"0.00"})]}),z.priceMSRP&&(0,b.jsx)("p",{className:"text-red-400 text-xs mt-1",children:z.priceMSRP})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Shopify Price"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,b.jsx)("input",{type:"number",step:"0.01",min:"0",value:x.priceShopify,onChange:a=>ac("priceShopify",a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"Same as MSRP"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Amazon Price"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,b.jsx)("input",{type:"number",step:"0.01",min:"0",value:x.priceAmazon,onChange:a=>ac("priceAmazon",a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"Same as MSRP"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Wholesale Price"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"$"}),(0,b.jsx)("input",{type:"number",step:"0.01",min:"0",value:x.priceWholesale,onChange:a=>ac("priceWholesale",a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-7 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"60% of MSRP"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Reorder Point"}),(0,b.jsx)("input",{type:"number",min:"0",value:x.reorderPoint,onChange:a=>ac("reorderPoint",a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"50"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Physical Attributes"}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm text-slate-400 mb-1.5",children:["Weight (lbs) ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)("input",{type:"number",step:"0.01",min:"0",value:x.weight,onChange:a=>ac("weight",a.target.value),className:`w-full bg-slate-800 border ${z.weight?"border-red-500":"border-slate-700"} rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50`,placeholder:"0.00"}),z.weight&&(0,b.jsx)("p",{className:"text-red-400 text-xs mt-1",children:z.weight})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Length (in)"}),(0,b.jsx)("input",{type:"number",step:"0.1",min:"0",value:x.length,onChange:a=>ac("length",a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Width (in)"}),(0,b.jsx)("input",{type:"number",step:"0.1",min:"0",value:x.width,onChange:a=>ac("width",a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Height (in)"}),(0,b.jsx)("input",{type:"number",step:"0.1",min:"0",value:x.height,onChange:a=>ac("height",a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"0"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Manufacturing Components (Bill of Materials)"}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mb-3",children:"Add components required to manufacture this product (e.g., front label, back label, bottle)"}),(0,b.jsx)("div",{className:"relative mb-3",children:(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(k.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,b.jsx)("input",{type:"text",value:F,onChange:a=>{G(a.target.value),I(!0)},onFocus:()=>I(!0),placeholder:"Search products to add as components...",className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"}),H&&aa.length>0&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-48 overflow-auto",children:aa.map(a=>{let c=ab(a.id);return(0,b.jsxs)("button",{type:"button",onClick:()=>{var b;let c;return b=a.id,void((c=t.products.find(a=>a.id===b))&&(E(a=>[...a,{productId:c.id,productName:c.name,quantity:1}]),G(""),I(!1)))},className:"w-full px-4 py-2.5 flex items-center justify-between hover:bg-slate-700/50 text-left",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-white",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-slate-400",children:a.sku})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("div",{className:`text-xs ${c>0?"text-emerald-400":"text-slate-500"}`,children:[(0,h.formatNumber)(c)," in stock"]})})]},a.id)})})]})})}),D.length>0?(0,b.jsx)("div",{className:"space-y-2",children:D.map(a=>{let c=t.products.find(b=>b.id===a.productId),d=ab(a.productId);return(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 border border-slate-700/50 rounded-lg",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(j.Package,{className:"w-4 h-4 text-emerald-400"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"text-sm text-white truncate",children:a.productName}),(0,b.jsxs)("div",{className:"text-xs text-slate-400",children:[c?.sku," - ",(0,h.formatNumber)(d)," available"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-slate-400",children:"Qty:"}),(0,b.jsx)("input",{type:"number",min:"1",value:a.quantity,onChange:b=>{var c,d;return c=a.productId,void(!((d=parseInt(b.target.value)||1)<1)&&E(a=>a.map(a=>a.productId===c?{...a,quantity:d}:a)))},className:"w-16 bg-slate-700 border border-slate-600 rounded-lg px-2 py-1.5 text-white text-center text-sm focus:outline-none focus:border-emerald-500/50"}),(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.productId,void E(a=>a.filter(a=>a.productId!==b))},className:"p-1.5 text-slate-400 hover:text-red-400 hover:bg-slate-700 rounded-lg transition-colors",children:(0,b.jsx)(i.X,{className:"w-4 h-4"})})]})]},a.productId)})}):(0,b.jsxs)("div",{className:"p-4 border-2 border-dashed border-slate-700 rounded-lg text-center",children:[(0,b.jsx)(j.Package,{className:"w-8 h-8 text-slate-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"No components added"}),(0,b.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:"Search and add components to track BOM for manufacturing"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Serial Number Tracking"}),(0,b.jsxs)("div",{className:"p-4 bg-slate-800/50 border border-slate-700/50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-white",children:"Enable Serial Number Tracking"}),(0,b.jsx)("div",{className:"text-sm text-slate-400 mt-0.5",children:"Track individual units with unique serial numbers"})]}),(0,b.jsx)(o.Toggle,{checked:J,onChange:K})]}),J&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700/50 space-y-4",children:[(0,b.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[(0,b.jsx)(l.Hash,{className:"w-4 h-4 text-emerald-400"}),"Auto-Generate Serial Format"]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Prefix"}),(0,b.jsx)("input",{type:"text",value:L,onChange:a=>M(a.target.value),placeholder:"e.g., SN-",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Next Number"}),(0,b.jsx)("input",{type:"number",value:N,onChange:a=>O(parseInt(a.target.value)||1),placeholder:"1001",min:1,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Suffix"}),(0,b.jsx)("input",{type:"text",value:P,onChange:a=>Q(a.target.value),placeholder:"e.g., -2024",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono"})]})]}),(0,b.jsxs)("div",{className:"p-3 bg-slate-700/30 rounded-lg",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Preview: "}),(0,b.jsxs)("span",{className:"font-mono text-emerald-400",children:[L,String(N).padStart(4,"0"),P]})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Lot/Batch Tracking"}),(0,b.jsxs)("div",{className:"p-4 bg-slate-800/50 border border-slate-700/50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-white",children:"Enable Lot/Batch Tracking"}),(0,b.jsx)("div",{className:"text-sm text-slate-400 mt-0.5",children:"Track inventory by lot numbers for FIFO/FEFO picking"})]}),(0,b.jsx)(o.Toggle,{checked:R,onChange:S})]}),R&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700/50 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(m.Calendar,{className:"w-5 h-5 text-amber-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-white",children:"Track Expiration Dates"}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:"Enable FEFO (First Expired, First Out) picking"})]})]}),(0,b.jsx)(o.Toggle,{checked:T,onChange:U})]}),T&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Warning Days Before Expiration"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"number",value:V,onChange:a=>W(parseInt(a.target.value)||30),min:1,className:"w-24 bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"}),(0,b.jsx)("span",{className:"text-slate-400",children:"days"})]})]}),(0,b.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[(0,b.jsx)(n.Layers,{className:"w-4 h-4 text-purple-400"}),"Auto-Generate Lot Number Format"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Lot Prefix"}),(0,b.jsx)("input",{type:"text",value:X,onChange:a=>Y(a.target.value),placeholder:"e.g., LOT-",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Next Lot Number"}),(0,b.jsx)("input",{type:"number",value:Z,onChange:a=>$(parseInt(a.target.value)||1),placeholder:"1",min:1,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"})]})]}),(0,b.jsxs)("div",{className:"p-3 bg-slate-700/30 rounded-lg",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Preview: "}),(0,b.jsxs)("span",{className:"font-mono text-purple-400",children:[X||"LOT-",new Date().toISOString().slice(0,10).replace(/-/g,""),"-",String(Z).padStart(3,"0")]})]})]})]})]})]})})}a.s(["AddProductModal",()=>r],68726);let s=[{value:"received",label:"Received (PO)"},{value:"sold",label:"Sold"},{value:"damaged",label:"Damaged"},{value:"count_adjustment",label:"Count Adjustment"},{value:"transfer_in",label:"Transfer In"},{value:"transfer_out",label:"Transfer Out"},{value:"returned",label:"Customer Return"},{value:"other",label:"Other"}];function t({isOpen:a,onClose:i,product:j}){let{state:k,dispatch:l}=(0,f.useApp)(),{success:m,warning:n}=(0,g.useToast)(),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)("add"),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)("count_adjustment"),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a&&j&&(p(k.locations[0]?.id||""),r("add"),u(""),w("count_adjustment"),y(""))},[a,j,k.locations]);let B=(0,c.useMemo)(()=>{if(!j||!o)return 0;let a=k.inventory.find(a=>a.productId===j.id&&a.locationId===o);return a?.quantity||0},[j,o,k.inventory]),C=(0,c.useMemo)(()=>j?k.locations.map(a=>{let b=k.inventory.find(b=>b.productId===j.id&&b.locationId===a.id);return{locationId:a.id,locationName:a.name,quantity:b?.quantity||0}}):[],[j,k.locations,k.inventory]),D=(0,c.useMemo)(()=>{let a=parseInt(t)||0;return"add"===q?B+a:"remove"===q?B-a:"set"===q?a:B},[B,q,t]),E="remove"===q&&D<0;return j?(0,b.jsx)(d.Modal,{open:a,onClose:i,title:"Adjust Stock",subtitle:j.name,size:"md",footer:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Button,{variant:"secondary",onClick:i,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:()=>{if(!j||!o)return;let a=parseInt(t)||0;if(0!==a){A(!0);try{let b=0;"add"===q&&(b=a),"remove"===q&&(b=-a),"set"===q&&(b=a-B),l({type:"ADJUST_STOCK",payload:{productId:j.id,locationId:o,adjustment:b}});let c=k.locations.find(a=>a.id===o)?.name||"Unknown";E?n(`Stock adjusted: ${j.name} now has ${D} units at ${c} (negative stock)`):m(`Stock adjusted: ${j.name} now has ${(0,h.formatNumber)(D)} units at ${c}`),i()}finally{A(!1)}}},disabled:z||!t||0===parseInt(t),children:z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):"Apply Adjustment"})]}),children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-flask text-emerald-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-white",children:j.name}),(0,b.jsxs)("div",{className:"text-sm text-slate-400",children:["SKU: ",j.sku]})]})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Current Stock by Location"}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-2",children:C.map(a=>(0,b.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg border ${o===a.locationId?"bg-emerald-500/10 border-emerald-500/30":"bg-slate-800/50 border-slate-700/50"}`,children:[(0,b.jsx)("span",{className:"text-slate-300",children:a.locationName}),(0,b.jsxs)("span",{className:`font-medium ${a.quantity>0?"text-white":"text-slate-500"}`,children:[(0,h.formatNumber)(a.quantity)," units"]})]},a.locationId))})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Location"}),(0,b.jsx)("select",{value:o,onChange:a=>p(a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50",children:k.locations.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Adjustment Type"}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"add",label:"Add",icon:"fa-plus"},{value:"remove",label:"Remove",icon:"fa-minus"},{value:"set",label:"Set To",icon:"fa-equals"}].map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>r(a.value),className:`p-3 rounded-lg border transition-colors ${q===a.value?"bg-emerald-500/20 border-emerald-500/30 text-emerald-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:[(0,b.jsx)("i",{className:`fas ${a.icon} mr-2`}),a.label]},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Quantity"}),(0,b.jsx)("input",{type:"number",min:"0",value:t,onChange:a=>u(a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50",placeholder:"Enter quantity"})]}),t&&parseInt(t)>0&&(0,b.jsxs)("div",{className:`p-4 rounded-lg border ${E?"bg-red-500/10 border-red-500/30":"bg-blue-500/10 border-blue-500/30"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-slate-300",children:"Stock Change Preview"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-slate-400",children:(0,h.formatNumber)(B)}),(0,b.jsx)("i",{className:"fas fa-arrow-right text-slate-500"}),(0,b.jsx)("span",{className:`font-medium ${E?"text-red-400":"text-emerald-400"}`,children:(0,h.formatNumber)(D)})]})]}),E&&(0,b.jsxs)("p",{className:"text-red-400 text-sm mt-2",children:[(0,b.jsx)("i",{className:"fas fa-exclamation-triangle mr-1"}),"This will result in negative stock. Proceed with caution."]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Reason"}),(0,b.jsx)("select",{value:v,onChange:a=>w(a.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50",children:s.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Notes (Optional)"}),(0,b.jsx)("textarea",{value:x,onChange:a=>y(a.target.value),rows:2,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none",placeholder:"Additional notes about this adjustment..."})]})]})]})}):null}a.s(["AdjustStockModal",()=>t],49611)}];

//# sourceMappingURL=_b4f16f17._.js.map