{"version":3,"sources":["../../../../components/modals/FulfillmentRuleModal.tsx","../../../../components/modals/BundleModal.tsx","../../../../components/modals/BundleDetailModal.tsx","../../../../components/modals/EditOrderModal.tsx","../../../../components/modals/CreatePOModal.tsx","../../../../components/modals/ReceivePOModal.tsx","../../../../components/modals/CreateWorkOrderModal.tsx","../../../../components/modals/WorkOrderDetailModal.tsx","../../../../components/modals/LocationModal.tsx","../../../../components/modals/BoxModal.tsx","../../../../components/modals/CreateReturnModal.tsx","../../../../components/modals/index.ts","../../../../components/modals/CreateStockCountModal.tsx","../../../../components/modals/CreateTransferModal.tsx","../../../../components/modals/AutomationRuleModal.tsx","../../../../lib/automationEngine.ts","../../../../node_modules/lucide-react/src/icons/funnel.ts","../../../../node_modules/lucide-react/src/icons/flag.ts","../../../../node_modules/lucide-react/src/icons/package-check.ts","../../../../node_modules/lucide-react/src/icons/wand-sparkles.ts","../../../../node_modules/lucide-react/src/icons/zap.ts","../../../../node_modules/lucide-react/src/icons/arrow-left-right.ts","../../../../lib/ruleTemplates.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useApp, FulfillmentRule, FulfillmentRuleType, FulfillmentRuleCondition, FulfillmentRuleAction } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { Button } from '@/components/ui/Button';\nimport {\n  X,\n  Plus,\n  Trash2,\n  Zap,\n  Tag,\n  Box,\n  Package,\n  Truck,\n  AlertCircle,\n} from 'lucide-react';\n\ninterface FulfillmentRuleModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editRule?: FulfillmentRule | null;\n}\n\nconst ruleTypeOptions: { value: FulfillmentRuleType; label: string; description: string; icon: typeof Zap }[] = [\n  { value: 'gripper_sticker', label: 'Gripper Sticker', description: 'Add gripper stickers to orders', icon: Tag },\n  { value: 'box_selection', label: 'Box Selection', description: 'Auto-select shipping box', icon: Box },\n  { value: 'label_deduction', label: 'Label Deduction', description: 'Deduct labels from inventory', icon: Tag },\n  { value: 'auto_allocate', label: 'Auto Allocate', description: 'Allocate inventory automatically', icon: Package },\n  { value: 'weight_threshold', label: 'Weight Threshold', description: 'Apply rules based on weight', icon: Truck },\n  { value: 'custom', label: 'Custom Rule', description: 'Create a custom rule', icon: Zap },\n];\n\nconst conditionFieldOptions = [\n  { value: 'channel', label: 'Sales Channel' },\n  { value: 'sku', label: 'SKU' },\n  { value: 'category', label: 'Category' },\n  { value: 'weight', label: 'Total Weight' },\n  { value: 'quantity', label: 'Item Quantity' },\n  { value: 'total_value', label: 'Order Value' },\n  { value: 'destination_state', label: 'Destination State' },\n  { value: 'destination_country', label: 'Destination Country' },\n];\n\nconst operatorOptions = [\n  { value: 'equals', label: 'Equals' },\n  { value: 'not_equals', label: 'Not Equals' },\n  { value: 'contains', label: 'Contains' },\n  { value: 'greater_than', label: 'Greater Than' },\n  { value: 'less_than', label: 'Less Than' },\n  { value: 'in_list', label: 'In List' },\n];\n\nconst actionTypeOptions = [\n  { value: 'add_item', label: 'Add Item to Order' },\n  { value: 'deduct_inventory', label: 'Deduct Inventory' },\n  { value: 'set_box', label: 'Set Shipping Box' },\n  { value: 'add_note', label: 'Add Note' },\n  { value: 'set_carrier', label: 'Set Carrier' },\n];\n\nexport function FulfillmentRuleModal({\n  isOpen,\n  onClose,\n  editRule,\n}: FulfillmentRuleModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [type, setType] = useState<FulfillmentRuleType>('custom');\n  const [enabled, setEnabled] = useState(true);\n  const [priority, setPriority] = useState(10);\n  const [conditions, setConditions] = useState<FulfillmentRuleCondition[]>([]);\n  const [actions, setActions] = useState<FulfillmentRuleAction[]>([]);\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editRule) {\n        setName(editRule.name);\n        setDescription(editRule.description || '');\n        setType(editRule.type);\n        setEnabled(editRule.enabled);\n        setPriority(editRule.priority);\n        setConditions(editRule.conditions);\n        setActions(editRule.actions);\n      } else {\n        setName('');\n        setDescription('');\n        setType('custom');\n        setEnabled(true);\n        setPriority(10);\n        setConditions([]);\n        setActions([]);\n      }\n    }\n  }, [isOpen, editRule]);\n\n  const addCondition = () => {\n    setConditions([\n      ...conditions,\n      {\n        id: crypto.randomUUID(),\n        field: 'channel',\n        operator: 'equals',\n        value: '',\n      },\n    ]);\n  };\n\n  const updateCondition = (id: string, updates: Partial<FulfillmentRuleCondition>) => {\n    setConditions(conditions.map(c => (c.id === id ? { ...c, ...updates } : c)));\n  };\n\n  const removeCondition = (id: string) => {\n    setConditions(conditions.filter(c => c.id !== id));\n  };\n\n  const addAction = () => {\n    setActions([\n      ...actions,\n      {\n        id: crypto.randomUUID(),\n        type: 'add_note',\n        config: {},\n      },\n    ]);\n  };\n\n  const updateAction = (id: string, updates: Partial<FulfillmentRuleAction>) => {\n    setActions(actions.map(a => (a.id === id ? { ...a, ...updates } : a)));\n  };\n\n  const removeAction = (id: string) => {\n    setActions(actions.filter(a => a.id !== id));\n  };\n\n  const handleSave = () => {\n    if (!name.trim()) {\n      error('Please enter a rule name');\n      return;\n    }\n\n    const rule: FulfillmentRule = {\n      id: editRule?.id || crypto.randomUUID(),\n      name: name.trim(),\n      description: description.trim() || undefined,\n      type,\n      enabled,\n      priority,\n      conditions,\n      actions,\n      createdAt: editRule?.createdAt || new Date(),\n      updatedAt: new Date(),\n    };\n\n    if (editRule) {\n      dispatch({ type: 'UPDATE_FULFILLMENT_RULE', payload: rule });\n      success('Fulfillment rule updated');\n    } else {\n      dispatch({ type: 'ADD_FULFILLMENT_RULE', payload: rule });\n      success('Fulfillment rule created');\n    }\n\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      {/* Backdrop */}\n      <div\n        className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\n        onClick={onClose}\n      />\n\n      {/* Modal */}\n      <div className=\"relative bg-slate-900 border border-slate-700 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-slate-700\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center\">\n              <Zap className=\"w-5 h-5 text-emerald-400\" />\n            </div>\n            <div>\n              <h2 className=\"text-lg font-semibold text-white\">\n                {editRule ? 'Edit Fulfillment Rule' : 'Create Fulfillment Rule'}\n              </h2>\n              <p className=\"text-sm text-slate-400\">\n                Define conditions and actions for order fulfillment\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-6 overflow-y-auto max-h-[60vh]\">\n          {/* Basic Info */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"col-span-2\">\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Rule Name</label>\n              <input\n                type=\"text\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                placeholder=\"e.g., Add gripper sticker to all bottles\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div className=\"col-span-2\">\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Description (optional)</label>\n              <input\n                type=\"text\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"Brief description of what this rule does\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n\n          {/* Rule Type */}\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-2\">Rule Type</label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              {ruleTypeOptions.map((option) => {\n                const Icon = option.icon;\n                return (\n                  <button\n                    key={option.value}\n                    onClick={() => setType(option.value)}\n                    className={`p-3 rounded-lg border text-left transition-colors ${\n                      type === option.value\n                        ? 'border-emerald-500 bg-emerald-500/10'\n                        : 'border-slate-700 hover:border-slate-600'\n                    }`}\n                  >\n                    <Icon className={`w-5 h-5 mb-1 ${type === option.value ? 'text-emerald-400' : 'text-slate-400'}`} />\n                    <p className=\"text-sm font-medium text-white\">{option.label}</p>\n                    <p className=\"text-xs text-slate-500\">{option.description}</p>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Priority and Enabled */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Priority</label>\n              <input\n                type=\"number\"\n                min={1}\n                max={100}\n                value={priority}\n                onChange={(e) => setPriority(parseInt(e.target.value) || 10)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              />\n              <p className=\"text-xs text-slate-500 mt-1\">Lower numbers run first</p>\n            </div>\n            <div className=\"flex items-center justify-between p-4 bg-slate-800/50 rounded-lg\">\n              <div>\n                <p className=\"text-sm font-medium text-white\">Enabled</p>\n                <p className=\"text-xs text-slate-400\">Rule is active</p>\n              </div>\n              <button\n                onClick={() => setEnabled(!enabled)}\n                className={`relative w-12 h-6 rounded-full transition-colors ${\n                  enabled ? 'bg-emerald-500' : 'bg-slate-600'\n                }`}\n              >\n                <div\n                  className={`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${\n                    enabled ? 'translate-x-7' : 'translate-x-1'\n                  }`}\n                />\n              </button>\n            </div>\n          </div>\n\n          {/* Conditions */}\n          <div>\n            <div className=\"flex items-center justify-between mb-3\">\n              <div>\n                <h3 className=\"text-sm font-medium text-white\">Conditions</h3>\n                <p className=\"text-xs text-slate-400\">When should this rule apply?</p>\n              </div>\n              <Button variant=\"secondary\" size=\"sm\" onClick={addCondition}>\n                <Plus className=\"w-4 h-4\" />\n                Add Condition\n              </Button>\n            </div>\n\n            {conditions.length === 0 ? (\n              <div className=\"p-4 bg-slate-800/50 rounded-lg text-center\">\n                <p className=\"text-sm text-slate-400\">No conditions - rule applies to all orders</p>\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                {conditions.map((condition, index) => (\n                  <div key={condition.id} className=\"flex items-center gap-2 p-3 bg-slate-800/50 rounded-lg\">\n                    {index > 0 && <span className=\"text-xs text-slate-500\">AND</span>}\n                    <select\n                      value={condition.field}\n                      onChange={(e) => updateCondition(condition.id, { field: e.target.value as any })}\n                      className=\"bg-slate-700 border border-slate-600 rounded px-2 py-1 text-sm text-white\"\n                    >\n                      {conditionFieldOptions.map((opt) => (\n                        <option key={opt.value} value={opt.value}>{opt.label}</option>\n                      ))}\n                    </select>\n                    <select\n                      value={condition.operator}\n                      onChange={(e) => updateCondition(condition.id, { operator: e.target.value as any })}\n                      className=\"bg-slate-700 border border-slate-600 rounded px-2 py-1 text-sm text-white\"\n                    >\n                      {operatorOptions.map((opt) => (\n                        <option key={opt.value} value={opt.value}>{opt.label}</option>\n                      ))}\n                    </select>\n                    <input\n                      type=\"text\"\n                      value={String(condition.value)}\n                      onChange={(e) => updateCondition(condition.id, { value: e.target.value })}\n                      placeholder=\"Value\"\n                      className=\"flex-1 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-sm text-white\"\n                    />\n                    <button\n                      onClick={() => removeCondition(condition.id)}\n                      className=\"p-1 text-slate-400 hover:text-red-400\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Actions */}\n          <div>\n            <div className=\"flex items-center justify-between mb-3\">\n              <div>\n                <h3 className=\"text-sm font-medium text-white\">Actions</h3>\n                <p className=\"text-xs text-slate-400\">What should happen when conditions are met?</p>\n              </div>\n              <Button variant=\"secondary\" size=\"sm\" onClick={addAction}>\n                <Plus className=\"w-4 h-4\" />\n                Add Action\n              </Button>\n            </div>\n\n            {actions.length === 0 ? (\n              <div className=\"p-4 bg-slate-800/50 rounded-lg text-center\">\n                <p className=\"text-sm text-slate-400\">No actions defined</p>\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                {actions.map((action) => (\n                  <div key={action.id} className=\"flex items-center gap-2 p-3 bg-slate-800/50 rounded-lg\">\n                    <select\n                      value={action.type}\n                      onChange={(e) => updateAction(action.id, { type: e.target.value as any })}\n                      className=\"bg-slate-700 border border-slate-600 rounded px-2 py-1 text-sm text-white\"\n                    >\n                      {actionTypeOptions.map((opt) => (\n                        <option key={opt.value} value={opt.value}>{opt.label}</option>\n                      ))}\n                    </select>\n\n                    {action.type === 'add_item' && (\n                      <select\n                        value={action.config.productId || ''}\n                        onChange={(e) => updateAction(action.id, { config: { ...action.config, productId: e.target.value } })}\n                        className=\"flex-1 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-sm text-white\"\n                      >\n                        <option value=\"\">Select Product</option>\n                        {state.products.map((p) => (\n                          <option key={p.id} value={p.id}>{p.sku} - {p.name}</option>\n                        ))}\n                      </select>\n                    )}\n\n                    {action.type === 'add_note' && (\n                      <input\n                        type=\"text\"\n                        value={action.config.note || ''}\n                        onChange={(e) => updateAction(action.id, { config: { ...action.config, note: e.target.value } })}\n                        placeholder=\"Note text\"\n                        className=\"flex-1 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-sm text-white\"\n                      />\n                    )}\n\n                    {action.type === 'set_carrier' && (\n                      <select\n                        value={action.config.carrier || ''}\n                        onChange={(e) => updateAction(action.id, { config: { ...action.config, carrier: e.target.value } })}\n                        className=\"flex-1 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-sm text-white\"\n                      >\n                        <option value=\"\">Select Carrier</option>\n                        <option value=\"ups\">UPS</option>\n                        <option value=\"fedex\">FedEx</option>\n                        <option value=\"usps\">USPS</option>\n                      </select>\n                    )}\n\n                    {action.type === 'set_box' && (\n                      <select\n                        value={action.config.boxId || ''}\n                        onChange={(e) => updateAction(action.id, { config: { ...action.config, boxId: e.target.value } })}\n                        className=\"flex-1 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-sm text-white\"\n                      >\n                        <option value=\"\">Select Box</option>\n                        {state.boxes.map((b) => (\n                          <option key={b.id} value={b.id}>{b.name}</option>\n                        ))}\n                      </select>\n                    )}\n\n                    <button\n                      onClick={() => removeAction(action.id)}\n                      className=\"p-1 text-slate-400 hover:text-red-400\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"px-6 py-4 border-t border-slate-700 flex items-center justify-end gap-3\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-slate-400 hover:text-white transition-colors\"\n          >\n            Cancel\n          </button>\n          <Button onClick={handleSave}>\n            <Zap className=\"w-4 h-4\" />\n            {editRule ? 'Update Rule' : 'Create Rule'}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Bundle, BundleComponent } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatNumber } from '@/lib/formatting';\n\ninterface BundleModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editBundle?: Bundle | null;\n}\n\ntype BundleType = 'virtual' | 'physical' | 'fba_kit';\n\nexport function BundleModal({ isOpen, onClose, editBundle }: BundleModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error, warning } = useToast();\n\n  // Form state\n  const [name, setName] = useState('');\n  const [sku, setSku] = useState('');\n  const [bundleType, setBundleType] = useState<BundleType>('virtual');\n  const [description, setDescription] = useState('');\n  const [priceMSRP, setPriceMSRP] = useState('');\n  const [priceShopify, setPriceShopify] = useState('');\n  const [priceAmazon, setPriceAmazon] = useState('');\n  const [assemblyInstructions, setAssemblyInstructions] = useState('');\n  const [components, setComponents] = useState<BundleComponent[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Pricing mode: 'manual' or 'discount'\n  const [pricingMode, setPricingMode] = useState<'manual' | 'discount'>('discount');\n  const [discountPercent, setDiscountPercent] = useState('10');\n\n  // Compare At Prices (calculated from component prices - what it would cost to buy separately)\n  const [compareAtShopify, setCompareAtShopify] = useState('');\n  const [compareAtAmazon, setCompareAtAmazon] = useState('');\n\n  // Amazon markup percentage (increases Amazon prices by this %)\n  const [amazonMarkupPercent, setAmazonMarkupPercent] = useState('15');\n\n  // Product search state\n  const [productSearch, setProductSearch] = useState('');\n  const [showProductDropdown, setShowProductDropdown] = useState(false);\n  const [componentQty, setComponentQty] = useState('1');\n\n  const isEditing = !!editBundle;\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editBundle) {\n        setName(editBundle.name);\n        setSku(editBundle.sku);\n        setBundleType(editBundle.type);\n        setDescription(editBundle.description || '');\n        setPriceMSRP(editBundle.prices.msrp.toString());\n        setPriceShopify(editBundle.prices.shopify.toString());\n        setPriceAmazon(editBundle.prices.amazon.toString());\n        setAssemblyInstructions(editBundle.assemblyInstructions || '');\n        setComponents([...editBundle.components]);\n        // Set compare at prices if available\n        setCompareAtShopify(editBundle.compareAtPrices?.shopify?.toString() || '');\n        setCompareAtAmazon(editBundle.compareAtPrices?.amazon?.toString() || '');\n        // Set pricing mode to manual when editing (since we have specific prices)\n        setPricingMode('manual');\n        setDiscountPercent('10');\n        setAmazonMarkupPercent('15');\n      } else {\n        setName('');\n        setSku('');\n        setBundleType('virtual');\n        setDescription('');\n        setPriceMSRP('');\n        setPriceShopify('');\n        setPriceAmazon('');\n        setCompareAtShopify('');\n        setCompareAtAmazon('');\n        setAmazonMarkupPercent('15');\n        setAssemblyInstructions('');\n        setComponents([]);\n        setPricingMode('discount');\n        setDiscountPercent('10');\n      }\n      setProductSearch('');\n      setComponentQty('1');\n    }\n  }, [isOpen, editBundle]);\n\n  // Get total stock for a product\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Helper to round to 2 decimal places (avoids floating point issues like 8.99 * 3 = 26.970000000002)\n  const roundPrice = (num: number) => Math.round(num * 100) / 100;\n\n  // Calculate bundle metrics\n  const bundleMetrics = useMemo(() => {\n    const cost = roundPrice(components.reduce((sum, c) => {\n      const product = state.products.find(p => p.id === c.productId);\n      return sum + (product?.cost.rolling || 0) * c.quantity;\n    }, 0));\n\n    // Calculate Compare At Price (MSRP) - sum of component MSRPs\n    const compareAtMSRP = roundPrice(components.reduce((sum, c) => {\n      const product = state.products.find(p => p.id === c.productId);\n      return sum + (product?.prices.msrp || 0) * c.quantity;\n    }, 0));\n\n    // Calculate Compare At Price (Shopify) - sum of component Shopify prices\n    const calcCompareAtShopify = roundPrice(components.reduce((sum, c) => {\n      const product = state.products.find(p => p.id === c.productId);\n      return sum + (product?.prices.shopify || product?.prices.msrp || 0) * c.quantity;\n    }, 0));\n\n    // Calculate Compare At Price (Amazon) - sum of component Amazon prices\n    const calcCompareAtAmazon = roundPrice(components.reduce((sum, c) => {\n      const product = state.products.find(p => p.id === c.productId);\n      return sum + (product?.prices.amazon || product?.prices.msrp || 0) * c.quantity;\n    }, 0));\n\n    const msrp = parseFloat(priceMSRP) || 0;\n    const margin = msrp > 0 ? roundPrice(((msrp - cost) / msrp) * 100) : 0;\n\n    // Calculate savings from separate purchase (based on Shopify prices since that's the primary channel)\n    const savings = roundPrice(calcCompareAtShopify - msrp);\n    const savingsPercent = calcCompareAtShopify > 0 ? roundPrice((savings / calcCompareAtShopify) * 100) : 0;\n\n    // Available quantity = MIN of (component stock / qty needed)\n    const availableQty = components.length > 0\n      ? Math.min(\n          ...components.map(c => {\n            const stock = getProductStock(c.productId);\n            return Math.floor(stock / c.quantity);\n          })\n        )\n      : 0;\n\n    // Find limiting component\n    let limitingComponent = '';\n    if (components.length > 0) {\n      let minAvailable = Infinity;\n      components.forEach(c => {\n        const stock = getProductStock(c.productId);\n        const canBuild = Math.floor(stock / c.quantity);\n        if (canBuild < minAvailable) {\n          minAvailable = canBuild;\n          limitingComponent = c.productName;\n        }\n      });\n    }\n\n    return {\n      cost,\n      margin,\n      availableQty,\n      limitingComponent,\n      compareAtMSRP,\n      calcCompareAtShopify,\n      calcCompareAtAmazon,\n      savings,\n      savingsPercent\n    };\n  }, [components, priceMSRP, state.products, state.inventory]);\n\n  // Auto-calculate bundle price (MSRP) when in discount mode - based on Shopify prices\n  useEffect(() => {\n    if (pricingMode === 'discount' && bundleMetrics.calcCompareAtShopify > 0) {\n      const discount = parseFloat(discountPercent) || 0;\n      const bundlePrice = roundPrice(bundleMetrics.calcCompareAtShopify * (1 - discount / 100));\n      setPriceMSRP(bundlePrice.toFixed(2));\n    }\n  }, [pricingMode, discountPercent, bundleMetrics.calcCompareAtShopify]);\n\n  // Auto-set Shopify prices using Shopify component prices\n  useEffect(() => {\n    // Shopify Compare At Price = sum of component Shopify prices (e.g., 3 Ã— $8.99 = $26.97)\n    if (bundleMetrics.calcCompareAtShopify > 0) {\n      setCompareAtShopify(bundleMetrics.calcCompareAtShopify.toFixed(2));\n    }\n    // Shopify Current Price = discounted bundle price based on Shopify compare at\n    if (pricingMode === 'discount' && bundleMetrics.calcCompareAtShopify > 0) {\n      const discount = parseFloat(discountPercent) || 0;\n      const shopifyCurrentPrice = roundPrice(bundleMetrics.calcCompareAtShopify * (1 - discount / 100));\n      setPriceShopify(shopifyCurrentPrice.toFixed(2));\n    }\n  }, [bundleMetrics.calcCompareAtShopify, pricingMode, discountPercent]);\n\n  // Auto-set Amazon prices using Amazon component prices + markup\n  useEffect(() => {\n    const markup = parseFloat(amazonMarkupPercent) || 0;\n\n    // Amazon Compare At Price = sum of component Amazon prices + markup\n    if (bundleMetrics.calcCompareAtAmazon > 0) {\n      const amazonCompareAt = roundPrice(bundleMetrics.calcCompareAtAmazon * (1 + markup / 100));\n      setCompareAtAmazon(amazonCompareAt.toFixed(2));\n    }\n\n    // Amazon Current Price = discounted Amazon price + markup\n    if (pricingMode === 'discount' && bundleMetrics.calcCompareAtAmazon > 0) {\n      const discount = parseFloat(discountPercent) || 0;\n      const amazonBasePrice = bundleMetrics.calcCompareAtAmazon * (1 - discount / 100);\n      const amazonPrice = roundPrice(amazonBasePrice * (1 + markup / 100));\n      setPriceAmazon(amazonPrice.toFixed(2));\n    }\n  }, [bundleMetrics.calcCompareAtAmazon, pricingMode, discountPercent, amazonMarkupPercent]);\n\n  // Filter products for search\n  const filteredProducts = useMemo(() => {\n    if (!productSearch.trim()) return [];\n    const search = productSearch.toLowerCase();\n    return state.products\n      .filter(p =>\n        (p.name.toLowerCase().includes(search) || p.sku.toLowerCase().includes(search)) &&\n        !components.some(c => c.productId === p.id)\n      )\n      .slice(0, 8);\n  }, [productSearch, state.products, components]);\n\n  // Generate SKU\n  const generateSku = () => {\n    const typePrefix = bundleType === 'virtual' ? 'VIR' : bundleType === 'physical' ? 'PHY' : 'FBA';\n    const randomNum = Math.floor(Math.random() * 900) + 100;\n    setSku(`BND-${typePrefix}-${randomNum}`);\n  };\n\n  // Add component\n  const addComponent = (productId: string) => {\n    const product = state.products.find(p => p.id === productId);\n    if (!product) return;\n\n    const qty = parseInt(componentQty) || 1;\n    setComponents(prev => [\n      ...prev,\n      {\n        productId: product.id,\n        productName: product.name,\n        quantity: qty,\n      }\n    ]);\n    setProductSearch('');\n    setComponentQty('1');\n    setShowProductDropdown(false);\n  };\n\n  // Remove component\n  const removeComponent = (productId: string) => {\n    setComponents(prev => prev.filter(c => c.productId !== productId));\n  };\n\n  // Update component quantity\n  const updateComponentQty = (productId: string, qty: number) => {\n    if (qty < 1) return;\n    setComponents(prev => prev.map(c =>\n      c.productId === productId ? { ...c, quantity: qty } : c\n    ));\n  };\n\n  // Validation\n  const isValid = useMemo(() => {\n    if (!name.trim()) return false;\n    if (!sku.trim()) return false;\n    if (!bundleType) return false;\n    if (!priceMSRP || parseFloat(priceMSRP) <= 0) return false;\n    if (components.length === 0) return false;\n\n    // Check for duplicate SKU\n    const existingSku = state.bundles.find(b =>\n      b.sku.toLowerCase() === sku.toLowerCase() && b.id !== editBundle?.id\n    );\n    if (existingSku) return false;\n\n    return true;\n  }, [name, sku, bundleType, priceMSRP, components, state.bundles, editBundle]);\n\n  // Submit handler\n  const handleSubmit = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const msrp = parseFloat(priceMSRP) || 0;\n      const bundleData: Bundle = {\n        id: editBundle?.id || crypto.randomUUID(),\n        name: name.trim(),\n        sku: sku.trim().toUpperCase(),\n        type: bundleType,\n        description: description.trim() || undefined,\n        prices: {\n          msrp,\n          shopify: parseFloat(priceShopify) || msrp,\n          amazon: parseFloat(priceAmazon) || msrp,\n          wholesale: msrp * 0.6,\n        },\n        compareAtPrices: {\n          msrp: bundleMetrics.compareAtMSRP,\n          shopify: parseFloat(compareAtShopify) || bundleMetrics.calcCompareAtShopify,\n          amazon: parseFloat(compareAtAmazon) || bundleMetrics.calcCompareAtAmazon,\n        },\n        components,\n        assemblyInstructions: bundleType !== 'virtual' ? assemblyInstructions.trim() || undefined : undefined,\n        createdAt: editBundle?.createdAt || new Date(),\n        updatedAt: new Date(),\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_BUNDLE', payload: bundleData });\n        success(`Bundle \"${name}\" updated successfully!`);\n      } else {\n        dispatch({ type: 'ADD_BUNDLE', payload: bundleData });\n        success(`Bundle \"${name}\" created successfully!`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save bundle. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Bundle' : 'Create Bundle'}\n      subtitle={isEditing ? `Editing ${editBundle?.name}` : 'Define a new product bundle'}\n      size=\"lg\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? (\n              <>\n                <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                Saving...\n              </>\n            ) : isEditing ? (\n              'Save Changes'\n            ) : (\n              <>\n                <i className=\"fas fa-plus mr-2\"></i>\n                Create Bundle\n              </>\n            )}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Basic Info Section */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Basic Information</h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Bundle Name *</label>\n              <input\n                type=\"text\"\n                value={name}\n                onChange={e => setName(e.target.value)}\n                placeholder=\"e.g., Starter Kit\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Bundle SKU *</label>\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={sku}\n                  onChange={e => setSku(e.target.value)}\n                  placeholder=\"e.g., BND-VIR-001\"\n                  className=\"flex-1 bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={generateSku}\n                  className=\"px-3 py-2.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm whitespace-nowrap\"\n                >\n                  <i className=\"fas fa-magic mr-1\"></i>\n                  Generate\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Bundle Type */}\n          <div className=\"mt-4\">\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Bundle Type *</label>\n            <div className=\"grid grid-cols-3 gap-3\">\n              <button\n                type=\"button\"\n                onClick={() => setBundleType('virtual')}\n                className={`p-3 rounded-lg border transition-colors text-left ${\n                  bundleType === 'virtual'\n                    ? 'bg-blue-500/20 border-blue-500/30 text-blue-400'\n                    : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n                }`}\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <i className=\"fas fa-cloud\"></i>\n                  <span className=\"font-medium\">Virtual</span>\n                </div>\n                <div className=\"text-xs opacity-70\">Components deducted on sale</div>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setBundleType('physical')}\n                className={`p-3 rounded-lg border transition-colors text-left ${\n                  bundleType === 'physical'\n                    ? 'bg-emerald-500/20 border-emerald-500/30 text-emerald-400'\n                    : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n                }`}\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <i className=\"fas fa-box\"></i>\n                  <span className=\"font-medium\">Physical</span>\n                </div>\n                <div className=\"text-xs opacity-70\">Pre-assembled, tracked as unit</div>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setBundleType('fba_kit')}\n                className={`p-3 rounded-lg border transition-colors text-left ${\n                  bundleType === 'fba_kit'\n                    ? 'bg-orange-500/20 border-orange-500/30 text-orange-400'\n                    : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n                }`}\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <i className=\"fab fa-amazon\"></i>\n                  <span className=\"font-medium\">FBA Kit</span>\n                </div>\n                <div className=\"text-xs opacity-70\">Pre-assembled for Amazon FBA</div>\n              </button>\n            </div>\n          </div>\n\n          {/* Description */}\n          <div className=\"mt-4\">\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Description (Optional)</label>\n            <textarea\n              value={description}\n              onChange={e => setDescription(e.target.value)}\n              rows={2}\n              placeholder=\"Brief description of the bundle...\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n            />\n          </div>\n        </div>\n\n        {/* Pricing Section */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Pricing</h3>\n\n          {/* Compare At Price Banner */}\n          {components.length > 0 && bundleMetrics.calcCompareAtShopify > 0 && (\n            <div className=\"mb-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <i className=\"fas fa-tags text-blue-400\"></i>\n                  <span className=\"text-sm text-slate-300\">Compare At Price:</span>\n                </div>\n                <span className=\"text-lg font-bold text-blue-400\">{formatCurrency(bundleMetrics.calcCompareAtShopify)}</span>\n              </div>\n              <div className=\"text-xs text-slate-500 mt-1\">\n                Total if items purchased separately. Updates Shopify&apos;s compare_at_price field.\n              </div>\n              {parseFloat(priceMSRP) > 0 && bundleMetrics.savings > 0 && (\n                <div className=\"mt-2 flex items-center justify-between text-sm\">\n                  <span className=\"text-slate-400\">Customer saves:</span>\n                  <span className=\"text-emerald-400 font-medium\">\n                    {formatCurrency(bundleMetrics.savings)} ({bundleMetrics.savingsPercent.toFixed(0)}% off)\n                  </span>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Pricing Mode Toggle */}\n          <div className=\"flex gap-2 mb-4\">\n            <button\n              type=\"button\"\n              onClick={() => setPricingMode('discount')}\n              className={`flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${\n                pricingMode === 'discount'\n                  ? 'bg-emerald-500/20 border border-emerald-500/30 text-emerald-400'\n                  : 'bg-slate-800 border border-slate-700 text-slate-400 hover:border-slate-600'\n              }`}\n            >\n              <i className=\"fas fa-percent mr-2\"></i>\n              Set by Discount %\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setPricingMode('manual')}\n              className={`flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${\n                pricingMode === 'manual'\n                  ? 'bg-emerald-500/20 border border-emerald-500/30 text-emerald-400'\n                  : 'bg-slate-800 border border-slate-700 text-slate-400 hover:border-slate-600'\n              }`}\n            >\n              <i className=\"fas fa-pen mr-2\"></i>\n              Set Manually\n            </button>\n          </div>\n\n          {/* Discount Mode */}\n          {pricingMode === 'discount' && (\n            <div className=\"mb-4\">\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Bundle Discount</label>\n              <div className=\"flex items-center gap-3\">\n                <div className=\"flex-1\">\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"50\"\n                    step=\"5\"\n                    value={discountPercent}\n                    onChange={e => setDiscountPercent(e.target.value)}\n                    className=\"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-emerald-500\"\n                  />\n                  <div className=\"flex justify-between text-xs text-slate-500 mt-1\">\n                    <span>0%</span>\n                    <span>10%</span>\n                    <span>20%</span>\n                    <span>30%</span>\n                    <span>40%</span>\n                    <span>50%</span>\n                  </div>\n                </div>\n                <div className=\"relative w-24\">\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    max=\"100\"\n                    step=\"1\"\n                    value={discountPercent}\n                    onChange={e => setDiscountPercent(e.target.value)}\n                    className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-3 pr-8 py-2 text-white text-center focus:outline-none focus:border-emerald-500/50\"\n                  />\n                  <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400\">%</span>\n                </div>\n              </div>\n              {components.length > 0 && bundleMetrics.calcCompareAtShopify > 0 && (\n                <div className=\"mt-2 text-sm text-slate-400\">\n                  Current Price: <span className=\"text-white font-medium\">{formatCurrency(parseFloat(priceMSRP) || 0)}</span>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Current Price (MSRP) */}\n          <div className=\"mb-4\">\n            <label className=\"block text-sm text-slate-400 mb-1.5\">\n              Current Price (MSRP) *\n              {pricingMode === 'discount' && <span className=\"text-xs text-emerald-400 ml-1\">(auto-calculated)</span>}\n            </label>\n            <div className=\"relative max-w-xs\">\n              <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0\"\n                value={priceMSRP}\n                onChange={e => {\n                  setPriceMSRP(e.target.value);\n                  if (pricingMode === 'discount') {\n                    setPricingMode('manual');\n                  }\n                }}\n                placeholder=\"0.00\"\n                className={`w-full bg-slate-800 border rounded-lg pl-8 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 ${\n                  pricingMode === 'discount' ? 'border-emerald-500/30' : 'border-slate-700'\n                }`}\n              />\n            </div>\n            <p className=\"text-xs text-slate-500 mt-1\">The actual selling price. Updates Shopify&apos;s price field.</p>\n          </div>\n\n          {/* Channel-Specific Pricing */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            {/* Shopify Pricing */}\n            <div className=\"p-4 bg-slate-800/50 border border-slate-700/50 rounded-lg\">\n              <div className=\"flex items-center gap-2 mb-3\">\n                <i className=\"fab fa-shopify text-green-400\"></i>\n                <span className=\"text-sm font-medium text-white\">Shopify</span>\n              </div>\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-xs text-slate-400 mb-1\">Compare At Price</label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      value={compareAtShopify}\n                      onChange={e => setCompareAtShopify(e.target.value)}\n                      placeholder={bundleMetrics.calcCompareAtShopify.toFixed(2)}\n                      className=\"w-full bg-slate-700 border border-slate-600 rounded-lg pl-7 pr-3 py-2 text-white placeholder-slate-500 text-sm focus:outline-none focus:border-green-500/50\"\n                    />\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-xs text-slate-400 mb-1\">Current Price</label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      value={priceShopify}\n                      onChange={e => setPriceShopify(e.target.value)}\n                      placeholder=\"Same as MSRP\"\n                      className=\"w-full bg-slate-700 border border-slate-600 rounded-lg pl-7 pr-3 py-2 text-white placeholder-slate-500 text-sm focus:outline-none focus:border-green-500/50\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Amazon Pricing */}\n            <div className=\"p-4 bg-slate-800/50 border border-slate-700/50 rounded-lg\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"flex items-center gap-2\">\n                  <i className=\"fab fa-amazon text-orange-400\"></i>\n                  <span className=\"text-sm font-medium text-white\">Amazon</span>\n                </div>\n                {/* Markup Percentage */}\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-slate-400\">Markup:</span>\n                  <div className=\"relative w-20\">\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      max=\"100\"\n                      step=\"1\"\n                      value={amazonMarkupPercent}\n                      onChange={e => setAmazonMarkupPercent(e.target.value)}\n                      className=\"w-full bg-slate-700 border border-orange-500/30 rounded pl-2 pr-6 py-1 text-white text-sm text-center focus:outline-none focus:border-orange-500/50\"\n                    />\n                    <span className=\"absolute right-2 top-1/2 -translate-y-1/2 text-orange-400 text-xs\">%</span>\n                  </div>\n                </div>\n              </div>\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-xs text-slate-400 mb-1\">\n                    Compare At Price\n                    <span className=\"text-orange-400 ml-1\">(+{amazonMarkupPercent}%)</span>\n                  </label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      value={compareAtAmazon}\n                      onChange={e => setCompareAtAmazon(e.target.value)}\n                      placeholder={bundleMetrics.calcCompareAtAmazon.toFixed(2)}\n                      className=\"w-full bg-slate-700 border border-slate-600 rounded-lg pl-7 pr-3 py-2 text-white placeholder-slate-500 text-sm focus:outline-none focus:border-orange-500/50\"\n                    />\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-xs text-slate-400 mb-1\">\n                    Current Price\n                    <span className=\"text-orange-400 ml-1\">(+{amazonMarkupPercent}%)</span>\n                  </label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      value={priceAmazon}\n                      onChange={e => setPriceAmazon(e.target.value)}\n                      placeholder=\"Same as MSRP\"\n                      className=\"w-full bg-slate-700 border border-slate-600 rounded-lg pl-7 pr-3 py-2 text-white placeholder-slate-500 text-sm focus:outline-none focus:border-orange-500/50\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Components Section */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Components *</h3>\n\n          {/* Add Component */}\n          <div className=\"flex gap-2 mb-4\">\n            <div className=\"flex-1 relative\">\n              <i className=\"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\"></i>\n              <input\n                type=\"text\"\n                value={productSearch}\n                onChange={e => {\n                  setProductSearch(e.target.value);\n                  setShowProductDropdown(true);\n                }}\n                onFocus={() => setShowProductDropdown(true)}\n                placeholder=\"Search products by name or SKU...\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n\n              {/* Dropdown */}\n              {showProductDropdown && filteredProducts.length > 0 && (\n                <div className=\"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-48 overflow-auto\">\n                  {filteredProducts.map(product => {\n                    const stock = getProductStock(product.id);\n                    return (\n                      <button\n                        key={product.id}\n                        type=\"button\"\n                        onClick={() => addComponent(product.id)}\n                        className=\"w-full px-4 py-2.5 flex items-center justify-between hover:bg-slate-700/50 text-left\"\n                      >\n                        <div>\n                          <div className=\"text-sm text-white\">{product.name}</div>\n                          <div className=\"text-xs text-slate-400\">SKU: {product.sku}</div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className={`text-sm ${stock > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                            {formatNumber(stock)} available\n                          </div>\n                        </div>\n                      </button>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n            <input\n              type=\"number\"\n              min=\"1\"\n              value={componentQty}\n              onChange={e => setComponentQty(e.target.value)}\n              className=\"w-20 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2.5 text-white text-center focus:outline-none focus:border-emerald-500/50\"\n              placeholder=\"Qty\"\n            />\n          </div>\n\n          {/* Components List */}\n          {components.length > 0 ? (\n            <div className=\"space-y-2 mb-4\">\n              {components.map(comp => {\n                const product = state.products.find(p => p.id === comp.productId);\n                const stock = getProductStock(comp.productId);\n                const hasInsufficientStock = stock < comp.quantity;\n                const componentMSRP = (product?.prices.msrp || 0) * comp.quantity;\n\n                return (\n                  <div\n                    key={comp.productId}\n                    className={`flex items-center gap-3 p-3 rounded-lg border ${\n                      hasInsufficientStock\n                        ? 'bg-red-500/10 border-red-500/30'\n                        : 'bg-slate-800/50 border-slate-700/50'\n                    }`}\n                  >\n                    <div className=\"w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center\">\n                      <i className=\"fas fa-flask text-emerald-400\"></i>\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"text-sm text-white truncate\">{comp.productName}</div>\n                      <div className=\"text-xs text-slate-400\">\n                        {formatNumber(stock)} available â€¢ MSRP: {formatCurrency(product?.prices.msrp || 0)} each\n                        {hasInsufficientStock && (\n                          <span className=\"text-red-400 ml-2\">\n                            <i className=\"fas fa-exclamation-triangle mr-1\"></i>\n                            Insufficient stock\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"text-right mr-2\">\n                      <div className=\"text-sm font-medium text-blue-400\">{formatCurrency(componentMSRP)}</div>\n                      <div className=\"text-xs text-slate-500\">subtotal</div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => updateComponentQty(comp.productId, comp.quantity - 1)}\n                        className=\"w-8 h-8 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded\"\n                      >\n                        -\n                      </button>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={comp.quantity}\n                        onChange={e => updateComponentQty(comp.productId, parseInt(e.target.value) || 1)}\n                        className=\"w-16 bg-slate-700 border border-slate-600 rounded-lg px-2 py-1.5 text-white text-center text-sm\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => updateComponentQty(comp.productId, comp.quantity + 1)}\n                        className=\"w-8 h-8 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded\"\n                      >\n                        +\n                      </button>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => removeComponent(comp.productId)}\n                      className=\"p-2 text-slate-500 hover:text-red-400\"\n                    >\n                      <i className=\"fas fa-trash\"></i>\n                    </button>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <div className=\"p-6 border-2 border-dashed border-slate-700 rounded-lg text-center text-slate-400 mb-4\">\n              <i className=\"fas fa-cubes text-2xl mb-2\"></i>\n              <p>No components added yet</p>\n              <p className=\"text-xs text-slate-500\">Search for products above to add them</p>\n            </div>\n          )}\n\n          {/* Bundle Metrics */}\n          {components.length > 0 && (\n            <div className=\"grid grid-cols-3 gap-3\">\n              <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3 text-center\">\n                <div className=\"text-xs text-slate-400 mb-1\">Bundle Cost</div>\n                <div className=\"text-lg font-bold text-white\">{formatCurrency(bundleMetrics.cost)}</div>\n              </div>\n              <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3 text-center\">\n                <div className=\"text-xs text-slate-400 mb-1\">Margin</div>\n                <div className={`text-lg font-bold ${bundleMetrics.margin >= 50 ? 'text-emerald-400' : bundleMetrics.margin >= 30 ? 'text-amber-400' : 'text-red-400'}`}>\n                  {bundleMetrics.margin.toFixed(1)}%\n                </div>\n              </div>\n              <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3 text-center\">\n                <div className=\"text-xs text-slate-400 mb-1\">Can Build</div>\n                <div className={`text-lg font-bold ${bundleMetrics.availableQty > 10 ? 'text-emerald-400' : bundleMetrics.availableQty > 0 ? 'text-amber-400' : 'text-red-400'}`}>\n                  {formatNumber(bundleMetrics.availableQty)}\n                </div>\n                {bundleMetrics.limitingComponent && bundleMetrics.availableQty < 10 && (\n                  <div className=\"text-xs text-slate-500 truncate\">\n                    Limited by: {bundleMetrics.limitingComponent}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Assembly Instructions (for physical/fba_kit only) */}\n        {bundleType !== 'virtual' && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Assembly Instructions</h3>\n            <textarea\n              value={assemblyInstructions}\n              onChange={e => setAssemblyInstructions(e.target.value)}\n              rows={3}\n              placeholder=\"Instructions for assembling this bundle...\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default BundleModal;\n","'use client';\n\nimport { useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Bundle } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { useConfirm } from '@/components/ui/ConfirmDialog';\nimport { formatCurrency, formatNumber } from '@/lib/formatting';\n\ninterface BundleDetailModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  bundle: Bundle | null;\n  onEdit: () => void;\n}\n\nexport function BundleDetailModal({ isOpen, onClose, bundle, onEdit }: BundleDetailModalProps) {\n  const { state, dispatch } = useApp();\n  const { success } = useToast();\n  const confirm = useConfirm();\n\n  // Get total stock for a product\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Calculate bundle metrics\n  const bundleMetrics = useMemo(() => {\n    if (!bundle) return { cost: 0, margin: 0, availableQty: 0, limitingComponent: '' };\n\n    const cost = bundle.components.reduce((sum, c) => {\n      const product = state.products.find(p => p.id === c.productId);\n      return sum + (product?.cost.rolling || 0) * c.quantity;\n    }, 0);\n\n    const margin = bundle.prices.msrp > 0 ? ((bundle.prices.msrp - cost) / bundle.prices.msrp) * 100 : 0;\n\n    // Available quantity = MIN of (component stock / qty needed)\n    const availableQty = bundle.components.length > 0\n      ? Math.min(\n          ...bundle.components.map(c => {\n            const stock = getProductStock(c.productId);\n            return Math.floor(stock / c.quantity);\n          })\n        )\n      : 0;\n\n    // Find limiting component\n    let limitingComponent = '';\n    if (bundle.components.length > 0) {\n      let minAvailable = Infinity;\n      bundle.components.forEach(c => {\n        const stock = getProductStock(c.productId);\n        const canBuild = Math.floor(stock / c.quantity);\n        if (canBuild < minAvailable) {\n          minAvailable = canBuild;\n          limitingComponent = c.productName;\n        }\n      });\n    }\n\n    return { cost, margin, availableQty, limitingComponent };\n  }, [bundle, state.products, state.inventory]);\n\n  // Get bundle type badge\n  const getBundleTypeBadge = (type: Bundle['type']) => {\n    switch (type) {\n      case 'virtual':\n        return (\n          <span className=\"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full border border-blue-500/20\">\n            <i className=\"fas fa-cloud mr-1\"></i>Virtual\n          </span>\n        );\n      case 'physical':\n        return (\n          <span className=\"px-2 py-1 bg-emerald-500/20 text-emerald-400 text-xs rounded-full border border-emerald-500/20\">\n            <i className=\"fas fa-box mr-1\"></i>Physical\n          </span>\n        );\n      case 'fba_kit':\n        return (\n          <span className=\"px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded-full border border-orange-500/20\">\n            <i className=\"fab fa-amazon mr-1\"></i>FBA Kit\n          </span>\n        );\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!bundle) return;\n\n    const confirmed = await confirm({\n      title: 'Delete Bundle',\n      message: `Are you sure you want to delete \"${bundle.name}\"? This action cannot be undone.`,\n      confirmText: 'Delete',\n      cancelText: 'Cancel',\n      destructive: true,\n    });\n\n    if (confirmed) {\n      dispatch({ type: 'DELETE_BUNDLE', payload: bundle.id });\n      success(`Bundle \"${bundle.name}\" deleted`);\n      onClose();\n    }\n  };\n\n  if (!bundle) return null;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={bundle.name}\n      subtitle={`SKU: ${bundle.sku}`}\n      size=\"lg\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={handleDelete}>\n            <i className=\"fas fa-trash mr-2\"></i>\n            Delete\n          </Button>\n          <Button onClick={onEdit}>\n            <i className=\"fas fa-edit mr-2\"></i>\n            Edit Bundle\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Header Info */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            {getBundleTypeBadge(bundle.type)}\n            <span className={`px-2 py-1 text-xs rounded-full ${\n              bundleMetrics.availableQty > 10\n                ? 'bg-emerald-500/10 text-emerald-400'\n                : bundleMetrics.availableQty > 0\n                ? 'bg-amber-500/10 text-amber-400'\n                : 'bg-red-500/10 text-red-400'\n            }`}>\n              {bundleMetrics.availableQty > 10 ? 'In Stock' : bundleMetrics.availableQty > 0 ? 'Limited' : 'Out of Stock'}\n            </span>\n          </div>\n          <div className=\"text-right\">\n            <div className=\"text-xs text-slate-400\">Can Build</div>\n            <div className={`text-2xl font-bold ${\n              bundleMetrics.availableQty > 10 ? 'text-emerald-400' : bundleMetrics.availableQty > 0 ? 'text-amber-400' : 'text-red-400'\n            }`}>\n              {formatNumber(bundleMetrics.availableQty)}\n            </div>\n          </div>\n        </div>\n\n        {/* Description */}\n        {bundle.description && (\n          <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n            <p className=\"text-slate-300 text-sm\">{bundle.description}</p>\n          </div>\n        )}\n\n        {/* Pricing */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Pricing</h3>\n          <div className=\"grid grid-cols-4 gap-3\">\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3\">\n              <div className=\"text-xs text-slate-400 mb-1\">MSRP</div>\n              <div className=\"text-lg font-bold text-white\">{formatCurrency(bundle.prices.msrp)}</div>\n            </div>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3\">\n              <div className=\"text-xs text-slate-400 mb-1\">Shopify</div>\n              <div className=\"text-lg font-bold text-white\">{formatCurrency(bundle.prices.shopify)}</div>\n            </div>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3\">\n              <div className=\"text-xs text-slate-400 mb-1\">Amazon</div>\n              <div className=\"text-lg font-bold text-white\">{formatCurrency(bundle.prices.amazon)}</div>\n            </div>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3\">\n              <div className=\"text-xs text-slate-400 mb-1\">Wholesale</div>\n              <div className=\"text-lg font-bold text-white\">{formatCurrency(bundle.prices.wholesale)}</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Cost Breakdown */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Cost & Margin</h3>\n          <div className=\"grid grid-cols-3 gap-3\">\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4 text-center\">\n              <div className=\"text-xs text-slate-400 mb-1\">Component Cost</div>\n              <div className=\"text-xl font-bold text-white\">{formatCurrency(bundleMetrics.cost)}</div>\n            </div>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4 text-center\">\n              <div className=\"text-xs text-slate-400 mb-1\">Profit per Bundle</div>\n              <div className=\"text-xl font-bold text-emerald-400\">{formatCurrency(bundle.prices.msrp - bundleMetrics.cost)}</div>\n            </div>\n            <div className=\"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4 text-center\">\n              <div className=\"text-xs text-slate-400 mb-1\">Margin</div>\n              <div className=\"text-xl font-bold text-emerald-400\">{bundleMetrics.margin.toFixed(1)}%</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Components */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Components ({bundle.components.length})</h3>\n          <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg overflow-hidden\">\n            <table className=\"w-full\">\n              <thead className=\"bg-slate-800/50\">\n                <tr className=\"text-left text-xs text-slate-400 uppercase\">\n                  <th className=\"px-4 py-3 font-medium\">Product</th>\n                  <th className=\"px-4 py-3 font-medium text-center\">Qty per Bundle</th>\n                  <th className=\"px-4 py-3 font-medium text-right\">Available Stock</th>\n                  <th className=\"px-4 py-3 font-medium text-right\">Unit Cost</th>\n                  <th className=\"px-4 py-3 font-medium text-right\">Line Total</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-slate-700/50\">\n                {bundle.components.map(comp => {\n                  const product = state.products.find(p => p.id === comp.productId);\n                  const stock = getProductStock(comp.productId);\n                  const unitCost = product?.cost.rolling || 0;\n                  const lineTotal = unitCost * comp.quantity;\n                  const hasInsufficientStock = stock < comp.quantity;\n\n                  return (\n                    <tr key={comp.productId} className=\"hover:bg-slate-700/30\">\n                      <td className=\"px-4 py-3\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className={`w-2 h-2 rounded-full ${hasInsufficientStock ? 'bg-red-400' : 'bg-emerald-400'}`}></div>\n                          <div>\n                            <div className=\"text-sm text-white\">{comp.productName}</div>\n                            <div className=\"text-xs text-slate-400\">{product?.sku || 'Unknown SKU'}</div>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-4 py-3 text-center text-white\">\n                        x {comp.quantity}\n                      </td>\n                      <td className=\"px-4 py-3 text-right\">\n                        <span className={hasInsufficientStock ? 'text-red-400' : 'text-slate-300'}>\n                          {formatNumber(stock)}\n                          {hasInsufficientStock && (\n                            <i className=\"fas fa-exclamation-triangle ml-1 text-xs\"></i>\n                          )}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-3 text-right text-slate-400\">\n                        {formatCurrency(unitCost)}\n                      </td>\n                      <td className=\"px-4 py-3 text-right text-white\">\n                        {formatCurrency(lineTotal)}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n              <tfoot className=\"bg-slate-800/30 border-t border-slate-700\">\n                <tr>\n                  <td colSpan={4} className=\"px-4 py-3 text-right text-sm font-medium text-slate-400\">\n                    Total Component Cost:\n                  </td>\n                  <td className=\"px-4 py-3 text-right text-lg font-bold text-white\">\n                    {formatCurrency(bundleMetrics.cost)}\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>\n\n          {/* Limiting Component Warning */}\n          {bundleMetrics.availableQty < 10 && bundleMetrics.limitingComponent && (\n            <div className=\"mt-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg\">\n              <div className=\"flex items-center gap-2 text-amber-400 text-sm\">\n                <i className=\"fas fa-exclamation-triangle\"></i>\n                <span>Limiting component: <strong>{bundleMetrics.limitingComponent}</strong></span>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Assembly Instructions */}\n        {bundle.type !== 'virtual' && bundle.assemblyInstructions && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Assembly Instructions</h3>\n            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n              <p className=\"text-slate-300 text-sm whitespace-pre-wrap\">{bundle.assemblyInstructions}</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default BundleDetailModal;\n","'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, Order, OrderItem } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency } from '@/lib/formatting';\n\ninterface EditOrderModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  order: Order;\n}\n\ninterface OrderItemDraft {\n  productId: string;\n  productName: string;\n  sku: string;\n  quantity: number;\n  price: number;\n  cost: number;\n}\n\nconst US_STATES = [\n  'AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA',\n  'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD',\n  'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ',\n  'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC',\n  'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'\n];\n\nconst COUNTRIES = ['US', 'CA', 'MX', 'UK', 'AU'];\n\nexport function EditOrderModal({ isOpen, onClose, order }: EditOrderModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Tab state\n  const [activeTab, setActiveTab] = useState<'customer' | 'shipping' | 'billing' | 'items' | 'notes'>('customer');\n\n  // Customer info\n  const [customerName, setCustomerName] = useState('');\n  const [customerEmail, setCustomerEmail] = useState('');\n  const [customerPhone, setCustomerPhone] = useState('');\n\n  // Shipping Address\n  const [shippingStreet, setShippingStreet] = useState('');\n  const [shippingCity, setShippingCity] = useState('');\n  const [shippingState, setShippingState] = useState('');\n  const [shippingZip, setShippingZip] = useState('');\n  const [shippingCountry, setShippingCountry] = useState('US');\n\n  // Billing Address\n  const [sameAsShipping, setSameAsShipping] = useState(true);\n  const [billingStreet, setBillingStreet] = useState('');\n  const [billingCity, setBillingCity] = useState('');\n  const [billingState, setBillingState] = useState('');\n  const [billingZip, setBillingZip] = useState('');\n  const [billingCountry, setBillingCountry] = useState('US');\n\n  // Order items\n  const [items, setItems] = useState<OrderItemDraft[]>([]);\n\n  // Totals\n  const [shipping, setShipping] = useState('0');\n  const [tax, setTax] = useState('0');\n  const [discount, setDiscount] = useState('0');\n\n  // Notes\n  const [notes, setNotes] = useState('');\n\n  // Initialize form with order data\n  useEffect(() => {\n    if (isOpen && order) {\n      setCustomerName(order.customer.name);\n      setCustomerEmail(order.customer.email);\n      setCustomerPhone(order.customer.phone || '');\n\n      setShippingStreet(order.customer.address.street);\n      setShippingCity(order.customer.address.city);\n      setShippingState(order.customer.address.state);\n      setShippingZip(order.customer.address.zip);\n      setShippingCountry(order.customer.address.country);\n\n      if (order.billingAddress) {\n        setSameAsShipping(false);\n        setBillingStreet(order.billingAddress.street);\n        setBillingCity(order.billingAddress.city);\n        setBillingState(order.billingAddress.state);\n        setBillingZip(order.billingAddress.zip);\n        setBillingCountry(order.billingAddress.country);\n      } else {\n        setSameAsShipping(true);\n      }\n\n      setItems(order.items.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        quantity: item.quantity,\n        price: item.price,\n        cost: item.cost,\n      })));\n\n      setShipping(order.shipping.toString());\n      setTax(order.tax.toString());\n      setDiscount(order.discount.toString());\n      setNotes(order.notes || '');\n    }\n  }, [isOpen, order]);\n\n  // Calculate totals\n  const subtotal = useMemo(() => {\n    return items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  }, [items]);\n\n  const cogs = useMemo(() => {\n    return items.reduce((sum, item) => sum + item.cost * item.quantity, 0);\n  }, [items]);\n\n  const total = useMemo(() => {\n    return subtotal + parseFloat(shipping || '0') + parseFloat(tax || '0') - parseFloat(discount || '0');\n  }, [subtotal, shipping, tax, discount]);\n\n  const profit = total - cogs;\n  const margin = total > 0 ? (profit / total) * 100 : 0;\n\n  // Update item quantity\n  const updateItemQuantity = (index: number, quantity: number) => {\n    setItems(prev => prev.map((item, i) =>\n      i === index ? { ...item, quantity: Math.max(1, quantity) } : item\n    ));\n  };\n\n  // Update item price\n  const updateItemPrice = (index: number, price: number) => {\n    setItems(prev => prev.map((item, i) =>\n      i === index ? { ...item, price: Math.max(0, price) } : item\n    ));\n  };\n\n  // Remove item\n  const removeItem = (index: number) => {\n    if (items.length <= 1) {\n      error('Order must have at least one item');\n      return;\n    }\n    setItems(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Add product to order\n  const addProduct = (productId: string) => {\n    const product = state.products.find(p => p.id === productId);\n    if (!product) return;\n\n    // Check if already in order\n    const existingIndex = items.findIndex(i => i.productId === productId);\n    if (existingIndex >= 0) {\n      updateItemQuantity(existingIndex, items[existingIndex].quantity + 1);\n      return;\n    }\n\n    setItems(prev => [...prev, {\n      productId: product.id,\n      productName: product.name,\n      sku: product.sku,\n      quantity: 1,\n      price: product.prices.shopify,\n      cost: product.cost.rolling,\n    }]);\n  };\n\n  // Handle save\n  const handleSave = () => {\n    if (!customerName.trim()) {\n      error('Customer name is required');\n      return;\n    }\n    if (!customerEmail.trim()) {\n      error('Customer email is required');\n      return;\n    }\n    if (items.length === 0) {\n      error('Order must have at least one item');\n      return;\n    }\n\n    const updatedOrder: Order = {\n      ...order,\n      customer: {\n        name: customerName,\n        email: customerEmail,\n        phone: customerPhone || undefined,\n        address: {\n          street: shippingStreet,\n          city: shippingCity,\n          state: shippingState,\n          zip: shippingZip,\n          country: shippingCountry,\n        },\n      },\n      billingAddress: sameAsShipping ? undefined : {\n        street: billingStreet,\n        city: billingCity,\n        state: billingState,\n        zip: billingZip,\n        country: billingCountry,\n      },\n      items: items.map(item => ({\n        ...item,\n        picked: order.items.find(i => i.productId === item.productId)?.picked || false,\n      })),\n      subtotal,\n      shipping: parseFloat(shipping || '0'),\n      tax: parseFloat(tax || '0'),\n      discount: parseFloat(discount || '0'),\n      total,\n      cogs,\n      profit,\n      margin,\n      notes: notes || undefined,\n      updatedAt: new Date(),\n    };\n\n    dispatch({ type: 'UPDATE_ORDER', payload: updatedOrder });\n    success('Order updated successfully');\n    onClose();\n  };\n\n  const tabs = [\n    { id: 'customer', label: 'Customer', icon: 'fa-user' },\n    { id: 'shipping', label: 'Shipping', icon: 'fa-truck' },\n    { id: 'billing', label: 'Billing', icon: 'fa-credit-card' },\n    { id: 'items', label: 'Items', icon: 'fa-box' },\n    { id: 'notes', label: 'Notes', icon: 'fa-sticky-note' },\n  ] as const;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={`Edit Order #${order.orderNumber}`}\n      size=\"xl\"\n    >\n      <div className=\"flex flex-col h-[600px]\">\n        {/* Tabs */}\n        <div className=\"flex border-b border-slate-700 mb-4\">\n          {tabs.map(tab => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`px-4 py-2 text-sm font-medium transition-colors flex items-center gap-2 ${\n                activeTab === tab.id\n                  ? 'text-emerald-400 border-b-2 border-emerald-400'\n                  : 'text-slate-400 hover:text-white'\n              }`}\n            >\n              <i className={`fas ${tab.icon}`}></i>\n              {tab.label}\n            </button>\n          ))}\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {/* Customer Tab */}\n          {activeTab === 'customer' && (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm text-slate-400 mb-1\">Customer Name *</label>\n                <input\n                  type=\"text\"\n                  value={customerName}\n                  onChange={(e) => setCustomerName(e.target.value)}\n                  className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                  placeholder=\"John Doe\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Email *</label>\n                  <input\n                    type=\"email\"\n                    value={customerEmail}\n                    onChange={(e) => setCustomerEmail(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    placeholder=\"john@example.com\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Phone</label>\n                  <input\n                    type=\"tel\"\n                    value={customerPhone}\n                    onChange={(e) => setCustomerPhone(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    placeholder=\"+1 555-0123\"\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Shipping Tab */}\n          {activeTab === 'shipping' && (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm text-slate-400 mb-1\">Street Address *</label>\n                <input\n                  type=\"text\"\n                  value={shippingStreet}\n                  onChange={(e) => setShippingStreet(e.target.value)}\n                  className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                  placeholder=\"123 Main St\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">City *</label>\n                  <input\n                    type=\"text\"\n                    value={shippingCity}\n                    onChange={(e) => setShippingCity(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    placeholder=\"Houston\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">State *</label>\n                  <select\n                    value={shippingState}\n                    onChange={(e) => setShippingState(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                  >\n                    <option value=\"\">Select state</option>\n                    {US_STATES.map(s => (\n                      <option key={s} value={s}>{s}</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">ZIP Code *</label>\n                  <input\n                    type=\"text\"\n                    value={shippingZip}\n                    onChange={(e) => setShippingZip(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    placeholder=\"77001\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Country</label>\n                  <select\n                    value={shippingCountry}\n                    onChange={(e) => setShippingCountry(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                  >\n                    {COUNTRIES.map(c => (\n                      <option key={c} value={c}>{c}</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-4 pt-4 border-t border-slate-700\">\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Shipping Cost</label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2 text-slate-400\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      value={shipping}\n                      onChange={(e) => setShipping(e.target.value)}\n                      className=\"w-full pl-7 pr-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Billing Tab */}\n          {activeTab === 'billing' && (\n            <div className=\"space-y-4\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={sameAsShipping}\n                  onChange={(e) => setSameAsShipping(e.target.checked)}\n                  className=\"rounded bg-slate-700 border-slate-600 text-emerald-500 focus:ring-emerald-500\"\n                />\n                <span className=\"text-slate-300\">Same as shipping address</span>\n              </label>\n\n              {!sameAsShipping && (\n                <>\n                  <div>\n                    <label className=\"block text-sm text-slate-400 mb-1\">Street Address</label>\n                    <input\n                      type=\"text\"\n                      value={billingStreet}\n                      onChange={(e) => setBillingStreet(e.target.value)}\n                      className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                    />\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm text-slate-400 mb-1\">City</label>\n                      <input\n                        type=\"text\"\n                        value={billingCity}\n                        onChange={(e) => setBillingCity(e.target.value)}\n                        className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm text-slate-400 mb-1\">State</label>\n                      <select\n                        value={billingState}\n                        onChange={(e) => setBillingState(e.target.value)}\n                        className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                      >\n                        <option value=\"\">Select state</option>\n                        {US_STATES.map(s => (\n                          <option key={s} value={s}>{s}</option>\n                        ))}\n                      </select>\n                    </div>\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm text-slate-400 mb-1\">ZIP Code</label>\n                      <input\n                        type=\"text\"\n                        value={billingZip}\n                        onChange={(e) => setBillingZip(e.target.value)}\n                        className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm text-slate-400 mb-1\">Country</label>\n                      <select\n                        value={billingCountry}\n                        onChange={(e) => setBillingCountry(e.target.value)}\n                        className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                      >\n                        {COUNTRIES.map(c => (\n                          <option key={c} value={c}>{c}</option>\n                        ))}\n                      </select>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          )}\n\n          {/* Items Tab */}\n          {activeTab === 'items' && (\n            <div className=\"space-y-4\">\n              {/* Add Product */}\n              <div>\n                <label className=\"block text-sm text-slate-400 mb-1\">Add Product</label>\n                <select\n                  onChange={(e) => {\n                    if (e.target.value) {\n                      addProduct(e.target.value);\n                      e.target.value = '';\n                    }\n                  }}\n                  className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500\"\n                >\n                  <option value=\"\">Select product to add...</option>\n                  {state.products.map(p => (\n                    <option key={p.id} value={p.id}>{p.name} ({p.sku})</option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Items List */}\n              <div className=\"space-y-2\">\n                {items.map((item, index) => (\n                  <div key={index} className=\"flex items-center gap-3 p-3 bg-slate-800/50 border border-slate-700 rounded-lg\">\n                    <div className=\"flex-1\">\n                      <div className=\"text-sm font-medium text-white\">{item.productName}</div>\n                      <div className=\"text-xs text-slate-400\">{item.sku}</div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <label className=\"text-xs text-slate-400\">Qty:</label>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={item.quantity}\n                        onChange={(e) => updateItemQuantity(index, parseInt(e.target.value) || 1)}\n                        className=\"w-16 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm text-center\"\n                      />\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <label className=\"text-xs text-slate-400\">Price:</label>\n                      <div className=\"relative\">\n                        <span className=\"absolute left-2 top-1 text-slate-400 text-sm\">$</span>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          min=\"0\"\n                          value={item.price}\n                          onChange={(e) => updateItemPrice(index, parseFloat(e.target.value) || 0)}\n                          className=\"w-20 pl-5 pr-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm text-right\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"text-sm font-medium text-white w-20 text-right\">\n                      {formatCurrency(item.price * item.quantity)}\n                    </div>\n                    <button\n                      onClick={() => removeItem(index)}\n                      className=\"p-1 text-slate-400 hover:text-red-400\"\n                    >\n                      <i className=\"fas fa-trash text-sm\"></i>\n                    </button>\n                  </div>\n                ))}\n              </div>\n\n              {/* Totals */}\n              <div className=\"pt-4 border-t border-slate-700 space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-slate-400\">Subtotal</span>\n                  <span className=\"text-white\">{formatCurrency(subtotal)}</span>\n                </div>\n                <div className=\"flex justify-between text-sm items-center\">\n                  <span className=\"text-slate-400\">Tax</span>\n                  <div className=\"relative w-24\">\n                    <span className=\"absolute left-2 top-1 text-slate-400 text-sm\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      value={tax}\n                      onChange={(e) => setTax(e.target.value)}\n                      className=\"w-full pl-5 pr-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm text-right\"\n                    />\n                  </div>\n                </div>\n                <div className=\"flex justify-between text-sm items-center\">\n                  <span className=\"text-slate-400\">Discount</span>\n                  <div className=\"relative w-24\">\n                    <span className=\"absolute left-2 top-1 text-slate-400 text-sm\">$</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      value={discount}\n                      onChange={(e) => setDiscount(e.target.value)}\n                      className=\"w-full pl-5 pr-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm text-right\"\n                    />\n                  </div>\n                </div>\n                <div className=\"flex justify-between text-lg font-bold pt-2 border-t border-slate-600\">\n                  <span className=\"text-white\">Total</span>\n                  <span className=\"text-white\">{formatCurrency(total)}</span>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Notes Tab */}\n          {activeTab === 'notes' && (\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1\">Order Notes</label>\n              <textarea\n                value={notes}\n                onChange={(e) => setNotes(e.target.value)}\n                rows={6}\n                className=\"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-emerald-500 resize-none\"\n                placeholder=\"Internal notes about this order...\"\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex justify-end gap-3 pt-4 border-t border-slate-700 mt-4\">\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave}>\n            <i className=\"fas fa-save mr-2\"></i>\n            Save Changes\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default EditOrderModal;\n","'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, PurchaseOrder, PurchaseOrderItem } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatCurrencyPrecise, formatNumber } from '@/lib/formatting';\nimport { Search, Plus, Trash2, Package } from 'lucide-react';\n\ninterface CreatePOModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editPO?: PurchaseOrder | null;\n  initialItems?: PurchaseOrderItem[];\n}\n\nexport function CreatePOModal({ isOpen, onClose, editPO, initialItems }: CreatePOModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [poNumber, setPoNumber] = useState('');\n  const [supplier, setSupplier] = useState('');\n  const [currency, setCurrency] = useState<'USD' | 'CAD'>('USD');\n  const [expectedDate, setExpectedDate] = useState('');\n  const [notes, setNotes] = useState('');\n  const [shippingCost, setShippingCost] = useState('0');\n  const [lineItems, setLineItems] = useState<PurchaseOrderItem[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Product search state\n  const [productSearch, setProductSearch] = useState('');\n  const [showProductDropdown, setShowProductDropdown] = useState(false);\n  const [supplierSearch, setSupplierSearch] = useState('');\n  const [showSupplierDropdown, setShowSupplierDropdown] = useState(false);\n\n  const isEditing = !!editPO;\n\n  // Generate PO number\n  const generatePONumber = () => {\n    const count = state.purchaseOrders.length + 1;\n    return `PO-${new Date().getFullYear()}-${count.toString().padStart(4, '0')}`;\n  };\n\n  // Get unique suppliers from existing POs\n  const existingSuppliers = useMemo(() => {\n    const suppliers = new Set<string>();\n    state.purchaseOrders.forEach(po => {\n      if (po.supplier) suppliers.add(po.supplier);\n    });\n    // Add from products default vendors\n    state.products.forEach(p => {\n      if (p.supplier) suppliers.add(p.supplier);\n    });\n    return Array.from(suppliers).sort();\n  }, [state.purchaseOrders, state.products]);\n\n  // Filter suppliers for autocomplete\n  const filteredSuppliers = useMemo(() => {\n    if (!supplierSearch.trim()) return existingSuppliers.slice(0, 5);\n    const search = supplierSearch.toLowerCase();\n    return existingSuppliers.filter(s => s.toLowerCase().includes(search)).slice(0, 5);\n  }, [supplierSearch, existingSuppliers]);\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editPO) {\n        setPoNumber(editPO.poNumber);\n        setSupplier(editPO.supplier);\n        setCurrency(editPO.currency);\n        setExpectedDate(editPO.expectedDate ? new Date(editPO.expectedDate).toISOString().split('T')[0] : '');\n        setNotes(editPO.notes || '');\n        setShippingCost(editPO.shipping.toString());\n        setLineItems([...editPO.items]);\n      } else {\n        setPoNumber(generatePONumber());\n        setSupplier('');\n        setCurrency('USD');\n        setExpectedDate('');\n        setNotes('');\n        setShippingCost('0');\n        setLineItems(initialItems || []);\n      }\n      setProductSearch('');\n      setSupplierSearch('');\n    }\n  }, [isOpen, editPO, initialItems]);\n\n  // Get product stock\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Filter products for search\n  const filteredProducts = useMemo(() => {\n    if (!productSearch.trim()) return [];\n    const search = productSearch.toLowerCase();\n    return state.products\n      .filter(p =>\n        (p.name.toLowerCase().includes(search) || p.sku.toLowerCase().includes(search)) &&\n        !lineItems.some(item => item.productId === p.id)\n      )\n      .slice(0, 8);\n  }, [productSearch, state.products, lineItems]);\n\n  // Calculate totals\n  const totals = useMemo(() => {\n    const subtotal = lineItems.reduce((sum, item) => sum + (item.quantity * item.unitCost), 0);\n    const shipping = parseFloat(shippingCost) || 0;\n    return {\n      subtotal,\n      shipping,\n      total: subtotal + shipping,\n      itemCount: lineItems.length,\n      unitCount: lineItems.reduce((sum, item) => sum + item.quantity, 0),\n    };\n  }, [lineItems, shippingCost]);\n\n  // Add line item\n  const addLineItem = (productId: string) => {\n    const product = state.products.find(p => p.id === productId);\n    if (!product) return;\n\n    setLineItems(prev => [\n      ...prev,\n      {\n        productId: product.id,\n        productName: product.name,\n        sku: product.sku,\n        quantity: 1,\n        receivedQty: 0,\n        unitCost: product.cost.rolling,\n      }\n    ]);\n    setProductSearch('');\n    setShowProductDropdown(false);\n  };\n\n  // Remove line item\n  const removeLineItem = (productId: string) => {\n    setLineItems(prev => prev.filter(item => item.productId !== productId));\n  };\n\n  // Update line item\n  const updateLineItem = (productId: string, field: 'quantity' | 'unitCost', value: number) => {\n    if (value < 0) return;\n    setLineItems(prev => prev.map(item =>\n      item.productId === productId ? { ...item, [field]: value } : item\n    ));\n  };\n\n  // Validation\n  const isValid = useMemo(() => {\n    if (!poNumber.trim()) return false;\n    if (!supplier.trim()) return false;\n    if (lineItems.length === 0) return false;\n    if (lineItems.some(item => item.quantity <= 0 || item.unitCost < 0)) return false;\n    return true;\n  }, [poNumber, supplier, lineItems]);\n\n  // Save as draft\n  const handleSaveDraft = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const poData: PurchaseOrder = {\n        id: editPO?.id || crypto.randomUUID(),\n        poNumber: poNumber.trim(),\n        supplier: supplier.trim(),\n        status: 'draft',\n        currency,\n        expectedDate: expectedDate ? new Date(expectedDate) : undefined,\n        items: lineItems,\n        subtotal: totals.subtotal,\n        shipping: totals.shipping,\n        total: totals.total,\n        notes: notes.trim() || undefined,\n        createdAt: editPO?.createdAt || new Date(),\n        updatedAt: new Date(),\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_PURCHASE_ORDER', payload: poData });\n        success(`PO ${poNumber} updated successfully`);\n      } else {\n        dispatch({ type: 'ADD_PURCHASE_ORDER', payload: poData });\n        success(`PO ${poNumber} saved as draft`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save purchase order');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Save and send\n  const handleSaveAndSend = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const poData: PurchaseOrder = {\n        id: editPO?.id || crypto.randomUUID(),\n        poNumber: poNumber.trim(),\n        supplier: supplier.trim(),\n        status: 'sent',\n        currency,\n        expectedDate: expectedDate ? new Date(expectedDate) : undefined,\n        items: lineItems,\n        subtotal: totals.subtotal,\n        shipping: totals.shipping,\n        total: totals.total,\n        notes: notes.trim() || undefined,\n        createdAt: editPO?.createdAt || new Date(),\n        updatedAt: new Date(),\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_PURCHASE_ORDER', payload: poData });\n      } else {\n        dispatch({ type: 'ADD_PURCHASE_ORDER', payload: poData });\n      }\n      success(`PO ${poNumber} created and marked as sent`);\n\n      onClose();\n    } catch (err) {\n      error('Failed to create purchase order');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Purchase Order' : 'Create Purchase Order'}\n      subtitle={isEditing ? `Editing ${editPO?.poNumber}` : 'Order inventory from suppliers'}\n      size=\"xl\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button variant=\"secondary\" onClick={handleSaveDraft} disabled={isSubmitting || !isValid}>\n            Save as Draft\n          </Button>\n          <Button onClick={handleSaveAndSend} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Create & Send'}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* PO Header */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">PO Details</h3>\n          <div className=\"grid grid-cols-4 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">PO Number *</label>\n              <input\n                type=\"text\"\n                value={poNumber}\n                onChange={e => setPoNumber(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white font-mono focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div className=\"relative\">\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Supplier *</label>\n              <input\n                type=\"text\"\n                value={supplier}\n                onChange={e => {\n                  setSupplier(e.target.value);\n                  setSupplierSearch(e.target.value);\n                  setShowSupplierDropdown(true);\n                }}\n                onFocus={() => setShowSupplierDropdown(true)}\n                onBlur={() => setTimeout(() => setShowSupplierDropdown(false), 200)}\n                placeholder=\"Enter supplier name\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n              {showSupplierDropdown && filteredSuppliers.length > 0 && (\n                <div className=\"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-40 overflow-auto\">\n                  {filteredSuppliers.map(s => (\n                    <button\n                      key={s}\n                      type=\"button\"\n                      onClick={() => {\n                        setSupplier(s);\n                        setShowSupplierDropdown(false);\n                      }}\n                      className=\"w-full px-4 py-2 text-left text-sm text-white hover:bg-slate-700/50\"\n                    >\n                      {s}\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Currency</label>\n              <select\n                value={currency}\n                onChange={e => setCurrency(e.target.value as 'USD' | 'CAD')}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              >\n                <option value=\"USD\">USD ($)</option>\n                <option value=\"CAD\">CAD (C$)</option>\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Expected Date</label>\n              <input\n                type=\"date\"\n                value={expectedDate}\n                onChange={e => setExpectedDate(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Line Items */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Line Items *</h3>\n\n          {/* Add Product */}\n          <div className=\"relative mb-4\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n            <input\n              type=\"text\"\n              value={productSearch}\n              onChange={e => {\n                setProductSearch(e.target.value);\n                setShowProductDropdown(true);\n              }}\n              onFocus={() => setShowProductDropdown(true)}\n              placeholder=\"Search products by name or SKU...\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n            />\n\n            {showProductDropdown && filteredProducts.length > 0 && (\n              <div className=\"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-lg max-h-48 overflow-auto\">\n                {filteredProducts.map(product => {\n                  const stock = getProductStock(product.id);\n                  return (\n                    <button\n                      key={product.id}\n                      type=\"button\"\n                      onClick={() => addLineItem(product.id)}\n                      className=\"w-full px-4 py-2.5 flex items-center justify-between hover:bg-slate-700/50 text-left\"\n                    >\n                      <div>\n                        <div className=\"text-sm text-white\">{product.name}</div>\n                        <div className=\"text-xs text-slate-400\">SKU: {product.sku}</div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-sm text-slate-300\">{formatCurrencyPrecise(product.cost.rolling)}</div>\n                        <div className={`text-xs ${stock <= product.reorderPoint ? 'text-amber-400' : 'text-slate-400'}`}>\n                          {formatNumber(stock)} in stock\n                        </div>\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n\n          {/* Line Items Table */}\n          {lineItems.length > 0 ? (\n            <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-slate-800/50\">\n                  <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                    <th className=\"px-4 py-3 text-left\">Product</th>\n                    <th className=\"px-4 py-3 text-left\">SKU</th>\n                    <th className=\"px-4 py-3 text-center\">Qty</th>\n                    <th className=\"px-4 py-3 text-right\">Unit Cost</th>\n                    <th className=\"px-4 py-3 text-right\">Line Total</th>\n                    <th className=\"px-4 py-3 text-center w-12\"></th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/50\">\n                  {lineItems.map(item => (\n                    <tr key={item.productId} className=\"hover:bg-slate-800/30\">\n                      <td className=\"px-4 py-3 text-sm text-white\">{item.productName}</td>\n                      <td className=\"px-4 py-3 text-sm text-slate-400 font-mono\">{item.sku}</td>\n                      <td className=\"px-4 py-3\">\n                        <input\n                          type=\"number\"\n                          min=\"1\"\n                          value={item.quantity}\n                          onChange={e => updateLineItem(item.productId, 'quantity', parseInt(e.target.value) || 0)}\n                          className=\"w-20 mx-auto block bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-center text-sm\"\n                        />\n                      </td>\n                      <td className=\"px-4 py-3\">\n                        <div className=\"flex items-center justify-end gap-1\">\n                          <span className=\"text-slate-400 text-sm\">$</span>\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            min=\"0\"\n                            value={item.unitCost}\n                            onChange={e => updateLineItem(item.productId, 'unitCost', parseFloat(e.target.value) || 0)}\n                            className=\"w-24 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-right text-sm\"\n                          />\n                        </div>\n                      </td>\n                      <td className=\"px-4 py-3 text-sm text-white text-right font-medium\">\n                        {formatCurrencyPrecise(item.quantity * item.unitCost)}\n                      </td>\n                      <td className=\"px-4 py-3 text-center\">\n                        <button\n                          onClick={() => removeLineItem(item.productId)}\n                          className=\"p-1.5 text-slate-400 hover:text-red-400 hover:bg-slate-700 rounded\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"p-8 border-2 border-dashed border-slate-700 rounded-lg text-center text-slate-400\">\n              <Package className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n              <p>No items added yet</p>\n              <p className=\"text-xs text-slate-500\">Search for products above to add them</p>\n            </div>\n          )}\n        </div>\n\n        {/* Totals */}\n        {lineItems.length > 0 && (\n          <div className=\"flex justify-end\">\n            <div className=\"w-72 space-y-2 bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-slate-400\">Items:</span>\n                <span className=\"text-white\">{totals.itemCount} ({formatNumber(totals.unitCount)} units)</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-slate-400\">Subtotal:</span>\n                <span className=\"text-white\">{formatCurrencyPrecise(totals.subtotal)}</span>\n              </div>\n              <div className=\"flex justify-between items-center text-sm\">\n                <span className=\"text-slate-400\">Shipping:</span>\n                <div className=\"flex items-center gap-1\">\n                  <span className=\"text-slate-400\">$</span>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    value={shippingCost}\n                    onChange={e => setShippingCost(e.target.value)}\n                    className=\"w-24 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-right text-sm\"\n                  />\n                </div>\n              </div>\n              <div className=\"pt-2 border-t border-slate-700 flex justify-between\">\n                <span className=\"text-white font-medium\">Total:</span>\n                <span className=\"text-white font-bold text-lg\">{formatCurrencyPrecise(totals.total)}</span>\n              </div>\n              {currency === 'CAD' && (\n                <div className=\"text-xs text-slate-500 text-right\">\n                  CAD values will be converted at current exchange rate\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Notes */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Notes (Optional)</label>\n          <textarea\n            value={notes}\n            onChange={e => setNotes(e.target.value)}\n            rows={2}\n            placeholder=\"Optional notes for this PO...\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default CreatePOModal;\n","'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, PurchaseOrder, PurchaseOrderItem, SerialNumber, InventoryLot } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatCurrencyPrecise, formatNumber, formatDate } from '@/lib/formatting';\nimport { Package, Check, AlertTriangle, Hash, Wand2, X, Layers, Calendar } from 'lucide-react';\n\ninterface ReceivePOModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  po: PurchaseOrder | null;\n}\n\ntype ItemCondition = 'good' | 'damaged' | 'wrong_item' | 'short';\n\ninterface LotEntry {\n  lotNumber: string;\n  quantity: number;\n  expirationDate?: string;\n  manufacturedDate?: string;\n  supplierLotNumber?: string;\n  notes?: string;\n}\n\ninterface ReceivingItem {\n  productId: string;\n  productName: string;\n  sku: string;\n  ordered: number;\n  previouslyReceived: number;\n  receivingNow: number;\n  condition: ItemCondition;\n}\n\nexport function ReceivePOModal({ isOpen, onClose, po }: ReceivePOModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error, warning } = useToast();\n\n  // Form state\n  const [receivingItems, setReceivingItems] = useState<ReceivingItem[]>([]);\n  const [receivingNotes, setReceivingNotes] = useState('');\n  const [receiveLocation, setReceiveLocation] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Serial number state for serialized products\n  const [serialsByProduct, setSerialsByProduct] = useState<Record<string, string[]>>({});\n  const [serialInputs, setSerialInputs] = useState<Record<string, string>>({});\n\n  // Lot state for lot-tracked products\n  const [lotsByProduct, setLotsByProduct] = useState<Record<string, LotEntry[]>>({});\n  const [showLotForm, setShowLotForm] = useState<Record<string, boolean>>({});\n  const [newLot, setNewLot] = useState<LotEntry>({ lotNumber: '', quantity: 0 });\n\n  // Initialize receiving items when modal opens\n  useEffect(() => {\n    if (isOpen && po) {\n      setReceivingItems(po.items.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        ordered: item.quantity,\n        previouslyReceived: item.receivedQty,\n        receivingNow: item.quantity - item.receivedQty, // Default to remaining\n        condition: 'good' as ItemCondition,\n      })));\n      setReceivingNotes('');\n      setSerialsByProduct({});\n      setSerialInputs({});\n      setLotsByProduct({});\n      setShowLotForm({});\n      setNewLot({ lotNumber: '', quantity: 0 });\n      // Set default location\n      const defaultLoc = state.locations.find(l => l.isDefault);\n      setReceiveLocation(defaultLoc?.id || state.locations[0]?.id || '');\n    }\n  }, [isOpen, po, state.locations]);\n\n  // Update receiving quantity\n  const updateReceivingQty = (productId: string, qty: number) => {\n    setReceivingItems(prev => prev.map(item => {\n      if (item.productId === productId) {\n        const maxReceivable = item.ordered - item.previouslyReceived;\n        const clampedQty = Math.max(0, Math.min(qty, maxReceivable));\n        return { ...item, receivingNow: clampedQty };\n      }\n      return item;\n    }));\n  };\n\n  // Update condition\n  const updateCondition = (productId: string, condition: ItemCondition) => {\n    setReceivingItems(prev => prev.map(item =>\n      item.productId === productId ? { ...item, condition } : item\n    ));\n  };\n\n  // Receive all remaining\n  const receiveAllRemaining = () => {\n    setReceivingItems(prev => prev.map(item => ({\n      ...item,\n      receivingNow: item.ordered - item.previouslyReceived,\n      condition: 'good',\n    })));\n  };\n\n  // Get product info for serial tracking\n  const getProduct = (productId: string) => state.products.find(p => p.id === productId);\n\n  // Check if product tracks serials\n  const isSerialTracked = (productId: string) => {\n    const product = getProduct(productId);\n    return product?.trackSerials === true;\n  };\n\n  // Add serial number for a product\n  const addSerial = (productId: string, serial: string) => {\n    if (!serial.trim()) return;\n\n    const currentSerials = serialsByProduct[productId] || [];\n    // Check for duplicates\n    if (currentSerials.includes(serial.trim())) {\n      warning('Serial number already entered');\n      return;\n    }\n\n    setSerialsByProduct(prev => ({\n      ...prev,\n      [productId]: [...(prev[productId] || []), serial.trim()]\n    }));\n    setSerialInputs(prev => ({ ...prev, [productId]: '' }));\n  };\n\n  // Remove serial number\n  const removeSerial = (productId: string, index: number) => {\n    setSerialsByProduct(prev => ({\n      ...prev,\n      [productId]: (prev[productId] || []).filter((_, i) => i !== index)\n    }));\n  };\n\n  // Auto-generate serials for a product\n  const autoGenerateSerials = (productId: string, quantity: number) => {\n    const product = getProduct(productId);\n    if (!product) return;\n\n    const generated: string[] = [];\n    let nextNum = product.serialNextNumber || 1;\n\n    for (let i = 0; i < quantity; i++) {\n      const serial = `${product.serialPrefix || ''}${String(nextNum).padStart(4, '0')}${product.serialSuffix || ''}`;\n      generated.push(serial);\n      nextNum++;\n    }\n\n    setSerialsByProduct(prev => ({\n      ...prev,\n      [productId]: generated\n    }));\n\n    // Update product's next serial number\n    dispatch({\n      type: 'UPDATE_PRODUCT',\n      payload: { ...product, serialNextNumber: nextNum, updatedAt: new Date() }\n    });\n  };\n\n  // Check if product tracks lots\n  const isLotTracked = (productId: string) => {\n    const product = getProduct(productId);\n    return product?.trackLots === true;\n  };\n\n  // Check if product tracks expiration\n  const tracksExpiration = (productId: string) => {\n    const product = getProduct(productId);\n    return product?.expirationTracking === true;\n  };\n\n  // Generate lot number for a product\n  const generateLotNumber = (productId: string) => {\n    const product = getProduct(productId);\n    if (!product) return '';\n\n    const prefix = product.lotPrefix || 'LOT-';\n    const dateStr = new Date().toISOString().slice(0, 10).replace(/-/g, '');\n    const nextNum = product.lotNextNumber || 1;\n\n    return `${prefix}${dateStr}-${String(nextNum).padStart(3, '0')}`;\n  };\n\n  // Add lot for a product\n  const addLot = (productId: string, lot: LotEntry) => {\n    if (!lot.lotNumber.trim() || lot.quantity <= 0) return;\n\n    const existingLots = lotsByProduct[productId] || [];\n    // Check for duplicate lot numbers\n    if (existingLots.some(l => l.lotNumber === lot.lotNumber)) {\n      warning('Lot number already exists');\n      return;\n    }\n\n    setLotsByProduct(prev => ({\n      ...prev,\n      [productId]: [...(prev[productId] || []), { ...lot }]\n    }));\n\n    // Update product's next lot number\n    const product = getProduct(productId);\n    if (product) {\n      dispatch({\n        type: 'UPDATE_PRODUCT',\n        payload: { ...product, lotNextNumber: (product.lotNextNumber || 1) + 1, updatedAt: new Date() }\n      });\n    }\n\n    // Reset form\n    setNewLot({ lotNumber: '', quantity: 0 });\n    setShowLotForm(prev => ({ ...prev, [productId]: false }));\n  };\n\n  // Remove lot\n  const removeLot = (productId: string, index: number) => {\n    setLotsByProduct(prev => ({\n      ...prev,\n      [productId]: (prev[productId] || []).filter((_, i) => i !== index)\n    }));\n  };\n\n  // Get total qty in lots for a product\n  const getLotTotalQty = (productId: string) => {\n    const lots = lotsByProduct[productId] || [];\n    return lots.reduce((sum, l) => sum + l.quantity, 0);\n  };\n\n  // Calculate totals\n  const totals = useMemo(() => {\n    const totalOrdered = receivingItems.reduce((sum, i) => sum + i.ordered, 0);\n    const totalPreviouslyReceived = receivingItems.reduce((sum, i) => sum + i.previouslyReceived, 0);\n    const totalReceivingNow = receivingItems.reduce((sum, i) => sum + i.receivingNow, 0);\n    const totalAfter = totalPreviouslyReceived + totalReceivingNow;\n\n    return {\n      totalOrdered,\n      totalPreviouslyReceived,\n      totalReceivingNow,\n      totalAfter,\n      percentComplete: totalOrdered > 0 ? (totalAfter / totalOrdered) * 100 : 0,\n      willBeFullyReceived: totalAfter >= totalOrdered,\n    };\n  }, [receivingItems]);\n\n  // Check if any items have issues\n  const hasIssues = useMemo(() => {\n    return receivingItems.some(item => item.condition !== 'good' && item.receivingNow > 0);\n  }, [receivingItems]);\n\n  // Submit receive\n  const handleReceive = () => {\n    if (!po || totals.totalReceivingNow <= 0) return;\n\n    setIsSubmitting(true);\n\n    try {\n      // Update PO items with new received quantities\n      const updatedItems: PurchaseOrderItem[] = po.items.map(item => {\n        const receiving = receivingItems.find(r => r.productId === item.productId);\n        return {\n          ...item,\n          receivedQty: item.receivedQty + (receiving?.receivingNow || 0),\n        };\n      });\n\n      // Check if fully received\n      const fullyReceived = updatedItems.every(item => item.receivedQty >= item.quantity);\n\n      // Determine new status\n      let newStatus: PurchaseOrder['status'] = po.status;\n      if (fullyReceived) {\n        newStatus = 'received';\n      } else if (updatedItems.some(item => item.receivedQty > 0)) {\n        newStatus = 'partial';\n      }\n\n      // Update PO\n      const updatedPO: PurchaseOrder = {\n        ...po,\n        items: updatedItems,\n        status: newStatus,\n        updatedAt: new Date(),\n      };\n\n      dispatch({ type: 'UPDATE_PURCHASE_ORDER', payload: updatedPO });\n\n      // Update inventory for each received item\n      const locationName = state.locations.find(l => l.id === receiveLocation)?.name || '';\n\n      receivingItems.forEach(item => {\n        if (item.receivingNow > 0 && item.condition === 'good') {\n          dispatch({\n            type: 'ADJUST_STOCK',\n            payload: {\n              productId: item.productId,\n              locationId: receiveLocation,\n              adjustment: item.receivingNow,\n            }\n          });\n\n          // Create serial number records for serialized products\n          if (isSerialTracked(item.productId)) {\n            const productSerials = serialsByProduct[item.productId] || [];\n            const serialRecords: SerialNumber[] = productSerials.map(serial => ({\n              id: crypto.randomUUID(),\n              serial,\n              productId: item.productId,\n              productName: item.productName,\n              sku: item.sku,\n              status: 'in_stock' as const,\n              locationId: receiveLocation,\n              locationName,\n              purchaseOrderId: po.id,\n              receivedAt: new Date()\n            }));\n\n            if (serialRecords.length > 0) {\n              dispatch({ type: 'ADD_SERIAL_NUMBERS', payload: serialRecords });\n            }\n          }\n\n          // Create lot records for lot-tracked products\n          if (isLotTracked(item.productId)) {\n            const productLots = lotsByProduct[item.productId] || [];\n            const lotRecords: InventoryLot[] = productLots.map(lot => ({\n              id: crypto.randomUUID(),\n              lotNumber: lot.lotNumber,\n              productId: item.productId,\n              productName: item.productName,\n              sku: item.sku,\n              quantity: lot.quantity,\n              reservedQty: 0,\n              expirationDate: lot.expirationDate ? new Date(lot.expirationDate) : undefined,\n              manufacturedDate: lot.manufacturedDate ? new Date(lot.manufacturedDate) : undefined,\n              receivedDate: new Date(),\n              status: 'active' as const,\n              locationId: receiveLocation,\n              locationName,\n              purchaseOrderId: po.id,\n              supplierLotNumber: lot.supplierLotNumber,\n              notes: lot.notes\n            }));\n\n            if (lotRecords.length > 0) {\n              dispatch({ type: 'ADD_LOTS', payload: lotRecords });\n            }\n          }\n        }\n      });\n\n      // Show appropriate message\n      if (hasIssues) {\n        warning(`Received ${formatNumber(totals.totalReceivingNow)} units with some issues noted`);\n      } else if (fullyReceived) {\n        success(`PO ${po.poNumber} fully received! ${formatNumber(totals.totalReceivingNow)} units added to inventory`);\n      } else {\n        success(`Received ${formatNumber(totals.totalReceivingNow)} units on PO ${po.poNumber}`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to receive items');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!po) return null;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title=\"Receive Items\"\n      subtitle={`${po.poNumber} from ${po.supplier}`}\n      size=\"xl\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleReceive}\n            disabled={isSubmitting || totals.totalReceivingNow <= 0}\n          >\n            {isSubmitting ? (\n              'Processing...'\n            ) : (\n              <>\n                <Check className=\"w-4 h-4\" />\n                Receive {formatNumber(totals.totalReceivingNow)} Units\n              </>\n            )}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* PO Summary */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <div className=\"grid grid-cols-4 gap-4 text-sm\">\n            <div>\n              <span className=\"text-slate-400\">PO Number:</span>\n              <span className=\"ml-2 text-white font-mono\">{po.poNumber}</span>\n            </div>\n            <div>\n              <span className=\"text-slate-400\">Supplier:</span>\n              <span className=\"ml-2 text-white\">{po.supplier}</span>\n            </div>\n            <div>\n              <span className=\"text-slate-400\">Expected:</span>\n              <span className=\"ml-2 text-white\">\n                {po.expectedDate ? formatDate(po.expectedDate) : 'Not set'}\n              </span>\n            </div>\n            <div>\n              <span className=\"text-slate-400\">Total Value:</span>\n              <span className=\"ml-2 text-white font-medium\">{formatCurrencyPrecise(po.total)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Progress */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm text-slate-400\">Receiving Progress</span>\n            <span className=\"text-sm text-white\">\n              {formatNumber(totals.totalAfter)} / {formatNumber(totals.totalOrdered)} units\n              ({totals.percentComplete.toFixed(0)}%)\n            </span>\n          </div>\n          <div className=\"w-full bg-slate-700 rounded-full h-2\">\n            <div\n              className={`h-2 rounded-full transition-all ${\n                totals.willBeFullyReceived ? 'bg-emerald-500' : 'bg-blue-500'\n              }`}\n              style={{ width: `${Math.min(totals.percentComplete, 100)}%` }}\n            />\n          </div>\n          {totals.willBeFullyReceived && (\n            <p className=\"text-xs text-emerald-400 mt-2\">\n              <Check className=\"w-3 h-3 inline mr-1\" />\n              This will complete the PO\n            </p>\n          )}\n        </div>\n\n        {/* Receive Location */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Receive to Location</label>\n          <select\n            value={receiveLocation}\n            onChange={e => setReceiveLocation(e.target.value)}\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n          >\n            {state.locations.map(loc => (\n              <option key={loc.id} value={loc.id}>{loc.name}</option>\n            ))}\n          </select>\n        </div>\n\n        {/* Line Items */}\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-sm font-medium text-white\">Items to Receive</h3>\n            <button\n              onClick={receiveAllRemaining}\n              className=\"text-sm text-emerald-400 hover:text-emerald-300\"\n            >\n              Receive All Remaining\n            </button>\n          </div>\n\n          <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n            <table className=\"w-full\">\n              <thead className=\"bg-slate-800/50\">\n                <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                  <th className=\"px-4 py-3 text-left\">Product</th>\n                  <th className=\"px-4 py-3 text-center\">Ordered</th>\n                  <th className=\"px-4 py-3 text-center\">Previously Received</th>\n                  <th className=\"px-4 py-3 text-center\">Receiving Now</th>\n                  <th className=\"px-4 py-3 text-center\">Condition</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-slate-700/50\">\n                {receivingItems.map(item => {\n                  const remaining = item.ordered - item.previouslyReceived;\n                  const isComplete = remaining <= 0;\n                  const isSerial = isSerialTracked(item.productId);\n                  const isLot = isLotTracked(item.productId);\n                  const productSerials = serialsByProduct[item.productId] || [];\n                  const serialInput = serialInputs[item.productId] || '';\n\n                  return (\n                    <tr\n                      key={item.productId}\n                      className={`${isComplete ? 'bg-emerald-500/5' : 'hover:bg-slate-800/30'}`}\n                    >\n                      <td className=\"px-4 py-3\" colSpan={isSerial && !isComplete && item.receivingNow > 0 ? 1 : undefined}>\n                        <div className=\"text-sm text-white\">{item.productName}</div>\n                        <div className=\"text-xs text-slate-400 font-mono\">\n                          {item.sku}\n                          {isSerial && (\n                            <span className=\"ml-2 text-purple-400\">\n                              <Hash className=\"w-3 h-3 inline\" /> Serial Tracked\n                            </span>\n                          )}\n                          {isLot && (\n                            <span className=\"ml-2 text-purple-400\">\n                              <Layers className=\"w-3 h-3 inline\" /> Lot Tracked\n                            </span>\n                          )}\n                        </div>\n\n                        {/* Serial Entry Section */}\n                        {isSerial && !isComplete && item.receivingNow > 0 && (\n                          <div className=\"mt-3 p-3 bg-slate-800/50 rounded-lg border border-slate-700/50\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                              <span className=\"text-xs text-slate-400\">\n                                Serial Numbers ({productSerials.length} / {item.receivingNow})\n                              </span>\n                              <button\n                                type=\"button\"\n                                onClick={() => autoGenerateSerials(item.productId, item.receivingNow)}\n                                className=\"text-xs text-emerald-400 hover:text-emerald-300 flex items-center gap-1\"\n                              >\n                                <Wand2 className=\"w-3 h-3\" />\n                                Auto-Generate\n                              </button>\n                            </div>\n\n                            {/* Serial Input */}\n                            <div className=\"flex gap-2 mb-2\">\n                              <input\n                                type=\"text\"\n                                value={serialInput}\n                                onChange={(e) => setSerialInputs(prev => ({ ...prev, [item.productId]: e.target.value }))}\n                                onKeyDown={(e) => {\n                                  if (e.key === 'Enter') {\n                                    e.preventDefault();\n                                    addSerial(item.productId, serialInput);\n                                  }\n                                }}\n                                placeholder=\"Enter or scan serial...\"\n                                className=\"flex-1 bg-slate-700 border border-slate-600 rounded px-3 py-1.5 text-sm text-white placeholder-slate-500 font-mono\"\n                              />\n                              <button\n                                type=\"button\"\n                                onClick={() => addSerial(item.productId, serialInput)}\n                                className=\"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-sm rounded transition-colors\"\n                              >\n                                Add\n                              </button>\n                            </div>\n\n                            {/* Serial List */}\n                            {productSerials.length > 0 && (\n                              <div className=\"max-h-24 overflow-y-auto space-y-1\">\n                                {productSerials.map((serial, idx) => (\n                                  <div key={idx} className=\"flex items-center justify-between px-2 py-1 bg-slate-700/50 rounded text-xs\">\n                                    <span className=\"font-mono text-white\">{serial}</span>\n                                    <button\n                                      type=\"button\"\n                                      onClick={() => removeSerial(item.productId, idx)}\n                                      className=\"text-red-400 hover:text-red-300\"\n                                    >\n                                      <X className=\"w-3 h-3\" />\n                                    </button>\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n\n                            {/* Warning if count mismatch */}\n                            {productSerials.length !== item.receivingNow && (\n                              <div className=\"mt-2 text-xs text-amber-400 flex items-center gap-1\">\n                                <AlertTriangle className=\"w-3 h-3\" />\n                                {productSerials.length < item.receivingNow\n                                  ? `Need ${item.receivingNow - productSerials.length} more serial(s)`\n                                  : `${productSerials.length - item.receivingNow} extra serial(s)`}\n                              </div>\n                            )}\n                          </div>\n                        )}\n\n                        {/* Lot Entry Section */}\n                        {isLot && !isComplete && item.receivingNow > 0 && (\n                          <div className=\"mt-3 p-3 bg-purple-900/20 rounded-lg border border-purple-500/30\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                              <span className=\"text-xs text-slate-400 flex items-center gap-1\">\n                                <Layers className=\"w-3 h-3 text-purple-400\" />\n                                Lot Numbers ({getLotTotalQty(item.productId)} / {item.receivingNow} units)\n                              </span>\n                              <button\n                                type=\"button\"\n                                onClick={() => {\n                                  setNewLot({\n                                    lotNumber: generateLotNumber(item.productId),\n                                    quantity: item.receivingNow - getLotTotalQty(item.productId)\n                                  });\n                                  setShowLotForm(prev => ({ ...prev, [item.productId]: true }));\n                                }}\n                                className=\"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1\"\n                              >\n                                <Wand2 className=\"w-3 h-3\" />\n                                Add Lot\n                              </button>\n                            </div>\n\n                            {/* Lot List */}\n                            {(lotsByProduct[item.productId] || []).map((lot, idx) => (\n                              <div key={idx} className=\"flex items-center justify-between px-3 py-2 bg-slate-700/50 rounded mb-1 text-xs\">\n                                <div>\n                                  <span className=\"font-mono text-white\">{lot.lotNumber}</span>\n                                  <span className=\"text-slate-400 ml-2\">x{lot.quantity}</span>\n                                  {lot.expirationDate && (\n                                    <span className=\"text-amber-400 ml-2 flex items-center gap-1 inline-flex\">\n                                      <Calendar className=\"w-3 h-3\" />\n                                      Exp: {lot.expirationDate}\n                                    </span>\n                                  )}\n                                </div>\n                                <button\n                                  type=\"button\"\n                                  onClick={() => removeLot(item.productId, idx)}\n                                  className=\"text-red-400 hover:text-red-300\"\n                                >\n                                  <X className=\"w-3 h-3\" />\n                                </button>\n                              </div>\n                            ))}\n\n                            {/* Add Lot Form */}\n                            {showLotForm[item.productId] && (\n                              <div className=\"mt-2 p-3 bg-slate-800/50 rounded-lg space-y-2\">\n                                <div className=\"grid grid-cols-2 gap-2\">\n                                  <div>\n                                    <label className=\"text-xs text-slate-400 block mb-1\">Lot Number</label>\n                                    <input\n                                      type=\"text\"\n                                      value={newLot.lotNumber}\n                                      onChange={(e) => setNewLot(prev => ({ ...prev, lotNumber: e.target.value }))}\n                                      className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white font-mono\"\n                                    />\n                                  </div>\n                                  <div>\n                                    <label className=\"text-xs text-slate-400 block mb-1\">Quantity</label>\n                                    <input\n                                      type=\"number\"\n                                      min=\"1\"\n                                      value={newLot.quantity}\n                                      onChange={(e) => setNewLot(prev => ({ ...prev, quantity: parseInt(e.target.value) || 0 }))}\n                                      className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white\"\n                                    />\n                                  </div>\n                                </div>\n\n                                {tracksExpiration(item.productId) && (\n                                  <div className=\"grid grid-cols-2 gap-2\">\n                                    <div>\n                                      <label className=\"text-xs text-slate-400 block mb-1\">Expiration Date</label>\n                                      <input\n                                        type=\"date\"\n                                        value={newLot.expirationDate || ''}\n                                        onChange={(e) => setNewLot(prev => ({ ...prev, expirationDate: e.target.value }))}\n                                        className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white\"\n                                      />\n                                    </div>\n                                    <div>\n                                      <label className=\"text-xs text-slate-400 block mb-1\">Manufactured Date</label>\n                                      <input\n                                        type=\"date\"\n                                        value={newLot.manufacturedDate || ''}\n                                        onChange={(e) => setNewLot(prev => ({ ...prev, manufacturedDate: e.target.value }))}\n                                        className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white\"\n                                      />\n                                    </div>\n                                  </div>\n                                )}\n\n                                <div>\n                                  <label className=\"text-xs text-slate-400 block mb-1\">Supplier Lot # (Optional)</label>\n                                  <input\n                                    type=\"text\"\n                                    value={newLot.supplierLotNumber || ''}\n                                    onChange={(e) => setNewLot(prev => ({ ...prev, supplierLotNumber: e.target.value }))}\n                                    placeholder=\"Manufacturer's lot number\"\n                                    className=\"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white placeholder-slate-500\"\n                                  />\n                                </div>\n\n                                <div className=\"flex justify-end gap-2 mt-2\">\n                                  <button\n                                    type=\"button\"\n                                    onClick={() => setShowLotForm(prev => ({ ...prev, [item.productId]: false }))}\n                                    className=\"px-3 py-1.5 text-sm text-slate-400 hover:text-white\"\n                                  >\n                                    Cancel\n                                  </button>\n                                  <button\n                                    type=\"button\"\n                                    onClick={() => addLot(item.productId, newLot)}\n                                    className=\"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded transition-colors\"\n                                  >\n                                    Add Lot\n                                  </button>\n                                </div>\n                              </div>\n                            )}\n\n                            {/* Warning if qty mismatch */}\n                            {getLotTotalQty(item.productId) !== item.receivingNow && !showLotForm[item.productId] && (\n                              <div className=\"mt-2 text-xs text-amber-400 flex items-center gap-1\">\n                                <AlertTriangle className=\"w-3 h-3\" />\n                                {getLotTotalQty(item.productId) < item.receivingNow\n                                  ? `Need ${item.receivingNow - getLotTotalQty(item.productId)} more units assigned to lots`\n                                  : `${getLotTotalQty(item.productId) - item.receivingNow} extra units assigned`}\n                              </div>\n                            )}\n                          </div>\n                        )}\n                      </td>\n                      <td className=\"px-4 py-3 text-center text-sm text-white align-top\">\n                        {formatNumber(item.ordered)}\n                      </td>\n                      <td className=\"px-4 py-3 text-center text-sm align-top\">\n                        <span className={item.previouslyReceived > 0 ? 'text-emerald-400' : 'text-slate-400'}>\n                          {formatNumber(item.previouslyReceived)}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-3 align-top\">\n                        {isComplete ? (\n                          <div className=\"text-center text-sm text-emerald-400\">\n                            <Check className=\"w-4 h-4 inline mr-1\" />\n                            Complete\n                          </div>\n                        ) : (\n                          <input\n                            type=\"number\"\n                            min=\"0\"\n                            max={remaining}\n                            value={item.receivingNow}\n                            onChange={e => updateReceivingQty(item.productId, parseInt(e.target.value) || 0)}\n                            className=\"w-20 mx-auto block bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-white text-center text-sm\"\n                          />\n                        )}\n                      </td>\n                      <td className=\"px-4 py-3 align-top\">\n                        {!isComplete && item.receivingNow > 0 && (\n                          <select\n                            value={item.condition}\n                            onChange={e => updateCondition(item.productId, e.target.value as ItemCondition)}\n                            className={`w-full bg-slate-700 border rounded px-2 py-1.5 text-sm ${\n                              item.condition === 'good'\n                                ? 'border-slate-600 text-white'\n                                : 'border-amber-500/50 text-amber-400'\n                            }`}\n                          >\n                            <option value=\"good\">Good</option>\n                            <option value=\"damaged\">Damaged</option>\n                            <option value=\"wrong_item\">Wrong Item</option>\n                            <option value=\"short\">Short</option>\n                          </select>\n                        )}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        {/* Issues Warning */}\n        {hasIssues && (\n          <div className=\"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-start gap-3\">\n            <AlertTriangle className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" />\n            <div>\n              <div className=\"text-sm font-medium text-amber-400\">Issues Noted</div>\n              <div className=\"text-sm text-slate-300 mt-1\">\n                Some items are marked with condition issues. Items marked as damaged, wrong item, or short\n                will still be received but the issues will be logged.\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Receiving Notes */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Receiving Notes (Optional)</label>\n          <textarea\n            value={receivingNotes}\n            onChange={e => setReceivingNotes(e.target.value)}\n            rows={2}\n            placeholder=\"Note any issues, discrepancies, or special handling...\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default ReceivePOModal;\n","'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, WorkOrder, WorkOrderComponent, Product, Bundle } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency, formatNumber } from '@/lib/formatting';\nimport { Package, AlertTriangle, Check, ChevronDown } from 'lucide-react';\n\ninterface CreateWorkOrderModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editWO?: WorkOrder | null;\n}\n\nexport function CreateWorkOrderModal({ isOpen, onClose, editWO }: CreateWorkOrderModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [woNumber, setWoNumber] = useState('');\n  const [outputProductId, setOutputProductId] = useState('');\n  const [outputType, setOutputType] = useState<'product' | 'bundle'>('bundle');\n  const [quantityToProduce, setQuantityToProduce] = useState('1');\n  const [priority, setPriority] = useState<'normal' | 'high' | 'urgent'>('normal');\n  const [dueDate, setDueDate] = useState('');\n  const [notes, setNotes] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const isEditing = !!editWO;\n\n  // Generate WO number\n  const generateWONumber = () => {\n    const count = state.workOrders.length + 1;\n    return `WO-${count.toString().padStart(4, '0')}`;\n  };\n\n  // Get product stock\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Get output product/bundle details\n  const outputItem = useMemo(() => {\n    if (outputType === 'bundle') {\n      return state.bundles.find(b => b.id === outputProductId);\n    }\n    return state.products.find(p => p.id === outputProductId);\n  }, [outputProductId, outputType, state.bundles, state.products]);\n\n  // Calculate components needed based on output selection\n  const components = useMemo(() => {\n    const qty = parseInt(quantityToProduce) || 0;\n    if (!outputProductId || qty <= 0) return [];\n\n    if (outputType === 'bundle') {\n      const bundle = state.bundles.find(b => b.id === outputProductId);\n      if (!bundle) return [];\n\n      return bundle.components.map(c => {\n        const product = state.products.find(p => p.id === c.productId);\n        const available = getProductStock(c.productId);\n        const required = c.quantity * qty;\n\n        return {\n          productId: c.productId,\n          productName: c.productName || product?.name || 'Unknown',\n          sku: product?.sku || '',\n          quantityRequired: required,\n          quantityAvailable: available,\n          isShort: available < required,\n          shortBy: Math.max(0, required - available),\n        };\n      });\n    }\n\n    // For regular products, check if they have components (BOM)\n    const product = state.products.find(p => p.id === outputProductId);\n    if (!product?.components || product.components.length === 0) {\n      return [];\n    }\n\n    // Use product's manufacturing components\n    return product.components.map(c => {\n      const componentProduct = state.products.find(p => p.id === c.productId);\n      const available = getProductStock(c.productId);\n      const required = c.quantity * qty;\n\n      return {\n        productId: c.productId,\n        productName: c.productName || componentProduct?.name || 'Unknown',\n        sku: componentProduct?.sku || '',\n        quantityRequired: required,\n        quantityAvailable: available,\n        isShort: available < required,\n        shortBy: Math.max(0, required - available),\n      };\n    });\n  }, [outputProductId, outputType, quantityToProduce, state.bundles, state.products, state.inventory]);\n\n  // Check if we can produce\n  const productionStatus = useMemo(() => {\n    if (components.length === 0) {\n      return { canProduce: true, maxProducible: parseInt(quantityToProduce) || 0, shortComponents: [] };\n    }\n\n    const shortComponents = components.filter(c => c.isShort);\n    const canProduce = shortComponents.length === 0;\n\n    // Calculate max producible\n    let maxProducible = Infinity;\n    components.forEach(c => {\n      const perUnit = c.quantityRequired / (parseInt(quantityToProduce) || 1);\n      const possible = Math.floor(c.quantityAvailable / perUnit);\n      maxProducible = Math.min(maxProducible, possible);\n    });\n\n    if (maxProducible === Infinity) maxProducible = parseInt(quantityToProduce) || 0;\n\n    return { canProduce, maxProducible, shortComponents };\n  }, [components, quantityToProduce]);\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editWO) {\n        setWoNumber(editWO.woNumber);\n        setOutputProductId(editWO.outputProductId);\n        setQuantityToProduce(editWO.quantityToProduce.toString());\n        setPriority(editWO.priority);\n        setDueDate(editWO.dueDate ? new Date(editWO.dueDate).toISOString().split('T')[0] : '');\n        setNotes(editWO.notes || '');\n        // Determine if it's a bundle or product\n        const isBundle = state.bundles.some(b => b.id === editWO.outputProductId);\n        setOutputType(isBundle ? 'bundle' : 'product');\n      } else {\n        setWoNumber(generateWONumber());\n        setOutputProductId('');\n        setOutputType('bundle');\n        setQuantityToProduce('1');\n        setPriority('normal');\n        setDueDate('');\n        setNotes('');\n      }\n    }\n  }, [isOpen, editWO, state.bundles]);\n\n  // Validation\n  const isValid = useMemo(() => {\n    if (!woNumber.trim()) return false;\n    if (!outputProductId) return false;\n    if (!quantityToProduce || parseInt(quantityToProduce) <= 0) return false;\n    return true;\n  }, [woNumber, outputProductId, quantityToProduce]);\n\n  // Handle create\n  const handleCreate = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const qty = parseInt(quantityToProduce) || 0;\n      const outputName = outputType === 'bundle'\n        ? state.bundles.find(b => b.id === outputProductId)?.name\n        : state.products.find(p => p.id === outputProductId)?.name;\n\n      const woComponents: WorkOrderComponent[] = components.map(c => ({\n        productId: c.productId,\n        productName: c.productName,\n        quantityRequired: c.quantityRequired,\n        quantityUsed: 0,\n      }));\n\n      const newWO: WorkOrder = {\n        id: editWO?.id || crypto.randomUUID(),\n        woNumber: woNumber.trim(),\n        status: editWO?.status || 'pending',\n        outputProductId,\n        outputProductName: outputName || '',\n        quantityToProduce: qty,\n        quantityProduced: editWO?.quantityProduced || 0,\n        priority,\n        dueDate: dueDate ? new Date(dueDate) : undefined,\n        components: woComponents,\n        notes: notes.trim() || undefined,\n        startedAt: editWO?.startedAt,\n        completedAt: editWO?.completedAt,\n        createdAt: editWO?.createdAt || new Date(),\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_WORK_ORDER', payload: newWO });\n        success(`Work Order ${woNumber} updated`);\n      } else {\n        dispatch({ type: 'ADD_WORK_ORDER', payload: newWO });\n        success(`Work Order ${woNumber} created`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save work order');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Work Order' : 'Create Work Order'}\n      subtitle={isEditing ? `Editing ${editWO?.woNumber}` : 'Schedule a production or assembly task'}\n      size=\"lg\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleCreate} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Create Work Order'}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* WO Header */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Work Order Details</h3>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">WO Number</label>\n              <input\n                type=\"text\"\n                value={woNumber}\n                onChange={e => setWoNumber(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white font-mono focus:outline-none focus:border-emerald-500/50\"\n                readOnly={isEditing}\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Priority</label>\n              <select\n                value={priority}\n                onChange={e => setPriority(e.target.value as 'normal' | 'high' | 'urgent')}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              >\n                <option value=\"normal\">Normal</option>\n                <option value=\"high\">High</option>\n                <option value=\"urgent\">Urgent</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Output Selection */}\n        <div>\n          <h3 className=\"text-sm font-medium text-white mb-3\">Output Product</h3>\n\n          {/* Type Selector */}\n          <div className=\"flex gap-2 mb-4\">\n            <button\n              type=\"button\"\n              onClick={() => {\n                setOutputType('bundle');\n                setOutputProductId('');\n              }}\n              className={`flex-1 py-2 px-4 rounded-lg border transition-colors ${\n                outputType === 'bundle'\n                  ? 'bg-emerald-500/20 border-emerald-500/30 text-emerald-400'\n                  : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n              }`}\n            >\n              Bundle Assembly\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setOutputType('product');\n                setOutputProductId('');\n              }}\n              className={`flex-1 py-2 px-4 rounded-lg border transition-colors ${\n                outputType === 'product'\n                  ? 'bg-emerald-500/20 border-emerald-500/30 text-emerald-400'\n                  : 'bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600'\n              }`}\n            >\n              Product Manufacturing\n            </button>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">\n                {outputType === 'bundle' ? 'Select Bundle' : 'Select Product'} *\n              </label>\n              <select\n                value={outputProductId}\n                onChange={e => setOutputProductId(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              >\n                <option value=\"\">Select {outputType}...</option>\n                {outputType === 'bundle' ? (\n                  state.bundles.map(bundle => (\n                    <option key={bundle.id} value={bundle.id}>\n                      {bundle.name} ({bundle.sku})\n                    </option>\n                  ))\n                ) : (\n                  state.products.map(product => (\n                    <option key={product.id} value={product.id}>\n                      {product.name} ({product.sku})\n                    </option>\n                  ))\n                )}\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Quantity to Produce *</label>\n              <input\n                type=\"number\"\n                min=\"1\"\n                value={quantityToProduce}\n                onChange={e => setQuantityToProduce(e.target.value)}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Bill of Materials */}\n        {outputProductId && outputType === 'bundle' && components.length > 0 && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Bill of Materials</h3>\n\n            {/* Stock Check Status */}\n            <div className={`mb-4 p-3 rounded-lg border ${\n              productionStatus.canProduce\n                ? 'bg-emerald-500/10 border-emerald-500/30'\n                : 'bg-amber-500/10 border-amber-500/30'\n            }`}>\n              {productionStatus.canProduce ? (\n                <div className=\"flex items-center gap-2 text-emerald-400\">\n                  <Check className=\"w-5 h-5\" />\n                  <span className=\"text-sm\">\n                    Sufficient stock for {formatNumber(parseInt(quantityToProduce) || 0)} units\n                  </span>\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-2 text-amber-400\">\n                  <AlertTriangle className=\"w-5 h-5\" />\n                  <span className=\"text-sm\">\n                    Can only produce {formatNumber(productionStatus.maxProducible)} units with current stock\n                  </span>\n                </div>\n              )}\n            </div>\n\n            {/* Components Table */}\n            <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-slate-800/50\">\n                  <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                    <th className=\"px-4 py-3 text-left\">Component</th>\n                    <th className=\"px-4 py-3 text-left\">SKU</th>\n                    <th className=\"px-4 py-3 text-center\">Needed</th>\n                    <th className=\"px-4 py-3 text-center\">Available</th>\n                    <th className=\"px-4 py-3 text-center\">Status</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/50\">\n                  {components.map(comp => (\n                    <tr\n                      key={comp.productId}\n                      className={comp.isShort ? 'bg-amber-500/5' : ''}\n                    >\n                      <td className=\"px-4 py-3 text-sm text-white\">{comp.productName}</td>\n                      <td className=\"px-4 py-3 text-sm text-slate-400 font-mono\">{comp.sku}</td>\n                      <td className=\"px-4 py-3 text-sm text-white text-center\">\n                        {formatNumber(comp.quantityRequired)}\n                      </td>\n                      <td className=\"px-4 py-3 text-sm text-center\">\n                        <span className={comp.isShort ? 'text-amber-400' : 'text-emerald-400'}>\n                          {formatNumber(comp.quantityAvailable)}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-3 text-center\">\n                        {comp.isShort ? (\n                          <span className=\"text-xs text-amber-400\">\n                            Short {formatNumber(comp.shortBy)}\n                          </span>\n                        ) : (\n                          <span className=\"text-xs text-emerald-400\">\n                            <Check className=\"w-4 h-4 inline\" /> OK\n                          </span>\n                        )}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Product manufacturing note - only show if product has no components */}\n        {outputProductId && outputType === 'product' && components.length === 0 && (\n          <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n            <p className=\"text-sm text-slate-400\">\n              This product does not have predefined components (BOM).\n              To add components, edit the product and add manufacturing components.\n            </p>\n          </div>\n        )}\n\n        {/* Show BOM for products with components */}\n        {outputProductId && outputType === 'product' && components.length > 0 && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Bill of Materials</h3>\n\n            {/* Stock Check Status */}\n            <div className={`mb-4 p-3 rounded-lg border ${\n              productionStatus.canProduce\n                ? 'bg-emerald-500/10 border-emerald-500/30'\n                : 'bg-amber-500/10 border-amber-500/30'\n            }`}>\n              {productionStatus.canProduce ? (\n                <div className=\"flex items-center gap-2 text-emerald-400\">\n                  <Check className=\"w-5 h-5\" />\n                  <span className=\"text-sm\">\n                    Sufficient stock for {formatNumber(parseInt(quantityToProduce) || 0)} units\n                  </span>\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-2 text-amber-400\">\n                  <AlertTriangle className=\"w-5 h-5\" />\n                  <span className=\"text-sm\">\n                    Can only produce {formatNumber(productionStatus.maxProducible)} units with current stock\n                  </span>\n                </div>\n              )}\n            </div>\n\n            {/* Components Table */}\n            <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-slate-800/50\">\n                  <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                    <th className=\"px-4 py-3 text-left\">Component</th>\n                    <th className=\"px-4 py-3 text-left\">SKU</th>\n                    <th className=\"px-4 py-3 text-center\">Needed</th>\n                    <th className=\"px-4 py-3 text-center\">Available</th>\n                    <th className=\"px-4 py-3 text-center\">Status</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/50\">\n                  {components.map(comp => (\n                    <tr\n                      key={comp.productId}\n                      className={comp.isShort ? 'bg-amber-500/5' : ''}\n                    >\n                      <td className=\"px-4 py-3 text-sm text-white\">{comp.productName}</td>\n                      <td className=\"px-4 py-3 text-sm text-slate-400 font-mono\">{comp.sku}</td>\n                      <td className=\"px-4 py-3 text-sm text-white text-center\">\n                        {formatNumber(comp.quantityRequired)}\n                      </td>\n                      <td className=\"px-4 py-3 text-sm text-center\">\n                        <span className={comp.isShort ? 'text-amber-400' : 'text-emerald-400'}>\n                          {formatNumber(comp.quantityAvailable)}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-3 text-center\">\n                        {comp.isShort ? (\n                          <span className=\"text-xs text-amber-400\">\n                            Short {formatNumber(comp.shortBy)}\n                          </span>\n                        ) : (\n                          <span className=\"text-xs text-emerald-400\">\n                            <Check className=\"w-4 h-4 inline\" /> OK\n                          </span>\n                        )}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Schedule */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Due Date (Optional)</label>\n          <input\n            type=\"date\"\n            value={dueDate}\n            onChange={e => setDueDate(e.target.value)}\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n          />\n        </div>\n\n        {/* Notes */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Notes (Optional)</label>\n          <textarea\n            value={notes}\n            onChange={e => setNotes(e.target.value)}\n            rows={2}\n            placeholder=\"Optional notes for this work order...\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default CreateWorkOrderModal;\n","'use client';\n\nimport { useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useApp, WorkOrder } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { useConfirm } from '@/components/ui/ConfirmDialog';\nimport { formatNumber, formatDate, formatDateTime } from '@/lib/formatting';\nimport {\n  Package,\n  Play,\n  Check,\n  X,\n  AlertTriangle,\n  Clock,\n  Calendar,\n  FileText,\n  ArrowUp,\n  Flame,\n} from 'lucide-react';\n\ninterface WorkOrderDetailModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  workOrder: WorkOrder | null;\n  onEdit?: (wo: WorkOrder) => void;\n}\n\nexport function WorkOrderDetailModal({ isOpen, onClose, workOrder, onEdit }: WorkOrderDetailModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error, warning } = useToast();\n  const confirm = useConfirm();\n\n  // Get product stock\n  const getProductStock = (productId: string) => {\n    return state.inventory\n      .filter(i => i.productId === productId)\n      .reduce((sum, i) => sum + i.quantity, 0);\n  };\n\n  // Check stock availability for starting\n  const stockCheck = useMemo(() => {\n    if (!workOrder) return { canStart: true, shortComponents: [] };\n\n    const shortComponents = workOrder.components.filter(c => {\n      const available = getProductStock(c.productId);\n      return available < c.quantityRequired;\n    });\n\n    return {\n      canStart: shortComponents.length === 0,\n      shortComponents,\n    };\n  }, [workOrder, state.inventory]);\n\n  // Get status badge\n  const getStatusBadge = (status: WorkOrder['status']) => {\n    const styles = {\n      pending: 'bg-slate-500/20 text-slate-400 border-slate-500/30',\n      in_progress: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\n      completed: 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30',\n      cancelled: 'bg-red-500/20 text-red-400 border-red-500/30',\n    };\n\n    const labels = {\n      pending: 'Pending',\n      in_progress: 'In Progress',\n      completed: 'Completed',\n      cancelled: 'Cancelled',\n    };\n\n    return (\n      <span className={`px-3 py-1 text-sm rounded-full border ${styles[status]}`}>\n        {labels[status]}\n      </span>\n    );\n  };\n\n  // Get priority badge\n  const getPriorityBadge = (priority: WorkOrder['priority']) => {\n    if (priority === 'normal') return null;\n\n    const styles = {\n      high: 'text-amber-400',\n      urgent: 'text-red-400',\n    };\n\n    const icons = {\n      high: ArrowUp,\n      urgent: Flame,\n    };\n\n    const Icon = icons[priority];\n\n    return (\n      <span className={`flex items-center gap-1 ${styles[priority]}`}>\n        <Icon className=\"w-4 h-4\" />\n        {priority.charAt(0).toUpperCase() + priority.slice(1)}\n      </span>\n    );\n  };\n\n  // Handle start production\n  const handleStartProduction = async () => {\n    if (!workOrder) return;\n\n    if (!stockCheck.canStart) {\n      error('Insufficient stock to start production');\n      return;\n    }\n\n    const confirmed = await confirm({\n      title: 'Start Production',\n      message: `Start production on ${workOrder.woNumber}? This will deduct components from inventory.`,\n      confirmText: 'Start Production',\n    });\n\n    if (confirmed) {\n      // Deduct components from inventory\n      workOrder.components.forEach(c => {\n        // Find the default location\n        const defaultLoc = state.locations.find(l => l.isDefault);\n        const locationId = defaultLoc?.id || state.locations[0]?.id || 'loc-1';\n\n        dispatch({\n          type: 'ADJUST_STOCK',\n          payload: {\n            productId: c.productId,\n            locationId,\n            adjustment: -c.quantityRequired,\n          }\n        });\n      });\n\n      // Update work order status\n      const updatedWO: WorkOrder = {\n        ...workOrder,\n        status: 'in_progress',\n        startedAt: new Date(),\n        components: workOrder.components.map(c => ({\n          ...c,\n          quantityUsed: c.quantityRequired,\n        })),\n      };\n\n      dispatch({ type: 'UPDATE_WORK_ORDER', payload: updatedWO });\n      success(`Started production on ${workOrder.woNumber}`);\n      onClose();\n    }\n  };\n\n  // Handle complete\n  const handleComplete = async () => {\n    if (!workOrder) return;\n\n    const confirmed = await confirm({\n      title: 'Complete Work Order',\n      message: `Complete ${workOrder.woNumber}? This will add ${workOrder.quantityToProduce} ${workOrder.outputProductName} to inventory.`,\n      confirmText: 'Complete',\n    });\n\n    if (confirmed) {\n      // Add finished goods to inventory\n      const defaultLoc = state.locations.find(l => l.isDefault);\n      const locationId = defaultLoc?.id || state.locations[0]?.id || 'loc-1';\n\n      dispatch({\n        type: 'ADJUST_STOCK',\n        payload: {\n          productId: workOrder.outputProductId,\n          locationId,\n          adjustment: workOrder.quantityToProduce,\n        }\n      });\n\n      // Update work order\n      const updatedWO: WorkOrder = {\n        ...workOrder,\n        status: 'completed',\n        quantityProduced: workOrder.quantityToProduce,\n        completedAt: new Date(),\n      };\n\n      dispatch({ type: 'UPDATE_WORK_ORDER', payload: updatedWO });\n      success(`${workOrder.woNumber} completed! ${formatNumber(workOrder.quantityToProduce)} ${workOrder.outputProductName} added to inventory`);\n      onClose();\n    }\n  };\n\n  // Handle cancel\n  const handleCancel = async () => {\n    if (!workOrder) return;\n\n    const message = workOrder.status === 'in_progress'\n      ? `Cancel ${workOrder.woNumber}? Components have already been deducted and will NOT be returned.`\n      : `Cancel ${workOrder.woNumber}?`;\n\n    const confirmed = await confirm({\n      title: 'Cancel Work Order',\n      message,\n      confirmText: 'Cancel Work Order',\n      destructive: true,\n    });\n\n    if (confirmed) {\n      const updatedWO: WorkOrder = {\n        ...workOrder,\n        status: 'cancelled',\n      };\n\n      dispatch({ type: 'UPDATE_WORK_ORDER', payload: updatedWO });\n      success(`${workOrder.woNumber} cancelled`);\n      onClose();\n    }\n  };\n\n  if (!workOrder) return null;\n\n  // Calculate progress\n  const progress = workOrder.status === 'completed' ? 100 :\n    workOrder.status === 'in_progress' ? 50 : 0;\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={workOrder.woNumber}\n      subtitle={workOrder.outputProductName}\n      size=\"lg\"\n      footer={\n        <>\n          {/* Actions based on status */}\n          {workOrder.status === 'pending' && (\n            <>\n              <Button variant=\"secondary\" onClick={() => onEdit?.(workOrder)}>\n                Edit\n              </Button>\n              <Button variant=\"secondary\" onClick={handleCancel}>\n                Cancel\n              </Button>\n              <Button onClick={handleStartProduction} disabled={!stockCheck.canStart}>\n                <Play className=\"w-4 h-4\" />\n                Start Production\n              </Button>\n            </>\n          )}\n          {workOrder.status === 'in_progress' && (\n            <>\n              <Button variant=\"secondary\" onClick={handleCancel}>\n                Cancel\n              </Button>\n              <Button onClick={handleComplete}>\n                <Check className=\"w-4 h-4\" />\n                Complete\n              </Button>\n            </>\n          )}\n          {(workOrder.status === 'completed' || workOrder.status === 'cancelled') && (\n            <Button variant=\"secondary\" onClick={onClose}>\n              Close\n            </Button>\n          )}\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Status & Priority */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            {getStatusBadge(workOrder.status)}\n            {getPriorityBadge(workOrder.priority)}\n          </div>\n        </div>\n\n        {/* Progress (for in_progress) */}\n        {workOrder.status === 'in_progress' && (\n          <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-sm text-slate-400\">Production Progress</span>\n              <span className=\"text-sm text-white\">{progress}%</span>\n            </div>\n            <div className=\"w-full bg-slate-700 rounded-full h-2\">\n              <div\n                className=\"h-2 rounded-full bg-blue-500 transition-all\"\n                style={{ width: `${progress}%` }}\n              />\n            </div>\n          </div>\n        )}\n\n        {/* Stock Check Warning (for pending) */}\n        {workOrder.status === 'pending' && !stockCheck.canStart && (\n          <div className=\"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-start gap-3\">\n            <AlertTriangle className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" />\n            <div>\n              <div className=\"text-sm font-medium text-amber-400\">Insufficient Stock</div>\n              <div className=\"text-sm text-slate-300 mt-1\">\n                Cannot start production. The following components are short:\n              </div>\n              <ul className=\"mt-2 space-y-1\">\n                {stockCheck.shortComponents.map(c => (\n                  <li key={c.productId} className=\"text-sm text-slate-400\">\n                    {c.productName}: need {formatNumber(c.quantityRequired)}, have {formatNumber(getProductStock(c.productId))}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        )}\n\n        {/* Output Product */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-white mb-3\">Output</h3>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 bg-emerald-500/20 rounded-lg flex items-center justify-center\">\n              <Package className=\"w-7 h-7 text-emerald-400\" />\n            </div>\n            <div>\n              <div className=\"text-lg font-medium text-white\">{workOrder.outputProductName}</div>\n              <div className=\"text-sm text-slate-400\">\n                {workOrder.status === 'completed' ? (\n                  <span className=\"text-emerald-400\">\n                    {formatNumber(workOrder.quantityProduced)} / {formatNumber(workOrder.quantityToProduce)} produced\n                  </span>\n                ) : (\n                  <span>{formatNumber(workOrder.quantityToProduce)} to produce</span>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Components */}\n        {workOrder.components.length > 0 && (\n          <div>\n            <h3 className=\"text-sm font-medium text-white mb-3\">Components</h3>\n            <div className=\"border border-slate-700 rounded-lg overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-slate-800/50\">\n                  <tr className=\"text-xs text-slate-400 uppercase tracking-wider\">\n                    <th className=\"px-4 py-3 text-left\">Component</th>\n                    <th className=\"px-4 py-3 text-center\">Required</th>\n                    <th className=\"px-4 py-3 text-center\">Used</th>\n                    <th className=\"px-4 py-3 text-center\">Available</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/50\">\n                  {workOrder.components.map(comp => {\n                    const available = getProductStock(comp.productId);\n                    const isShort = available < comp.quantityRequired && workOrder.status === 'pending';\n\n                    return (\n                      <tr key={comp.productId} className={isShort ? 'bg-amber-500/5' : ''}>\n                        <td className=\"px-4 py-3 text-sm text-white\">{comp.productName}</td>\n                        <td className=\"px-4 py-3 text-sm text-white text-center\">\n                          {formatNumber(comp.quantityRequired)}\n                        </td>\n                        <td className=\"px-4 py-3 text-sm text-center\">\n                          {workOrder.status === 'pending' ? (\n                            <span className=\"text-slate-400\">-</span>\n                          ) : (\n                            <span className=\"text-emerald-400\">{formatNumber(comp.quantityUsed)}</span>\n                          )}\n                        </td>\n                        <td className=\"px-4 py-3 text-sm text-center\">\n                          <span className={isShort ? 'text-amber-400' : 'text-slate-400'}>\n                            {formatNumber(available)}\n                          </span>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Details */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-white mb-3\">Details</h3>\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <Calendar className=\"w-4 h-4 text-slate-400\" />\n              <span className=\"text-slate-400\">Due Date:</span>\n              <span className=\"text-white\">\n                {workOrder.dueDate ? formatDate(workOrder.dueDate) : 'Not set'}\n              </span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Clock className=\"w-4 h-4 text-slate-400\" />\n              <span className=\"text-slate-400\">Created:</span>\n              <span className=\"text-white\">{formatDate(workOrder.createdAt)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Notes */}\n        {workOrder.notes && (\n          <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n            <h3 className=\"text-sm font-medium text-white mb-2\">Notes</h3>\n            <p className=\"text-sm text-slate-300\">{workOrder.notes}</p>\n          </div>\n        )}\n\n        {/* Timeline */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-white mb-3\">Timeline</h3>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-2 h-2 rounded-full bg-emerald-500\"></div>\n              <div className=\"text-sm\">\n                <span className=\"text-white\">Created</span>\n                <span className=\"text-slate-400 ml-2\">{formatDateTime(workOrder.createdAt)}</span>\n              </div>\n            </div>\n            {workOrder.startedAt && (\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\n                <div className=\"text-sm\">\n                  <span className=\"text-white\">Production Started</span>\n                  <span className=\"text-slate-400 ml-2\">{formatDateTime(workOrder.startedAt)}</span>\n                </div>\n              </div>\n            )}\n            {workOrder.completedAt && (\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-emerald-500\"></div>\n                <div className=\"text-sm\">\n                  <span className=\"text-white\">Completed</span>\n                  <span className=\"text-slate-400 ml-2\">{formatDateTime(workOrder.completedAt)}</span>\n                </div>\n              </div>\n            )}\n            {workOrder.status === 'cancelled' && (\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-red-500\"></div>\n                <div className=\"text-sm\">\n                  <span className=\"text-white\">Cancelled</span>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default WorkOrderDetailModal;\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Toggle } from '@/components/ui/Toggle';\nimport { useApp, Location } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { MapPin, Warehouse, Package, Truck } from 'lucide-react';\n\ninterface LocationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editLocation?: Location | null;\n}\n\nconst LOCATION_TYPES: { value: Location['type']; label: string; icon: typeof Warehouse; description: string }[] = [\n  { value: 'warehouse', label: 'Warehouse', icon: Warehouse, description: 'Main storage facility' },\n  { value: 'fba', label: 'FBA', icon: Package, description: 'Amazon fulfillment center' },\n  { value: 'fbm', label: 'FBM', icon: Truck, description: 'Fulfilled by merchant' },\n];\n\nexport function LocationModal({ isOpen, onClose, editLocation }: LocationModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [name, setName] = useState('');\n  const [type, setType] = useState<Location['type']>('warehouse');\n  const [address, setAddress] = useState('');\n  const [isDefault, setIsDefault] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const isEditing = !!editLocation;\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editLocation) {\n        setName(editLocation.name);\n        setType(editLocation.type);\n        setAddress(editLocation.address || '');\n        setIsDefault(editLocation.isDefault);\n      } else {\n        setName('');\n        setType('warehouse');\n        setAddress('');\n        setIsDefault(state.locations.length === 0);\n      }\n    }\n  }, [isOpen, editLocation, state.locations.length]);\n\n  // Validation\n  const isValid = name.trim().length > 0;\n\n  // Handle save\n  const handleSave = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      // If setting as default, unset other defaults first\n      if (isDefault && !editLocation?.isDefault) {\n        state.locations.forEach(loc => {\n          if (loc.isDefault) {\n            dispatch({\n              type: 'UPDATE_LOCATION',\n              payload: { ...loc, isDefault: false },\n            });\n          }\n        });\n      }\n\n      const locationData: Location = {\n        id: editLocation?.id || crypto.randomUUID(),\n        name: name.trim(),\n        type,\n        address: address.trim() || undefined,\n        isDefault,\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_LOCATION', payload: locationData });\n        success(`Location \"${name}\" updated`);\n      } else {\n        dispatch({ type: 'ADD_LOCATION', payload: locationData });\n        success(`Location \"${name}\" added`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save location');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Location' : 'Add Location'}\n      subtitle={isEditing ? `Editing ${editLocation?.name}` : 'Create a new warehouse or fulfillment location'}\n      size=\"md\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Add Location'}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Location Name */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Location Name *</label>\n          <input\n            type=\"text\"\n            value={name}\n            onChange={e => setName(e.target.value)}\n            placeholder=\"e.g., Main Warehouse, FBA - Phoenix\"\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n            autoFocus\n          />\n        </div>\n\n        {/* Location Type */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-3\">Location Type *</label>\n          <div className=\"grid grid-cols-3 gap-3\">\n            {LOCATION_TYPES.map(locType => {\n              const Icon = locType.icon;\n              const isSelected = type === locType.value;\n\n              return (\n                <button\n                  key={locType.value}\n                  type=\"button\"\n                  onClick={() => setType(locType.value)}\n                  className={`\n                    flex flex-col items-center gap-2 p-4 rounded-lg border transition-all\n                    ${isSelected\n                      ? 'bg-emerald-500/20 border-emerald-500/50 text-emerald-400'\n                      : 'bg-slate-800/50 border-slate-700 text-slate-400 hover:border-slate-600'\n                    }\n                  `}\n                >\n                  <Icon className=\"w-6 h-6\" />\n                  <span className=\"text-sm font-medium\">{locType.label}</span>\n                  <span className=\"text-xs text-slate-500\">{locType.description}</span>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Address */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-1.5\">Address (Optional)</label>\n          <textarea\n            value={address}\n            onChange={e => setAddress(e.target.value)}\n            placeholder=\"Full address or location details...\"\n            rows={2}\n            className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n          />\n        </div>\n\n        {/* Default Location Toggle */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <Toggle\n            checked={isDefault}\n            onChange={setIsDefault}\n            label=\"Default Location\"\n            description=\"New inventory and received items will be added to this location by default\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default LocationModal;\n","'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Toggle } from '@/components/ui/Toggle';\nimport { useApp, ShippingBox } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatNumber, formatCurrency } from '@/lib/formatting';\nimport { Box, Ruler, Scale, Zap } from 'lucide-react';\n\ninterface BoxModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editBox?: ShippingBox | null;\n}\n\nexport function BoxModal({ isOpen, onClose, editBox }: BoxModalProps) {\n  const { dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [name, setName] = useState('');\n  const [sku, setSku] = useState('');\n  const [innerLength, setInnerLength] = useState('');\n  const [innerWidth, setInnerWidth] = useState('');\n  const [innerHeight, setInnerHeight] = useState('');\n  const [maxWeight, setMaxWeight] = useState('');\n  const [cost, setCost] = useState('');\n  const [smartBoxEligible, setSmartBoxEligible] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const isEditing = !!editBox;\n\n  // Calculate volume\n  const volume = useMemo(() => {\n    const l = parseFloat(innerLength) || 0;\n    const w = parseFloat(innerWidth) || 0;\n    const h = parseFloat(innerHeight) || 0;\n    return l * w * h;\n  }, [innerLength, innerWidth, innerHeight]);\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editBox) {\n        setName(editBox.name);\n        setSku(editBox.sku || '');\n        setInnerLength(editBox.innerLength.toString());\n        setInnerWidth(editBox.innerWidth.toString());\n        setInnerHeight(editBox.innerHeight.toString());\n        setMaxWeight(editBox.maxWeight.toString());\n        setCost(editBox.cost?.toString() || '');\n        setSmartBoxEligible(editBox.smartBoxEligible);\n      } else {\n        setName('');\n        setSku('');\n        setInnerLength('');\n        setInnerWidth('');\n        setInnerHeight('');\n        setMaxWeight('');\n        setCost('');\n        setSmartBoxEligible(true);\n      }\n    }\n  }, [isOpen, editBox]);\n\n  // Validation\n  const isValid = useMemo(() => {\n    if (!name.trim()) return false;\n    if (!innerLength || parseFloat(innerLength) <= 0) return false;\n    if (!innerWidth || parseFloat(innerWidth) <= 0) return false;\n    if (!innerHeight || parseFloat(innerHeight) <= 0) return false;\n    if (!maxWeight || parseFloat(maxWeight) <= 0) return false;\n    return true;\n  }, [name, innerLength, innerWidth, innerHeight, maxWeight]);\n\n  // Handle save\n  const handleSave = () => {\n    if (!isValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const boxData: ShippingBox = {\n        id: editBox?.id || crypto.randomUUID(),\n        name: name.trim(),\n        sku: sku.trim() || undefined,\n        innerLength: parseFloat(innerLength),\n        innerWidth: parseFloat(innerWidth),\n        innerHeight: parseFloat(innerHeight),\n        maxWeight: parseFloat(maxWeight),\n        cost: cost ? parseFloat(cost) : undefined,\n        smartBoxEligible,\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_BOX', payload: boxData });\n        success(`Box \"${name}\" updated`);\n      } else {\n        dispatch({ type: 'ADD_BOX', payload: boxData });\n        success(`Box \"${name}\" added`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save box');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Shipping Box' : 'Add Shipping Box'}\n      subtitle={isEditing ? `Editing ${editBox?.name}` : 'Define a new box size for fulfillment'}\n      size=\"md\"\n      footer={\n        <>\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave} disabled={isSubmitting || !isValid}>\n            {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Add Box'}\n          </Button>\n        </>\n      }\n    >\n      <div className=\"space-y-6\">\n        {/* Box Name & SKU */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Box Name *</label>\n            <input\n              type=\"text\"\n              value={name}\n              onChange={e => setName(e.target.value)}\n              placeholder=\"e.g., Small Flat, Large Cube\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              autoFocus\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">SKU (Optional)</label>\n            <input\n              type=\"text\"\n              value={sku}\n              onChange={e => setSku(e.target.value)}\n              placeholder=\"e.g., BOX-SM-01\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 font-mono\"\n            />\n          </div>\n        </div>\n\n        {/* Inner Dimensions */}\n        <div>\n          <label className=\"block text-sm text-slate-400 mb-3\">\n            <span className=\"flex items-center gap-2\">\n              <Ruler className=\"w-4 h-4\" />\n              Inner Dimensions (inches) *\n            </span>\n          </label>\n          <div className=\"grid grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-xs text-slate-500 mb-1\">Length</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                value={innerLength}\n                onChange={e => setInnerLength(e.target.value)}\n                placeholder=\"0\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs text-slate-500 mb-1\">Width</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                value={innerWidth}\n                onChange={e => setInnerWidth(e.target.value)}\n                placeholder=\"0\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs text-slate-500 mb-1\">Height</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                value={innerHeight}\n                onChange={e => setInnerHeight(e.target.value)}\n                placeholder=\"0\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n          {volume > 0 && (\n            <div className=\"mt-2 text-sm text-slate-400\">\n              Volume: <span className=\"text-white\">{formatNumber(volume)} cubic inches</span>\n            </div>\n          )}\n        </div>\n\n        {/* Max Weight */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">\n              <span className=\"flex items-center gap-2\">\n                <Scale className=\"w-4 h-4\" />\n                Max Weight (oz) *\n              </span>\n            </label>\n            <input\n              type=\"number\"\n              step=\"1\"\n              min=\"0\"\n              value={maxWeight}\n              onChange={e => setMaxWeight(e.target.value)}\n              placeholder=\"0\"\n              className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n            />\n            {maxWeight && parseFloat(maxWeight) > 0 && (\n              <div className=\"mt-1 text-xs text-slate-500\">\n                {formatNumber(parseFloat(maxWeight) / 16)} lbs\n              </div>\n            )}\n          </div>\n          <div>\n            <label className=\"block text-sm text-slate-400 mb-1.5\">Cost per Box (Optional)</label>\n            <div className=\"relative\">\n              <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\">$</span>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0\"\n                value={cost}\n                onChange={e => setCost(e.target.value)}\n                placeholder=\"0.00\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg pl-8 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Smart Box Toggle */}\n        <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n          <Toggle\n            checked={smartBoxEligible}\n            onChange={setSmartBoxEligible}\n            label=\"Smart Box Eligible\"\n            description=\"Include this box in automatic box size selection based on item dimensions\"\n          />\n        </div>\n\n        {/* Preview */}\n        {isValid && (\n          <div className=\"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-12 h-12 bg-emerald-500/20 rounded-lg flex items-center justify-center\">\n                <Box className=\"w-6 h-6 text-emerald-400\" />\n              </div>\n              <div>\n                <div className=\"text-white font-medium\">{name || 'New Box'}</div>\n                <div className=\"text-sm text-slate-400\">\n                  {innerLength}\" x {innerWidth}\" x {innerHeight}\" ({formatNumber(volume)} cu in) | Max {formatNumber(parseFloat(maxWeight) || 0)} oz\n                  {cost && ` | ${formatCurrency(parseFloat(cost))}`}\n                </div>\n              </div>\n              {smartBoxEligible && (\n                <div className=\"ml-auto flex items-center gap-1 text-xs text-emerald-400\">\n                  <Zap className=\"w-3 h-3\" />\n                  Smart\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default BoxModal;\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useApp, Order, ReturnReason, Return, ReturnItem } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport { formatCurrency } from '@/lib/formatting';\n\ninterface CreateReturnModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  preselectedOrder?: Order | null;\n}\n\nconst reasonLabels: Record<ReturnReason, string> = {\n  damaged_in_transit: 'Damaged in Transit',\n  defective: 'Defective Product',\n  wrong_item_sent: 'Wrong Item Sent',\n  not_as_described: 'Not as Described',\n  changed_mind: 'Changed Mind',\n  ordered_wrong: 'Ordered Wrong',\n  arrived_late: 'Arrived Late',\n  better_price_found: 'Better Price Found',\n  other: 'Other',\n};\n\ninterface ReturnItemData {\n  productId: string;\n  productName: string;\n  sku: string;\n  price: number;\n  maxQuantity: number;\n  quantity: number;\n  reason: ReturnReason;\n  selected: boolean;\n}\n\nexport function CreateReturnModal({ isOpen, onClose, preselectedOrder }: CreateReturnModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // State\n  const [step, setStep] = useState<'order' | 'items' | 'details'>('order');\n  const [selectedOrder, setSelectedOrder] = useState<Order | null>(null);\n  const [orderSearch, setOrderSearch] = useState('');\n  const [returnItems, setReturnItems] = useState<ReturnItemData[]>([]);\n  const [refundShipping, setRefundShipping] = useState(false);\n  const [restockingFeePercent, setRestockingFeePercent] = useState(0);\n  const [notes, setNotes] = useState('');\n\n  // Initialize with preselected order\n  useEffect(() => {\n    if (preselectedOrder) {\n      setSelectedOrder(preselectedOrder);\n      setStep('items');\n      initializeItems(preselectedOrder);\n    }\n  }, [preselectedOrder]);\n\n  // Reset when modal closes\n  useEffect(() => {\n    if (!isOpen) {\n      setStep('order');\n      setSelectedOrder(null);\n      setOrderSearch('');\n      setReturnItems([]);\n      setRefundShipping(false);\n      setRestockingFeePercent(0);\n      setNotes('');\n    }\n  }, [isOpen]);\n\n  const initializeItems = (order: Order) => {\n    setReturnItems(\n      order.items.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        price: item.price,\n        maxQuantity: item.quantity,\n        quantity: item.quantity,\n        reason: 'damaged_in_transit',\n        selected: false,\n      }))\n    );\n  };\n\n  // Filter eligible orders (shipped or delivered)\n  const eligibleOrders = state.orders.filter(\n    o => (o.status === 'shipped' || o.status === 'delivered') &&\n    (orderSearch === '' ||\n      o.orderNumber.toLowerCase().includes(orderSearch.toLowerCase()) ||\n      o.customer.name.toLowerCase().includes(orderSearch.toLowerCase()))\n  );\n\n  const handleSelectOrder = (order: Order) => {\n    setSelectedOrder(order);\n    initializeItems(order);\n    setStep('items');\n  };\n\n  const toggleItem = (productId: string) => {\n    setReturnItems(prev =>\n      prev.map(item =>\n        item.productId === productId\n          ? { ...item, selected: !item.selected }\n          : item\n      )\n    );\n  };\n\n  const updateItemQuantity = (productId: string, quantity: number) => {\n    setReturnItems(prev =>\n      prev.map(item =>\n        item.productId === productId\n          ? { ...item, quantity: Math.min(Math.max(1, quantity), item.maxQuantity) }\n          : item\n      )\n    );\n  };\n\n  const updateItemReason = (productId: string, reason: ReturnReason) => {\n    setReturnItems(prev =>\n      prev.map(item =>\n        item.productId === productId\n          ? { ...item, reason }\n          : item\n      )\n    );\n  };\n\n  const selectedItems = returnItems.filter(item => item.selected);\n\n  const calculateRefund = () => {\n    const subtotal = selectedItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    const shipping = refundShipping && selectedOrder ? selectedOrder.shipping : 0;\n    const restockingFee = subtotal * (restockingFeePercent / 100);\n    return {\n      subtotal,\n      shipping,\n      restockingFee,\n      total: subtotal + shipping - restockingFee,\n    };\n  };\n\n  const handleSubmit = () => {\n    if (!selectedOrder || selectedItems.length === 0) {\n      error('Please select at least one item to return');\n      return;\n    }\n\n    const refund = calculateRefund();\n    const returnNumber = `RET-${String(state.returns.length + 1).padStart(4, '0')}`;\n\n    const newReturn: Return = {\n      id: `return-${Date.now()}`,\n      returnNumber,\n      orderId: selectedOrder.id,\n      orderNumber: selectedOrder.orderNumber,\n      channel: selectedOrder.channel,\n      status: 'requested',\n      customer: {\n        name: selectedOrder.customer.name,\n        email: selectedOrder.customer.email,\n      },\n      items: selectedItems.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        quantity: item.quantity,\n        quantityReceived: 0,\n        reason: item.reason,\n        refundAmount: item.price * item.quantity,\n      })),\n      returnShipping: {},\n      refund: {\n        subtotal: refund.subtotal,\n        shipping: refund.shipping,\n        restockingFee: refund.restockingFee,\n        total: refund.total,\n      },\n      notes: notes || undefined,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    dispatch({ type: 'ADD_RETURN', payload: newReturn });\n    success(`Return ${returnNumber} created successfully`);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  const refund = calculateRefund();\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-center justify-center p-4\">\n        {/* Backdrop */}\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\" onClick={onClose}></div>\n\n        {/* Modal */}\n        <div className=\"relative bg-slate-900 border border-slate-700/50 rounded-2xl shadow-2xl w-full max-w-3xl\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-slate-700/50\">\n            <div>\n              <h2 className=\"text-xl font-bold text-white\">Create Return</h2>\n              <p className=\"text-sm text-slate-400\">\n                {step === 'order' && 'Select an order to create a return for'}\n                {step === 'items' && 'Select items to return'}\n                {step === 'details' && 'Review and confirm return details'}\n              </p>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n            >\n              <i className=\"fas fa-times\"></i>\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6 max-h-[60vh] overflow-y-auto\">\n            {/* Step 1: Select Order */}\n            {step === 'order' && (\n              <div className=\"space-y-4\">\n                {/* Search */}\n                <div className=\"relative\">\n                  <i className=\"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-500\"></i>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search orders by number or customer...\"\n                    value={orderSearch}\n                    onChange={(e) => setOrderSearch(e.target.value)}\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500\"\n                  />\n                </div>\n\n                {/* Orders List */}\n                <div className=\"space-y-2\">\n                  {eligibleOrders.length === 0 ? (\n                    <div className=\"text-center py-8 text-slate-500\">\n                      <i className=\"fas fa-box-open text-4xl mb-3\"></i>\n                      <p>No eligible orders found</p>\n                      <p className=\"text-sm\">Only shipped or delivered orders can be returned</p>\n                    </div>\n                  ) : (\n                    eligibleOrders.map(order => (\n                      <button\n                        key={order.id}\n                        onClick={() => handleSelectOrder(order)}\n                        className=\"w-full p-4 bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700/50 rounded-lg text-left transition-colors\"\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <div className=\"font-medium text-white\">{order.orderNumber}</div>\n                            <div className=\"text-sm text-slate-400\">{order.customer.name}</div>\n                          </div>\n                          <div className=\"text-right\">\n                            <div className=\"text-white\">{formatCurrency(order.total)}</div>\n                            <div className=\"text-sm text-slate-400\">\n                              {order.items.reduce((sum, i) => sum + i.quantity, 0)} items\n                            </div>\n                          </div>\n                        </div>\n                      </button>\n                    ))\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Step 2: Select Items */}\n            {step === 'items' && selectedOrder && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-slate-800/30 rounded-lg p-4 mb-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"text-white font-medium\">{selectedOrder.orderNumber}</div>\n                      <div className=\"text-sm text-slate-400\">{selectedOrder.customer.name}</div>\n                    </div>\n                    <button\n                      onClick={() => { setStep('order'); setSelectedOrder(null); }}\n                      className=\"text-sm text-emerald-400 hover:underline\"\n                    >\n                      Change Order\n                    </button>\n                  </div>\n                </div>\n\n                <p className=\"text-sm text-slate-400\">Select the items to return:</p>\n\n                <div className=\"space-y-3\">\n                  {returnItems.map(item => (\n                    <div\n                      key={item.productId}\n                      className={`p-4 border rounded-lg transition-colors ${\n                        item.selected\n                          ? 'border-emerald-500/50 bg-emerald-500/10'\n                          : 'border-slate-700/50 bg-slate-800/30'\n                      }`}\n                    >\n                      <div className=\"flex items-start gap-4\">\n                        <button\n                          onClick={() => toggleItem(item.productId)}\n                          className={`mt-1 w-5 h-5 rounded border flex items-center justify-center ${\n                            item.selected\n                              ? 'bg-emerald-500 border-emerald-500 text-white'\n                              : 'border-slate-600 text-transparent'\n                          }`}\n                        >\n                          <i className=\"fas fa-check text-xs\"></i>\n                        </button>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <div className=\"text-white font-medium\">{item.productName}</div>\n                              <div className=\"text-sm text-slate-400\">SKU: {item.sku}</div>\n                            </div>\n                            <div className=\"text-right\">\n                              <div className=\"text-white\">{formatCurrency(item.price)}</div>\n                              <div className=\"text-sm text-slate-400\">Max qty: {item.maxQuantity}</div>\n                            </div>\n                          </div>\n\n                          {item.selected && (\n                            <div className=\"mt-4 grid grid-cols-2 gap-4\">\n                              <div>\n                                <label className=\"block text-sm text-slate-400 mb-1\">Quantity</label>\n                                <input\n                                  type=\"number\"\n                                  min=\"1\"\n                                  max={item.maxQuantity}\n                                  value={item.quantity}\n                                  onChange={(e) => updateItemQuantity(item.productId, parseInt(e.target.value) || 1)}\n                                  className=\"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white\"\n                                />\n                              </div>\n                              <div>\n                                <label className=\"block text-sm text-slate-400 mb-1\">Reason</label>\n                                <select\n                                  value={item.reason}\n                                  onChange={(e) => updateItemReason(item.productId, e.target.value as ReturnReason)}\n                                  className=\"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white\"\n                                >\n                                  {Object.entries(reasonLabels).map(([key, label]) => (\n                                    <option key={key} value={key}>{label}</option>\n                                  ))}\n                                </select>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Step 3: Details */}\n            {step === 'details' && selectedOrder && (\n              <div className=\"space-y-6\">\n                {/* Selected Items Summary */}\n                <div>\n                  <h3 className=\"text-white font-medium mb-3\">Return Items</h3>\n                  <div className=\"bg-slate-800/30 rounded-lg overflow-hidden\">\n                    <table className=\"w-full\">\n                      <thead className=\"bg-slate-800/50\">\n                        <tr className=\"text-left text-xs text-slate-400 uppercase\">\n                          <th className=\"px-4 py-2\">Product</th>\n                          <th className=\"px-4 py-2 text-center\">Qty</th>\n                          <th className=\"px-4 py-2\">Reason</th>\n                          <th className=\"px-4 py-2 text-right\">Refund</th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"divide-y divide-slate-700/50\">\n                        {selectedItems.map(item => (\n                          <tr key={item.productId}>\n                            <td className=\"px-4 py-3\">\n                              <div className=\"text-white\">{item.productName}</div>\n                              <div className=\"text-xs text-slate-400\">{item.sku}</div>\n                            </td>\n                            <td className=\"px-4 py-3 text-center text-white\">{item.quantity}</td>\n                            <td className=\"px-4 py-3 text-slate-300 text-sm\">{reasonLabels[item.reason]}</td>\n                            <td className=\"px-4 py-3 text-right text-white\">{formatCurrency(item.price * item.quantity)}</td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n\n                {/* Refund Options */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"flex items-center gap-2 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={refundShipping}\n                        onChange={(e) => setRefundShipping(e.target.checked)}\n                        className=\"w-4 h-4 rounded border-slate-600 bg-slate-700 text-emerald-500 focus:ring-emerald-500\"\n                      />\n                      <span className=\"text-slate-300\">Refund shipping ({formatCurrency(selectedOrder.shipping)})</span>\n                    </label>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm text-slate-400 mb-1\">Restocking Fee %</label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      max=\"100\"\n                      value={restockingFeePercent}\n                      onChange={(e) => setRestockingFeePercent(parseInt(e.target.value) || 0)}\n                      className=\"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white\"\n                    />\n                  </div>\n                </div>\n\n                {/* Refund Summary */}\n                <div className=\"bg-slate-800/30 rounded-lg p-4\">\n                  <h3 className=\"text-white font-medium mb-3\">Refund Summary</h3>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-slate-300\">\n                      <span>Items Subtotal</span>\n                      <span>{formatCurrency(refund.subtotal)}</span>\n                    </div>\n                    <div className=\"flex justify-between text-slate-300\">\n                      <span>Shipping Refund</span>\n                      <span>{formatCurrency(refund.shipping)}</span>\n                    </div>\n                    {refund.restockingFee > 0 && (\n                      <div className=\"flex justify-between text-red-400\">\n                        <span>Restocking Fee</span>\n                        <span>-{formatCurrency(refund.restockingFee)}</span>\n                      </div>\n                    )}\n                    <div className=\"pt-2 border-t border-slate-700 flex justify-between text-lg\">\n                      <span className=\"text-white font-semibold\">Total Refund</span>\n                      <span className=\"text-emerald-400 font-bold\">{formatCurrency(refund.total)}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Notes */}\n                <div>\n                  <label className=\"block text-sm text-slate-400 mb-1\">Notes (optional)</label>\n                  <textarea\n                    value={notes}\n                    onChange={(e) => setNotes(e.target.value)}\n                    rows={3}\n                    placeholder=\"Add any notes about this return...\"\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500 resize-none\"\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-between p-6 border-t border-slate-700/50\">\n            <div>\n              {step !== 'order' && (\n                <button\n                  onClick={() => setStep(step === 'details' ? 'items' : 'order')}\n                  className=\"px-4 py-2 text-slate-400 hover:text-white transition-colors flex items-center gap-2\"\n                >\n                  <i className=\"fas fa-arrow-left\"></i>\n                  Back\n                </button>\n              )}\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              {step === 'items' && (\n                <button\n                  onClick={() => setStep('details')}\n                  disabled={selectedItems.length === 0}\n                  className=\"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg transition-colors flex items-center gap-2\"\n                >\n                  Continue\n                  <i className=\"fas fa-arrow-right\"></i>\n                </button>\n              )}\n              {step === 'details' && (\n                <button\n                  onClick={handleSubmit}\n                  className=\"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2\"\n                >\n                  <i className=\"fas fa-check\"></i>\n                  Create Return\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Modal component exports\n */\n\nexport { AddProductModal } from './AddProductModal';\nexport { AdjustStockModal } from './AdjustStockModal';\nexport { ImportCSVModal } from './ImportCSVModal';\nexport { BundleModal } from './BundleModal';\nexport { BundleDetailModal } from './BundleDetailModal';\nexport { CreateOrderModal } from './CreateOrderModal';\nexport { EditOrderModal } from './EditOrderModal';\nexport { CreatePOModal } from './CreatePOModal';\nexport { ReceivePOModal } from './ReceivePOModal';\nexport { CreateWorkOrderModal } from './CreateWorkOrderModal';\nexport { WorkOrderDetailModal } from './WorkOrderDetailModal';\nexport { LocationModal } from './LocationModal';\nexport { BoxModal } from './BoxModal';\nexport { CreateReturnModal } from './CreateReturnModal';\nexport { CreateStockCountModal } from './CreateStockCountModal';\nexport { CreateTransferModal } from './CreateTransferModal';\nexport { AutomationRuleModal } from './AutomationRuleModal';\nexport { CreatePickBatchModal } from './CreatePickBatchModal';\nexport { FulfillmentRuleModal } from './FulfillmentRuleModal';\n","'use client';\n\nimport { useState, useMemo } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useApp, StockCount, StockCountItem } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\n\ninterface CreateStockCountModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function CreateStockCountModal({ isOpen, onClose }: CreateStockCountModalProps) {\n  const router = useRouter();\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [countName, setCountName] = useState('');\n  const [countType, setCountType] = useState<StockCount['type']>('cycle');\n  const [selectedLocation, setSelectedLocation] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [includeFilter, setIncludeFilter] = useState<'all' | 'low_stock' | 'high_value'>('all');\n\n  // Spot check state\n  const [productSearch, setProductSearch] = useState('');\n  const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\n\n  // Get unique categories\n  const categories = useMemo(() => {\n    const cats = new Set(state.products.map(p => p.category));\n    return Array.from(cats).sort();\n  }, [state.products]);\n\n  // Filter products for spot check\n  const filteredProducts = useMemo(() => {\n    let products = state.products;\n\n    if (selectedLocation) {\n      products = products.filter(p =>\n        state.inventory.some(inv => inv.productId === p.id && inv.locationId === selectedLocation)\n      );\n    }\n\n    if (productSearch) {\n      const search = productSearch.toLowerCase();\n      products = products.filter(p =>\n        p.name.toLowerCase().includes(search) ||\n        p.sku.toLowerCase().includes(search)\n      );\n    }\n\n    return products;\n  }, [state.products, state.inventory, selectedLocation, productSearch]);\n\n  // Toggle product selection\n  const toggleProduct = (productId: string) => {\n    setSelectedProducts(prev =>\n      prev.includes(productId)\n        ? prev.filter(id => id !== productId)\n        : [...prev, productId]\n    );\n  };\n\n  // Generate count number\n  const generateCountNumber = () => {\n    const num = state.stockCounts.length + 1;\n    return `SC-${String(num).padStart(4, '0')}`;\n  };\n\n  // Handle create\n  const handleCreate = () => {\n    if (!countName.trim()) {\n      error('Please enter a count name');\n      return;\n    }\n\n    if (!selectedLocation) {\n      error('Please select a location');\n      return;\n    }\n\n    if (countType === 'spot' && selectedProducts.length === 0) {\n      error('Please select at least one product for spot check');\n      return;\n    }\n\n    // Get products to count based on filters\n    let productsToCount = state.products.filter(p =>\n      state.inventory.some(inv => inv.productId === p.id && inv.locationId === selectedLocation)\n    );\n\n    if (selectedCategory && countType === 'cycle') {\n      productsToCount = productsToCount.filter(p => p.category === selectedCategory);\n    }\n\n    if (countType === 'spot') {\n      productsToCount = productsToCount.filter(p => selectedProducts.includes(p.id));\n    }\n\n    // Apply include filters\n    if (includeFilter === 'low_stock') {\n      productsToCount = productsToCount.filter(p => {\n        const inv = state.inventory.find(i => i.productId === p.id && i.locationId === selectedLocation);\n        return inv && inv.quantity <= p.reorderPoint;\n      });\n    } else if (includeFilter === 'high_value') {\n      productsToCount = productsToCount.filter(p => p.cost.rolling >= 10);\n    }\n\n    if (productsToCount.length === 0) {\n      error('No products match the selected criteria');\n      return;\n    }\n\n    // Create count items\n    const items: StockCountItem[] = productsToCount.map(product => {\n      const inventoryLevel = state.inventory.find(\n        inv => inv.productId === product.id && inv.locationId === selectedLocation\n      );\n\n      return {\n        productId: product.id,\n        productName: product.name,\n        sku: product.sku,\n        binLocation: inventoryLevel?.binLocation,\n        systemQty: inventoryLevel?.quantity || 0,\n        countedQty: null,\n        variance: 0,\n        varianceValue: 0,\n        status: 'pending' as const,\n      };\n    });\n\n    const location = state.locations.find(l => l.id === selectedLocation);\n    const countNumber = generateCountNumber();\n\n    const newCount: StockCount = {\n      id: `sc-${Date.now()}`,\n      countNumber,\n      name: countName,\n      type: countType,\n      status: 'draft',\n      location: selectedLocation,\n      locationName: location?.name || '',\n      category: selectedCategory || undefined,\n      items,\n      summary: {\n        totalItems: items.length,\n        countedItems: 0,\n        matchedItems: 0,\n        discrepancyItems: 0,\n        totalVariance: 0,\n      },\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    dispatch({ type: 'ADD_STOCK_COUNT', payload: newCount });\n    success(`Stock count ${countNumber} created with ${items.length} items`);\n    onClose();\n    router.push(`/inventory/counts/${newCount.id}`);\n  };\n\n  // Reset form\n  const handleClose = () => {\n    setCountName('');\n    setCountType('cycle');\n    setSelectedLocation('');\n    setSelectedCategory('');\n    setIncludeFilter('all');\n    setProductSearch('');\n    setSelectedProducts([]);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-center justify-center p-4\">\n        {/* Backdrop */}\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\" onClick={handleClose}></div>\n\n        {/* Modal */}\n        <div className=\"relative bg-slate-900 border border-slate-700/50 rounded-2xl shadow-2xl w-full max-w-2xl\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-slate-700/50\">\n            <div>\n              <h2 className=\"text-xl font-bold text-white\">Create Stock Count</h2>\n              <p className=\"text-sm text-slate-400\">Set up a new inventory count</p>\n            </div>\n            <button\n              onClick={handleClose}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n            >\n              <i className=\"fas fa-times\"></i>\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6 space-y-6 max-h-[60vh] overflow-y-auto\">\n            {/* Count Name */}\n            <div>\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                Count Name\n              </label>\n              <input\n                type=\"text\"\n                value={countName}\n                onChange={(e) => setCountName(e.target.value)}\n                placeholder=\"e.g., Monthly Full Count - December\"\n                className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500\"\n              />\n            </div>\n\n            {/* Count Type */}\n            <div>\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                Count Type\n              </label>\n              <div className=\"grid grid-cols-3 gap-3\">\n                <button\n                  onClick={() => setCountType('full')}\n                  className={`p-4 rounded-lg border text-left transition-colors ${\n                    countType === 'full'\n                      ? 'bg-purple-500/20 border-purple-500 text-purple-400'\n                      : 'bg-slate-800/50 border-slate-700 text-slate-400 hover:border-slate-600'\n                  }`}\n                >\n                  <i className=\"fas fa-boxes mb-2\"></i>\n                  <div className=\"font-medium\">Full Count</div>\n                  <div className=\"text-xs text-slate-500\">Count all items at location</div>\n                </button>\n                <button\n                  onClick={() => setCountType('cycle')}\n                  className={`p-4 rounded-lg border text-left transition-colors ${\n                    countType === 'cycle'\n                      ? 'bg-blue-500/20 border-blue-500 text-blue-400'\n                      : 'bg-slate-800/50 border-slate-700 text-slate-400 hover:border-slate-600'\n                  }`}\n                >\n                  <i className=\"fas fa-sync-alt mb-2\"></i>\n                  <div className=\"font-medium\">Cycle Count</div>\n                  <div className=\"text-xs text-slate-500\">Count specific category or zone</div>\n                </button>\n                <button\n                  onClick={() => setCountType('spot')}\n                  className={`p-4 rounded-lg border text-left transition-colors ${\n                    countType === 'spot'\n                      ? 'bg-amber-500/20 border-amber-500 text-amber-400'\n                      : 'bg-slate-800/50 border-slate-700 text-slate-400 hover:border-slate-600'\n                  }`}\n                >\n                  <i className=\"fas fa-search mb-2\"></i>\n                  <div className=\"font-medium\">Spot Check</div>\n                  <div className=\"text-xs text-slate-500\">Count specific items only</div>\n                </button>\n              </div>\n            </div>\n\n            {/* Location */}\n            <div>\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                Location\n              </label>\n              <select\n                value={selectedLocation}\n                onChange={(e) => setSelectedLocation(e.target.value)}\n                className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-200 focus:outline-none focus:border-emerald-500\"\n              >\n                <option value=\"\">Select a location...</option>\n                {state.locations.map(loc => (\n                  <option key={loc.id} value={loc.id}>{loc.name}</option>\n                ))}\n              </select>\n            </div>\n\n            {/* Category Filter (for Cycle Count) */}\n            {countType === 'cycle' && (\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                  Category (Optional)\n                </label>\n                <select\n                  value={selectedCategory}\n                  onChange={(e) => setSelectedCategory(e.target.value)}\n                  className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-200 focus:outline-none focus:border-emerald-500\"\n                >\n                  <option value=\"\">All Categories</option>\n                  {categories.map(cat => (\n                    <option key={cat} value={cat}>{cat}</option>\n                  ))}\n                </select>\n              </div>\n            )}\n\n            {/* Include Filter (for Full/Cycle) */}\n            {countType !== 'spot' && (\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                  Include Items\n                </label>\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={() => setIncludeFilter('all')}\n                    className={`px-4 py-2 rounded-lg border transition-colors ${\n                      includeFilter === 'all'\n                        ? 'bg-emerald-500/20 border-emerald-500 text-emerald-400'\n                        : 'bg-slate-800/50 border-slate-700 text-slate-400'\n                    }`}\n                  >\n                    All Items\n                  </button>\n                  <button\n                    onClick={() => setIncludeFilter('low_stock')}\n                    className={`px-4 py-2 rounded-lg border transition-colors ${\n                      includeFilter === 'low_stock'\n                        ? 'bg-amber-500/20 border-amber-500 text-amber-400'\n                        : 'bg-slate-800/50 border-slate-700 text-slate-400'\n                    }`}\n                  >\n                    Low Stock Only\n                  </button>\n                  <button\n                    onClick={() => setIncludeFilter('high_value')}\n                    className={`px-4 py-2 rounded-lg border transition-colors ${\n                      includeFilter === 'high_value'\n                        ? 'bg-purple-500/20 border-purple-500 text-purple-400'\n                        : 'bg-slate-800/50 border-slate-700 text-slate-400'\n                    }`}\n                  >\n                    High Value Only\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Product Selector (for Spot Check) */}\n            {countType === 'spot' && selectedLocation && (\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                  Select Items to Count ({selectedProducts.length} selected)\n                </label>\n                <div className=\"relative mb-3\">\n                  <i className=\"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-500\"></i>\n                  <input\n                    type=\"text\"\n                    value={productSearch}\n                    onChange={(e) => setProductSearch(e.target.value)}\n                    placeholder=\"Search products...\"\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500\"\n                  />\n                </div>\n                <div className=\"max-h-60 overflow-y-auto space-y-2 border border-slate-700 rounded-lg p-2\">\n                  {filteredProducts.length === 0 ? (\n                    <p className=\"text-center py-4 text-slate-500\">No products found at this location</p>\n                  ) : (\n                    filteredProducts.map(product => (\n                      <label\n                        key={product.id}\n                        className={`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${\n                          selectedProducts.includes(product.id)\n                            ? 'bg-emerald-500/20 border border-emerald-500/30'\n                            : 'hover:bg-slate-800/50 border border-transparent'\n                        }`}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedProducts.includes(product.id)}\n                          onChange={() => toggleProduct(product.id)}\n                          className=\"w-4 h-4 rounded border-slate-600 bg-slate-700 text-emerald-500 focus:ring-emerald-500\"\n                        />\n                        <div className=\"flex-1\">\n                          <div className=\"text-white\">{product.name}</div>\n                          <div className=\"text-xs text-slate-400\">{product.sku}</div>\n                        </div>\n                        <div className=\"text-sm text-slate-400\">\n                          {state.inventory.find(i => i.productId === product.id && i.locationId === selectedLocation)?.quantity || 0} in stock\n                        </div>\n                      </label>\n                    ))\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end gap-3 p-6 border-t border-slate-700/50\">\n            <button\n              onClick={handleClose}\n              className=\"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleCreate}\n              disabled={!countName.trim() || !selectedLocation || (countType === 'spot' && selectedProducts.length === 0)}\n              className=\"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg transition-colors flex items-center gap-2\"\n            >\n              <i className=\"fas fa-plus\"></i>\n              Create Count\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useMemo } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useApp, StockTransfer, TransferItem, Product } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\n\ninterface CreateTransferModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  preselectedProduct?: Product | null;\n}\n\nexport function CreateTransferModal({ isOpen, onClose, preselectedProduct }: CreateTransferModalProps) {\n  const router = useRouter();\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  // Form state\n  const [fromLocation, setFromLocation] = useState('');\n  const [toLocation, setToLocation] = useState('');\n  const [notes, setNotes] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showSearchResults, setShowSearchResults] = useState(false);\n\n  // Transfer items\n  const [transferItems, setTransferItems] = useState<{\n    productId: string;\n    productName: string;\n    sku: string;\n    requestedQty: number;\n  }[]>([]);\n\n  // Get stock at location\n  const getStockAtLocation = (productId: string, locationId: string) => {\n    const inv = state.inventory.find(i => i.productId === productId && i.locationId === locationId);\n    return inv?.quantity || 0;\n  };\n\n  // Available products at source location\n  const availableProducts = useMemo(() => {\n    if (!fromLocation) return [];\n\n    let products = state.products.filter(p => {\n      const stock = getStockAtLocation(p.id, fromLocation);\n      return stock > 0 && !transferItems.some(ti => ti.productId === p.id);\n    });\n\n    if (searchTerm) {\n      const search = searchTerm.toLowerCase();\n      products = products.filter(p =>\n        p.name.toLowerCase().includes(search) ||\n        p.sku.toLowerCase().includes(search)\n      );\n    }\n\n    return products;\n  }, [state.products, state.inventory, fromLocation, searchTerm, transferItems]);\n\n  // Add product to transfer\n  const addProduct = (product: Product) => {\n    const available = getStockAtLocation(product.id, fromLocation);\n    setTransferItems([\n      ...transferItems,\n      {\n        productId: product.id,\n        productName: product.name,\n        sku: product.sku,\n        requestedQty: Math.min(1, available),\n      },\n    ]);\n    setSearchTerm('');\n    setShowSearchResults(false);\n  };\n\n  // Update item quantity\n  const updateItemQty = (index: number, qty: number) => {\n    const item = transferItems[index];\n    const available = getStockAtLocation(item.productId, fromLocation);\n    setTransferItems(\n      transferItems.map((ti, i) =>\n        i === index ? { ...ti, requestedQty: Math.min(Math.max(1, qty), available) } : ti\n      )\n    );\n  };\n\n  // Remove item\n  const removeItem = (index: number) => {\n    setTransferItems(transferItems.filter((_, i) => i !== index));\n  };\n\n  // Generate transfer number\n  const generateTransferNumber = () => {\n    const num = state.transfers.length + 1;\n    return `TRF-${String(num).padStart(4, '0')}`;\n  };\n\n  // Handle create\n  const handleCreate = () => {\n    if (!fromLocation) {\n      error('Please select a source location');\n      return;\n    }\n\n    if (!toLocation) {\n      error('Please select a destination location');\n      return;\n    }\n\n    if (fromLocation === toLocation) {\n      error('Source and destination must be different');\n      return;\n    }\n\n    if (transferItems.length === 0) {\n      error('Please add at least one product to transfer');\n      return;\n    }\n\n    const fromLoc = state.locations.find(l => l.id === fromLocation);\n    const toLoc = state.locations.find(l => l.id === toLocation);\n    const transferNumber = generateTransferNumber();\n\n    const newTransfer: StockTransfer = {\n      id: `trf-${Date.now()}`,\n      transferNumber,\n      status: 'pending',\n      fromLocation,\n      fromLocationName: fromLoc?.name || '',\n      toLocation,\n      toLocationName: toLoc?.name || '',\n      items: transferItems.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        requestedQty: item.requestedQty,\n        shippedQty: 0,\n        receivedQty: 0,\n        status: 'pending' as const,\n      })),\n      notes: notes || undefined,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    dispatch({ type: 'ADD_TRANSFER', payload: newTransfer });\n    success(`Transfer ${transferNumber} created`);\n    handleClose();\n    router.push(`/inventory/transfers/${newTransfer.id}`);\n  };\n\n  // Reset and close\n  const handleClose = () => {\n    setFromLocation('');\n    setToLocation('');\n    setNotes('');\n    setSearchTerm('');\n    setShowSearchResults(false);\n    setTransferItems([]);\n    onClose();\n  };\n\n  // Handle preselected product\n  useMemo(() => {\n    if (preselectedProduct && fromLocation && !transferItems.some(ti => ti.productId === preselectedProduct.id)) {\n      const available = getStockAtLocation(preselectedProduct.id, fromLocation);\n      if (available > 0) {\n        setTransferItems([{\n          productId: preselectedProduct.id,\n          productName: preselectedProduct.name,\n          sku: preselectedProduct.sku,\n          requestedQty: Math.min(1, available),\n        }]);\n      }\n    }\n  }, [preselectedProduct, fromLocation]);\n\n  if (!isOpen) return null;\n\n  const totalUnits = transferItems.reduce((sum, item) => sum + item.requestedQty, 0);\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-center justify-center p-4\">\n        {/* Backdrop */}\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm\" onClick={handleClose}></div>\n\n        {/* Modal */}\n        <div className=\"relative bg-slate-900 border border-slate-700/50 rounded-2xl shadow-2xl w-full max-w-2xl\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-slate-700/50\">\n            <div>\n              <h2 className=\"text-xl font-bold text-white\">Create Stock Transfer</h2>\n              <p className=\"text-sm text-slate-400\">Move inventory between locations</p>\n            </div>\n            <button\n              onClick={handleClose}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\n            >\n              <i className=\"fas fa-times\"></i>\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6 space-y-6 max-h-[60vh] overflow-y-auto\">\n            {/* Location Selection */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                  From Location\n                </label>\n                <select\n                  value={fromLocation}\n                  onChange={(e) => {\n                    setFromLocation(e.target.value);\n                    setTransferItems([]);\n                  }}\n                  className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-200 focus:outline-none focus:border-emerald-500\"\n                >\n                  <option value=\"\">Select source...</option>\n                  {state.locations.map(loc => (\n                    <option key={loc.id} value={loc.id}>{loc.name}</option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                  To Location\n                </label>\n                <select\n                  value={toLocation}\n                  onChange={(e) => setToLocation(e.target.value)}\n                  disabled={!fromLocation}\n                  className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-200 focus:outline-none focus:border-emerald-500 disabled:opacity-50\"\n                >\n                  <option value=\"\">Select destination...</option>\n                  {state.locations\n                    .filter(l => l.id !== fromLocation)\n                    .map(loc => (\n                      <option key={loc.id} value={loc.id}>{loc.name}</option>\n                    ))}\n                </select>\n              </div>\n            </div>\n\n            {/* Visual Arrow */}\n            {fromLocation && toLocation && (\n              <div className=\"flex items-center justify-center gap-4 py-2\">\n                <div className=\"text-slate-400 font-medium\">\n                  {state.locations.find(l => l.id === fromLocation)?.name}\n                </div>\n                <i className=\"fas fa-arrow-right text-emerald-400 text-xl\"></i>\n                <div className=\"text-slate-400 font-medium\">\n                  {state.locations.find(l => l.id === toLocation)?.name}\n                </div>\n              </div>\n            )}\n\n            {/* Add Products */}\n            {fromLocation && (\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                  Add Products to Transfer\n                </label>\n                <div className=\"relative\">\n                  <i className=\"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-500\"></i>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search products at source location...\"\n                    value={searchTerm}\n                    onChange={(e) => {\n                      setSearchTerm(e.target.value);\n                      setShowSearchResults(true);\n                    }}\n                    onFocus={() => setShowSearchResults(true)}\n                    className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500\"\n                  />\n\n                  {/* Search Results Dropdown */}\n                  {showSearchResults && searchTerm && (\n                    <div className=\"absolute top-full left-0 right-0 bg-slate-800 border border-slate-700 rounded-lg mt-1 max-h-60 overflow-y-auto z-10\">\n                      {availableProducts.length === 0 ? (\n                        <div className=\"p-4 text-center text-slate-500\">\n                          No products found\n                        </div>\n                      ) : (\n                        availableProducts.slice(0, 10).map(product => (\n                          <button\n                            key={product.id}\n                            onClick={() => addProduct(product)}\n                            className=\"w-full flex items-center justify-between p-3 hover:bg-slate-700 transition-colors text-left\"\n                          >\n                            <div>\n                              <div className=\"text-white\">{product.name}</div>\n                              <div className=\"text-sm text-slate-400\">{product.sku}</div>\n                            </div>\n                            <div className=\"text-sm text-slate-400\">\n                              {getStockAtLocation(product.id, fromLocation)} available\n                            </div>\n                          </button>\n                        ))\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                {/* Selected Items */}\n                {transferItems.length > 0 && (\n                  <div className=\"mt-4 space-y-2\">\n                    {transferItems.map((item, index) => (\n                      <div key={item.productId} className=\"flex items-center gap-4 p-3 bg-slate-800/50 border border-slate-700/50 rounded-lg\">\n                        <div className=\"flex-1\">\n                          <div className=\"text-white\">{item.productName}</div>\n                          <div className=\"text-sm text-slate-400\">\n                            {item.sku} &bull; Available: {getStockAtLocation(item.productId, fromLocation)}\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <label className=\"text-sm text-slate-400\">Qty:</label>\n                          <input\n                            type=\"number\"\n                            min={1}\n                            max={getStockAtLocation(item.productId, fromLocation)}\n                            value={item.requestedQty}\n                            onChange={(e) => updateItemQty(index, parseInt(e.target.value) || 1)}\n                            className=\"w-20 bg-slate-700/50 border border-slate-600 rounded px-2 py-1 text-white text-center focus:outline-none focus:border-emerald-500\"\n                          />\n                        </div>\n                        <button\n                          onClick={() => removeItem(index)}\n                          className=\"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors\"\n                        >\n                          <i className=\"fas fa-times\"></i>\n                        </button>\n                      </div>\n                    ))}\n\n                    <div className=\"flex justify-end pt-2 text-slate-400\">\n                      Total: {transferItems.length} product{transferItems.length !== 1 ? 's' : ''}, {totalUnits} unit{totalUnits !== 1 ? 's' : ''}\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Notes */}\n            <div>\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                Notes (optional)\n              </label>\n              <textarea\n                value={notes}\n                onChange={(e) => setNotes(e.target.value)}\n                placeholder=\"Reason for transfer, special instructions...\"\n                rows={3}\n                className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500 resize-none\"\n              />\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end gap-3 p-6 border-t border-slate-700/50\">\n            <button\n              onClick={handleClose}\n              className=\"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleCreate}\n              disabled={!fromLocation || !toLocation || transferItems.length === 0}\n              className=\"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg transition-colors flex items-center gap-2\"\n            >\n              <i className=\"fas fa-exchange-alt\"></i>\n              Create Transfer\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Toggle } from '@/components/ui/Toggle';\nimport { useApp, AutomationRule, RuleTrigger, RuleCondition, RuleAction, conditionFields } from '@/context/AppContext';\nimport { useToast } from '@/components/ui/Toast';\nimport {\n  ruleTemplates,\n  triggerOptions,\n  actionOptions,\n  operatorOptions,\n  priorityOptions,\n  carrierOptions,\n  serviceOptions,\n  RuleTemplate\n} from '@/lib/ruleTemplates';\nimport { getTriggerLabel, getActionLabel } from '@/lib/automationEngine';\nimport {\n  Zap,\n  ChevronRight,\n  ChevronLeft,\n  Plus,\n  X,\n  ShoppingCart,\n  ArrowLeftRight,\n  AlertTriangle,\n  PackageCheck,\n  Clock,\n  Hand,\n  Tag,\n  Flag,\n  Truck,\n  Package,\n  Box,\n  Bell,\n  FileText,\n  Mail,\n  MapPin,\n  Sparkles,\n  Filter,\n  Play,\n  Check\n} from 'lucide-react';\n\ninterface AutomationRuleModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  editRule?: AutomationRule | null;\n}\n\ntype Step = 'template' | 'basic' | 'trigger' | 'conditions' | 'actions' | 'review';\n\nconst stepOrder: Step[] = ['template', 'basic', 'trigger', 'conditions', 'actions', 'review'];\n\n// Icon mapping for triggers\nconst triggerIcons: Record<string, React.ComponentType<any>> = {\n  order_created: ShoppingCart,\n  order_status_changed: ArrowLeftRight,\n  low_stock: AlertTriangle,\n  item_received: PackageCheck,\n  daily: Clock,\n  manual: Hand\n};\n\n// Icon mapping for actions\nconst actionIcons: Record<string, React.ComponentType<any>> = {\n  set_order_tag: Tag,\n  set_priority: Flag,\n  assign_carrier: Truck,\n  assign_service: Package,\n  select_box: Box,\n  send_notification: Bell,\n  add_fulfillment_item: Plus,\n  create_po_draft: FileText,\n  send_email: Mail,\n  set_location: MapPin\n};\n\nexport function AutomationRuleModal({ isOpen, onClose, editRule }: AutomationRuleModalProps) {\n  const { state, dispatch } = useApp();\n  const { success, error } = useToast();\n\n  const isEditing = !!editRule;\n\n  // Step navigation\n  const [currentStep, setCurrentStep] = useState<Step>('template');\n\n  // Form state\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [enabled, setEnabled] = useState(true);\n  const [priority, setPriority] = useState(10);\n  const [trigger, setTrigger] = useState<RuleTrigger>({ type: 'order_created' });\n  const [conditions, setConditions] = useState<RuleCondition[]>([]);\n  const [actions, setActions] = useState<RuleAction[]>([]);\n\n  // Additional trigger config\n  const [triggerFromStatus, setTriggerFromStatus] = useState('');\n  const [triggerToStatus, setTriggerToStatus] = useState('');\n  const [triggerThreshold, setTriggerThreshold] = useState(50);\n  const [triggerTime, setTriggerTime] = useState('09:00');\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Reset form when modal opens/closes\n  useEffect(() => {\n    if (isOpen) {\n      if (editRule) {\n        setName(editRule.name);\n        setDescription(editRule.description || '');\n        setEnabled(editRule.enabled);\n        setPriority(editRule.priority);\n        setTrigger(editRule.trigger);\n        setConditions(editRule.conditions);\n        setActions(editRule.actions);\n        setCurrentStep('basic'); // Skip template selection when editing\n\n        // Set trigger-specific values\n        if (editRule.trigger.type === 'order_status_changed') {\n          const t = editRule.trigger as { type: 'order_status_changed'; fromStatus?: string; toStatus?: string };\n          setTriggerFromStatus(t.fromStatus || '');\n          setTriggerToStatus(t.toStatus || '');\n        } else if (editRule.trigger.type === 'low_stock') {\n          const t = editRule.trigger as { type: 'low_stock'; threshold?: number };\n          setTriggerThreshold(t.threshold || 50);\n        } else if (editRule.trigger.type === 'daily') {\n          const t = editRule.trigger as { type: 'daily'; time: string };\n          setTriggerTime(t.time || '09:00');\n        }\n      } else {\n        // Reset to defaults for new rule\n        setName('');\n        setDescription('');\n        setEnabled(true);\n        setPriority(10);\n        setTrigger({ type: 'order_created' });\n        setConditions([]);\n        setActions([]);\n        setTriggerFromStatus('');\n        setTriggerToStatus('');\n        setTriggerThreshold(50);\n        setTriggerTime('09:00');\n        setCurrentStep('template');\n      }\n    }\n  }, [isOpen, editRule]);\n\n  // Get current step index\n  const currentStepIndex = stepOrder.indexOf(currentStep);\n\n  // Navigation helpers\n  const canGoBack = currentStepIndex > (isEditing ? 1 : 0);\n  const canGoNext = currentStepIndex < stepOrder.length - 1;\n\n  const goBack = () => {\n    if (canGoBack) {\n      setCurrentStep(stepOrder[currentStepIndex - 1]);\n    }\n  };\n\n  const goNext = () => {\n    if (canGoNext) {\n      setCurrentStep(stepOrder[currentStepIndex + 1]);\n    }\n  };\n\n  // Validation for each step\n  const isStepValid = useMemo(() => {\n    switch (currentStep) {\n      case 'template':\n        return true; // Can always skip templates\n      case 'basic':\n        return name.trim().length > 0;\n      case 'trigger':\n        return true; // Always valid, defaults provided\n      case 'conditions':\n        return true; // Optional, always valid\n      case 'actions':\n        return actions.length > 0;\n      case 'review':\n        return name.trim().length > 0 && actions.length > 0;\n      default:\n        return false;\n    }\n  }, [currentStep, name, actions]);\n\n  // Apply template\n  const applyTemplate = (template: RuleTemplate) => {\n    setName(template.name);\n    setDescription(template.description);\n    setTrigger(template.trigger);\n    setConditions(template.conditions.map(c => ({ ...c, id: crypto.randomUUID() })));\n    setActions(template.actions.map(a => ({ ...a, id: crypto.randomUUID() })));\n\n    // Set trigger-specific values\n    if (template.trigger.type === 'low_stock') {\n      const t = template.trigger as { type: 'low_stock'; threshold?: number };\n      setTriggerThreshold(t.threshold || 50);\n    }\n\n    setCurrentStep('basic');\n  };\n\n  // Add condition\n  const addCondition = () => {\n    const newCondition: RuleCondition = {\n      id: crypto.randomUUID(),\n      field: '',\n      operator: 'equals',\n      value: ''\n    };\n    setConditions([...conditions, newCondition]);\n  };\n\n  // Update condition\n  const updateCondition = (index: number, field: keyof RuleCondition, value: any) => {\n    const updated = [...conditions];\n    updated[index] = { ...updated[index], [field]: value };\n    setConditions(updated);\n  };\n\n  // Remove condition\n  const removeCondition = (index: number) => {\n    setConditions(conditions.filter((_, i) => i !== index));\n  };\n\n  // Add action\n  const addAction = () => {\n    const newAction: RuleAction = {\n      id: crypto.randomUUID(),\n      type: 'set_order_tag',\n      config: {}\n    };\n    setActions([...actions, newAction]);\n  };\n\n  // Update action\n  const updateAction = (index: number, field: string, value: any) => {\n    const updated = [...actions];\n    if (field === 'type') {\n      updated[index] = { ...updated[index], type: value, config: {} };\n    } else {\n      updated[index] = { ...updated[index], [field]: value };\n    }\n    setActions(updated);\n  };\n\n  // Update action config\n  const updateActionConfig = (index: number, configKey: string, value: any) => {\n    const updated = [...actions];\n    updated[index] = {\n      ...updated[index],\n      config: { ...updated[index].config, [configKey]: value }\n    };\n    setActions(updated);\n  };\n\n  // Remove action\n  const removeAction = (index: number) => {\n    setActions(actions.filter((_, i) => i !== index));\n  };\n\n  // Build final trigger object\n  const buildTrigger = (): RuleTrigger => {\n    switch (trigger.type) {\n      case 'order_status_changed':\n        return {\n          type: 'order_status_changed',\n          ...(triggerFromStatus && { fromStatus: triggerFromStatus }),\n          ...(triggerToStatus && { toStatus: triggerToStatus })\n        };\n      case 'low_stock':\n        return { type: 'low_stock', threshold: triggerThreshold };\n      case 'daily':\n        return { type: 'daily', time: triggerTime };\n      default:\n        return trigger;\n    }\n  };\n\n  // Save rule\n  const handleSave = () => {\n    if (!isStepValid) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const ruleData: AutomationRule = {\n        id: editRule?.id || crypto.randomUUID(),\n        name: name.trim(),\n        description: description.trim() || undefined,\n        enabled,\n        trigger: buildTrigger(),\n        conditions,\n        actions,\n        priority,\n        createdAt: editRule?.createdAt || new Date(),\n        updatedAt: new Date()\n      };\n\n      if (isEditing) {\n        dispatch({ type: 'UPDATE_AUTOMATION_RULE', payload: ruleData });\n        success(`Rule \"${name}\" updated`);\n      } else {\n        dispatch({ type: 'ADD_AUTOMATION_RULE', payload: ruleData });\n        success(`Rule \"${name}\" created`);\n      }\n\n      onClose();\n    } catch (err) {\n      error('Failed to save rule');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Get fields for current trigger type\n  const getFieldsForTrigger = () => {\n    if (['order_created', 'order_status_changed'].includes(trigger.type)) {\n      return conditionFields.order;\n    }\n    if (['low_stock', 'item_received'].includes(trigger.type)) {\n      return conditionFields.inventory;\n    }\n    return conditionFields.order;\n  };\n\n  // Render step content\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 'template':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center pb-4\">\n              <Sparkles className=\"w-12 h-12 text-emerald-400 mx-auto mb-3\" />\n              <h3 className=\"text-lg font-medium text-white\">Start with a Template</h3>\n              <p className=\"text-sm text-slate-400 mt-1\">Choose a pre-built rule or start from scratch</p>\n            </div>\n\n            <div className=\"grid grid-cols-1 gap-3 max-h-80 overflow-y-auto pr-2\">\n              {ruleTemplates.map(template => (\n                <button\n                  key={template.id}\n                  onClick={() => applyTemplate(template)}\n                  className=\"text-left p-4 rounded-lg bg-slate-800/50 border border-slate-700/50 hover:border-emerald-500/50 hover:bg-slate-800 transition-all\"\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"flex-shrink-0 w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center\">\n                      <Zap className=\"w-5 h-5 text-emerald-400\" />\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-white truncate\">{template.name}</p>\n                      <p className=\"text-xs text-slate-400 mt-0.5 line-clamp-2\">{template.description}</p>\n                      <div className=\"flex items-center gap-2 mt-2\">\n                        <span className=\"px-2 py-0.5 rounded bg-slate-700 text-xs text-slate-300\">\n                          {getTriggerLabel(template.trigger)}\n                        </span>\n                        <span className=\"text-xs text-slate-500\">\n                          {template.actions.length} action{template.actions.length !== 1 ? 's' : ''}\n                        </span>\n                      </div>\n                    </div>\n                    <ChevronRight className=\"w-5 h-5 text-slate-500 flex-shrink-0\" />\n                  </div>\n                </button>\n              ))}\n            </div>\n\n            <div className=\"pt-4 border-t border-slate-700/50\">\n              <Button variant=\"secondary\" className=\"w-full\" onClick={() => setCurrentStep('basic')}>\n                <Plus className=\"w-4 h-4\" />\n                Start from Scratch\n              </Button>\n            </div>\n          </div>\n        );\n\n      case 'basic':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Rule Name *</label>\n              <input\n                type=\"text\"\n                value={name}\n                onChange={e => setName(e.target.value)}\n                placeholder=\"e.g., Auto-assign USPS for orders under $50\"\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                autoFocus\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-1.5\">Description (Optional)</label>\n              <textarea\n                value={description}\n                onChange={e => setDescription(e.target.value)}\n                placeholder=\"What does this rule do?\"\n                rows={3}\n                className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 resize-none\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm text-slate-400 mb-1.5\">Priority</label>\n                <input\n                  type=\"number\"\n                  min={1}\n                  max={100}\n                  value={priority}\n                  onChange={e => setPriority(parseInt(e.target.value) || 10)}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n                />\n                <p className=\"text-xs text-slate-500 mt-1\">Lower numbers run first</p>\n              </div>\n              <div className=\"flex items-end pb-6\">\n                <div className=\"w-full bg-slate-800/50 border border-slate-700/50 rounded-lg p-4\">\n                  <Toggle\n                    checked={enabled}\n                    onChange={setEnabled}\n                    label=\"Enabled\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'trigger':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm text-slate-400 mb-3\">When should this rule run?</label>\n              <div className=\"grid grid-cols-2 gap-3\">\n                {triggerOptions.map(option => {\n                  const Icon = triggerIcons[option.type] || Zap;\n                  const isSelected = trigger.type === option.type;\n                  return (\n                    <button\n                      key={option.type}\n                      onClick={() => setTrigger({ type: option.type } as RuleTrigger)}\n                      className={`p-4 border rounded-lg text-left transition-all ${\n                        isSelected\n                          ? 'border-emerald-500 bg-emerald-500/10'\n                          : 'border-slate-700 hover:border-slate-600 bg-slate-800/50'\n                      }`}\n                    >\n                      <Icon className={`w-5 h-5 mb-2 ${isSelected ? 'text-emerald-400' : 'text-slate-400'}`} />\n                      <div className={`font-medium ${isSelected ? 'text-white' : 'text-slate-300'}`}>\n                        {option.label}\n                      </div>\n                      <div className=\"text-xs text-slate-400 mt-0.5\">{option.description}</div>\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Trigger-specific config */}\n            {trigger.type === 'order_status_changed' && (\n              <div className=\"bg-slate-800/50 rounded-lg p-4 space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm text-slate-400 mb-1.5\">From Status (Optional)</label>\n                    <select\n                      value={triggerFromStatus}\n                      onChange={e => setTriggerFromStatus(e.target.value)}\n                      className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n                    >\n                      <option value=\"\">Any status</option>\n                      <option value=\"to_pick\">To Pick</option>\n                      <option value=\"picking\">Picking</option>\n                      <option value=\"to_pack\">To Pack</option>\n                      <option value=\"packing\">Packing</option>\n                      <option value=\"ready\">Ready</option>\n                      <option value=\"shipped\">Shipped</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm text-slate-400 mb-1.5\">To Status (Optional)</label>\n                    <select\n                      value={triggerToStatus}\n                      onChange={e => setTriggerToStatus(e.target.value)}\n                      className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n                    >\n                      <option value=\"\">Any status</option>\n                      <option value=\"to_pick\">To Pick</option>\n                      <option value=\"picking\">Picking</option>\n                      <option value=\"to_pack\">To Pack</option>\n                      <option value=\"packing\">Packing</option>\n                      <option value=\"ready\">Ready</option>\n                      <option value=\"shipped\">Shipped</option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {trigger.type === 'low_stock' && (\n              <div className=\"bg-slate-800/50 rounded-lg p-4\">\n                <label className=\"block text-sm text-slate-400 mb-1.5\">Stock Threshold</label>\n                <input\n                  type=\"number\"\n                  min={0}\n                  value={triggerThreshold}\n                  onChange={e => setTriggerThreshold(parseInt(e.target.value) || 50)}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n                />\n                <p className=\"text-xs text-slate-500 mt-1\">Rule triggers when stock falls to or below this level</p>\n              </div>\n            )}\n\n            {trigger.type === 'daily' && (\n              <div className=\"bg-slate-800/50 rounded-lg p-4\">\n                <label className=\"block text-sm text-slate-400 mb-1.5\">Run Time</label>\n                <input\n                  type=\"time\"\n                  value={triggerTime}\n                  onChange={e => setTriggerTime(e.target.value)}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50\"\n                />\n              </div>\n            )}\n          </div>\n        );\n\n      case 'conditions':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <label className=\"block text-sm text-slate-400\">Conditions (Optional)</label>\n                <p className=\"text-xs text-slate-500 mt-0.5\">Only run this rule when these conditions are met</p>\n              </div>\n              <Button variant=\"secondary\" size=\"sm\" onClick={addCondition}>\n                <Plus className=\"w-4 h-4\" />\n                Add\n              </Button>\n            </div>\n\n            {conditions.length === 0 ? (\n              <div className=\"text-center py-8 text-slate-400\">\n                <Filter className=\"w-10 h-10 mx-auto mb-2 opacity-50\" />\n                <p className=\"text-sm\">No conditions - rule will run for all matching triggers</p>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {conditions.map((condition, index) => (\n                  <div key={condition.id} className=\"flex items-center gap-2 p-3 bg-slate-800/50 rounded-lg\">\n                    {index > 0 && (\n                      <span className=\"text-xs text-slate-500 px-2\">AND</span>\n                    )}\n                    <select\n                      value={condition.field}\n                      onChange={e => updateCondition(index, 'field', e.target.value)}\n                      className=\"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                    >\n                      <option value=\"\">Select field...</option>\n                      {getFieldsForTrigger().map(field => (\n                        <option key={field.value} value={field.value}>{field.label}</option>\n                      ))}\n                    </select>\n                    <select\n                      value={condition.operator}\n                      onChange={e => updateCondition(index, 'operator', e.target.value)}\n                      className=\"w-36 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                    >\n                      {operatorOptions.map(op => (\n                        <option key={op.value} value={op.value}>{op.label}</option>\n                      ))}\n                    </select>\n                    <input\n                      type=\"text\"\n                      value={condition.value as string}\n                      onChange={e => updateCondition(index, 'value', e.target.value)}\n                      placeholder=\"Value...\"\n                      className=\"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                    />\n                    <button\n                      onClick={() => removeCondition(index)}\n                      className=\"p-2 text-slate-400 hover:text-red-400 transition-colors\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        );\n\n      case 'actions':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <label className=\"block text-sm text-slate-400\">Actions *</label>\n                <p className=\"text-xs text-slate-500 mt-0.5\">What should happen when this rule triggers?</p>\n              </div>\n              <Button variant=\"secondary\" size=\"sm\" onClick={addAction}>\n                <Plus className=\"w-4 h-4\" />\n                Add\n              </Button>\n            </div>\n\n            {actions.length === 0 ? (\n              <div className=\"text-center py-8 text-slate-400 border-2 border-dashed border-slate-700 rounded-lg\">\n                <Play className=\"w-10 h-10 mx-auto mb-2 opacity-50\" />\n                <p className=\"text-sm\">Add at least one action</p>\n                <Button variant=\"secondary\" size=\"sm\" className=\"mt-3\" onClick={addAction}>\n                  <Plus className=\"w-4 h-4\" />\n                  Add Action\n                </Button>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {actions.map((action, index) => {\n                  const ActionIcon = actionIcons[action.type] || Zap;\n                  return (\n                    <div key={action.id} className=\"p-4 bg-slate-800/50 rounded-lg border border-slate-700/50\">\n                      <div className=\"flex items-center gap-3 mb-3\">\n                        <div className=\"w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center\">\n                          <ActionIcon className=\"w-4 h-4 text-emerald-400\" />\n                        </div>\n                        <select\n                          value={action.type}\n                          onChange={e => updateAction(index, 'type', e.target.value)}\n                          className=\"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                        >\n                          <option value=\"\">Select action...</option>\n                          {actionOptions.map(opt => (\n                            <option key={opt.type} value={opt.type}>{opt.label}</option>\n                          ))}\n                        </select>\n                        <button\n                          onClick={() => removeAction(index)}\n                          className=\"p-2 text-slate-400 hover:text-red-400 transition-colors\"\n                        >\n                          <X className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n\n                      {/* Action-specific config */}\n                      {action.type === 'set_order_tag' && (\n                        <input\n                          type=\"text\"\n                          value={action.config.tag || ''}\n                          onChange={e => updateActionConfig(index, 'tag', e.target.value)}\n                          placeholder=\"Tag name (e.g., PRIORITY, FRAGILE)\"\n                          className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                        />\n                      )}\n\n                      {action.type === 'set_priority' && (\n                        <select\n                          value={action.config.priority || ''}\n                          onChange={e => updateActionConfig(index, 'priority', e.target.value)}\n                          className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                        >\n                          <option value=\"\">Select priority...</option>\n                          {priorityOptions.map(opt => (\n                            <option key={opt.value} value={opt.value}>{opt.label}</option>\n                          ))}\n                        </select>\n                      )}\n\n                      {action.type === 'assign_carrier' && (\n                        <select\n                          value={action.config.carrier || ''}\n                          onChange={e => updateActionConfig(index, 'carrier', e.target.value)}\n                          className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                        >\n                          <option value=\"\">Select carrier...</option>\n                          {carrierOptions.map(opt => (\n                            <option key={opt.value} value={opt.value}>{opt.label}</option>\n                          ))}\n                        </select>\n                      )}\n\n                      {action.type === 'assign_service' && (\n                        <div className=\"grid grid-cols-2 gap-2\">\n                          <select\n                            value={action.config.carrier || ''}\n                            onChange={e => updateActionConfig(index, 'carrier', e.target.value)}\n                            className=\"bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                          >\n                            <option value=\"\">Carrier...</option>\n                            {carrierOptions.map(opt => (\n                              <option key={opt.value} value={opt.value}>{opt.label}</option>\n                            ))}\n                          </select>\n                          <select\n                            value={action.config.service || ''}\n                            onChange={e => updateActionConfig(index, 'service', e.target.value)}\n                            className=\"bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                          >\n                            <option value=\"\">Service...</option>\n                            {(serviceOptions[action.config.carrier] || []).map(opt => (\n                              <option key={opt.value} value={opt.value}>{opt.label}</option>\n                            ))}\n                          </select>\n                        </div>\n                      )}\n\n                      {action.type === 'select_box' && (\n                        <select\n                          value={action.config.boxId || ''}\n                          onChange={e => updateActionConfig(index, 'boxId', e.target.value)}\n                          className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                        >\n                          <option value=\"\">Select box...</option>\n                          {state.boxes.map(box => (\n                            <option key={box.id} value={box.id}>{box.name}</option>\n                          ))}\n                        </select>\n                      )}\n\n                      {action.type === 'add_fulfillment_item' && (\n                        <div className=\"flex gap-2\">\n                          <select\n                            value={action.config.productId || ''}\n                            onChange={e => updateActionConfig(index, 'productId', e.target.value)}\n                            className=\"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                          >\n                            <option value=\"\">Select product...</option>\n                            {state.products.map(p => (\n                              <option key={p.id} value={p.id}>{p.name} ({p.sku})</option>\n                            ))}\n                          </select>\n                          <input\n                            type=\"number\"\n                            min={1}\n                            value={action.config.quantity || 1}\n                            onChange={e => updateActionConfig(index, 'quantity', parseInt(e.target.value) || 1)}\n                            className=\"w-20 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                          />\n                        </div>\n                      )}\n\n                      {action.type === 'send_notification' && (\n                        <input\n                          type=\"text\"\n                          value={action.config.message || ''}\n                          onChange={e => updateActionConfig(index, 'message', e.target.value)}\n                          placeholder=\"Notification message...\"\n                          className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                        />\n                      )}\n\n                      {action.type === 'create_po_draft' && (\n                        <input\n                          type=\"number\"\n                          min={1}\n                          value={action.config.quantity || 100}\n                          onChange={e => updateActionConfig(index, 'quantity', parseInt(e.target.value) || 100)}\n                          placeholder=\"Quantity to order...\"\n                          className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                        />\n                      )}\n\n                      {action.type === 'send_email' && (\n                        <div className=\"space-y-2\">\n                          <input\n                            type=\"email\"\n                            value={action.config.recipient || ''}\n                            onChange={e => updateActionConfig(index, 'recipient', e.target.value)}\n                            placeholder=\"Recipient email...\"\n                            className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                          />\n                          <input\n                            type=\"text\"\n                            value={action.config.subject || ''}\n                            onChange={e => updateActionConfig(index, 'subject', e.target.value)}\n                            placeholder=\"Email subject...\"\n                            className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50\"\n                          />\n                        </div>\n                      )}\n\n                      {action.type === 'set_location' && (\n                        <select\n                          value={action.config.locationId || ''}\n                          onChange={e => updateActionConfig(index, 'locationId', e.target.value)}\n                          className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500/50\"\n                        >\n                          <option value=\"\">Select location...</option>\n                          {state.locations.map(loc => (\n                            <option key={loc.id} value={loc.id}>{loc.name}</option>\n                          ))}\n                        </select>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        );\n\n      case 'review':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center pb-4\">\n              <div className=\"w-16 h-16 rounded-full bg-emerald-500/20 flex items-center justify-center mx-auto mb-3\">\n                <Check className=\"w-8 h-8 text-emerald-400\" />\n              </div>\n              <h3 className=\"text-lg font-medium text-white\">Review Your Rule</h3>\n              <p className=\"text-sm text-slate-400 mt-1\">Make sure everything looks correct</p>\n            </div>\n\n            <div className=\"space-y-4\">\n              {/* Name & Description */}\n              <div className=\"bg-slate-800/50 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-lg font-medium text-white\">{name}</span>\n                  <span className={`px-2 py-0.5 rounded-full text-xs ${\n                    enabled ? 'bg-emerald-500/20 text-emerald-400' : 'bg-slate-600/50 text-slate-400'\n                  }`}>\n                    {enabled ? 'Active' : 'Disabled'}\n                  </span>\n                </div>\n                {description && <p className=\"text-sm text-slate-400\">{description}</p>}\n              </div>\n\n              {/* Trigger */}\n              <div className=\"bg-slate-800/50 rounded-lg p-4\">\n                <div className=\"text-xs text-slate-500 uppercase mb-2\">Trigger</div>\n                <div className=\"flex items-center gap-2\">\n                  <Zap className=\"w-4 h-4 text-emerald-400\" />\n                  <span className=\"text-white\">{getTriggerLabel(buildTrigger())}</span>\n                </div>\n              </div>\n\n              {/* Conditions */}\n              <div className=\"bg-slate-800/50 rounded-lg p-4\">\n                <div className=\"text-xs text-slate-500 uppercase mb-2\">Conditions</div>\n                {conditions.length === 0 ? (\n                  <span className=\"text-slate-400 text-sm\">No conditions (runs for all matching triggers)</span>\n                ) : (\n                  <div className=\"space-y-1\">\n                    {conditions.map((cond, i) => {\n                      const field = getFieldsForTrigger().find(f => f.value === cond.field);\n                      return (\n                        <div key={cond.id} className=\"flex items-center gap-2 text-sm\">\n                          {i > 0 && <span className=\"text-slate-500\">AND</span>}\n                          <span className=\"text-white\">{field?.label || cond.field}</span>\n                          <span className=\"text-slate-400\">{cond.operator.replace('_', ' ')}</span>\n                          <span className=\"text-emerald-400\">{String(cond.value)}</span>\n                        </div>\n                      );\n                    })}\n                  </div>\n                )}\n              </div>\n\n              {/* Actions */}\n              <div className=\"bg-slate-800/50 rounded-lg p-4\">\n                <div className=\"text-xs text-slate-500 uppercase mb-2\">Actions ({actions.length})</div>\n                <div className=\"space-y-2\">\n                  {actions.map(action => (\n                    <div key={action.id} className=\"flex items-center gap-2 text-sm\">\n                      <Play className=\"w-3 h-3 text-emerald-400\" />\n                      <span className=\"text-white\">{getActionLabel(action)}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  // Step indicator\n  const renderStepIndicator = () => {\n    const visibleSteps = isEditing ? stepOrder.slice(1) : stepOrder;\n    const adjustedIndex = isEditing ? currentStepIndex - 1 : currentStepIndex;\n\n    return (\n      <div className=\"flex items-center justify-center gap-2 mb-6\">\n        {visibleSteps.map((step, index) => (\n          <div key={step} className=\"flex items-center\">\n            <div\n              className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${\n                index === adjustedIndex\n                  ? 'bg-emerald-500 text-white'\n                  : index < adjustedIndex\n                  ? 'bg-emerald-500/20 text-emerald-400'\n                  : 'bg-slate-700 text-slate-400'\n              }`}\n            >\n              {index < adjustedIndex ? <Check className=\"w-4 h-4\" /> : index + 1}\n            </div>\n            {index < visibleSteps.length - 1 && (\n              <div className={`w-8 h-0.5 mx-1 ${\n                index < adjustedIndex ? 'bg-emerald-500/50' : 'bg-slate-700'\n              }`} />\n            )}\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Automation Rule' : 'Create Automation Rule'}\n      subtitle={currentStep === 'template' ? 'Choose a template or start from scratch' : undefined}\n      size=\"lg\"\n      footer={\n        currentStep !== 'template' ? (\n          <>\n            <Button variant=\"secondary\" onClick={canGoBack ? goBack : onClose}>\n              {canGoBack ? (\n                <>\n                  <ChevronLeft className=\"w-4 h-4\" />\n                  Back\n                </>\n              ) : (\n                'Cancel'\n              )}\n            </Button>\n            {currentStep === 'review' ? (\n              <Button onClick={handleSave} disabled={isSubmitting || !isStepValid}>\n                {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Create Rule'}\n              </Button>\n            ) : (\n              <Button onClick={goNext} disabled={!isStepValid}>\n                Next\n                <ChevronRight className=\"w-4 h-4\" />\n              </Button>\n            )}\n          </>\n        ) : undefined\n      }\n    >\n      {currentStep !== 'template' && renderStepIndicator()}\n      {renderStepContent()}\n    </Modal>\n  );\n}\n\nexport default AutomationRuleModal;\n","import type {\n  AutomationRule,\n  RuleCondition,\n  RuleAction,\n  Order\n} from '@/context/AppContext';\n\n// Evaluate a single condition against a context\nexport function evaluateCondition(\n  condition: RuleCondition,\n  context: Record<string, any>\n): boolean {\n  const fieldValue = context[condition.field];\n\n  // Handle special case for contains_sku which is a function\n  if (condition.field === 'contains_sku' && typeof context.contains_sku === 'function') {\n    return context.contains_sku(condition.value);\n  }\n\n  switch (condition.operator) {\n    case 'equals':\n      return fieldValue === condition.value;\n    case 'not_equals':\n      return fieldValue !== condition.value;\n    case 'contains':\n      return String(fieldValue).toLowerCase().includes(String(condition.value).toLowerCase());\n    case 'greater_than':\n      return Number(fieldValue) > Number(condition.value);\n    case 'less_than':\n      return Number(fieldValue) < Number(condition.value);\n    case 'in_list':\n      if (Array.isArray(condition.value)) {\n        return condition.value.includes(fieldValue);\n      }\n      return false;\n    default:\n      return false;\n  }\n}\n\n// Evaluate all conditions (AND logic by default)\nexport function evaluateConditions(\n  conditions: RuleCondition[],\n  context: Record<string, any>\n): boolean {\n  if (conditions.length === 0) return true;\n\n  return conditions.every(condition => evaluateCondition(condition, context));\n}\n\n// Execute a single action\nexport function executeAction(\n  action: RuleAction,\n  context: Record<string, any>,\n  dispatch: React.Dispatch<any>\n): void {\n  const order = context.order as Order;\n\n  switch (action.type) {\n    case 'set_order_tag':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            tags: [...(order.tags || []), action.config.tag],\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'set_priority':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            priority: action.config.priority,\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'assign_carrier':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            suggestedCarrier: action.config.carrier,\n            carrier: action.config.carrier,\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'assign_service':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            suggestedService: action.config.service,\n            service: action.config.service,\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'select_box':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            suggestedBoxId: action.config.boxId,\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'add_fulfillment_item':\n      if (order) {\n        dispatch({\n          type: 'UPDATE_ORDER',\n          payload: {\n            ...order,\n            fulfillmentItems: [\n              ...(order.fulfillmentItems || []),\n              {\n                productId: action.config.productId,\n                quantity: action.config.quantity || 1,\n                reason: 'automation_rule'\n              }\n            ],\n            updatedAt: new Date()\n          }\n        });\n      }\n      break;\n\n    case 'send_notification':\n      // In a real app, this would trigger a notification system\n      console.log(`[Automation] Notification: ${action.config.message}`);\n      break;\n\n    case 'create_po_draft':\n      // In a real app, this would create a PO draft\n      console.log(`[Automation] Create PO draft with quantity: ${action.config.quantity}`);\n      break;\n\n    case 'send_email':\n      // In a real app, this would send an email\n      console.log(`[Automation] Send email to: ${action.config.recipient}`);\n      break;\n\n    case 'set_location':\n      // Set preferred fulfillment location\n      console.log(`[Automation] Set location: ${action.config.locationId}`);\n      break;\n\n    default:\n      console.warn(`[Automation] Unknown action type: ${action.type}`);\n  }\n}\n\n// Execute all actions for a rule\nexport function executeActions(\n  actions: RuleAction[],\n  context: Record<string, any>,\n  dispatch: React.Dispatch<any>\n): void {\n  actions.forEach(action => {\n    executeAction(action, context, dispatch);\n  });\n}\n\n// Build context object from an order\nexport function buildOrderContext(order: Order): Record<string, any> {\n  const itemCount = order.items.reduce((sum, item) => sum + item.quantity, 0);\n\n  return {\n    order,\n    channel: order.channel,\n    total: order.total,\n    subtotal: order.subtotal,\n    item_count: itemCount,\n    shipping_country: order.customer?.address?.country || '',\n    shipping_state: order.customer?.address?.state || '',\n    shipping_city: order.customer?.address?.city || '',\n    customer_email: order.customer?.email || '',\n    customer_name: order.customer?.name || '',\n    contains_sku: (sku: string) => order.items.some(item =>\n      item.sku?.toLowerCase().includes(sku.toLowerCase())\n    ),\n    weight: order.totalWeight || 0,\n    is_prime: order.isPrime || false,\n    requires_signature: order.requiresSignature || false,\n    order_number: order.orderNumber,\n    status: order.status\n  };\n}\n\n// Run all matching rules for a specific trigger\nexport function runRulesForTrigger(\n  triggerType: string,\n  context: Record<string, any>,\n  rules: AutomationRule[],\n  dispatch: React.Dispatch<any>\n): { rulesRun: number; actionsExecuted: number } {\n  let rulesRun = 0;\n  let actionsExecuted = 0;\n\n  // Filter enabled rules with matching trigger, sorted by priority\n  const matchingRules = rules\n    .filter(rule => rule.enabled && rule.trigger.type === triggerType)\n    .sort((a, b) => a.priority - b.priority);\n\n  matchingRules.forEach(rule => {\n    if (evaluateConditions(rule.conditions, context)) {\n      executeActions(rule.actions, context, dispatch);\n      rulesRun++;\n      actionsExecuted += rule.actions.length;\n    }\n  });\n\n  return { rulesRun, actionsExecuted };\n}\n\n// Helper to run rules when an order is created\nexport function runOrderCreatedRules(\n  order: Order,\n  rules: AutomationRule[],\n  dispatch: React.Dispatch<any>\n): { rulesRun: number; actionsExecuted: number } {\n  const context = buildOrderContext(order);\n  return runRulesForTrigger('order_created', context, rules, dispatch);\n}\n\n// Helper to run rules when order status changes\nexport function runOrderStatusChangedRules(\n  order: Order,\n  fromStatus: string,\n  toStatus: string,\n  rules: AutomationRule[],\n  dispatch: React.Dispatch<any>\n): { rulesRun: number; actionsExecuted: number } {\n  const context = {\n    ...buildOrderContext(order),\n    from_status: fromStatus,\n    to_status: toStatus\n  };\n\n  // Filter rules that match the status change\n  const statusRules = rules.filter(rule => {\n    if (rule.trigger.type !== 'order_status_changed') return false;\n    const trigger = rule.trigger as { type: 'order_status_changed'; fromStatus?: string; toStatus?: string };\n\n    // Check if fromStatus matches (if specified)\n    if (trigger.fromStatus && trigger.fromStatus !== fromStatus) return false;\n    // Check if toStatus matches (if specified)\n    if (trigger.toStatus && trigger.toStatus !== toStatus) return false;\n\n    return true;\n  });\n\n  let rulesRun = 0;\n  let actionsExecuted = 0;\n\n  statusRules\n    .filter(rule => rule.enabled)\n    .sort((a, b) => a.priority - b.priority)\n    .forEach(rule => {\n      if (evaluateConditions(rule.conditions, context)) {\n        executeActions(rule.actions, context, dispatch);\n        rulesRun++;\n        actionsExecuted += rule.actions.length;\n      }\n    });\n\n  return { rulesRun, actionsExecuted };\n}\n\n// Helper to run low stock rules\nexport function runLowStockRules(\n  productId: string,\n  productSku: string,\n  currentQuantity: number,\n  rules: AutomationRule[],\n  dispatch: React.Dispatch<any>\n): { rulesRun: number; actionsExecuted: number } {\n  let rulesRun = 0;\n  let actionsExecuted = 0;\n\n  const lowStockRules = rules.filter(rule => {\n    if (rule.trigger.type !== 'low_stock') return false;\n    const trigger = rule.trigger as { type: 'low_stock'; threshold?: number };\n    const threshold = trigger.threshold || 50;\n    return currentQuantity <= threshold;\n  });\n\n  const context = {\n    product_id: productId,\n    sku: productSku,\n    quantity: currentQuantity\n  };\n\n  lowStockRules\n    .filter(rule => rule.enabled)\n    .sort((a, b) => a.priority - b.priority)\n    .forEach(rule => {\n      if (evaluateConditions(rule.conditions, context)) {\n        executeActions(rule.actions, context, dispatch);\n        rulesRun++;\n        actionsExecuted += rule.actions.length;\n      }\n    });\n\n  return { rulesRun, actionsExecuted };\n}\n\n// Get human-readable trigger label\nexport function getTriggerLabel(trigger: AutomationRule['trigger']): string {\n  switch (trigger.type) {\n    case 'order_created':\n      return 'New Order';\n    case 'order_status_changed':\n      const statusTrigger = trigger as { type: 'order_status_changed'; fromStatus?: string; toStatus?: string };\n      if (statusTrigger.toStatus) {\n        return `Status â†’ ${statusTrigger.toStatus}`;\n      }\n      return 'Status Change';\n    case 'low_stock':\n      const lowStockTrigger = trigger as { type: 'low_stock'; threshold?: number };\n      return `Low Stock (â‰¤${lowStockTrigger.threshold || 50})`;\n    case 'item_received':\n      return 'Item Received';\n    case 'daily':\n      const dailyTrigger = trigger as { type: 'daily'; time: string };\n      return `Daily at ${dailyTrigger.time}`;\n    case 'manual':\n      return 'Manual';\n    default:\n      return 'Unknown';\n  }\n}\n\n// Get human-readable action label\nexport function getActionLabel(action: RuleAction): string {\n  switch (action.type) {\n    case 'set_order_tag':\n      return `Add tag \"${action.config.tag}\"`;\n    case 'set_priority':\n      return `Set priority to ${action.config.priority}`;\n    case 'assign_carrier':\n      return `Assign ${action.config.carrier?.toUpperCase()}`;\n    case 'assign_service':\n      return `Use ${action.config.service}`;\n    case 'select_box':\n      return `Select box ${action.config.boxId}`;\n    case 'send_notification':\n      return 'Send notification';\n    case 'add_fulfillment_item':\n      return `Add item (qty: ${action.config.quantity || 1})`;\n    case 'set_location':\n      return `Set location`;\n    case 'create_po_draft':\n      return `Create PO draft`;\n    case 'send_email':\n      return `Send email`;\n    default:\n      return 'Unknown action';\n  }\n}\n\n// Get operator label\nexport function getOperatorLabel(operator: RuleCondition['operator']): string {\n  const labels: Record<RuleCondition['operator'], string> = {\n    equals: 'equals',\n    not_equals: 'does not equal',\n    contains: 'contains',\n    greater_than: 'is greater than',\n    less_than: 'is less than',\n    in_list: 'is one of'\n  };\n  return labels[operator] || operator;\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z',\n      key: 'sc7q7i',\n    },\n  ],\n];\n\n/**\n * @component @name Funnel\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMjBhMSAxIDAgMCAwIC41NTMuODk1bDIgMUExIDEgMCAwIDAgMTQgMjF2LTdhMiAyIDAgMCAxIC41MTctMS4zNDFMMjEuNzQgNC42N0ExIDEgMCAwIDAgMjEgM0gzYTEgMSAwIDAgMC0uNzQyIDEuNjdsNy4yMjUgNy45ODlBMiAyIDAgMCAxIDEwIDE0eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/funnel\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Funnel = createLucideIcon('funnel', __iconNode);\n\nexport default Funnel;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528',\n      key: '1jaruq',\n    },\n  ],\n];\n\n/**\n * @component @name Flag\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAyMlY0YTEgMSAwIDAgMSAuNC0uOEE2IDYgMCAwIDEgOCAyYzMgMCA1IDIgNy4zMzMgMnEyIDAgMy4wNjctLjhBMSAxIDAgMCAxIDIwIDR2MTBhMSAxIDAgMCAxLS40LjhBNiA2IDAgMCAxIDE2IDE2Yy0zIDAtNS0yLTgtMmE2IDYgMCAwIDAtNCAxLjUyOCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/flag\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Flag = createLucideIcon('flag', __iconNode);\n\nexport default Flag;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm16 16 2 2 4-4', key: 'gfu2re' }],\n  [\n    'path',\n    {\n      d: 'M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14',\n      key: 'e7tb2h',\n    },\n  ],\n  ['path', { d: 'm7.5 4.27 9 5.15', key: '1c824w' }],\n  ['polyline', { points: '3.29 7 12 12 20.71 7', key: 'ousv84' }],\n  ['line', { x1: '12', x2: '12', y1: '22', y2: '12', key: 'a4e8g8' }],\n];\n\n/**\n * @component @name PackageCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgMTYgMiAyIDQtNCIgLz4KICA8cGF0aCBkPSJNMjEgMTBWOGEyIDIgMCAwIDAtMS0xLjczbC03LTRhMiAyIDAgMCAwLTIgMGwtNyA0QTIgMiAwIDAgMCAzIDh2OGEyIDIgMCAwIDAgMSAxLjczbDcgNGEyIDIgMCAwIDAgMiAwbDItMS4xNCIgLz4KICA8cGF0aCBkPSJtNy41IDQuMjcgOSA1LjE1IiAvPgogIDxwb2x5bGluZSBwb2ludHM9IjMuMjkgNyAxMiAxMiAyMC43MSA3IiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMjIiIHkyPSIxMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/package-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PackageCheck = createLucideIcon('package-check', __iconNode);\n\nexport default PackageCheck;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72',\n      key: 'ul74o6',\n    },\n  ],\n  ['path', { d: 'm14 7 3 3', key: '1r5n42' }],\n  ['path', { d: 'M5 6v4', key: 'ilb8ba' }],\n  ['path', { d: 'M19 14v4', key: 'blhpug' }],\n  ['path', { d: 'M10 2v2', key: '7u0qdc' }],\n  ['path', { d: 'M7 8H3', key: 'zfb6yr' }],\n  ['path', { d: 'M21 16h-4', key: '1cnmox' }],\n  ['path', { d: 'M11 3H9', key: '1obp7u' }],\n];\n\n/**\n * @component @name WandSparkles\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEuNjQgMy42NC0xLjI4LTEuMjhhMS4yMSAxLjIxIDAgMCAwLTEuNzIgMEwyLjM2IDE4LjY0YTEuMjEgMS4yMSAwIDAgMCAwIDEuNzJsMS4yOCAxLjI4YTEuMiAxLjIgMCAwIDAgMS43MiAwTDIxLjY0IDUuMzZhMS4yIDEuMiAwIDAgMCAwLTEuNzIiIC8+CiAgPHBhdGggZD0ibTE0IDcgMyAzIiAvPgogIDxwYXRoIGQ9Ik01IDZ2NCIgLz4KICA8cGF0aCBkPSJNMTkgMTR2NCIgLz4KICA8cGF0aCBkPSJNMTAgMnYyIiAvPgogIDxwYXRoIGQ9Ik03IDhIMyIgLz4KICA8cGF0aCBkPSJNMjEgMTZoLTQiIC8+CiAgPHBhdGggZD0iTTExIDNIOSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/wand-sparkles\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst WandSparkles = createLucideIcon('wand-sparkles', __iconNode);\n\nexport default WandSparkles;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z',\n      key: '1xq2db',\n    },\n  ],\n];\n\n/**\n * @component @name Zap\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAxNGExIDEgMCAwIDEtLjc4LTEuNjNsOS45LTEwLjJhLjUuNSAwIDAgMSAuODYuNDZsLTEuOTIgNi4wMkExIDEgMCAwIDAgMTMgMTBoN2ExIDEgMCAwIDEgLjc4IDEuNjNsLTkuOSAxMC4yYS41LjUgMCAwIDEtLjg2LS40NmwxLjkyLTYuMDJBMSAxIDAgMCAwIDExIDE0eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/zap\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Zap = createLucideIcon('zap', __iconNode);\n\nexport default Zap;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M8 3 4 7l4 4', key: '9rb6wj' }],\n  ['path', { d: 'M4 7h16', key: '6tx8e3' }],\n  ['path', { d: 'm16 21 4-4-4-4', key: 'siv7j2' }],\n  ['path', { d: 'M20 17H4', key: 'h6l3hr' }],\n];\n\n/**\n * @component @name ArrowLeftRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOCAzIDQgN2w0IDQiIC8+CiAgPHBhdGggZD0iTTQgN2gxNiIgLz4KICA8cGF0aCBkPSJtMTYgMjEgNC00LTQtNCIgLz4KICA8cGF0aCBkPSJNMjAgMTdINCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeftRight = createLucideIcon('arrow-left-right', __iconNode);\n\nexport default ArrowLeftRight;\n","import type { RuleTrigger, RuleCondition, RuleAction } from '@/context/AppContext';\n\nexport interface RuleTemplate {\n  id: string;\n  name: string;\n  description: string;\n  category: 'shipping' | 'tagging' | 'inventory' | 'notification';\n  trigger: RuleTrigger;\n  conditions: Omit<RuleCondition, 'id'>[];\n  actions: Omit<RuleAction, 'id'>[];\n}\n\nexport const ruleTemplates: RuleTemplate[] = [\n  // Shipping Templates\n  {\n    id: 'tpl-usps-small',\n    name: 'Auto-assign USPS for small orders',\n    description: 'Orders under $50 with weight less than 1lb ship USPS First Class',\n    category: 'shipping',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'total', operator: 'less_than', value: 50 }\n    ],\n    actions: [\n      { type: 'assign_carrier', config: { carrier: 'usps' } },\n      { type: 'assign_service', config: { service: 'first_class' } }\n    ]\n  },\n  {\n    id: 'tpl-ups-heavy',\n    name: 'Use UPS for heavy orders',\n    description: 'Orders over 5lbs ship via UPS Ground',\n    category: 'shipping',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'weight', operator: 'greater_than', value: 80 } // 80oz = 5lbs\n    ],\n    actions: [\n      { type: 'assign_carrier', config: { carrier: 'ups' } },\n      { type: 'assign_service', config: { service: 'ground' } }\n    ]\n  },\n  {\n    id: 'tpl-fedex-express',\n    name: 'FedEx for high-value orders',\n    description: 'Orders over $200 ship FedEx with signature required',\n    category: 'shipping',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'total', operator: 'greater_than', value: 200 }\n    ],\n    actions: [\n      { type: 'assign_carrier', config: { carrier: 'fedex' } },\n      { type: 'assign_service', config: { service: 'express_saver' } }\n    ]\n  },\n\n  // Tagging Templates\n  {\n    id: 'tpl-prime-tag',\n    name: 'Tag Amazon Prime orders as urgent',\n    description: 'Add PRIME tag and set high priority for Amazon Prime orders',\n    category: 'tagging',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'is_prime', operator: 'equals', value: true }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'PRIME' } },\n      { type: 'set_priority', config: { priority: 'high' } }\n    ]\n  },\n  {\n    id: 'tpl-wholesale-tag',\n    name: 'Tag wholesale orders',\n    description: 'Add WHOLESALE tag and notify team for bulk orders',\n    category: 'tagging',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'item_count', operator: 'greater_than', value: 10 }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'WHOLESALE' } },\n      { type: 'send_notification', config: { message: 'New wholesale order received' } }\n    ]\n  },\n  {\n    id: 'tpl-international-tag',\n    name: 'Tag international orders',\n    description: 'Flag orders shipping outside the US',\n    category: 'tagging',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'shipping_country', operator: 'not_equals', value: 'US' }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'INTERNATIONAL' } },\n      { type: 'set_priority', config: { priority: 'low' } }\n    ]\n  },\n  {\n    id: 'tpl-fragile-tag',\n    name: 'Tag fragile product orders',\n    description: 'Add FRAGILE tag when order contains specific SKUs',\n    category: 'tagging',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'contains_sku', operator: 'contains', value: '4L' }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'FRAGILE' } }\n    ]\n  },\n\n  // Inventory Templates\n  {\n    id: 'tpl-low-stock-alert',\n    name: 'Create PO when stock is low',\n    description: 'Automatically create a PO draft and notify when stock drops below threshold',\n    category: 'inventory',\n    trigger: { type: 'low_stock', threshold: 50 },\n    conditions: [],\n    actions: [\n      { type: 'create_po_draft', config: { quantity: 100 } },\n      { type: 'send_notification', config: { message: 'Low stock alert! PO draft created.' } }\n    ]\n  },\n  {\n    id: 'tpl-critical-stock',\n    name: 'Critical stock email alert',\n    description: 'Send urgent email when stock is critically low',\n    category: 'inventory',\n    trigger: { type: 'low_stock', threshold: 10 },\n    conditions: [],\n    actions: [\n      { type: 'send_email', config: { recipient: 'admin@company.com', subject: 'URGENT: Critical stock level' } },\n      { type: 'send_notification', config: { message: 'CRITICAL: Stock nearly depleted!' } }\n    ]\n  },\n\n  // Notification Templates\n  {\n    id: 'tpl-new-order-notify',\n    name: 'Notify on new Shopify orders',\n    description: 'Send notification when a new Shopify order is received',\n    category: 'notification',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'channel', operator: 'equals', value: 'shopify' }\n    ],\n    actions: [\n      { type: 'send_notification', config: { message: 'New Shopify order received!' } }\n    ]\n  },\n  {\n    id: 'tpl-vip-customer',\n    name: 'VIP customer alert',\n    description: 'Notify when orders come from VIP email domains',\n    category: 'notification',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'total', operator: 'greater_than', value: 500 }\n    ],\n    actions: [\n      { type: 'set_order_tag', config: { tag: 'VIP' } },\n      { type: 'set_priority', config: { priority: 'urgent' } },\n      { type: 'send_notification', config: { message: 'VIP order received - prioritize!' } }\n    ]\n  },\n  {\n    id: 'tpl-gripper-sticker',\n    name: 'Add gripper sticker to every bottle',\n    description: 'Automatically add gripper stickers to orders containing bottles',\n    category: 'shipping',\n    trigger: { type: 'order_created' },\n    conditions: [\n      { field: 'contains_sku', operator: 'contains', value: 'CN' }\n    ],\n    actions: [\n      { type: 'add_fulfillment_item', config: { productId: 'gripper-sku', quantity: 1 } }\n    ]\n  }\n];\n\n// Get templates by category\nexport function getTemplatesByCategory(category: RuleTemplate['category']): RuleTemplate[] {\n  return ruleTemplates.filter(t => t.category === category);\n}\n\n// Get all unique categories\nexport function getTemplateCategories(): RuleTemplate['category'][] {\n  return [...new Set(ruleTemplates.map(t => t.category))];\n}\n\n// Get category label\nexport function getCategoryLabel(category: RuleTemplate['category']): string {\n  const labels: Record<RuleTemplate['category'], string> = {\n    shipping: 'Shipping & Carriers',\n    tagging: 'Order Tagging',\n    inventory: 'Inventory Management',\n    notification: 'Notifications'\n  };\n  return labels[category];\n}\n\n// Get category icon (Font Awesome class)\nexport function getCategoryIcon(category: RuleTemplate['category']): string {\n  const icons: Record<RuleTemplate['category'], string> = {\n    shipping: 'fa-truck',\n    tagging: 'fa-tags',\n    inventory: 'fa-boxes',\n    notification: 'fa-bell'\n  };\n  return icons[category];\n}\n\n// Trigger options for the UI\nexport const triggerOptions = [\n  {\n    type: 'order_created' as const,\n    icon: 'ShoppingCart',\n    label: 'New Order',\n    description: 'When an order is created'\n  },\n  {\n    type: 'order_status_changed' as const,\n    icon: 'ArrowLeftRight',\n    label: 'Status Change',\n    description: 'When order status changes'\n  },\n  {\n    type: 'low_stock' as const,\n    icon: 'AlertTriangle',\n    label: 'Low Stock',\n    description: 'When stock falls below threshold'\n  },\n  {\n    type: 'item_received' as const,\n    icon: 'PackageCheck',\n    label: 'Item Received',\n    description: 'When inventory is received'\n  },\n  {\n    type: 'daily' as const,\n    icon: 'Clock',\n    label: 'Scheduled',\n    description: 'Run at a specific time daily'\n  },\n  {\n    type: 'manual' as const,\n    icon: 'Hand',\n    label: 'Manual',\n    description: 'Run manually when triggered'\n  }\n];\n\n// Action options for the UI\nexport const actionOptions = [\n  { type: 'set_order_tag', label: 'Add Order Tag', icon: 'Tag' },\n  { type: 'set_priority', label: 'Set Priority', icon: 'Flag' },\n  { type: 'assign_carrier', label: 'Assign Carrier', icon: 'Truck' },\n  { type: 'assign_service', label: 'Assign Shipping Service', icon: 'Package' },\n  { type: 'select_box', label: 'Select Box', icon: 'Box' },\n  { type: 'add_fulfillment_item', label: 'Add Fulfillment Item', icon: 'Plus' },\n  { type: 'send_notification', label: 'Send Notification', icon: 'Bell' },\n  { type: 'create_po_draft', label: 'Create PO Draft', icon: 'FileText' },\n  { type: 'send_email', label: 'Send Email', icon: 'Mail' },\n  { type: 'set_location', label: 'Set Location', icon: 'MapPin' }\n];\n\n// Operator options\nexport const operatorOptions = [\n  { value: 'equals', label: 'equals' },\n  { value: 'not_equals', label: 'does not equal' },\n  { value: 'contains', label: 'contains' },\n  { value: 'greater_than', label: 'is greater than' },\n  { value: 'less_than', label: 'is less than' },\n  { value: 'in_list', label: 'is one of' }\n];\n\n// Priority options\nexport const priorityOptions = [\n  { value: 'low', label: 'Low' },\n  { value: 'normal', label: 'Normal' },\n  { value: 'high', label: 'High' },\n  { value: 'urgent', label: 'Urgent' }\n];\n\n// Carrier options\nexport const carrierOptions = [\n  { value: 'usps', label: 'USPS' },\n  { value: 'ups', label: 'UPS' },\n  { value: 'fedex', label: 'FedEx' },\n  { value: 'dhl', label: 'DHL' }\n];\n\n// Service options per carrier\nexport const serviceOptions: Record<string, { value: string; label: string }[]> = {\n  usps: [\n    { value: 'first_class', label: 'First Class' },\n    { value: 'priority', label: 'Priority Mail' },\n    { value: 'priority_express', label: 'Priority Express' },\n    { value: 'ground_advantage', label: 'Ground Advantage' }\n  ],\n  ups: [\n    { value: 'ground', label: 'UPS Ground' },\n    { value: 'three_day_select', label: '3 Day Select' },\n    { value: 'second_day_air', label: '2nd Day Air' },\n    { value: 'next_day_air', label: 'Next Day Air' }\n  ],\n  fedex: [\n    { value: 'ground', label: 'FedEx Ground' },\n    { value: 'home_delivery', label: 'Home Delivery' },\n    { value: 'express_saver', label: 'Express Saver' },\n    { value: 'standard_overnight', label: 'Standard Overnight' }\n  ],\n  dhl: [\n    { value: 'express', label: 'DHL Express' },\n    { value: 'express_worldwide', label: 'Express Worldwide' }\n  ]\n};\n"],"names":[],"mappings":"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","ignoreList":[16,17,18,19,20,21]}