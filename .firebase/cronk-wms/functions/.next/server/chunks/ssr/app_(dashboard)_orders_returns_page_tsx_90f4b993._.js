module.exports=[76719,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(98263),f=a.i(89697),g=a.i(88860);a.i(94660);var h=a.i(35940),i=a.i(91828);a.i(20090);var j=a.i(52683),k=a.i(34748),l=a.i(88629);function m(){let a=(0,d.useSearchParams)(),m=(0,d.useRouter)(),{state:n,dispatch:o}=(0,e.useApp)(),{success:p,warning:q}=(0,f.useToast)(),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(a.get("status")||""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)("all"),[D,E]=(0,c.useState)(1),F=(0,c.useMemo)(()=>n.returns.filter(a=>{let b=a.returnNumber.toLowerCase().includes(t.toLowerCase())||a.orderNumber.toLowerCase().includes(t.toLowerCase())||a.customer.name.toLowerCase().includes(t.toLowerCase())||a.customer.email.toLowerCase().includes(t.toLowerCase()),c=!v||a.status===v,d=!x||a.items.some(a=>a.reason===x),e=!z||a.channel===z,f=((a,b)=>{let c=new Date(a),d=new Date;switch(d.setHours(0,0,0,0),b){case"today":return c>=d;case"yesterday":let e=new Date(d);return e.setDate(e.getDate()-1),c>=e&&c<d;case"last7":let f=new Date(d);return f.setDate(f.getDate()-7),c>=f;case"last30":let g=new Date(d);return g.setDate(g.getDate()-30),c>=g;case"thisMonth":return c.getMonth()===d.getMonth()&&c.getFullYear()===d.getFullYear();default:return!0}})(a.createdAt,B);return b&&c&&d&&e&&f}),[n.returns,t,v,x,z,B]),G=Math.ceil(F.length/10),H=F.slice((D-1)*10,10*D),I=(0,c.useMemo)(()=>{let a=new Date;a.setHours(0,0,0,0);let b=new Date(a.getFullYear(),a.getMonth(),1),c=n.returns.filter(a=>new Date(a.createdAt)>=b);return{pendingApproval:n.returns.filter(a=>"requested"===a.status).length,inTransit:n.returns.filter(a=>"in_transit"===a.status).length,awaitingInspection:n.returns.filter(a=>"received"===a.status).length,readyToRefund:n.returns.filter(a=>"inspected"===a.status).length,monthlyRefunds:c.filter(a=>"refunded"===a.status).reduce((a,b)=>a+b.refund.total,0)}},[n.returns]),J=a=>{w(b=>b===a?"":a),E(1)},K=!!(t||v||x||z||"all"!==B);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(i.Breadcrumb,{items:[{label:"Orders",href:"/orders"},{label:"Returns"}]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Returns"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Process and track customer returns"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:()=>{let a=new Blob([[["Return #","Order #","Date","Customer","Channel","Items","Reason","Refund Amount","Status"],...F.map(a=>[a.returnNumber,a.orderNumber,(0,l.formatReturnDate)(a.createdAt),a.customer.name,a.channel,a.items.reduce((a,b)=>a+b.quantity,0),a.items[0]?.reason?l.returnReasonLabels[a.items[0].reason]:"",a.refund.total.toFixed(2),a.status])].map(a=>a.join(",")).join("\n")],{type:"text/csv"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`returns-export-${new Date().toISOString().split("T")[0]}.csv`,c.click(),URL.revokeObjectURL(b),p(`Exported ${F.length} returns`)},className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-download text-sm"}),"Export"]}),(0,b.jsxs)("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-plus text-sm"}),"Create Return"]})]})]}),(0,b.jsxs)(k.ReturnsStatsGrid,{columns:5,children:[(0,b.jsx)(k.ReturnStatCard,{icon:"fa-clock",color:"amber",value:I.pendingApproval,label:"Pending Approval",onClick:()=>J("requested"),isActive:"requested"===v}),(0,b.jsx)(k.ReturnStatCard,{icon:"fa-truck",color:"purple",value:I.inTransit,label:"In Transit",onClick:()=>J("in_transit"),isActive:"in_transit"===v}),(0,b.jsx)(k.ReturnStatCard,{icon:"fa-box",color:"cyan",value:I.awaitingInspection,label:"Awaiting Inspection",onClick:()=>J("received"),isActive:"received"===v}),(0,b.jsx)(k.ReturnStatCard,{icon:"fa-search",color:"indigo",value:I.readyToRefund,label:"Ready to Refund",onClick:()=>J("inspected"),isActive:"inspected"===v}),(0,b.jsx)(k.ReturnStatCard,{icon:"fa-dollar-sign",color:"emerald",value:(0,g.formatCurrency)(I.monthlyRefunds),label:"This Month's Refunds"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),(0,b.jsx)("input",{type:"text",placeholder:"Search returns...",value:t,onChange:a=>u(a.target.value),className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500/50"})]}),(0,b.jsxs)("select",{value:v,onChange:a=>{w(a.target.value),E(1)},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2.5 text-slate-200 focus:outline-none focus:border-emerald-500",children:[(0,b.jsx)("option",{value:"",children:"All Statuses"}),(0,b.jsx)("option",{value:"requested",children:"Requested"}),(0,b.jsx)("option",{value:"approved",children:"Approved"}),(0,b.jsx)("option",{value:"in_transit",children:"In Transit"}),(0,b.jsx)("option",{value:"received",children:"Received"}),(0,b.jsx)("option",{value:"inspected",children:"Inspected"}),(0,b.jsx)("option",{value:"refunded",children:"Refunded"}),(0,b.jsx)("option",{value:"rejected",children:"Rejected"})]}),(0,b.jsxs)("select",{value:x,onChange:a=>{y(a.target.value),E(1)},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2.5 text-slate-200 focus:outline-none focus:border-emerald-500",children:[(0,b.jsx)("option",{value:"",children:"All Reasons"}),Object.entries(l.returnReasonLabels).map(([a,c])=>(0,b.jsx)("option",{value:a,children:c},a))]}),(0,b.jsxs)("select",{value:z,onChange:a=>{A(a.target.value),E(1)},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2.5 text-slate-200 focus:outline-none focus:border-emerald-500",children:[(0,b.jsx)("option",{value:"",children:"All Channels"}),(0,b.jsx)("option",{value:"shopify",children:"Shopify"}),(0,b.jsx)("option",{value:"amazon_fbm",children:"Amazon FBM"}),(0,b.jsx)("option",{value:"amazon_fba",children:"Amazon FBA"}),(0,b.jsx)("option",{value:"manual",children:"Manual"})]}),(0,b.jsxs)("select",{value:B,onChange:a=>{C(a.target.value),E(1)},className:"bg-slate-800/50 border border-slate-700 rounded-lg px-3 py-2.5 text-slate-200 focus:outline-none focus:border-emerald-500",children:[(0,b.jsx)("option",{value:"all",children:"All Time"}),(0,b.jsx)("option",{value:"today",children:"Today"}),(0,b.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,b.jsx)("option",{value:"last7",children:"Last 7 Days"}),(0,b.jsx)("option",{value:"last30",children:"Last 30 Days"}),(0,b.jsx)("option",{value:"thisMonth",children:"This Month"})]}),K&&(0,b.jsxs)("button",{onClick:()=>{u(""),w(""),y(""),A(""),C("all"),E(1)},className:"px-3 py-2.5 text-slate-400 hover:text-slate-200 transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-times text-sm"}),"Clear"]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-700/50",children:[(0,b.jsx)("th",{className:"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Return #"}),(0,b.jsx)("th",{className:"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Date"}),(0,b.jsx)("th",{className:"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Customer"}),(0,b.jsx)("th",{className:"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Channel"}),(0,b.jsx)("th",{className:"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Items"}),(0,b.jsx)("th",{className:"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Reason"}),(0,b.jsx)("th",{className:"text-right p-4 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Refund"}),(0,b.jsx)("th",{className:"text-left p-4 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"text-right p-4 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:0===H.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:9,className:"p-8 text-center text-slate-500",children:[(0,b.jsx)("i",{className:"fas fa-undo-alt text-4xl mb-4 text-slate-600"}),(0,b.jsx)("p",{children:"No returns found"}),K&&(0,b.jsx)("p",{className:"text-sm mt-2",children:"Try adjusting your filters"})]})}):H.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-700/30 hover:bg-slate-700/30 cursor-pointer transition-colors",onClick:()=>m.push(`/orders/returns/${a.id}`),children:[(0,b.jsxs)("td",{className:"p-4",children:[(0,b.jsx)("div",{className:"font-medium text-white",children:a.returnNumber}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:["Order: ",a.orderNumber]})]}),(0,b.jsx)("td",{className:"p-4 text-slate-300",children:(0,l.formatReturnDate)(a.createdAt)}),(0,b.jsxs)("td",{className:"p-4",children:[(0,b.jsx)("div",{className:"text-slate-200",children:a.customer.name}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:a.customer.email})]}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(j.ReturnChannelBadge,{channel:a.channel})}),(0,b.jsxs)("td",{className:"p-4",children:[(0,b.jsxs)("div",{className:"text-slate-200",children:[a.items.reduce((a,b)=>a+b.quantity,0)," item(s)"]}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:a.items.length>1?`${a.items[0].productName} +${a.items.length-1} more`:a.items[0]?.productName})]}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("span",{className:"text-sm text-slate-300",children:a.items[0]?.reason?l.returnReasonLabels[a.items[0].reason]:"-"})}),(0,b.jsxs)("td",{className:"p-4 text-right",children:[(0,b.jsx)("div",{className:"font-medium text-white",children:(0,g.formatCurrency)(a.refund.total)}),a.refund.restockingFee>0&&(0,b.jsxs)("div",{className:"text-xs text-amber-400",children:["-",(0,g.formatCurrency)(a.refund.restockingFee)," fee"]})]}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(j.ReturnStatusBadge,{status:a.status})}),(0,b.jsx)("td",{className:"p-4 text-right",onClick:a=>a.stopPropagation(),children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:["requested"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),o({type:"UPDATE_RETURN",payload:{...a,status:"approved",updatedAt:new Date}}),p(`Return ${a.returnNumber} approved`)},className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition-colors",title:"Approve Return",children:(0,b.jsx)("i",{className:"fas fa-check"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),o({type:"UPDATE_RETURN",payload:{...a,status:"rejected",updatedAt:new Date}}),q(`Return ${a.returnNumber} rejected`)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",title:"Reject Return",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),"in_transit"===a.status&&(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),o({type:"UPDATE_RETURN",payload:{...a,status:"received",updatedAt:new Date}}),p(`Return ${a.returnNumber} marked as received`)},className:"p-2 text-cyan-400 hover:bg-cyan-500/20 rounded-lg transition-colors",title:"Mark Received",children:(0,b.jsx)("i",{className:"fas fa-box"})}),"inspected"===a.status&&(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),o({type:"UPDATE_RETURN",payload:{...a,status:"refunded",refund:{...a.refund,refundedAt:new Date,refundMethod:"original_payment"},updatedAt:new Date}}),p(`Refund of ${(0,g.formatCurrency)(a.refund.total)} processed for ${a.returnNumber}`)},className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition-colors",title:"Process Refund",children:(0,b.jsx)("i",{className:"fas fa-dollar-sign"})}),(0,b.jsx)("button",{onClick:()=>m.push(`/orders/returns/${a.id}`),className:"p-2 text-slate-400 hover:bg-slate-600/50 rounded-lg transition-colors",title:"View Details",children:(0,b.jsx)("i",{className:"fas fa-chevron-right"})})]})})]},a.id))})]}),G>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-slate-700/50",children:[(0,b.jsxs)("div",{className:"text-sm text-slate-400",children:["Showing ",(D-1)*10+1," to ",Math.min(10*D,F.length)," of ",F.length," returns"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>E(Math.max(1,D-1)),disabled:1===D,className:"px-3 py-1.5 bg-slate-700/50 hover:bg-slate-600/50 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-slate-300 transition-colors",children:(0,b.jsx)("i",{className:"fas fa-chevron-left"})}),Array.from({length:Math.min(5,G)},(a,c)=>{let d=c+1;return(0,b.jsx)("button",{onClick:()=>E(d),className:`px-3 py-1.5 rounded-lg transition-colors ${D===d?"bg-emerald-600 text-white":"bg-slate-700/50 hover:bg-slate-600/50 text-slate-300"}`,children:d},d)}),(0,b.jsx)("button",{onClick:()=>E(Math.min(G,D+1)),disabled:D===G,className:"px-3 py-1.5 bg-slate-700/50 hover:bg-slate-600/50 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-slate-300 transition-colors",children:(0,b.jsx)("i",{className:"fas fa-chevron-right"})})]})]})]}),(0,b.jsx)(h.CreateReturnModal,{isOpen:r,onClose:()=>s(!1)})]})}function n(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,b.jsx)("div",{className:"h-8 bg-slate-800/50 rounded w-48"}),(0,b.jsx)("div",{className:"grid grid-cols-5 gap-4",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"h-24 bg-slate-800/50 rounded-xl"},c))}),(0,b.jsx)("div",{className:"h-96 bg-slate-800/50 rounded-xl"})]}),children:(0,b.jsx)(m,{})})}a.s(["default",()=>n])}];

//# sourceMappingURL=app_%28dashboard%29_orders_returns_page_tsx_90f4b993._.js.map