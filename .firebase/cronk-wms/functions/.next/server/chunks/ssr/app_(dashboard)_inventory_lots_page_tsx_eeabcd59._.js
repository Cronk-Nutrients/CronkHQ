module.exports=[53056,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(98263),f=a.i(12466),g=a.i(34904),h=a.i(88860),i=a.i(89697),j=a.i(17545),k=a.i(87532),l=a.i(24987),m=a.i(41675),n=a.i(73570),o=a.i(16201),p=a.i(41710),q=a.i(210),r=a.i(77156),s=a.i(17755),t=a.i(62722);let u=(0,a.i(70106).default)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function v(){let{state:a,dispatch:v}=(0,e.useApp)(),{success:w,warning:x}=(0,i.useToast)(),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)("all"),[C,D]=(0,c.useState)("all"),[E,F]=(0,c.useState)("all"),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(!1),O=(0,c.useMemo)(()=>{let b=[...new Set(a.lots.map(a=>a.productId))];return a.products.filter(a=>b.includes(a.id))},[a.lots,a.products]),P=b=>{if(!b.expirationDate)return!1;let c=a.products.find(a=>a.id===b.productId),d=c?.expirationWarningDays||30,e=Math.ceil((new Date(b.expirationDate).getTime()-Date.now())/864e5);return e>0&&e<=d},Q=a=>!!a.expirationDate&&new Date(a.expirationDate)<new Date,R=(0,c.useMemo)(()=>a.lots.filter(a=>{if(y){let b=y.toLowerCase();if(!(a.lotNumber.toLowerCase().includes(b)||a.productName.toLowerCase().includes(b)||a.sku.toLowerCase().includes(b)||a.supplierLotNumber?.toLowerCase().includes(b)))return!1}if("all"!==A){if("expiring_soon"===A){if(!P(a))return!1}else if(a.status!==A)return!1}return("all"===C||a.productId===C)&&("all"===E||a.locationId===E)}).sort((a,b)=>a.expirationDate&&b.expirationDate?new Date(a.expirationDate).getTime()-new Date(b.expirationDate).getTime():a.expirationDate?-1:b.expirationDate?1:new Date(b.receivedDate).getTime()-new Date(a.receivedDate).getTime()),[a.lots,y,A,C,E,a.products]),S=(0,c.useMemo)(()=>{let b=a.lots.length,c=a.lots.filter(a=>"active"===a.status).length,d=a.lots.filter(a=>P(a)).length,e=a.lots.filter(a=>Q(a)||"expired"===a.status).length,f=a.lots.filter(a=>"quarantine"===a.status).length;return{total:b,active:c,expiringSoon:d,expired:e,quarantined:f,recalled:a.lots.filter(a=>"recalled"===a.status).length,totalUnits:a.lots.reduce((a,b)=>a+b.quantity,0)}},[a.lots]);return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(d.default,{href:"/inventory",className:"p-2 hover:bg-slate-700/50 rounded-lg transition-colors",children:(0,b.jsx)(q.ArrowLeft,{className:"w-5 h-5 text-slate-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-semibold text-white flex items-center gap-2",children:[(0,b.jsx)(j.Layers,{className:"w-6 h-6 text-purple-400"}),"Lot Inventory"]}),(0,b.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:"Track and manage inventory lots with expiration dates"})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[(0,b.jsxs)(g.Card,{className:"p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold text-white",children:(0,h.formatNumber)(S.total)}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:"Total Lots"})]}),(0,b.jsxs)(g.Card,{className:"p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold text-emerald-400",children:(0,h.formatNumber)(S.active)}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:"Active"})]}),(0,b.jsxs)(g.Card,{className:"p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold text-blue-400",children:(0,h.formatNumber)(S.totalUnits)}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:"Total Units"})]}),(0,b.jsx)("button",{onClick:()=>B("expiring_soon"),className:"text-left",children:(0,b.jsxs)(g.Card,{className:"p-4 hover:border-amber-500/50",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold text-amber-400",children:(0,h.formatNumber)(S.expiringSoon)}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:"Expiring Soon"})]})}),(0,b.jsx)("button",{onClick:()=>B("expired"),className:"text-left",children:(0,b.jsxs)(g.Card,{className:"p-4 hover:border-red-500/50",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold text-red-400",children:(0,h.formatNumber)(S.expired)}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:"Expired"})]})}),(0,b.jsx)("button",{onClick:()=>B("quarantine"),className:"text-left",children:(0,b.jsxs)(g.Card,{className:"p-4 hover:border-amber-500/50",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold text-amber-400",children:(0,h.formatNumber)(S.quarantined)}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:"Quarantined"})]})}),(0,b.jsx)("button",{onClick:()=>B("recalled"),className:"text-left",children:(0,b.jsxs)(g.Card,{className:"p-4 hover:border-purple-500/50",children:[(0,b.jsx)("div",{className:"text-2xl font-semibold text-purple-400",children:(0,h.formatNumber)(S.recalled)}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:"Recalled"})]})})]}),(0,b.jsx)(g.Card,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-[200px] relative",children:[(0,b.jsx)(k.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,b.jsx)("input",{type:"text",value:y,onChange:a=>z(a.target.value),placeholder:"Search lots, products, or supplier lot #...",className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"})]}),(0,b.jsxs)("select",{value:A,onChange:a=>B(a.target.value),className:"bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50",children:[(0,b.jsx)("option",{value:"all",children:"All Statuses"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"expiring_soon",children:"Expiring Soon"}),(0,b.jsx)("option",{value:"expired",children:"Expired"}),(0,b.jsx)("option",{value:"quarantine",children:"Quarantine"}),(0,b.jsx)("option",{value:"recalled",children:"Recalled"})]}),(0,b.jsxs)("select",{value:C,onChange:a=>D(a.target.value),className:"bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50",children:[(0,b.jsx)("option",{value:"all",children:"All Products"}),O.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,b.jsxs)("select",{value:E,onChange:a=>F(a.target.value),className:"bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-emerald-500/50",children:[(0,b.jsx)("option",{value:"all",children:"All Locations"}),a.locations.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),(y||"all"!==A||"all"!==C||"all"!==E)&&(0,b.jsx)("button",{onClick:()=>{z(""),B("all"),D("all"),F("all")},className:"text-sm text-slate-400 hover:text-white",children:"Clear Filters"})]})}),(0,b.jsx)(g.Card,{className:"overflow-hidden",children:0===R.length?(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)(j.Layers,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:0===a.lots.length?"No Lots Yet":"No Lots Match Filters"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 max-w-md mx-auto",children:0===a.lots.length?"Lots are created when receiving products with lot tracking enabled. Enable lot tracking on a product, then receive items on a purchase order.":"Try adjusting your search or filters to find what you're looking for."})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-slate-800/50",children:(0,b.jsxs)("tr",{className:"text-xs text-slate-400 uppercase tracking-wider",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Lot Number"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Product"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center",children:"Quantity"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Location"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Expiration"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Received"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:R.map(a=>(0,b.jsxs)("tr",{className:`hover:bg-slate-800/30 transition-colors ${Q(a)?"bg-red-500/5":P(a)?"bg-amber-500/5":""}`,children:[(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"font-mono text-white",children:a.lotNumber}),a.supplierLotNumber&&(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:["Supplier: ",a.supplierLotNumber]})]}),(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)(d.default,{href:`/inventory/${a.productId}`,className:"text-white hover:text-emerald-400",children:a.productName}),(0,b.jsx)("div",{className:"text-xs text-slate-400 font-mono",children:a.sku})]}),(0,b.jsxs)("td",{className:"px-4 py-3 text-center",children:[(0,b.jsx)("div",{className:"text-white font-medium",children:(0,h.formatNumber)(a.quantity)}),a.reservedQty>0&&(0,b.jsxs)("div",{className:"text-xs text-amber-400",children:[a.reservedQty," reserved"]})]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-1 text-slate-300",children:[(0,b.jsx)(l.MapPin,{className:"w-3 h-3 text-slate-500"}),a.locationName]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.expirationDate?(0,b.jsxs)("div",{className:`flex items-center gap-1 ${Q(a)?"text-red-400":P(a)?"text-amber-400":"text-slate-300"}`,children:[(0,b.jsx)(m.Calendar,{className:"w-3 h-3"}),(0,h.formatDate)(a.expirationDate)]}):(0,b.jsx)("span",{className:"text-slate-500",children:"No expiration"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-400 text-sm",children:(0,h.formatDate)(a.receivedDate)}),(0,b.jsx)("td",{className:"px-4 py-3 text-center",children:(a=>{if(Q(a)&&"active"===a.status)return(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-red-500/20 text-red-400",children:[(0,b.jsx)(t.XCircle,{className:"w-3 h-3"}),"Expired"]});if(P(a)&&"active"===a.status){let c=Math.ceil((new Date(a.expirationDate).getTime()-Date.now())/864e5);return(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-amber-500/20 text-amber-400",children:[(0,b.jsx)(n.AlertTriangle,{className:"w-3 h-3"}),"Expires in ",c,"d"]})}let c={active:{bg:"bg-emerald-500/20",text:"text-emerald-400",icon:o.CheckCircle,label:"Active"},quarantine:{bg:"bg-amber-500/20",text:"text-amber-400",icon:p.Clock,label:"Quarantine"},expired:{bg:"bg-red-500/20",text:"text-red-400",icon:t.XCircle,label:"Expired"},recalled:{bg:"bg-purple-500/20",text:"text-purple-400",icon:u,label:"Recalled"}}[a.status],d=c.icon;return(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${c.bg} ${c.text}`,children:[(0,b.jsx)(d,{className:"w-3 h-3"}),c.label]})})(a)}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:()=>{H(a),J(G?.id!==a.id||!I)},className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",children:(0,b.jsx)(s.MoreHorizontal,{className:"w-4 h-4"})}),I&&G?.id===a.id&&(0,b.jsx)("div",{className:"absolute right-0 mt-1 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-10",children:(0,b.jsxs)("div",{className:"py-1",children:["active"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>{v({type:"QUARANTINE_LOT",payload:{lotId:a.id,notes:"Quarantined by user"}}),w(`Lot ${a.lotNumber} quarantined`),H(null),J(!1)},className:"w-full px-4 py-2 text-left text-sm text-amber-400 hover:bg-slate-700/50 flex items-center gap-2",children:[(0,b.jsx)(p.Clock,{className:"w-4 h-4"}),"Quarantine"]}),(0,b.jsxs)("button",{onClick:()=>{N(!0),J(!1)},className:"w-full px-4 py-2 text-left text-sm text-purple-400 hover:bg-slate-700/50 flex items-center gap-2",children:[(0,b.jsx)(u,{className:"w-4 h-4"}),"Recall"]})]}),"quarantine"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>{v({type:"UPDATE_LOT",payload:{...a,status:"active"}}),w(`Lot ${a.lotNumber} released from quarantine`),H(null),J(!1)},className:"w-full px-4 py-2 text-left text-sm text-emerald-400 hover:bg-slate-700/50 flex items-center gap-2",children:[(0,b.jsx)(o.CheckCircle,{className:"w-4 h-4"}),"Release"]}),(0,b.jsxs)("button",{onClick:()=>{N(!0),J(!1)},className:"w-full px-4 py-2 text-left text-sm text-purple-400 hover:bg-slate-700/50 flex items-center gap-2",children:[(0,b.jsx)(u,{className:"w-4 h-4"}),"Recall"]})]}),(0,b.jsxs)(d.default,{href:`/inventory/${a.productId}`,className:"w-full px-4 py-2 text-left text-sm text-slate-300 hover:bg-slate-700/50 flex items-center gap-2",children:[(0,b.jsx)(r.Eye,{className:"w-4 h-4"}),"View Product"]})]})})]})})})]},a.id))})]})})}),M&&G&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)(g.Card,{className:"w-full max-w-md p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-medium text-white flex items-center gap-2 mb-4",children:[(0,b.jsx)(u,{className:"w-5 h-5 text-purple-400"}),"Recall Lot"]}),(0,b.jsxs)("p",{className:"text-sm text-slate-400 mb-4",children:["Recalling lot ",(0,b.jsx)("span",{className:"font-mono text-white",children:G.lotNumber}),". This will mark the lot as recalled and prevent it from being used in orders."]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1.5",children:"Recall Reason"}),(0,b.jsx)("textarea",{value:K,onChange:a=>L(a.target.value),placeholder:"Enter recall reason...",rows:3,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/50 resize-none"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)(f.Button,{variant:"secondary",onClick:()=>{N(!1),L(""),H(null)},children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:()=>{G&&(v({type:"RECALL_LOT",payload:{lotId:G.id,notes:K||"Recalled by user"}}),x(`Lot ${G.lotNumber} recalled`),N(!1),L(""),H(null))},className:"bg-purple-600 hover:bg-purple-700",children:"Confirm Recall"})]})]})}),I&&(0,b.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>{J(!1),H(null)}})]})}a.s(["default",()=>v],53056)}];

//# sourceMappingURL=app_%28dashboard%29_inventory_lots_page_tsx_eeabcd59._.js.map