module.exports=[81725,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(18740);a.i(69387);var e=a.i(60574),f=a.i(90761),g=a.i(89697),h=a.i(12466),i=a.i(38246),j=a.i(51127);let k={warehouse:{label:"Warehouse",icon:"fa-warehouse",color:"bg-blue-500/20 text-blue-400"},fba:{label:"Amazon FBA",icon:"fa-amazon",color:"bg-orange-500/20 text-orange-400"},retail:{label:"Retail Store",icon:"fa-store",color:"bg-purple-500/20 text-purple-400"},"3pl":{label:"3PL",icon:"fa-truck-loading",color:"bg-cyan-500/20 text-cyan-400"},dropship:{label:"Dropship",icon:"fa-shipping-fast",color:"bg-pink-500/20 text-pink-400"},other:{label:"Other",icon:"fa-box",color:"bg-slate-500/20 text-slate-400"}};function l({params:a}){let l=(0,c.use)(a),{organization:m}=(0,f.useOrganization)(),{success:n,error:o}=(0,g.useToast)(),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)("overview"),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)([]),[V,W]=(0,c.useState)([]);(0,c.useEffect)(()=>{if(!m?.id||!l.id)return;let a=(0,e.doc)(d.db,"organizations",m.id,"locations",l.id),b=(0,e.onSnapshot)(a,a=>{a.exists()?q({id:a.id,...a.data()}):q(null),s(!1)});return()=>b()},[m?.id,l.id]),(0,c.useEffect)(()=>{if(!m?.id||!l.id)return;let a=(0,e.collection)(d.db,"organizations",m.id,"locations",l.id,"sublocations"),b=(0,e.query)(a,(0,e.orderBy)("code")),c=(0,e.onSnapshot)(b,a=>{y(a.docs.map(a=>({id:a.id,...a.data()})))});return()=>c()},[m?.id,l.id]),(0,c.useEffect)(()=>{if(!B){let a,b=(a=[],H&&a.push(H.toUpperCase()),J&&a.push(J.toUpperCase()),L&&a.push(L.toUpperCase()),N&&a.push(N.toUpperCase()),P&&a.push(P.toUpperCase()),a.join("-")||D.toUpperCase().replace(/\s+/g,"-").substring(0,20));b&&G(b)}},[H,J,L,N,P,B]);let X=()=>{C(null),E(""),G(""),I(""),K(""),M(""),O(""),Q(""),A(!0)},Y=async()=>{if(m?.id&&l.id&&D.trim()&&F.trim()){S(!0);try{let a=(0,e.collection)(d.db,"organizations",m.id,"locations",l.id,"sublocations"),b={name:D.trim(),code:F.trim().toUpperCase(),zone:H.trim()||null,aisle:J.trim()||null,rack:L.trim()||null,shelf:N.trim()||null,bin:P.trim()||null,isActive:!0,updatedAt:(0,e.serverTimestamp)()};B?(await (0,e.updateDoc)((0,e.doc)(a,B.id),b),n("Sublocation updated")):(await (0,e.addDoc)(a,{...b,locationId:l.id,productCount:0,totalUnits:0,createdAt:(0,e.serverTimestamp)()}),n("Sublocation created")),A(!1)}catch(a){console.error("Error saving sublocation:",a),o("Failed to save sublocation")}finally{S(!1)}}},Z=async a=>{if(m?.id&&l.id){if(a.totalUnits>0)return void o(`Cannot delete sublocation with ${a.totalUnits} units. Move inventory first.`);if(confirm(`Delete "${a.name}"?`))try{await (0,e.deleteDoc)((0,e.doc)(d.db,"organizations",m.id,"locations",l.id,"sublocations",a.id)),n("Sublocation deleted")}catch(a){console.error("Error deleting sublocation:",a),o("Failed to delete sublocation")}}};if(r)return(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})});if(!p)return(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("i",{className:"fas fa-warehouse text-2xl text-slate-500"})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Location not found"}),(0,b.jsx)("p",{className:"text-slate-400 mb-6",children:"This location may have been deleted"}),(0,b.jsx)(i.default,{href:"/locations",children:(0,b.jsxs)(h.Button,{variant:"secondary",children:[(0,b.jsx)("i",{className:"fas fa-arrow-left mr-2"}),"Back to Locations"]})})]});let $=k[p.type],_=[{id:"overview",label:"Overview",icon:"fa-info-circle"},{id:"inventory",label:"Inventory",icon:"fa-boxes"},...p.trackSublocations?[{id:"sublocations",label:"Sublocations",icon:"fa-th-large"}]:[],{id:"activity",label:"Activity",icon:"fa-history"}];return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-400 mb-6",children:[(0,b.jsx)(i.default,{href:"/locations",className:"hover:text-white transition-colors",children:"Locations"}),(0,b.jsx)("i",{className:"fas fa-chevron-right text-xs"}),(0,b.jsx)("span",{className:"text-white",children:p.name})]}),(0,b.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${$.color}`,children:(0,b.jsx)("i",{className:`${"fba"===p.type?"fab":"fas"} ${$.icon} text-2xl`})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:p.name}),p.isDefault&&(0,b.jsx)("span",{className:"px-2 py-1 text-xs bg-emerald-500/20 text-emerald-400 rounded-full",children:"Default"}),!p.isActive&&(0,b.jsx)("span",{className:"px-2 py-1 text-xs bg-slate-600/50 text-slate-400 rounded-full",children:"Inactive"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,b.jsx)("span",{className:"text-slate-400",children:p.code}),(0,b.jsx)("span",{className:`px-2 py-0.5 text-xs rounded-full ${$.color}`,children:$.label})]})]})]}),(0,b.jsxs)(h.Button,{variant:"secondary",onClick:()=>w(!0),children:[(0,b.jsx)("i",{className:"fas fa-pencil mr-2"}),"Edit"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Products"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:p.totalProducts||0})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Total Units"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:(p.totalUnits||0).toLocaleString()})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Sublocations"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:p.trackSublocations?x.length:"N/A"})]})]}),(0,b.jsx)("div",{className:"border-b border-slate-700 mb-6",children:(0,b.jsx)("nav",{className:"flex gap-6",children:_.map(a=>(0,b.jsxs)("button",{onClick:()=>u(a.id),className:`flex items-center gap-2 px-1 py-3 text-sm font-medium border-b-2 transition-colors ${t===a.id?"text-emerald-400 border-emerald-400":"text-slate-400 border-transparent hover:text-white"}`,children:[(0,b.jsx)("i",{className:`fas ${a.icon}`}),a.label]},a.id))})}),"overview"===t&&(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-map-marker-alt text-slate-400"}),"Address"]}),p.address?(0,b.jsxs)("div",{className:"text-slate-300 space-y-1",children:[p.address.street1&&(0,b.jsx)("div",{children:p.address.street1}),p.address.street2&&(0,b.jsx)("div",{children:p.address.street2}),(0,b.jsx)("div",{children:[p.address.city,p.address.state,p.address.postalCode].filter(Boolean).join(", ")}),p.address.country&&(0,b.jsx)("div",{children:p.address.country})]}):(0,b.jsx)("p",{className:"text-slate-500",children:"No address set"})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-user text-slate-400"}),"Contact"]}),p.contact?(0,b.jsxs)("div",{className:"space-y-2",children:[p.contact.name&&(0,b.jsx)("div",{className:"text-slate-300",children:p.contact.name}),p.contact.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,b.jsx)("i",{className:"fas fa-envelope text-xs"}),(0,b.jsx)("a",{href:`mailto:${p.contact.email}`,className:"hover:text-emerald-400",children:p.contact.email})]}),p.contact.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,b.jsx)("i",{className:"fas fa-phone text-xs"}),(0,b.jsx)("a",{href:`tel:${p.contact.phone}`,className:"hover:text-emerald-400",children:p.contact.phone})]})]}):(0,b.jsx)("p",{className:"text-slate-500",children:"No contact set"})]}),"fba"===p.type&&p.fbaDetails&&(0,b.jsxs)("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-xl p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fab fa-amazon text-orange-400"}),"FBA Details"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[p.fbaDetails.marketplaceId&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Marketplace ID"}),(0,b.jsx)("span",{className:"text-white font-mono",children:p.fbaDetails.marketplaceId})]}),p.fbaDetails.fulfillmentCenterId&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Fulfillment Center"}),(0,b.jsx)("span",{className:"text-white font-mono",children:p.fbaDetails.fulfillmentCenterId})]})]})]}),p.notes&&(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-sticky-note text-slate-400"}),"Notes"]}),(0,b.jsx)("p",{className:"text-slate-300 whitespace-pre-wrap",children:p.notes})]})]}),"inventory"===t&&(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-slate-700",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Inventory at this Location"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Products and quantities stored here"})]}),(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("i",{className:"fas fa-boxes text-2xl text-slate-500"})}),(0,b.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:p.totalUnits>0?"Inventory tracking coming soon":"No inventory"}),(0,b.jsx)("p",{className:"text-slate-400",children:p.totalUnits>0?`${p.totalUnits.toLocaleString()} units across ${p.totalProducts} products`:"Add inventory via transfers or receiving"})]})]}),"sublocations"===t&&p.trackSublocations&&(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("span",{className:"text-slate-400",children:[x.length," sublocations"]})}),(0,b.jsxs)(h.Button,{size:"sm",onClick:X,children:[(0,b.jsx)("i",{className:"fas fa-plus mr-2"}),"Add Sublocation"]})]}),0===x.length?(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("i",{className:"fas fa-th-large text-2xl text-slate-500"})}),(0,b.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:"No sublocations yet"}),(0,b.jsx)("p",{className:"text-slate-400 mb-6",children:"Create bins, aisles, racks, and shelves to organize inventory"}),(0,b.jsxs)(h.Button,{variant:"secondary",onClick:X,children:[(0,b.jsx)("i",{className:"fas fa-plus mr-2"}),"Create First Sublocation"]})]}):(0,b.jsx)("div",{className:"divide-y divide-slate-700",children:x.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-slate-800/30 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-slate-700/50 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-th-large text-slate-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-white font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-sm text-slate-400 font-mono",children:a.code})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-sm text-slate-300",children:[a.totalUnits||0," units"]}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:[a.totalProducts||0," products"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:()=>{C(a),E(a.name),G(a.code),I(a.zone||""),K(a.aisle||""),M(a.rack||""),O(a.shelf||""),Q(a.bin||""),A(!0)},className:"p-2 text-slate-400 hover:text-white transition-colors",children:(0,b.jsx)("i",{className:"fas fa-pencil"})}),(0,b.jsx)("button",{onClick:()=>Z(a),className:"p-2 text-slate-400 hover:text-red-400 transition-colors",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})]})]},a.id))})]}),"activity"===t&&(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-slate-700",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Activity Log"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Recent inventory movements and changes"})]}),(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("i",{className:"fas fa-history text-2xl text-slate-500"})}),(0,b.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:"No activity yet"}),(0,b.jsx)("p",{className:"text-slate-400",children:"Activity will appear here as inventory moves in and out"})]})]}),v&&(0,b.jsx)(j.default,{location:p,onClose:()=>w(!1),onSave:()=>w(!1)}),z&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-slate-900 border border-slate-700 rounded-xl w-full max-w-md",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:B?"Edit Sublocation":"Add Sublocation"}),(0,b.jsx)("button",{onClick:()=>A(!1),className:"text-slate-400 hover:text-white",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Name *"}),(0,b.jsx)("input",{type:"text",value:D,onChange:a=>E(a.target.value),placeholder:"e.g., Aisle A - Shelf 1",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500",autoFocus:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Code *"}),(0,b.jsx)("input",{type:"text",value:F,onChange:a=>G(a.target.value.toUpperCase()),placeholder:"e.g., A-1-01",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500 font-mono"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Zone"}),(0,b.jsx)("input",{type:"text",value:H,onChange:a=>I(a.target.value),placeholder:"A",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Aisle"}),(0,b.jsx)("input",{type:"text",value:J,onChange:a=>K(a.target.value),placeholder:"01",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Rack"}),(0,b.jsx)("input",{type:"text",value:L,onChange:a=>M(a.target.value),placeholder:"R1",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Shelf"}),(0,b.jsx)("input",{type:"text",value:N,onChange:a=>O(a.target.value),placeholder:"S1",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Bin"}),(0,b.jsx)("input",{type:"text",value:P,onChange:a=>Q(a.target.value),placeholder:"B01",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500"})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-700",children:[(0,b.jsx)(h.Button,{variant:"secondary",onClick:()=>A(!1),children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:Y,disabled:R||!D.trim()||!F.trim(),children:R?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-check mr-2"}),B?"Update":"Create"]})})]})]})})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=app_%28dashboard%29_locations_%5Bid%5D_page_tsx_9e3ba3eb._.js.map