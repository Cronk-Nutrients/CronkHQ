module.exports=[23022,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(41710),e=a.i(10227),f=a.i(83497),g=a.i(90166),h=a.i(15618),i=a.i(4720),j=a.i(33441),k=a.i(77156),l=a.i(73570),m=a.i(92759),n=a.i(24569),o=a.i(84505),p=a.i(98263),q=a.i(89697),r=a.i(57581);a.i(94660);var s=a.i(59210),t=a.i(5248);a.i(50944);let u={sm:"w-[360px]",md:"w-[480px]",lg:"w-[600px]",xl:"w-[800px]"};function v({open:a,onClose:d,title:e,subtitle:f,children:g,footer:h,width:i="md",className:j=""}){return((0,c.useEffect)(()=>{let b=b=>{"Escape"===b.key&&a&&d()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[a,d]),(0,c.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),a)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:d}),(0,b.jsxs)("div",{className:`fixed inset-y-0 right-0 ${u[i]} bg-slate-900 border-l border-slate-700 shadow-2xl z-50 flex flex-col ${j}`,children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-slate-900 border-b border-slate-700 px-6 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white",children:e}),f&&(0,b.jsx)("p",{className:"text-sm text-slate-400",children:f})]}),(0,b.jsx)("button",{onClick:d,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:g}),h&&(0,b.jsx)("div",{className:"sticky bottom-0 bg-slate-900 border-t border-slate-700 px-6 py-4 flex items-center justify-end gap-3",children:h})]})]}):null}var w=a.i(12466),x=a.i(88860),y=a.i(33508),z=a.i(71931);function A({isOpen:a,onClose:h,po:k,onEdit:l,onReceive:o}){let{dispatch:s}=(0,p.useApp)(),{success:t,error:u}=(0,q.useToast)(),A=(0,r.useConfirm)(),B=(0,c.useMemo)(()=>{if(!k)return{totalOrdered:0,totalReceived:0,percent:0};let a=k.items.reduce((a,b)=>a+b.quantity,0),b=k.items.reduce((a,b)=>a+b.receivedQty,0);return{totalOrdered:a,totalReceived:b,percent:a>0?b/a*100:0}},[k]),C=async()=>{!k||await A({title:"Send Purchase Order",message:`Send PO ${k.poNumber} to ${k.supplier}? This will mark it as sent.`,confirmText:"Send PO"})&&(s({type:"UPDATE_PURCHASE_ORDER",payload:{...k,status:"sent",updatedAt:new Date}}),t(`PO ${k.poNumber} marked as sent`))},D=async()=>{!k||("received"===k.status?u("Cannot cancel a received PO"):await A({title:"Cancel Purchase Order",message:`Cancel PO ${k.poNumber}? This cannot be undone.`,confirmText:"Cancel PO",destructive:!0})&&(s({type:"UPDATE_PURCHASE_ORDER",payload:{...k,status:"cancelled",updatedAt:new Date}}),t(`PO ${k.poNumber} cancelled`),h()))},E=async()=>{!k||("draft"!==k.status?u("Only draft POs can be deleted"):await A({title:"Delete Purchase Order",message:`Delete PO ${k.poNumber}? This cannot be undone.`,confirmText:"Delete",destructive:!0})&&(s({type:"DELETE_PURCHASE_ORDER",payload:k.id}),t(`PO ${k.poNumber} deleted`),h()))},F=()=>{if(!k)return;let a=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>PO ${k.poNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
          h1 { margin-bottom: 5px; }
          .subtitle { color: #666; margin-bottom: 20px; }
          .header { display: flex; justify-content: space-between; margin-bottom: 30px; }
          .info { margin-bottom: 20px; }
          .info-row { display: flex; margin-bottom: 5px; }
          .info-label { width: 120px; color: #666; }
          table { width: 100%; border-collapse: collapse; margin: 20px 0; }
          th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
          th { background: #f5f5f5; font-weight: 600; }
          .text-right { text-align: right; }
          .totals { margin-top: 20px; text-align: right; }
          .total-row { display: flex; justify-content: flex-end; gap: 40px; margin-bottom: 5px; }
          .total-final { font-weight: bold; font-size: 18px; border-top: 2px solid #333; padding-top: 10px; }
          .notes { margin-top: 30px; padding: 15px; background: #f9f9f9; border-radius: 5px; }
        </style>
      </head>
      <body>
        <div class="header">
          <div>
            <h1>Purchase Order</h1>
            <div class="subtitle">${k.poNumber}</div>
          </div>
          <div class="text-right">
            <div><strong>Cronk Nutrients</strong></div>
            <div>Date: ${(0,x.formatDate)(k.createdAt)}</div>
          </div>
        </div>

        <div class="info">
          <div class="info-row"><span class="info-label">Supplier:</span> ${k.supplier}</div>
          <div class="info-row"><span class="info-label">Currency:</span> ${k.currency}</div>
          <div class="info-row"><span class="info-label">Expected Date:</span> ${k.expectedDate?(0,x.formatDate)(k.expectedDate):"Not specified"}</div>
          <div class="info-row"><span class="info-label">Status:</span> ${k.status.charAt(0).toUpperCase()+k.status.slice(1)}</div>
        </div>

        <table>
          <thead>
            <tr>
              <th>Product</th>
              <th>SKU</th>
              <th class="text-right">Qty</th>
              <th class="text-right">Unit Cost</th>
              <th class="text-right">Total</th>
            </tr>
          </thead>
          <tbody>
            ${k.items.map(a=>`
              <tr>
                <td>${a.productName}</td>
                <td>${a.sku}</td>
                <td class="text-right">${a.quantity}</td>
                <td class="text-right">$${a.unitCost.toFixed(2)}</td>
                <td class="text-right">$${(a.quantity*a.unitCost).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>$${k.subtotal.toFixed(2)}</span>
          </div>
          <div class="total-row">
            <span>Shipping:</span>
            <span>$${k.shipping.toFixed(2)}</span>
          </div>
          <div class="total-row total-final">
            <span>Total:</span>
            <span>$${k.total.toFixed(2)}</span>
          </div>
        </div>

        ${k.notes?`<div class="notes"><strong>Notes:</strong><br/>${k.notes}</div>`:""}
      </body>
      </html>
    `,b=window.open("","_blank");b&&(b.document.write(a),b.document.close(),b.print())};return k?(0,b.jsx)(v,{open:a,onClose:h,title:k.poNumber,subtitle:k.supplier,width:"lg",footer:(0,b.jsxs)(b.Fragment,{children:["draft"===k.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(w.Button,{variant:"danger",onClick:E,children:[(0,b.jsx)(y.X,{className:"w-4 h-4"}),"Delete"]}),(0,b.jsxs)(w.Button,{variant:"secondary",onClick:()=>l?.(k),children:[(0,b.jsx)(n.Edit,{className:"w-4 h-4"}),"Edit"]}),(0,b.jsxs)(w.Button,{onClick:C,children:[(0,b.jsx)(m.Send,{className:"w-4 h-4"}),"Send PO"]})]}),"sent"===k.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.Button,{variant:"secondary",onClick:D,children:"Cancel PO"}),(0,b.jsxs)(w.Button,{onClick:()=>o?.(k),children:[(0,b.jsx)(f.Package,{className:"w-4 h-4"}),"Receive Items"]})]}),"partial"===k.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.Button,{variant:"secondary",onClick:D,children:"Cancel PO"}),(0,b.jsxs)(w.Button,{onClick:()=>o?.(k),children:[(0,b.jsx)(f.Package,{className:"w-4 h-4"}),"Receive More"]})]}),"received"===k.status&&(0,b.jsxs)(w.Button,{variant:"secondary",onClick:F,children:[(0,b.jsx)(z.Printer,{className:"w-4 h-4"}),"Print PO"]}),"cancelled"===k.status&&(0,b.jsx)(w.Button,{variant:"secondary",onClick:h,children:"Close"})]}),children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(a=>{switch(a){case"draft":return(0,b.jsx)("span",{className:"px-3 py-1 bg-slate-500/20 text-slate-300 text-sm rounded-full",children:"Draft"});case"sent":return(0,b.jsx)("span",{className:"px-3 py-1 bg-amber-500/20 text-amber-400 text-sm rounded-full",children:"Sent / Pending"});case"partial":return(0,b.jsx)("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 text-sm rounded-full",children:"Partially Received"});case"received":return(0,b.jsx)("span",{className:"px-3 py-1 bg-emerald-500/20 text-emerald-400 text-sm rounded-full",children:"Received"});case"cancelled":return(0,b.jsx)("span",{className:"px-3 py-1 bg-red-500/20 text-red-400 text-sm rounded-full",children:"Cancelled"});default:return null}})(k.status),(0,b.jsx)("button",{onClick:F,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg",title:"Print PO",children:(0,b.jsx)(z.Printer,{className:"w-5 h-5"})})]}),("sent"===k.status||"partial"===k.status||"received"===k.status)&&(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Receiving Progress"}),(0,b.jsxs)("span",{className:"text-sm text-white",children:[(0,x.formatNumber)(B.totalReceived)," / ",(0,x.formatNumber)(B.totalOrdered)," received"]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,b.jsx)("div",{className:`h-2 rounded-full transition-all ${B.percent>=100?"bg-emerald-500":"bg-blue-500"}`,style:{width:`${Math.min(B.percent,100)}%`}})}),(0,b.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[B.percent.toFixed(0),"% complete"]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"PO Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.FileText,{className:"w-4 h-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-slate-400",children:"PO Number:"}),(0,b.jsx)("span",{className:"text-white font-mono",children:k.poNumber})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Truck,{className:"w-4 h-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-slate-400",children:"Supplier:"}),(0,b.jsx)("span",{className:"text-white",children:k.supplier})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.DollarSign,{className:"w-4 h-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-slate-400",children:"Currency:"}),(0,b.jsx)("span",{className:"text-white",children:k.currency})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Clock,{className:"w-4 h-4 text-slate-400"}),(0,b.jsx)("span",{className:"text-slate-400",children:"Expected:"}),(0,b.jsx)("span",{className:"text-white",children:k.expectedDate?(0,x.formatDate)(k.expectedDate):"Not set"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Line Items"}),(0,b.jsx)("div",{className:"border border-slate-700 rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-slate-800/50",children:(0,b.jsxs)("tr",{className:"text-xs text-slate-400 uppercase tracking-wider",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Product"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center",children:"Ordered"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center",children:"Received"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right",children:"Unit Cost"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right",children:"Total"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:k.items.map(a=>{let c=a.receivedQty>=a.quantity,d=a.receivedQty>0&&a.receivedQty<a.quantity;return(0,b.jsxs)("tr",{className:c?"bg-emerald-500/5":"",children:[(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"text-sm text-white",children:a.productName}),(0,b.jsx)("div",{className:"text-xs text-slate-400 font-mono",children:a.sku})]}),(0,b.jsx)("td",{className:"px-4 py-3 text-center text-sm text-white",children:(0,x.formatNumber)(a.quantity)}),(0,b.jsx)("td",{className:"px-4 py-3 text-center text-sm",children:(0,b.jsxs)("span",{className:c?"text-emerald-400":d?"text-blue-400":"text-slate-400",children:[(0,x.formatNumber)(a.receivedQty),c&&(0,b.jsx)(j.Check,{className:"w-3 h-3 inline ml-1"})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-right text-sm text-slate-300",children:(0,x.formatCurrencyPrecise)(a.unitCost)}),(0,b.jsx)("td",{className:"px-4 py-3 text-right text-sm text-white font-medium",children:(0,x.formatCurrencyPrecise)(a.quantity*a.unitCost)})]},a.productId)})})]})})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("div",{className:"w-64 bg-slate-800/50 border border-slate-700/50 rounded-lg p-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Subtotal:"}),(0,b.jsx)("span",{className:"text-white",children:(0,x.formatCurrencyPrecise)(k.subtotal)})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Shipping:"}),(0,b.jsx)("span",{className:"text-white",children:(0,x.formatCurrencyPrecise)(k.shipping)})]}),(0,b.jsxs)("div",{className:"flex justify-between pt-2 border-t border-slate-700",children:[(0,b.jsx)("span",{className:"text-white font-medium",children:"Total:"}),(0,b.jsx)("span",{className:"text-white font-bold",children:(0,x.formatCurrencyPrecise)(k.total)})]})]})}),k.notes&&(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-2",children:"Notes"}),(0,b.jsx)("p",{className:"text-sm text-slate-300",children:k.notes})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-white mb-3",children:"Timeline"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-white",children:"Created"}),(0,b.jsx)("span",{className:"text-slate-400 ml-2",children:(0,x.formatDateTime)(k.createdAt)})]})]}),"draft"!==k.status&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-white",children:"Sent to Supplier"}),(0,b.jsx)("span",{className:"text-slate-400 ml-2",children:(0,x.formatDateTime)(k.updatedAt)})]})]}),("partial"===k.status||"received"===k.status)&&B.totalReceived>0&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${"received"===k.status?"bg-emerald-500":"bg-amber-500"}`}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-white",children:"received"===k.status?"Fully Received":"Partially Received"}),(0,b.jsx)("span",{className:"text-slate-400 ml-2",children:(0,x.formatDateTime)(k.updatedAt)})]})]}),"cancelled"===k.status&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-white",children:"Cancelled"}),(0,b.jsx)("span",{className:"text-slate-400 ml-2",children:(0,x.formatDateTime)(k.updatedAt)})]})]})]})]})]})}):null}var B=a.i(91828);a.i(39142);var C=a.i(94126),D=a.i(76186),E=a.i(23492),F=a.i(25196);function G(){let{state:a,dispatch:u}=(0,p.useApp)(),{success:v,error:w}=(0,q.useToast)(),y=(0,r.useConfirm)(),[z,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(null),[X,Y]=(0,c.useState)([]),Z=(0,c.useMemo)(()=>{let b=new Set;return a.purchaseOrders.forEach(a=>{a.supplier&&b.add(a.supplier)}),Array.from(b).sort()},[a.purchaseOrders]),$=(0,c.useMemo)(()=>a.purchaseOrders.filter(a=>{if(z&&a.status!==z||H&&a.supplier!==H||J&&a.currency!==J)return!1;if(L){let b=L.toLowerCase();return a.poNumber.toLowerCase().includes(b)||a.supplier.toLowerCase().includes(b)}return!0}),[a.purchaseOrders,z,H,J,L]),_=(0,c.useMemo)(()=>{let b=new Date,c=new Date(b.getFullYear(),b.getMonth(),1);return{totalPOs:a.purchaseOrders.length,draftCount:a.purchaseOrders.filter(a=>"draft"===a.status).length,sentCount:a.purchaseOrders.filter(a=>"sent"===a.status).length,partialCount:a.purchaseOrders.filter(a=>"partial"===a.status).length,pendingValue:a.purchaseOrders.filter(a=>["sent","partial"].includes(a.status)).reduce((a,b)=>a+b.total,0),receivedThisMonth:a.purchaseOrders.filter(a=>"received"===a.status&&new Date(a.updatedAt)>=c).length}},[a.purchaseOrders]),aa=b=>a.inventory.filter(a=>a.productId===b).reduce((a,b)=>a+b.quantity,0),ab=(0,c.useMemo)(()=>a.products.filter(a=>aa(a.id)<=a.reorderPoint).map(a=>{let b=aa(a.id),c=Math.max(2*a.reorderPoint-b,1);return{...a,currentStock:b,suggestedQty:c}}).slice(0,8),[a.products,a.inventory]),ac=a=>{U(a),S(!0)},ad=a=>{"draft"!==a.status?w("Only draft POs can be edited"):(W(a),Y([]),S(!1),O(!0))},ae=a=>{U(a),S(!1),Q(!0)},af=async a=>{await y({title:"Send Purchase Order",message:`Send PO ${a.poNumber} to ${a.supplier}? This will mark it as sent.`,confirmText:"Send PO"})&&(u({type:"UPDATE_PURCHASE_ORDER",payload:{...a,status:"sent",updatedAt:new Date}}),v(`PO ${a.poNumber} marked as sent`))},ag=!!(z||H||J||L);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(B.Breadcrumb,{items:[{label:"Operations"},{label:"Purchase Orders"}]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Purchase Orders"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Manage supplier orders and inventory replenishment"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:()=>{let a=new Blob([["PO Number,Supplier,Status,Currency,Items,Subtotal,Shipping,Total,Expected Date,Created",...$.map(a=>[a.poNumber,a.supplier,a.status,a.currency,a.items.length.toString(),a.subtotal.toFixed(2),a.shipping.toFixed(2),a.total.toFixed(2),a.expectedDate?(0,x.formatDate)(a.expectedDate):"",(0,x.formatDate)(a.createdAt)]).map(a=>a.join(","))].join("\n")],{type:"text/csv"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`purchase-orders-${new Date().toISOString().split("T")[0]}.csv`,c.click(),URL.revokeObjectURL(b),v("Exported purchase orders to CSV")},className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)(o.Download,{className:"w-4 h-4"}),"Export"]}),(0,b.jsxs)("button",{onClick:()=>{W(null),Y([]),O(!0)},className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4"}),"New PO"]})]})]}),(0,b.jsxs)(D.OperationsStatsGrid,{children:[(0,b.jsx)(D.OperationsStatCard,{icon:i.FileText,iconColor:"slate",value:_.totalPOs,label:"Total POs",onClick:()=>G(""),isActive:!z}),(0,b.jsx)(D.OperationsStatCard,{icon:n.Edit,iconColor:"slate",value:_.draftCount,label:"Drafts",onClick:()=>G("draft"),isActive:"draft"===z}),(0,b.jsx)(D.OperationsStatCard,{icon:d.Clock,iconColor:"amber",value:_.sentCount,label:"Pending",onClick:()=>G("sent"),isActive:"sent"===z,accentBorder:!0}),(0,b.jsx)(D.OperationsStatCard,{icon:e.Truck,iconColor:"blue",value:_.partialCount,label:"Partial",onClick:()=>G("partial"),isActive:"partial"===z,accentBorder:!0}),(0,b.jsx)(D.OperationsStatCard,{icon:g.DollarSign,iconColor:"slate",value:(0,x.formatCurrencyPrecise)(_.pendingValue),label:"Pending Value"}),(0,b.jsx)(D.OperationsStatCard,{icon:j.Check,iconColor:"emerald",value:_.receivedThisMonth,label:"Received MTD",onClick:()=>G("received"),isActive:"received"===z,accentBorder:!0})]}),(0,b.jsxs)(E.FilterBar,{onClear:()=>{G(""),I(""),K(""),M("")},showClear:ag,children:[(0,b.jsx)(E.SearchInput,{value:L,onChange:M,placeholder:"Search POs by number or supplier..."}),(0,b.jsx)(E.FilterSelect,{value:z,onChange:G,placeholder:"All Statuses",options:[{value:"draft",label:"Draft"},{value:"sent",label:"Pending"},{value:"partial",label:"Partial"},{value:"received",label:"Received"},{value:"cancelled",label:"Cancelled"}]}),(0,b.jsx)(E.FilterSelect,{value:H,onChange:I,placeholder:"All Suppliers",options:Z.map(a=>({value:a,label:a}))}),(0,b.jsx)(E.FilterSelect,{value:J,onChange:K,placeholder:"All Currencies",options:[{value:"USD",label:"USD"},{value:"CAD",label:"CAD"}]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-slate-800/50 border-b border-slate-700/50",children:(0,b.jsxs)("tr",{className:"text-left text-xs text-slate-400 uppercase tracking-wider",children:[(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"PO Number"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Supplier"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Items"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-right",children:"Total"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium",children:"Expected"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:0===$.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-400",children:0===a.purchaseOrders.length?"No purchase orders yet. Create your first PO!":"No purchase orders match your filters."})}):$.map(a=>{let c=a.items.reduce((a,b)=>a+b.quantity,0),d=a.items.reduce((a,b)=>a+b.receivedQty,0);return(0,b.jsxs)("tr",{className:"hover:bg-slate-700/30 transition-colors cursor-pointer",onClick:()=>ac(a),children:[(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsx)("div",{className:"font-mono text-sm font-medium text-white",children:a.poNumber}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:(0,x.formatDate)(a.createdAt)})]}),(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsx)("div",{className:"text-sm text-white",children:a.supplier}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:a.currency})]}),(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsxs)("div",{className:"text-sm text-white",children:[a.items.length," items"]}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:d>0?`${(0,x.formatNumber)(d)}/${(0,x.formatNumber)(c)} received`:`${(0,x.formatNumber)(c)} units`})]}),(0,b.jsx)("td",{className:"px-4 py-4 text-right",children:(0,b.jsx)("div",{className:"text-sm font-medium text-white",children:(0,x.formatCurrencyPrecise)(a.total)})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("div",{className:"text-sm text-white",children:a.expectedDate?(0,x.formatDate)(a.expectedDate):"-"})}),(0,b.jsx)("td",{className:"px-4 py-4 text-center",children:(0,b.jsx)(C.POStatusBadge,{status:a.status})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:()=>ac(a),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"View",children:(0,b.jsx)(k.Eye,{className:"w-4 h-4"})}),"draft"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>ad(a),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:(0,b.jsx)(n.Edit,{className:"w-4 h-4"})}),(0,b.jsxs)("button",{onClick:()=>af(a),className:"px-3 py-1.5 bg-amber-600 hover:bg-amber-500 text-white text-xs rounded-lg",children:[(0,b.jsx)(m.Send,{className:"w-3 h-3 inline mr-1"}),"Send"]})]}),("sent"===a.status||"partial"===a.status)&&(0,b.jsx)("button",{onClick:()=>ae(a),className:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-500 text-white text-xs rounded-lg",children:"Receive"})]})})]},a.id)})})]})}),(0,b.jsx)(F.PaginationFooter,{showing:$.length,total:a.purchaseOrders.length,label:"purchase orders"})]}),ab.length>0&&(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-amber-500/30 rounded-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-5 py-4 border-b border-slate-700/50 flex items-center gap-3",children:[(0,b.jsx)(l.AlertTriangle,{className:"w-5 h-5 text-amber-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-semibold text-white",children:"Low Stock Suggestions"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"Products below reorder point - consider adding to next PO"})]})]}),(0,b.jsx)("div",{className:"p-4 grid grid-cols-4 gap-3",children:ab.map(a=>(0,b.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(f.Package,{className:"w-4 h-4 text-amber-400"}),(0,b.jsx)("span",{className:"text-sm font-medium text-white truncate",children:a.name})]}),(0,b.jsxs)("div",{className:"text-xs text-slate-400 mb-1",children:["SKU: ",a.sku]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Stock:"}),(0,b.jsxs)("span",{className:"text-amber-400 font-medium",children:[(0,x.formatNumber)(a.currentStock)," / ",(0,x.formatNumber)(a.reorderPoint)]})]}),(0,b.jsxs)("button",{onClick:()=>{let b;return b={productId:a.id,productName:a.name,sku:a.sku,quantity:a.suggestedQty,receivedQty:0,unitCost:a.cost.rolling},void(Y(c=>c.some(b=>b.productId===a.id)?c:[...c,b]),!N&&(W(null),O(!0)),v(`Added ${a.name} to PO`))},className:"mt-2 w-full px-2 py-1.5 bg-amber-500/20 text-amber-400 text-xs rounded hover:bg-amber-500/30 transition-colors",children:["+ Add to PO (",(0,x.formatNumber)(a.suggestedQty)," units)"]})]},a.id))})]}),(0,b.jsx)(s.CreatePOModal,{isOpen:N,onClose:()=>{O(!1),W(null),Y([])},editPO:V,initialItems:X}),(0,b.jsx)(t.ReceivePOModal,{isOpen:P,onClose:()=>{Q(!1),U(null)},po:T}),(0,b.jsx)(A,{isOpen:R,onClose:()=>{S(!1),U(null)},po:T,onEdit:ad,onReceive:ae})]})}a.s(["default",()=>G],23022)}];

//# sourceMappingURL=app_%28dashboard%29_operations_purchase-orders_page_tsx_8510fdfc._.js.map