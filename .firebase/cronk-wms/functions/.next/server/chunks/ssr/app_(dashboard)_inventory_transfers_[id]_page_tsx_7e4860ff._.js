module.exports=[43940,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(98263),g=a.i(89697),h=a.i(11954),i=a.i(88860);function j(){var a;let j=(0,d.useParams)();(0,d.useRouter)();let{state:k,dispatch:l}=(0,f.useApp)(),{success:m,error:n}=(0,g.useToast)(),o=j.id,p=k.transfers.find(a=>a.id===o),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({}),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)({}),[y,z]=(0,c.useState)(!1),A=[{key:"pending",label:"Pending",icon:"fa-clock"},{key:"in_transit",label:"In Transit",icon:"fa-truck"},{key:"received",label:"Received",icon:"fa-check-circle"}],B=(0,c.useMemo)(()=>p?{requested:p.items.reduce((a,b)=>a+b.requestedQty,0),shipped:p.items.reduce((a,b)=>a+b.shippedQty,0),received:p.items.reduce((a,b)=>a+b.receivedQty,0)}:{requested:0,shipped:0,received:0},[p]);if(!p)return(0,b.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("i",{className:"fas fa-exclamation-triangle text-amber-400 text-4xl mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Transfer Not Found"}),(0,b.jsx)("p",{className:"text-slate-400 mb-4",children:"The transfer you're looking for doesn't exist."}),(0,b.jsx)(e.default,{href:"/inventory/transfers",className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors",children:"Back to Transfers"})]})});let C="cancelled"===(a=p.status)||"draft"===a?-1:A.findIndex(b=>b.key===a),D="pending"===p.status,E="in_transit"===p.status,F="received"!==p.status&&"cancelled"!==p.status;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.default,{href:"/inventory/transfers",className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:(0,b.jsx)("i",{className:"fas fa-arrow-left"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:p.transferNumber}),(0,b.jsx)(h.StatusBadge,{status:p.status,config:h.transferStatusConfig})]}),(0,b.jsxs)("p",{className:"text-sm text-slate-400 mt-1",children:["Created ",p.createdAt?(0,i.formatDateTime)(p.createdAt):"-"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[F&&(0,b.jsx)("button",{onClick:()=>z(!0),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors",children:"Cancel Transfer"}),D&&(0,b.jsxs)("button",{onClick:()=>{if(!p)return;let a={};p.items.forEach(b=>{a[b.productId]=b.requestedQty}),t(a),r(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-truck"}),"Ship Transfer"]}),E&&(0,b.jsxs)("button",{onClick:()=>{if(!p)return;let a={};p.items.forEach(b=>{a[b.productId]=b.shippedQty}),x(a),v(!0)},className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-check"}),"Receive Transfer"]})]})]}),"cancelled"!==p.status&&(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white mb-6",children:"Transfer Progress"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute left-0 right-0 top-5 h-1 bg-slate-700 rounded",children:(0,b.jsx)("div",{className:"h-full bg-emerald-500 rounded transition-all duration-500",style:{width:`${(C+1)/A.length*100}%`}})}),(0,b.jsx)("div",{className:"relative flex justify-between",children:A.map((a,c)=>{let d=c<=C;return(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center z-10 transition-all ${d?"bg-emerald-500 text-white":"bg-slate-700 text-slate-400"} ${c===C?"ring-4 ring-emerald-500/30":""}`,children:(0,b.jsx)("i",{className:`fas ${a.icon}`})}),(0,b.jsx)("span",{className:`mt-2 text-sm font-medium ${d?"text-white":"text-slate-500"}`,children:a.label}),"pending"===a.key&&p.createdAt&&(0,b.jsx)("span",{className:"text-xs text-slate-500 mt-1",children:p.createdAt?(0,i.formatDateTime)(p.createdAt):"-"}),"in_transit"===a.key&&p.shippedAt&&(0,b.jsx)("span",{className:"text-xs text-slate-500 mt-1",children:p.shippedAt?(0,i.formatDateTime)(p.shippedAt):"-"}),"received"===a.key&&p.receivedAt&&(0,b.jsx)("span",{className:"text-xs text-slate-500 mt-1",children:p.receivedAt?(0,i.formatDateTime)(p.receivedAt):"-"})]},a.key)})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-arrow-up text-red-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-slate-400",children:"From Location"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-white",children:p.fromLocationName})]})]})}),(0,b.jsx)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-arrow-down text-emerald-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-slate-400",children:"To Location"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-white",children:p.toLocationName})]})]})})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Transfer Items"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-400",children:"Product"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-400",children:"SKU"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-slate-400",children:"Requested"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-slate-400",children:"Shipped"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-slate-400",children:"Received"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-slate-400",children:"Status"})]})}),(0,b.jsx)("tbody",{children:p.items.map(a=>{let c;return(0,b.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,b.jsx)("td",{className:"py-3 px-4 text-white",children:a.productName}),(0,b.jsx)("td",{className:"py-3 px-4 text-slate-400 font-mono text-sm",children:a.sku}),(0,b.jsx)("td",{className:"py-3 px-4 text-center text-white",children:a.requestedQty}),(0,b.jsx)("td",{className:"py-3 px-4 text-center text-white",children:a.shippedQty||"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:a.receivedQty>0?(0,b.jsxs)("span",{className:a.receivedQty<a.shippedQty?"text-amber-400":"text-white",children:[a.receivedQty,a.receivedQty<a.shippedQty&&(0,b.jsxs)("span",{className:"text-red-400 ml-1",children:["(",a.receivedQty-a.shippedQty,")"]})]}):"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:(c=({pending:{bg:"bg-slate-500/20",text:"text-slate-400",label:"Pending"},shipped:{bg:"bg-blue-500/20",text:"text-blue-400",label:"Shipped"},received:{bg:"bg-emerald-500/20",text:"text-emerald-400",label:"Received"},short:{bg:"bg-amber-500/20",text:"text-amber-400",label:"Short"}})[a.status],(0,b.jsx)("span",{className:`px-2 py-0.5 ${c.bg} ${c.text} rounded text-xs font-medium`,children:c.label}))})]},a.productId)})}),(0,b.jsx)("tfoot",{children:(0,b.jsxs)("tr",{className:"border-t border-slate-700",children:[(0,b.jsxs)("td",{colSpan:2,className:"py-3 px-4 text-sm font-medium text-slate-400",children:["Total (",p.items.length," item",1!==p.items.length?"s":"",")"]}),(0,b.jsx)("td",{className:"py-3 px-4 text-center font-semibold text-white",children:B.requested}),(0,b.jsx)("td",{className:"py-3 px-4 text-center font-semibold text-white",children:B.shipped||"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-center font-semibold text-white",children:B.received||"-"}),(0,b.jsx)("td",{})]})})]})})]}),p.notes&&(0,b.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white mb-3",children:"Notes"}),(0,b.jsx)("p",{className:"text-slate-300",children:p.notes})]}),q&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,b.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>r(!1)}),(0,b.jsxs)("div",{className:"relative bg-slate-900 border border-slate-700/50 rounded-2xl shadow-2xl w-full max-w-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-700/50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white",children:"Ship Transfer"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Confirm quantities being shipped"})]}),(0,b.jsx)("button",{onClick:()=>r(!1),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4 max-h-[60vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 flex items-start gap-3",children:[(0,b.jsx)("i",{className:"fas fa-info-circle text-blue-400 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm text-blue-300",children:[(0,b.jsx)("p",{className:"font-medium",children:"Shipping will deduct inventory"}),(0,b.jsxs)("p",{className:"text-blue-400",children:["Stock will be removed from ",(0,b.jsx)("span",{className:"font-medium",children:p.fromLocationName})]})]})]}),p.items.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 border border-slate-700/50 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-white font-medium",children:a.productName}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:a.sku})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-sm text-slate-400",children:["Requested: ",a.requestedQty]}),(0,b.jsx)("input",{type:"number",min:0,max:a.requestedQty,value:s[a.productId]||0,onChange:b=>t({...s,[a.productId]:Math.min(parseInt(b.target.value)||0,a.requestedQty)}),className:"w-20 bg-slate-700/50 border border-slate-600 rounded px-3 py-2 text-white text-center focus:outline-none focus:border-emerald-500"})]})]},a.productId))]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-700/50",children:[(0,b.jsx)("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors",children:"Cancel"}),(0,b.jsxs)("button",{onClick:()=>{if(!p)return;let a=p.items.map(a=>({...a,shippedQty:s[a.productId]||0,status:"shipped"})),b={...p,status:"in_transit",items:a,shippedAt:new Date,updatedAt:new Date};p.items.forEach(a=>{let b=s[a.productId]||0;b>0&&l({type:"ADJUST_STOCK",payload:{productId:a.productId,locationId:p.fromLocation,adjustment:-b}})}),l({type:"UPDATE_TRANSFER",payload:b}),m("Transfer shipped successfully"),r(!1)},className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-truck"}),"Confirm Ship"]})]})]})]})}),u&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,b.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>v(!1)}),(0,b.jsxs)("div",{className:"relative bg-slate-900 border border-slate-700/50 rounded-2xl shadow-2xl w-full max-w-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-700/50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white",children:"Receive Transfer"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Enter quantities received at destination"})]}),(0,b.jsx)("button",{onClick:()=>v(!1),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4 max-h-[60vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4 flex items-start gap-3",children:[(0,b.jsx)("i",{className:"fas fa-info-circle text-emerald-400 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm text-emerald-300",children:[(0,b.jsx)("p",{className:"font-medium",children:"Receiving will add inventory"}),(0,b.jsxs)("p",{className:"text-emerald-400",children:["Stock will be added to ",(0,b.jsx)("span",{className:"font-medium",children:p.toLocationName})]})]})]}),p.items.map(a=>{let c=w[a.productId]||0,d=c<a.shippedQty;return(0,b.jsxs)("div",{className:`flex items-center justify-between p-4 bg-slate-800/50 border rounded-lg ${d?"border-amber-500/50":"border-slate-700/50"}`,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-white font-medium",children:a.productName}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:a.sku})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-sm text-slate-400",children:["Shipped: ",a.shippedQty]}),(0,b.jsx)("input",{type:"number",min:0,max:a.shippedQty,value:c,onChange:b=>x({...w,[a.productId]:Math.min(parseInt(b.target.value)||0,a.shippedQty)}),className:`w-20 bg-slate-700/50 border rounded px-3 py-2 text-white text-center focus:outline-none ${d?"border-amber-500":"border-slate-600 focus:border-emerald-500"}`}),d&&(0,b.jsxs)("span",{className:"text-amber-400 text-sm",children:[(0,b.jsx)("i",{className:"fas fa-exclamation-triangle mr-1"}),"Short"]})]})]},a.productId)}),Object.keys(w).some(a=>{let b=p.items.find(b=>b.productId===a);return b&&(w[a]||0)<b.shippedQty})&&(0,b.jsxs)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-start gap-3",children:[(0,b.jsx)("i",{className:"fas fa-exclamation-triangle text-amber-400 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm text-amber-300",children:[(0,b.jsx)("p",{className:"font-medium",children:"Some items are short"}),(0,b.jsx)("p",{className:"text-amber-400",children:"The quantities will be recorded but may require investigation."})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-700/50",children:[(0,b.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors",children:"Cancel"}),(0,b.jsxs)("button",{onClick:()=>{if(!p)return;let a=p.items.map(a=>{let b=w[a.productId]||0,c=b<a.shippedQty;return{...a,receivedQty:b,status:c?"short":"received"}}),b={...p,status:"received",items:a,receivedAt:new Date,updatedAt:new Date};p.items.forEach(a=>{let b=w[a.productId]||0;b>0&&l({type:"ADJUST_STOCK",payload:{productId:a.productId,locationId:p.toLocation,adjustment:b}})}),l({type:"UPDATE_TRANSFER",payload:b});let c=a.filter(a=>"short"===a.status);c.length>0?m(`Transfer received with ${c.length} short item(s)`):m("Transfer received successfully"),v(!1)},className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-check"}),"Confirm Receive"]})]})]})]})}),y&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,b.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>z(!1)}),(0,b.jsx)("div",{className:"relative bg-slate-900 border border-slate-700/50 rounded-2xl shadow-2xl w-full max-w-md",children:(0,b.jsxs)("div",{className:"p-6 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("i",{className:"fas fa-exclamation-triangle text-red-400 text-2xl"})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Cancel Transfer?"}),(0,b.jsx)("p",{className:"text-slate-400 mb-6",children:"in_transit"===p.status?"This transfer is in transit. Cancelling will restore the shipped quantities to the source location.":"Are you sure you want to cancel this transfer?"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>z(!1),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 rounded-lg transition-colors",children:"Keep Transfer"}),(0,b.jsx)("button",{onClick:()=>{p&&("in_transit"===p.status&&p.items.forEach(a=>{a.shippedQty>0&&l({type:"ADJUST_STOCK",payload:{productId:a.productId,locationId:p.fromLocation,adjustment:a.shippedQty}})}),l({type:"UPDATE_TRANSFER",payload:{...p,status:"cancelled",updatedAt:new Date}}),m("Transfer cancelled"),z(!1))},className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors",children:"Cancel Transfer"})]})]})})]})})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=app_%28dashboard%29_inventory_transfers_%5Bid%5D_page_tsx_7e4860ff._.js.map