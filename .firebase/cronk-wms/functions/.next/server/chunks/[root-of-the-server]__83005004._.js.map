{"version":3,"sources":["../../../lib/firebase-admin.ts"],"sourcesContent":["import { initializeApp, getApps, cert, App } from 'firebase-admin/app'\nimport { getFirestore, Firestore } from 'firebase-admin/firestore'\n\nlet adminApp: App | undefined\nlet adminDb: Firestore | undefined\n\nfunction getAdminApp(): App {\n  if (adminApp) {\n    return adminApp\n  }\n\n  const apps = getApps()\n  if (apps.length > 0) {\n    adminApp = apps[0]\n    return adminApp\n  }\n\n  const projectId = process.env.ADMIN_PROJECT_ID || process.env.FIREBASE_PROJECT_ID\n  const clientEmail = process.env.ADMIN_CLIENT_EMAIL || process.env.FIREBASE_CLIENT_EMAIL\n  const privateKey = (process.env.ADMIN_PRIVATE_KEY || process.env.FIREBASE_PRIVATE_KEY)?.replace(/\\\\n/g, '\\n')\n\n  if (!projectId || !clientEmail || !privateKey) {\n    throw new Error(\n      'Firebase Admin SDK credentials not found. Please set ADMIN_PROJECT_ID, ADMIN_CLIENT_EMAIL, and ADMIN_PRIVATE_KEY environment variables.'\n    )\n  }\n\n  adminApp = initializeApp({\n    credential: cert({\n      projectId,\n      clientEmail,\n      privateKey,\n    }),\n  })\n\n  return adminApp\n}\n\nexport function getAdminDb(): Firestore {\n  if (adminDb) {\n    return adminDb\n  }\n  getAdminApp()\n  adminDb = getFirestore()\n  return adminDb\n}\n\nexport { getAdminDb as adminDb }\n"],"names":[],"mappings":"8mCAGI,EACA,EAJJ,IAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,kBAqCO,SAAS,WACd,AAAI,KAjCN,AAoCE,IAHa,KAjCN,EACP,GAAI,EACF,OAAO,AAGT,CAJc,GAIR,EAAO,CAAA,EAAA,EAAA,OAAA,AAAO,IACpB,GAAI,EAAK,MAAM,CAAG,EAEhB,CAFmB,MACnB,AACO,EADI,CAAI,CAAC,EAAE,CAIpB,IAAM,EAAY,QAAQ,GAAG,CAAC,gBAAgB,EAAI,QAAQ,GAAG,CAAC,mBAAmB,CAC3E,EAAc,QAAQ,GAAG,CAAC,kBAAkB,EAAI,QAAQ,GAAG,CAAC,qBAAqB,CACjF,GAAc,QAAQ,EAAT,CAAY,CAAC,iBAAiB,EAAI,QAAQ,GAAG,CAAC,oBAAA,AAAoB,GAAG,QAAQ,OAAQ,MAExG,GAAI,CAAC,GAAa,CAAC,GAAe,CAAC,EACjC,MAAM,AAAI,IADmC,EAE3C,2IAIJ,EAAW,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,CACvB,WAAY,CAAA,EAAA,EAAA,IAAA,AAAI,EAAC,WACf,EACA,yBACA,CACF,EACF,EAGF,IAOE,EAAU,CAAA,EAAA,EAAA,YAAA,AAAY,IAExB"}